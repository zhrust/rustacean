<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Rust è¶…è¶Šé¢å‘å¯¹è±¡,ç¬¬1éƒ¨åˆ† - be Rustaceans</title>


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="../favicon.svg">
    <link rel="shortcut icon" href="../favicon.png">
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/general.css">
    <link rel="stylesheet" href="../css/chrome.css">
    <link rel="stylesheet" href="../css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
    <link rel="stylesheet" href="../fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="../highlight.css">
    <link rel="stylesheet" href="../tomorrow-night.css">
    <link rel="stylesheet" href="../ayu-highlight.css">

    <!-- Custom theme stylesheets -->

</head>

<body>
    <!-- Provide site root to javascript -->
    <script>
        var path_to_root = "../";
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script>
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script>
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('light')
        html.classList.add(theme);
        html.classList.add('js');
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script>
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scrollbox">
            <ol class="chapter"><li class="chapter-item expanded "><a href="../abt/index.html"><strong aria-hidden="true">1.</strong> æœ‰å…³</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../abt/gh-pages.html"><strong aria-hidden="true">1.1.</strong> gh-pages</a></li><li class="chapter-item expanded "><a href="../abt/zhrust.html"><strong aria-hidden="true">1.2.</strong> zhrust</a></li></ol></li><li class="chapter-item expanded "><a href="../101/index.html"><strong aria-hidden="true">2.</strong> Rust å­¦ä¹ </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../101/graph-rust-move-copy-borrow.html"><strong aria-hidden="true">2.1.</strong> å›¾å½¢æè¿° Rust ä¸­æ‰€æœ‰æƒå’Œå€Ÿç”¨</a></li><li class="chapter-item expanded "><a href="../101/chatgpt101.html"><strong aria-hidden="true">2.2.</strong> ä¼´å­¦ChatGPT</a></li><li class="chapter-item expanded "><a href="../101/exercism.html"><strong aria-hidden="true">2.3.</strong> Exercism</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../101/ex42all-your-base.html"><strong aria-hidden="true">2.3.1.</strong> 42:all-your-base</a></li><li class="chapter-item expanded "><a href="../101/ex43Allergies.html"><strong aria-hidden="true">2.3.2.</strong> 43:Allergies</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../dev/index.html"><strong aria-hidden="true">3.</strong> Rust å¼€å‘</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dev/dama-projects.html"><strong aria-hidden="true">3.1.</strong> å°ä½œå“</a></li><li class="chapter-item expanded "><a href="../dev/20-things-ive-learned-in-my-20-years-as-a-software-engineer.html"><strong aria-hidden="true">3.2.</strong> 20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„10ä»¶äº‹</a></li><li class="chapter-item expanded "><a href="../dev/concepts-i-wish-i-learned-earlier.html"><strong aria-hidden="true">3.3.</strong> å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ</a></li></ol></li><li class="chapter-item expanded "><a href="../tip/index.html"><strong aria-hidden="true">4.</strong> Rust æŠ€è‰º</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tip/rust6fun-operator-overloading.html"><strong aria-hidden="true">4.1.</strong> è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹</a></li><li class="chapter-item expanded "><a href="../tip/oop-1-encapsulation.html" class="active"><strong aria-hidden="true">4.2.</strong> Rust è¶…è¶Šé¢å‘å¯¹è±¡,ç¬¬1éƒ¨åˆ†</a></li><li class="chapter-item expanded "><a href="../tip/oop-2-polymorphism.html"><strong aria-hidden="true">4.3.</strong> Rust è¶…è¶Šé¢å‘å¯¹è±¡,ç¬¬2éƒ¨åˆ†</a></li><li class="chapter-item expanded "><a href="../tip/default-params.html"><strong aria-hidden="true">4.4.</strong> OOP:Rust å’Œé»˜è®¤å‚æ•°</a></li></ol></li><li class="chapter-item expanded "><a href="../log/index.html"><strong aria-hidden="true">5.</strong> ç¬”è®°</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../log/rust-s-ugly-syntax.html"><strong aria-hidden="true">5.1.</strong> Rust ä¸‘å¥æ³•</a></li><li class="chapter-item expanded "><a href="../log/rust101logging.html"><strong aria-hidden="true">5.2.</strong> Rust è¯¾ç¨‹ç¬”è®°</a></li></ol></li></ol>
        </div>
        <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
                        <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="menu-bar sticky bordered">
                <div class="left-buttons">
                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                        <i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button>
                        </li>
                    </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                        aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                        aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                </div>

                <h1 class="menu-title">be Rustaceans</h1>

                <div class="right-buttons">
                    <a href="../print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    <a href="https://github.com/zhrust/rustacean/tree/main/src" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-github"></i>
                    </a>

                </div>
            </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..."
                        aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script>
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                });
            </script>

            <div id="content" class="content">
                <main>
                    <h1 id="rust-è¶…è¶Šé¢å‘å¯¹è±¡ç¬¬1éƒ¨åˆ†"><a class="header" href="#rust-è¶…è¶Šé¢å‘å¯¹è±¡ç¬¬1éƒ¨åˆ†">Rust è¶…è¶Šé¢å‘å¯¹è±¡,ç¬¬1éƒ¨åˆ†</a></h1>
<p>åŸæ–‡: <a href="https://www.thecodedmessage.com/posts/oop-1-encapsulation/">Rust Is Beyond Object-Oriented, Part 1: Intro and Encapsulation :: The Coded Message</a></p>
<h2 id="å¿«è¯‘"><a class="header" href="#å¿«è¯‘">å¿«è¯‘</a></h2>
<p>æ˜¯çš„, Rust ä¸æ˜¯ä¸€ç§ OOP ç¼–ç¨‹è¯­è¨€;</p>
<p>Rust å¯èƒ½çœ‹èµ·æ¥åƒä¸€ç§ OOP ç¼–ç¨‹è¯­è¨€:
ç±»å‹å¯ä»¥å’Œ &quot;â€œmethods&quot; å…³è”,
å¯ä»¥æ˜¯ &quot;intrinsic&quot; çš„æˆ–æ˜¯é€šè¿‡ &quot;traits&quot;;
é€šå¸¸å¯ä»¥ä½¿ç”¨ C++ æˆ–æ˜¯ Java é£æ ¼çš„ OOP è¯­æ³•è°ƒç”¨æ–¹å¼:
map.insert(key, value) æˆ– foo.clone();
å°±åƒåœ¨ OOP è¯­è¨€ä¸­ä¸€æ ·,
æ­¤è¯­æ³•æ¶‰åŠæ”¾ç½®åœ¨è°ƒç”¨è€…çš„ <code>.</code> ä¸­, è€Œåœ¨è¢«è°ƒç”¨è€…ä¸­ç§°ä¸º self;</p>
<p>ä½†è¯·ä¸è¦è¯¯ä¼š: å°½ç®¡ Rust å¯èƒ½å€Ÿç”¨äº†ä¸€äº›æŠ€å·§/æœ¯è¯­å’Œè¯­æ³•,
ä½†æ˜¯, Rust å¹¶ä¸æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€;
é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§æ”¯æŸ±ç†å¿µ: å°è£…/å¤šæ€/ç»§æ‰¿;
å…¶ä¸­, Rust å®Œå…¨å¦å†³äº† ç»§æ‰¿,
å› æ­¤, æ°¸è¿œä¸å¯èƒ½æˆä¸º&quot;çœŸæ­£çš„&quot; OOP è¯­è¨€;
ä¸è¿‡, å³ä¾¿å¯¹äºå°è£…å’Œå¤šæ€, Rust å®ç°çš„æ–¹å¼ä¹Ÿå’Œ OOP è¯­è¨€ä¸åŒ --- ç¨åå°†å¯¹æ­¤è¿›è¡Œæ›´åŠ è¯¦ç»†çš„ä»‹ç»;</p>
<p>è¿™ä¸€åˆ‡éƒ½è®©å¾ˆå¤šç¨‹åºå‘˜æ„Ÿåˆ°æƒŠè®¶ä»¥åŠæ— æª;
æˆ‘åœ¨ Reddit ä¸Šçœ‹åˆ° Rust æ–°æ‰‹è¯¢é—®å¦‚ä½•æŒ‰å­—é¢æ„æ€å®ç° OOP è®¾è®¡æ¨¡å¼,
è¯•å›¾è·å¾—åƒâ€œshapesâ€ æˆ–æ˜¯ â€œvehiclesâ€è¿™ç§&quot;ç±»å±‚æ¬¡ç»“æ„&quot;,
ä½¿ç”¨ä½œä¸º&quot;Rust ç‰ˆæœ¬ç»§æ‰¿&quot;çš„ traits --- æ¢å¥è¯è¯´, 
è¯•å›¾è§£å†³ä»–ä»¬æƒ³è±¡ä¸­çš„é—®é¢˜, 
å› ä¸º, ä»–ä»¬è‡´åŠ›äº OOP æ–¹æ³•, å¹¶é€šè¿‡æ„å»ºäººä¸ºçš„ OOP ç¤ºä¾‹æ¥å°è¯•äº†è§£ä»–ä»¬æœŸå¾…çš„åº”è¯¥å­˜åœ¨çš„å¦å¤–ä¸€ä¸ªç‰ˆæœ¬ Rust;</p>
<p>è¿™å¯¹å¾ˆå¤šäººæ¥è¯´æ˜¯ä¸€ä¸ªç»Šè„šçŸ³;
æˆ‘ç»å¸¸çœ‹åˆ° Rust æ–°æ‰‹å’Œæ€€ç–‘è®ºè€…åœ¨äº’è”ç½‘ä¸Šæåˆ°&quot;ç¼ºä¹OOP&quot;,
è¿™æ˜¯ Rust éš¾ä»¥é€‚åº”/ä¸åˆé€‚ä»–ä»¬çš„å…³é”®åŸå› ,
ç”šè‡³æ˜¯ Rust æ°¸è¿œä¸ä¼šæµè¡Œçš„åŸå› ;
å¯¹äºé‚£äº›åœ¨ OOP çš„é«˜åº¦æ¥å­¦ä¹ ç¼–ç¨‹çš„äººæ¥è¯´ --- å½“åƒ C å’Œ ML é‚£æ ·å®Œç¾çš„è¯­è¨€éƒ½å¿…é¡»å˜æˆ Object-C å’Œ OCaML è¿™ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ --- 
å¯¹é OOP è¯­è¨€çš„å¤§é‡ç‚’ä½œæ„Ÿè§‰å°±ä¸å¤ªé¦™äº†;</p>
<p>è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªå®¹æ˜“çš„è°ƒæ•´;
å¦‚æ­¤å¤šçš„ç¨‹åºçŒ¿ä»¥æ˜ç¡®çš„é¢å‘å¯¹è±¡çš„æ–¹å¼å­¦ä¹ è½¯ä»¶è®¾è®¡å’Œä½“ç³»ç»“æ„;
æˆ‘çœ‹åˆ°ä¸€ä¸ªåˆä¸€ä¸ªé—®é¢˜,
ä¸€ä¸ªåˆçº§æˆ–ä¸­çº§ Rust ç¨‹åºå‘˜æƒ³è¦ä½œä¸€ä¸ªé¢å‘å¯¹è±¡çš„äº‹å„¿,
å¹¶æƒ³è¦ä¸€ä¸ªå­—é¢ä¸Šçš„ Rust ç­‰ä»·ç‰©;
é€šå¸¸, è¿™äº›éƒ½æ˜¯ç»å…¸çš„ &quot;XY é—®é¢˜&quot; (åŸæ–‡:<a href="https://xyproblem.info/">XY problem</a>, é…·å£³æœ‰ç²¾é‡‡çš„ç¿»è¯‘:<a href="https://coolshell.cn/articles/10804.html">X-Y Problem | é…· å£³ - CoolShell</a>)æ¡ˆä¾‹, ä»–ä»¬å¾ˆéš¾è°ƒå¤´ç”¨æ›´ Rusty çš„æ–¹å¼è§£å†³é—®é¢˜;</p>
<p>è¿™å…¶å®éƒ½ä¸æ˜¯ Rust çš„é”™;
ç­”æ¡ˆè¿˜æ˜¯è¦æˆ‘ä»¬å»è°ƒæ•´,
è™½ç„¶ä¸å®¹æ˜“;
æˆ‘ä»¬è¦æˆä¸ºæ›´å¥½çš„ç¨‹åºå‘˜, ä¸ä»…ç²¾é€šå¤šç§è¯­è¨€,
è€Œä¸”è¦ç²¾é€šä¸åŒçš„ç¼–ç¨‹èŒƒå¼;</p>
<p>è€Œä¸”, ä½œä¸ºä¸€ç§èŒƒå¼, OOP å®é™…ä¸Šéå¸¸å¹³åº¸ --- ä»¥è‡³äºæˆ‘å†™äº†ä¸€æ•´ç¯‡æ–‡ç« æ¥è§£é‡Šä¸ºä»€ä¹ˆ,
ä»¥åŠä¸ºä»€ä¹ˆ Rust çš„æ–¹æ³•æ›´å¥½;</p>
<h3 id="é¢å‘å¯¹è±¡æ€æƒ³"><a class="header" href="#é¢å‘å¯¹è±¡æ€æƒ³">é¢å‘å¯¹è±¡æ€æƒ³</a></h3>
<blockquote>
<p>OOP Ideology</p>
</blockquote>
<p>å—¯å“¼,å¥½è±¡æ˜ç™½äº†;
æˆ‘æ›¾ç»æ˜¯è‡ªå·±ä¸»åŠ¨å˜æˆ OOP ä¿¡å¾’çš„;
è¿˜è®°å¾—å½“å¹´æ˜¯å¦‚ä½•å‘æˆ‘ä»¬æ”¶è´¹çš„:
ä¸ä»…ä»…æ˜¯ä¸€å¥—ä»£ç ç»„ç»‡å®è·µ,æ›´åŠ æ˜¯ç¼–ç¨‹æ–¹é¢çš„ä¸€åœºé©å‘½;
OOP æ–¹æ³•è¢«è®¤ä¸ºæ›´ç›´è§‚,å°¤å…¶å¯¹éç¨‹åºå‘˜è€Œè¨€, å› ä¸ºæ›´åŠ ç¬¦åˆæˆ‘ä»¬å¯¹è‡ªç„¶ä¸–ç•Œçš„çœ‹æ³•;</p>
<p>å¯¹äºè¿™ç§è¥é”€çš„å…¸å‹ç¤ºä¾‹, ä»¥ä¸‹æ˜¯æµè¡Œæ‚å¿—(Byte Magazine, 1981å¹´)ä¸­å…³äº OOP ç¬¬ä¸€ç¯‡å…¬å¼€æ–‡ç« çš„æ‘˜å½•:</p>
<hr />
<blockquote>
<p>è®¸å¤šä¸çŸ¥é“è®¡ç®—æœºå¦‚ä½•å·¥ä½œçš„äººå‘ç° OOP æƒ³æ³•å¾ˆè‡ªç„¶;
ç›¸æ¯”ä¹‹ä¸‹, åè€Œæ˜¯å¾ˆå¤šæœ‰è®¡ç®—æœºç»éªŒçš„äººæœ€åˆè®¤ä¸º OOP ç³»ç»Ÿæœ‰äº›å¥‡æ€ª...</p>
</blockquote>
<hr />
<p>ä¸º OOP ä¹°å¸å¾ˆå®¹æ˜“;
å½“ç„¶, æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæºæ²¡æœ‰ä»»ä½•å­ç¨‹åºæˆ–æ˜¯å˜é‡ä¹‹ç±»çš„ä¸œè¥¿ --- æˆ–è€…,
å³ä¾¿æœ‰, æˆ‘ä»¬ä¹Ÿæ²¡æœ‰æ˜ç¡®çš„è€ƒè™‘å®ƒä»¬!
ä½†æ˜¯, ç”Ÿæ´»ä¸­ç¡®å®æœ‰æˆ‘ä»¬å¯ä»¥ä¸ä¹‹äº¤äº’çš„å¯¹è±¡, æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½;
æ€ä¹ˆå¯èƒ½ä¸ç›´è§‚å‘¢?</p>
<p>è¿™æ˜¯éå¸¸å¼•äººæ³¨ç›®çš„ä¼ªè®¤çŸ¥ç§‘å­¦,è½»ç ”ç©¶,é‡è¯´æœåŠ›;
è¿™äº› object/å¯¹è±¡ å¯ä»¥è®¤ä¸ºæ˜¯ &quot;agents&quot;, å‡ ä¹è±¡äººä¸€æ ·,
æ‰€ä»¥, ä½ å¯ä»¥åˆ©ç”¨ä½ çš„ç¤¾äº¤æŠ€èƒ½æ¥å¤„ç†å®ƒ,
è€Œä¸ä»…ä»…æ˜¯åˆ†ææ€§æ€ç»´
(å«‘ä»‹æ„ object/å¯¹è±¡ çš„è¡Œä¸ºä¸€ç‚¹å„¿ä¹Ÿä¸åƒäºº,è€Œä¸”,å®é™…ä¸Šåœ¨æŸç§ç¨‹åºä¸Šæ›´åŠ ç¬¨,
è¿™æ—¶ä»ç„¶éœ€è¦åˆ†ææ€ç»´);
æˆ–æ˜¯, ä½ å¯ä»¥å°†å¯¹è±¡å’Œç±»è§†ä¸ºå½¢å¼ä¸–ç•Œæœ¬èº«çš„è¿‘ä¹æŸæ‹‰å›¾å¼çš„è¡¨è¾¾, ä½¿å…¶åœ¨å“²å­¦ä¸Šå¼•äººæ³¨ç›®;</p>
<p>å“¦, å½“å¹´æˆ‘æ˜¯å¦‚ä½•æ¥å—çš„? å°¤å…¶æ˜¯åœ¨è‚†æ„é²è½çš„é’å¹´æ—¶æœŸï¼›
æˆ‘ä¸ªäººå¸æ”¶äº† OOP å’ŒæŸæ‹‰å›¾ä¹‹é—´çš„è”ç³»;
æ·±å…¥ç ”ç©¶äº†å…ƒå¯¹è±¡åè®®, 
ä»¥åŠåœ¨ Smalltalk ä¸­æ¯ä¸ªç±»éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå…ƒç±»çš„äº‹å®;
Smalltalk ä»£ç å…ƒç±»çš„æ¦‚å¿µå¯¹æˆ‘æ¥è¯´å‡ ä¹æ˜¯ç¥ç§˜çš„,
å› ä¸º, ä»»ä½•å€¼éƒ½å¯ä»¥ç»„ç»‡åœ¨åŒä¸€å±‚æ¬¡ç»“æ„ä¸­,
å¯¹è±¡åè€Œä½äºå…¶æ ¹éƒ¨;</p>
<p>æˆ‘èµ¢å¾—åœ¨ä¸€æœ¬ä¹¦ä¸­è¯»åˆ° OOP é£æ ¼çš„å¤šæ€ä½¿å¾— if-else è¯­å¥å˜å¾—å¤šä½™,
å› æ­¤,æˆ‘ä»¬åº”è¯¥åŠªåŠ›æœ€ç»ˆåªä½¿ç”¨ OOP é£æ ¼çš„å¤šæ€;
ä¸çŸ¥ä½•æ•…, è¿™æ²¡è®©æˆ‘å¤±æœ›, è¿™è®©æˆ‘å½“æ—¶å¾ˆå…´å¥‹;
è€Œä¸”,å½“æˆ‘äº†è§£åˆ° Smalltalk å®é™…æ­£æ˜¯è¿™æ ·ä½œçš„,
å°±æ›´åŠ å…´å¥‹äº†
(å¦‚æœä½ å¿½ç•¥ä¼˜åŒ–æ‰æŸäº›æŠ½è±¡çš„å®ç°ç»†èŠ‚):
åœ¨ Smalltalk ä¸­, if-than-else çš„æ¦‚å¿µæ˜¯é€šè¿‡ ifTrue: å’Œ ifElse: ä»¥åŠ ifTrue:ifFalse: ç­‰æ–¹æ³•å®ç°çš„,
è¿˜å¾—é…å¥—å•å®ä¾‹çš„ True å’Œ False ç±»,ä»¥åŠå…¶å…¨å±€å¯¹è±¡ true å’Œ false;</p>
<p>(è¯‘æŒ‰: å…‰æ˜¯å¬èµ·æ¥å°±éå¸¸,å—¯å“¼? è¿™ä¸æ˜¯ä¸€æ ·çš„ä¸œè¥¿å˜›?)</p>
<p>ä½œä¸ºä¸€åæ›´æˆç†Ÿçš„ç¨‹åºå‘˜,æ¥è§¦åˆ°æ„è¯†å½¢æ€è¾ƒå°‘çš„ C++ OOP ä»¥åŠ Haskell ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹æ›¿ä»£æ–¹æ¡ˆå,
æˆ‘çš„ç«‹åœºå°±è½¯åŒ–äº†, ç„¶å, å‘ç”Ÿäº†å·¨å¤§è½¬å˜, ç°åœ¨æˆ‘å‡ ä¹ä¸å†æ˜¯ OOP çš„è„‘æ®‹ç²‰,
å°¤å…¶æ˜¯å½“å…¶æœ€ä½³æ€æƒ³å·²ç»åœ¨ Haskell å’Œ Rust ä¸­è¿›è¡Œäº†æ›´æ–°ç»¼åˆ;
æˆ‘å·²æ„è¯†åˆ°è¿™ç§å¯¹æ–°ç¨‹åºå‘˜çš„ç‚’ä½œå¯¹äºä»»ä½•èŒƒå¼éƒ½æ˜¯å…¸å‹çš„(FUD ~ Fear/Uncertainty/Doubt, æ„ä¸º:æ‡¼ã€æƒ‘ã€ç–‘, ç°åœ¨ç»Ÿç§°ä¸º PUA æŠ€æœ¯);
å¯¹äºæ–°æ‰‹æ¥è¯´, ä»»ä½•æ–°ç¼–ç¨‹èŒƒå¼éƒ½æ¥äº†ä½¿ç”¨ä¸åŒèŒƒå¼çš„èµ„æ·±ç¨‹åºå‘˜æ›´åŠ ç›´è§‚;
å‡½æ•°å¼ç¼–ç¨‹ä¹Ÿæ˜¯å¦‚æ­¤;
ç”šè‡³å¯¹äº Rust ä¹Ÿæœ‰åŒæ ·çš„è¯´æ³•;
å…¶å®å’ŒèŒƒå¼æ˜¯å¦æ›´å¥½å¹¶æ— å¤ªå¤§çš„å…³ç³»;</p>
<p>è‡³äº if-else è¯­å¥å®Œå…¨ç”¨å¤šæ€æ¥æ›¿æ¢,
å¥½å§, å¾ˆå®¹æ˜“æƒ³å‡ºä¸€ç»„å›¾çµå®Œå¤‡çš„å…ƒè¯­;
ä½ ä¸é‚•ä¸ºç”¨å¤šæ€æ¥æ¨¡æ‹Ÿ if è¯­å¥ä»¥åŠ true;
ä½ è¿˜å¯ä»¥æ¨¡æ‹Ÿå¸¦æœ‰é€’å½’çš„ shile å¾ªç¯,
åˆæˆ–æ˜¯å¸¦æœ‰ while å¾ªç¯å’Œå †æ ˆçš„é€’å½’ï¼›
ä½ å¯ä»¥ä½¿ç”¨ while å¾ªç¯æ¨¡æ‹Ÿ if è¯­å¥;</p>
<p>è¿™äº›äº‹å®éƒ½ä¸èƒ½ä½¿ç”¨è¿™ç§æ›¿ä»£æˆä¸ºä¸€ä¸ªå¥½ä¸»æ„;
å¯¹äºä¸åŒçš„æƒ…å†µ, ç¼–ç¨‹è¯­è¨€ä¸­å­˜åœ¨ä¸åŒçš„ç‰¹æ€§,
é€‚åº¦çš„å¯¹åº”ä½¿ç”¨, å®é™…ä¸ŠåŸæœ¬å°±æ˜¯ä¸€ä»¶å¥½äº‹æƒ…;</p>
<p>æ¯•ç«Ÿ,ç¼–ç¨‹çš„ç›®çš„æ˜¯ç¼–å†™ç¨‹åº, è€Œä¸æ˜¯è¯æ˜å›¾çµå®Œå¤‡æ€§/å“²å­¦ç ”ç©¶åˆæˆ–æ˜¯å†™æ¦‚å¿µè¯—;</p>
<p>(è¯‘æŒ‰: ä¸è¿‡, ç°å®ä¸­çš„ç¡®æœ‰è¿™ç±»ç ”ç©¶åƒ§, ä¸»è¦ç¤¾ä¼šè´¡çŒ®å°±æ˜¯åˆ¶é€ æ–°æ¦‚å¿µå“ª...)</p>
<h3 id="å®ç”¨æ€§"><a class="header" href="#å®ç”¨æ€§">å®ç”¨æ€§</a></h3>
<blockquote>
<p>Practicality</p>
</blockquote>
<p>å› æ­¤, åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« ä¸­, æˆ‘æ‰“ç®—ä»å®é™…è§’åº¦è¯„ä¼° OOP,
ä½œä¸ºä¸€åç¨‹åºçŒ¿, åœ¨ä½¿ç¼–ç¨‹è¯­è¨€åœ¨è®¤çŸ¥ä¸Šæ›´æ˜“äºç®¡ç†æˆ–æ˜¯æ›´å®¹æ˜“è¿›è¡ŒæŠ½è±¡æ–¹é¢å…·æœ‰ç»éªŒ;
æˆ‘å°†æ ¹æ®æˆ‘è§£å†³å®é™…ç¼–ç¨‹é—®é¢˜çš„ç»éªŒæ¥è¿›è¡Œè¯„ä¼° --- æˆ‘è®¤ä¸ºè¿™æ˜¯ç§ä¸å¥½çš„è¿¹è±¡,
å¾ˆå¤š OOP æŠ½è±¡å¦‚ä½•å·¥ä½œçš„æ¡ˆä¾‹åªæœ‰åœ¨çœŸæ­£é«˜çº§çš„ç¨‹åºä¸­æ‰æœ‰æ„ä¹‰,
æˆ–æ˜¯å…³äºåŠ¨ç‰©å›­ä¸­ä¸åŒç±»å‹çš„å½¢çŠ¶æˆ–æ˜¯åŠ¨ç‰©çš„äººä¸ºä¾‹å­æ‰æœ‰æ„ä¹‰;</p>
<p>å’Œå¤§å¤šæ•° OOP ä»‹ç»ä¸åŒ, æˆ‘ä¸ä¼šå…³æ³¨ OOP å’Œ OOPã€€ä¹‹å‰çš„ç¼–ç¨‹è¯­è¨€çš„æ¯”è¾ƒï¼›
ç›¸å, æˆ‘å°†ä¸»è¦å’Œ Rust è¿›è¡Œæ¯”è¾ƒ,
Rust ä» OOP ä¸­æ±²å–äº†å¾ˆå¤šå¥½æƒ³æ³•,
ä¹Ÿè®¸è¿˜ä¼šå’Œå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€(æ¯”å¦‚ Haskell)è¿›è¡Œæ¯”è¾ƒ;
è¿™äº›ç¼–ç¨‹è¯­è¨€é‡‡çº³äº† OOP çš„ä¸€äº›å¥½æƒ³æ³•,
ä½†æ˜¯, éƒ½ä»¥ä¸€ç§ä¿®å¤ç¼ºé™·å¹¶è¿›ä¸€æ­¥è¶…è¶Šçš„å§¿æ€, å¯¹åˆç†çš„ OOP è¿›è¡Œäº†æ”¹é€ ;</p>
<p>æˆ‘å°†æ ¹æ®é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰ä¸ªä¼ ç»Ÿæ”¯æŸ±: å°è£…/å¤šæ€å’Œç»§æ‰¿æ¥ç»„ç»‡è¿™ç§æ¯”è¾ƒ,
ç¬¬ä¸€ç¯‡å°†é‡ç‚¹æ”¾åœ¨å°è£…ä¸Š;
å¯¹äºæ¯ä¸ªæ”¯æŸ±, å°†è®¨è®º OOP å¦‚ä½•å®šä¹‰, ä»¥åŠåœ¨ OOP ä¸–ç•Œä¹‹å¤–å­˜åœ¨å“ªäº›ç­‰ä»·ç‰©æˆ–æ˜¯æ›¿ä»£å“,
ä»¥åŠè¿™äº›åœ¨å®é™…æ˜“ç”¨æ€§å’Œç¼–ç¨‹èƒ½åŠ›æ–¹é¢è¿›è¡Œå¯¹æ¯”;</p>
<p>ä¸è¿‡,åœ¨å¼€å§‹ä¹‹å‰,æƒ³å…ˆè°ˆè°ˆä¸€ä¸ªç”¨ä¾‹, è¿™ä¸ªç”¨ä¾‹æ›¾é¢ è¦†è¿‡å¤§éƒ¨åˆ†å†…å®¹: å›¾å½¢ç”¨æˆ·ç•Œé¢æˆ–æ˜¯è¯´ GUI;
å°¤å…¶æ˜¯åœ¨æµè§ˆå™¨æ—¶ä»£ä¹‹å‰,
ç¼–å†™ GUI ç¨‹åºä»¥ä¾¿ç›´æ¥åœ¨å°å¼æœº(æˆ–ç¬”è®°æœ¬ç”µè„‘)ä¸Šè¿è¡Œ,
æ˜¯ç¨‹åºå‘˜å·¥ä½œçš„ä¸»è¦éƒ¨åˆ†;
OOP çš„è®¸å¤šæ—©æœŸå¼€å‘æ˜¯å’Œ Xerox PARC çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ç ”ç©¶ä¸€èµ·å®Œæˆçš„,
OOP éå¸¸é€‚åˆè¯¥ç”¨ä¾‹;
å› æ­¤, å€¼å¾—ä¼˜å…ˆè€ƒè™‘ GUI;</p>
<p>ä¾‹å¦‚, äººä»¬é€šå¸¸ä¼šåœ¨å…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸­æ¨¡æ‹Ÿ OOP;
GTK+ å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­,
å°† OOP å®ç°ä¸º C ä¸­ä¸€ç³»åˆ—å®å’Œçº¦å®š;
è¿™æ ·ä½œçš„åŸå› æœ‰å¾ˆå¤š,åŒ…æ‹¬ç†Ÿæ‚‰ OOP è®¾è®¡å’Œå¸Œæœ›åˆ›å»ºæŸç§è¿è¡Œæ—¶çš„å¤šæ€;
ä½†æ˜¯,æ ¹æ®æˆ‘çš„ç»éªŒ, è¿™åœ¨å®ç° GUI æ¡†æ¶æ—¶æœ€ä¸ºå¸¸è§;</p>
<p>åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­, ä¸»è¦å…³æ³¨å°† OOP åº”ç”¨åœ¨å…¶å®ƒç”¨é€”çš„åœºæ™¯,
ä½†æ˜¯,ä¹Ÿä¼šé…Œæƒ…è®¨è®º GUI;
åœ¨è¿™ä¸ªä»‹ç»æ€§éƒ¨, æˆ‘ä»…æŒ‡å‡º GUI æ¡†æ¶åœ¨ä¼ ç»Ÿ OOP è®¾è®¡å’Œç¼–ç¨‹è¯­è¨€ä¹‹å¤–æ˜¾ç„¶æ˜¯å¯èƒ½çš„,
ç”šè‡³äºåœ¨ Rust ä¸­ä¹Ÿæ˜¯å¦‚æ­¤;
æœ‰æ—¶, GUI å¯ä»¥é€šè¿‡å®Œå…¨ä¸åŒçš„æœºåˆ¶å·¥ä½œ,
ä¾‹å¦‚ä¸»è¦åœ¨ Haskell ä¸­å¼€åˆ›æ€§çš„åŠŸèƒ½å“åº”å¼äº†æ¸”çš„å“ª, æˆ‘ä¸ªäººæ›´åŠ å–œæ¬¢ä¼ ç»Ÿçš„åŸºäº OOP çš„ç¼–ç¨‹,
è€Œä¼ ç»Ÿçš„ OOP åŠŸèƒ½å¯¹æ­¤å´å¹¶æ²¡æœ‰ä»€ä¹ˆå¸®åŠ©;</p>
<p>ç°åœ¨, äº‹ä¸å®œè¿Ÿ, è®©æˆ‘ä»¬ä»å®ç”¨è§’åº¦, é€ä¸€æ¯”è¾ƒ OOP å’Œ Rust ä»¥åŠå…¶åå„ç§ OOP ç¼–ç¨‹è¯­è¨€;
å¯¹äºé¦–ç¯‡æ–‡ç« , å…¶ä½™éƒ¨åˆ†å°†é‡ç‚¹å…³æ³¨å°è£…;</p>
<h3 id="ç¬¬ä¸€æ”¯æŸ±-å°è£…-encapsulation"><a class="header" href="#ç¬¬ä¸€æ”¯æŸ±-å°è£…-encapsulation">ç¬¬ä¸€æ”¯æŸ±: å°è£…/ Encapsulation</a></h3>
<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­, å°è£…å’Œç±»çš„æ¦‚å¿µå¯†åˆ‡ç›¸å…³,
ç±»æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„åŸºæœ¬æŠ½è±¡å±‚;
æ¯ä¸ªç±»éƒ½åŒ…å«ä¸€äº›è®°å½•æ•°æ®çš„æ ¼å¼/å¸ƒå±€,
å³, æ¯ä¸ªå®ä¾‹åŒ…å«ä¸€å®šæ•°é‡å­—æ®µçš„æ•°æ®ç»“æ„;
è®°å½•ç±»å‹çš„å•ä¸ªå®ä¾‹ç§°ä¸º&quot;å¯¹è±¡&quot;;
æ¯ä¸ªç±»è¿˜åŒ…å«å’Œè¯¥è®°å½•ç±»å‹ç´§å¯†é…å¯¹çš„ä»£ç ,
ç»„ç»‡æˆç§°ä¸ºæ–¹æ³•çš„è¿‡ç¨‹;
æ ¸å¿ƒæƒ³æ³•æ˜¯, æ‰€æœ‰å­—æ®µéƒ½åªèƒ½ä»æ–¹æ³•å†…éƒ¨è®¿é—®,
æ— è®ºæ˜¯é€šè¿‡ OOP æ„è¯†å½¢æ€çš„çº¦å®šè¿˜æ˜¯é€šè¿‡ç¼–ç¨‹è¯­è¨€çš„å¼ºåˆ¶è§„åˆ™;</p>
<p>è¿™é‡Œçš„åŸºæœ¬å¥½å¤„æ˜¯ æ¥å£/interface ,ä¹Ÿå°±æ˜¯ä»£ç å¦‚ä½•å’Œå…¶å®ƒä»£ç äº¤äº’,
æˆ–è€…è¯´ä½ å¿…é¡»çŸ¥é“ä»€ä¹ˆæ‰èƒ½ä½¿ç”¨ä»£ç ,
æ¯” å®ç°/implementation è¦ç®€å•çš„å¤š, å®ç°/implementation æ˜¯ä»£ç å¦‚ä½•å®é™…å®Œæˆ çš„æ›´åŠ æµç•…å˜åŒ–çš„ç»†èŠ‚, å…¶åŸæœ¬çš„å·¥ä½œ;</p>
<p>ä½†æ˜¯, è™½ç„¶è®¸å¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰è¿™æ ·çš„æŠ½è±¡;
ä»»ä½•è¶…è¿‡åå‡ è¡Œçš„ç¨‹åºå°±æœ‰å¤ªå¤šçš„éƒ¨åˆ†, æ— æ³•ä¸€æ¬¡å…¨éƒ¨åæ˜ åˆ°ä½ çš„å¤§è„‘ä¸­,
å› æ­¤,æ‰€æœ‰ç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½æœ‰å°†ç¨‹åºåˆ’åˆ†ä¸ºæ›´å°ç»„ä»¶çš„æ–¹æ³•,
ä½œä¸ºç®¡ç†å¤æ‚æ€§çš„ä¸€ç§æ–¹å¼,
æ¥å£/interface æ€»æ˜¯æ¯” å®ç°/implementation æ›´åŠ ç®€å•,
æ— è®ºæ˜¯ç”±ç¼–ç¨‹è¯­è¨€å¼ºåˆ¶æ‰§è¡Œ, è¿˜æ˜¯&quot;è£èª‰ç³»ç»Ÿ&quot;çš„é—®é¢˜;
å› æ­¤, ä»å¹¿ä¹‰ä¸Šç›, æ‰€æœ‰ç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½æœ‰æŸç§ç‰ˆæœ¬çš„å°è£…;</p>
<p>ä¸€ç§ç®€å•çš„å°è£…å½¢å¼ --- å¤ªå¤šæ•°é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€å°†å…¶ä½œä¸ºç±»ä¸­çš„ä¸€å±‚æ¥ç»´æŠ¤ --- å°±æ˜¯è¿‡ç¨‹,
ä¹Ÿç§°ä¸ºå‡½æ•°/å­ä¾‹ç¨‹æˆ–æ˜¯(OOP ä¸­çš„ç§°å‘¼)æ–¹æ³•;
ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸å…è®¸ä»»ä½•ä»£ç è¡Œç›´æ¥è·³è½¬åˆ°ä»»ä½•å…¶å®ƒä»£ç è¡Œ,
è€Œæ˜¯å€¾å‘å°†ä»£ç å—ç»„åˆä¸ºè¿‡ç¨‹,
ç„¶å, ä½ å¯ä»¥åœ¨ä¸å½±å“å¤–éƒ¨ä»£ç çš„æƒ…å†µä¸‹,
æ›´æ”¹è¿‡ç¨‹çš„å†…å®¹, å¹¶æ›´æ”¹å¤–éƒ¨ä»£ç , åŒæ ·åœ¨ä¸å½±å“ç¨‹åºçš„æƒ…å†µä¸‹,
å˜¦éƒ½éµå¾ªç›¸åŒçš„ æ¥å£/interface å’Œ å¥‘çº¦/contract;</p>
<p>å¥‘çº¦/contract é€šå¸¸è‡³å°‘éƒ¨åˆ†æ˜¯äººç±»å±‚é¢çš„çº¦å®š;
ä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆå¯ä»¥é˜»æ­¢ä½ é‡‡ç”¨ä¸€ä¸ªåº”è¯¥å¤„ç†ä¸€äº›æ•°æ®çš„è¿‡ç¨‹,
è€Œæ˜¯è®©å…¶æ— é™å¾ªç¯æˆ–æ˜¯ä»¤ç¨‹åºå´©æºƒ;
ä½†æ˜¯, å…¶ä¸­çš„ä¸€äº›, ä¾‹å¦‚è¿‡ç¨‹å’Œç¨‹åºå…¶ä½™éƒ¨åˆ†çš„åˆ†ç¦», 
ä»¥åŠåœ¨è®¸å¤šæƒ…å†µä¸­, å…è®¸åœ¨è°ƒç”¨ä¸­æ¥å—å’Œè¿”å›çš„å€¼çš„æ•°é‡å’Œç±»å‹,
å°†ç”±ç¼–ç¨‹è¯­è¨€å¼ºåˆ¶æ‰§è¡Œ;</p>
<p>ä¾‹å¦‚,åœ¨è¿‡ç¨‹å†…éƒ¨å£°æ˜çš„å˜é‡é€šå¸¸æ˜¯å±€éƒ¨çš„,
è€Œä¸”æ²¡æœ‰åŠæ³•åœ¨è¿‡ç¨‹å¤–éƒ¨å¼•ç”¨;
è¾“å…¥å’Œè¾“å‡ºé€šå¸¸å§´åœ¨è¿‡ç¨‹é¡¶éƒ¨çš„ç­¾åä¸­;
é€šå¸¸, å¤–éƒ¨ä»£ç åªèƒ½åœ¨ç¬¬ä¸€è¡Œè¿›å…¥è¿‡ç¨‹, è€Œä¸èƒ½åœ¨ä¸­é€”çš„ä»»æ„ä¸€è¡Œè¿›å…¥;
æŸäº›ç¼–ç¨‹è¯­è¨€(åŒ…æ‹¬ Rust)ä¸­, è¿‡ç¨‹ç”šè‡³äºå¯ä»¥åŒ…å«å…¶å®ƒè¿‡ç¨‹,
è¿™äº›è¿‡ç¨‹åªèƒ½åœ¨å¤–éƒ¨è¿‡ç¨‹ä¸­è°ƒç”¨;</p>
<p>ä½†æ˜¯,å½“ç„¶ç°ä»£ç¨‹åºé€šå¸¸æ¯”å°‘æ•°ç”¨é”¥ç¨‹åºæ›´å¤æ‚;
å› æ­¤,ç°ä»£ç¼–ç¨‹è¯­è¨€(å†æ¬¡å¼ºè°ƒ: <strong>&quot;ç°ä»£&quot;</strong> ä¸€è¯åœ¨è¿™é‡Œçš„ä½¿ç”¨éå¸¸å®½æ¾)å…·æœ‰å¦ä¸€å±‚å°è£…æŠ½è±¡:æ¨¡å—;</p>
<p>æ¨¡å—é€šå¸¸åŒ…å«ä¸€ç»„è¿‡ç¨‹,æœ‰äº›å¯ä»¥ä»å¤–éƒ¨è®¿é—®, æœ‰äº›åˆ™ä¸èƒ½;
åœ¨é duck ç±»å‹è¯­è¨€ä¸­, é€šå¸¸è¦å®šä¹‰å¾ˆå¤šèšåˆç±»å‹, åŒæ ·æ˜¯æœ‰äº›å¯ä»¥ä»å¤–éƒ¨è®¿é—®,æœ‰äº›ä¸è¡Œ;
é€šå¸¸ç”šè‡³äºå¯ä»¥æŠ½è±¡çš„å…¬å¼€è¿™äº›ç±»å‹,å› æ­¤,ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†å¯ä»¥è®¿é—®ç±»å‹çš„å®åœ¨,ä½†æ˜¯ä¸èƒ½è®¿é—®è®°å½•å­—æ®µ,
ç”šè‡³äºä¸èƒ½è®¿é—®æ˜¯è®°å½•ç±»å‹çš„äº‹å®;
ç”šè‡³äº C åœ¨å…¶æ¨¡å—ç³»ç»Ÿä¸­ä¹Ÿæœ‰è¿™ç§èƒ½åŠ› --- åè€Œæ˜¯ C++ æ²¡æœ‰å¼•å…¥è¿™ç‚¹, åªæ˜¯è¿½åŠ äº†ä¸€ä¸ªé¢å¤–çš„/æ­£äº¤çº§åˆ«çš„é€å­—æ®µè®¿é—®æ§åˆ¶;</p>
<p>ä»åŠ¡å®çš„è§’åº¦æ¥çœ‹,åŸºäºç±»çš„å°è£…å¹¶ä¸æ˜¯ OOP çš„æŸä¸ªç‰¹æ®Šè§è§£,
è€Œæ˜¯ä¸€ç§ä¸“é—¨çš„---æˆ–æ˜¯æ›´ç¡®åˆ‡çš„è¯´, ä¸¥æ ¼é™åˆ¶çš„---æ¨¡å—å½¢å¼;
åœ¨ OOP ç¼–ç¨‹è¯­è¨€ä¸­, æˆ‘ä»¬æœ‰ç±»çš„æ¦‚å¿µ, æ˜¯ä¸€ç§ç‰¹æ®Šå½¢å¼çš„æ¨¡å—
(æœ‰æ—¶æ˜¯å”¯ä¸€å—æ”¯æŒçš„å½¢å¼, æœ‰æ—¶ç”šè‡³äºåœ¨å®Œå…¨ä¸åŒçš„/æ›´åŠ ä¼ ç»Ÿçš„æ¨¡å—æ¦‚å¿µä¸‹åˆ†å±‚,ä»¥ä¾¿å¢åŠ æ¦‚å¿µä¸Šçš„æ··æ·†);
åªæ˜¯,å¯¹äºä¸€ä¸ª&quot;ç±»&quot;,é€šå¸¸åªèƒ½å®šä¹‰ä¸€ä¸ªä¸»è¦ç±»å‹, å’Œæ¨¡å—æœ¬èº«å…±äº«ä¸€ä¸ªåç§°,
è€Œä¸”,è¯¥ç±»å‹çš„å­—æ®µè¢«ç»™äºˆç‰¹æ®Šä¿æŠ¤, ä»¥ä¾¿é˜²æ­¢ç±»å¤–ä»£ç çš„è®¿é—®;</p>
<p>å½“ç„¶, ç±»å’Œæ¨¡å—ä¹‹é—´è¿˜æœ‰å…¶å®ƒåŒºåˆ«,ä½†æ˜¯,è¿™äº›å’Œå…¶æ”¯æŸ±æœ‰å…³, æˆ‘ä»¬ç¨åå°†è®ºåŠ;
ç°åœ¨æˆ‘ä»¬åªè®¨è®ºå’Œå°è£…ç›¸å…³çš„ &quot;ç±»&quot; æ¦‚å¿µ --- å…¶ä¸­, ç±»åªæ˜¯å…·æœ‰ä¸€ç§ç‰¹æƒæŠ½è±¡ç±»å‹çš„ç‰¹æ®Šæ¨¡å—;</p>
<p>è¿™æ˜¯ä¸€ç§ç¼–å†™æ¨¡å—çš„åˆç†æ–¹å¼,ä½†æ˜¯, å¹¶ä¸åƒé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³æ‰€è¡¨æ˜çš„é‚£æ ·ç‰¹åˆ«
(ç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬è®¨è®ºå…¶å®ƒæ”¯æŸ±çš„æ›¿ä»£æ–¹æ¡ˆæ—¶,ä½†æ˜¯,åŒæ ·ç¨åå†è®¨è®º);
åœ¨æŸäº›æƒ…å†µä¸­,æ¨¡å—æ²¡æœ‰å®šä¹‰ä»»ä½•è®°å½•ç±»å‹,è¿™åœ¨ Java ç­‰ç¼–ç¨‹è¯­è¨€ä¸­å¾ˆå°´å°¬,
æ— è®ºå¦‚ä½•ä½ éƒ½å¿…é¡»å®šä¹‰ä¸€ä¸ªç©ºè®°å½•ç±»å‹, å¹¶ä»ç„¶åˆ›å»ºä¸€ä¸ª &quot;ç±»&quot;;
åœ¨æŸäº›æƒ…å†µä¸­, ä¸€ä¸ªæ¨¡å—å®šä¹‰äº†å¤šä¸ªå¯ä»¥å…¬å¼€è®¿é—®çš„ç±»å‹,
è¿™äº›ç±»å‹ç´§å¯†çš„çº ç¼ åœ¨ä¸€èµ· --- å¹¶ä¸” OOP é£æ ¼é¼“åŠ±ä½ åœ¨è¿™äº›ç±»å‹ä¹‹é—´è¿›è¡Œå°è£…, è¿™æ ·ä¸€æ¥æ›´å¤šçš„é˜»ç¢è€Œä¸æ˜¯å¸®åŠ©;</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´, èƒ½å¤Ÿå¯¹å…¶å®ƒæ¨¡å—éšè—è®°å½•çš„å­—æ®µå¾ˆé‡è¦, è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ C ä¹Ÿæ”¯æŒ;
ç”šè‡³å¯¹äºåœ¨ Rust ä¸­å®ç°å¯¹ä¸å®‰å…¨ç‰¹æ€§çš„å®‰å…¨æŠ½è±¡æ˜¯å¿…ä¸å¯å°‘çš„,
ä¾‹å¦‚é›†åˆ/collections, å…¶ä¸­åŸå§‹æŒ‡é’ˆå’Œä¸€åŒè®°å½•çš„å…¶å®ƒå­—æ®µç›¸ç»“åˆå…·æœ‰ä¸å˜é‡;
ä½†æ˜¯, è¿™å¯¹ OOP æ¥è¯´å¹¶ä¸é™Œç”Ÿ,è€Œä¸”, è¿™å¹¶ä¸æ˜¯æ¯ç§å¯èƒ½ç±»å‹çš„æœ€ä½³é€‰æ‹©;</p>
<p>ä½œä¸ºè¿™ç‚¹çš„è¯æ®,åœ¨ Java å’Œ Smalltalk ä¸­,
åœ¨è¾ƒå°ç¨‹åº¦ä¸Šç”šè‡³åœ¨ C++ æˆ–æ˜¯ Python ä¸­,
åšæŒæ¯ä¸€ç§ç±»å‹çš„å°è£…é£æ ¼æ„å‘³ç€ä½ å¯ä»¥è·å¾—è¿™äº›æ ·æ¿æ–¹æ³•,
æ¯”å¦‚è¯´ setFoo å’Œ getFoo;
è¿™äº›æ–¹æ³•ä»€ä¹ˆéƒ½ä¸ä½œ,åªæ˜¯å……å½“ä¸€äº›æœ¬è´¨ä¸Šæ˜¯å“‘è®°å½•ç±»å‹çš„å­—æ®µè®¿é—®å™¨;
ä»ç†è®ºä¸Šè¯´, å¦‚æœä½ æƒ³æ›´æ”¹è®¾ç½®æˆ–æ˜¯è¯»å–è¿™äº›å­—æ®µæ—¶å‘ç”Ÿçš„äº‹æƒ…,
è¿™ä¼šæœ‰æ‰€å¸®åŠ©,å¾—æ˜¯ä¸æ˜¯, å®é™…ä¸Š, è¿™åªæ˜¯åŸå§‹å­—æ®µè®¿é—®å™¨, æœ¬è´¨ä¸Šå°±æ˜¯ å¥‘çº¦/contract çš„ä¸€éƒ¨åˆ†;
ä¾‹å¦‚, å¦‚æœå¥¹ä»¬æ”¹ä¸ºè¿›è¡Œç½‘ç»œè°ƒç”¨è€Œä¸æ˜¯ä»…ä»…è¿”å›ä¸€ä¸ªå€¼,
é‚£ä¹ˆå¯¹äºè¿™ç§ç®€å•å‘½åçš„æ–¹æ³•, å°†å¼ºçƒˆè§¦å‘æƒŠå–œåŸåˆ™:</p>
<p>è¯´èµ·æ¥è¦ç®€å•çš„å¤š:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Point {
    pub x: f64,
    pub y: f64,
    pub z: f64,
}
<span class="boring">}</span></code></pre></pre>
<p>â€¦ than the Java idiomatic â€œJavaBeanâ€ equivalent from when I was a Java programmer (Java has apparently changed since then, but this is representative of many OOP programming languages including Smalltalk and many books on how to program):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>class Point {
    private double x;
    private double y;
    private double z;

    double getX() {
        return x;
    }

    double setX(double x) {
        this.x = x;
    }

    double getY() {
        return y;
    }

    double setY(double y) {
        this.y = y;
    }

    double getZ() {
        return z;
    }

    double setZ(double z) {
        this.z = z;
    }
}
<span class="boring">}</span></code></pre></pre>
<p>Such data types generally donâ€™t use any of the other features that OOP classes get, such as polymorphism or inheritance. To use such features in such â€œJavaBeanâ€ classes would also violate the principle of least surprise. The â€œclassâ€ concept is overkill for these record types.</p>
<p>And of course, a Java developer (or Smalltalk, or C#) will say that by accessing the fields indirectly through these getter and setter methods, that they are future-proofing the class, in case the design changes (and in fact I was reminded to add this paragraph when someone on Reddit made exactly this point). But I find this disingenuous, or at least misguided â€“ it is often used for structures internal to a portion of the program, where the far more reasonable thing to do would be to change the fields openly to all users of the structure. It is also extremely difficult to think of an unsurprising thing for these methods to do besides literally set or get a field, as the method name implies â€“ making a network call, for example, would be a shocking surprise for a get or set method and therefore a violation of at least the implicit contract. In my time programming object-oriented programming languages, I never once saw a situation where it was appropriate for a getter or setter to do anything but literally get or set the field.</p>
<p>If code does change to require the getter or setter to do something else, I would rather change the name of the method to reflect what else it does, rather than pretend thatâ€™s somehow not a breaking change. fetchZFromNetwork or setAndValidateZ seem more appropriate than a getZ or setZ that does something more than the simple field access that we assume a setter or getter does. OOPâ€™s insistence that every type should be its own code abstraction boundary is often absurd when applied to these lightweight aggregate types. These sorts of getters and setters are used to protect an abstraction boundary that shouldnâ€™t exist and just gets in the way, and future-proof against implementation changes that shouldnâ€™t be made without also changing the interface.</p>
<p>Setters and getters, in short, are an anti-pattern. If you intend to create an abstraction besides â€œdata structure,â€ where validation or network calls or anything else beyond raw field accesses would be appropriate, then these get and set names are the wrong names for that abstraction.</p>
<p>Edit 2023-02-13 to add this paragraph: To be clear, these objections apply to properties as well. Itâ€™s not the syntactic inconvenience that I object to, but the entire notion that replacing field accesses with code transparently is a good thing to strive for, or an important possibility to leave open. I should hope that foo.bar = 3 would never make a network call in Rust! And what if it had to be async? It should be clear if Iâ€™m calling a function. Rust is about explicitness.</p>
<p>The get and set functions, in reality, are only used as wrappers to satisfy the constraints of object-oriented ideology. The future-proofing they purportedly provide is an illusion. If you provide â€œJavaBeanâ€ style types, or types with properties, over an abstraction boundary, you are in practice just as locked in as if youâ€™d provided raw field access â€“ the changes you are most likely to want to make to those structures would not allow shifting the getters and setters to maintain compatibility. Leveraging this future-proofing is likely to be completely impossible for the changes youâ€™d want to make, and at best it would involve a horrendous hack.</p>
<p>Rust might seem to be the same as OOP languages in all of this; it superficially looks like it has something very similar to classes. You can define functions associated with a given type â€“ and they are even called methods! Like OOP methods, they syntactically privilege taking values of that type (or references to those values) as the first argument, called the special name self. You even mark fields of a record type (called struct in Rust) as public or (by default) private, encouraging private fields just like in an object-oriented programming language.</p>
<p>According to this pillar, Rust seems pretty close to being OOP. And thatâ€™s a fair assessment, for this pillar, and an intentional choice to make Rust programming more comfortable to people used to the everyday syntax of OOP programming in C++ (or Java, or JavaScript).</p>
<p>But the similarity is only skin-deep. Encapsulation is the least distinct pillar of OOP (after all, all modern programming languages have some form of it), and the implementation in Rust is not bound with the type. When you declare a field private in Rust (by not specifying pub), that doesnâ€™t mean private to its methods, that means private to the module. A module can provide multiple types, and any function in that module, whether a â€œmethodâ€ of that type or not, can access all of the fields defined in that type. Passing around records is encouraged when appropriate, rather than discouraged to the point that accessors are forced instead, even in tightly-bound related code.</p>
<p>This is the first sign we see that Rust, in spite of its superficial syntax, is not an OOP programming language.</p>
<h3 id="future-posts"><a class="header" href="#future-posts">Future Posts</a></h3>
<p>And at this point Iâ€™m going to have to pause for today.</p>
<p>Of course, encapsulation isnâ€™t the only fancy thing OOP-style classes can do. If it were, classes wouldnâ€™t have enamored so many people: it would simply be obvious to everyone that classes were nothing more than glorified modules, and methods nothing more than glorified procedures.</p>
<p>In the next posts of this series, we will discuss the other features associated with OOP, the two remaining traditional pillars of OOP, polymorphism and inheritance, analyze them from a practical point of view, and see how Rust compares with OOP as it comes to those pillars.</p>
<p>Next up will be polymorphism!</p>
<h2 id="logging"><a class="header" href="#logging">logging</a></h2>
<ul>
<li>230220 ZQ re-start</li>
<li>230215 ZQ init.</li>
</ul>

                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->
                    <a rel="prev" href="../tip/rust6fun-operator-overloading.html" class="mobile-nav-chapters previous"
                        title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../tip/oop-2-polymorphism.html" class="mobile-nav-chapters next"
                        title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>

                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">
            <a rel="prev" href="../tip/rust6fun-operator-overloading.html" class="nav-chapters previous" title="Previous chapter"
                aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>

            <a rel="next" href="../tip/oop-2-polymorphism.html" class="nav-chapters next" title="Next chapter"
                aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
        </nav>

    </div>




    <script>
        window.playground_copyable = true;
    </script>


    <script src="../elasticlunr.min.js" charset="utf-8"></script>
    <script src="../mark.min.js" charset="utf-8"></script>
    <script src="../searcher.js" charset="utf-8"></script>

    <script src="../clipboard.min.js" charset="utf-8"></script>
    <script src="../highlight.js" charset="utf-8"></script>
    <script src="../book.js" charset="utf-8"></script>

    <!-- Custom JS scripts -->


    <hr />

    <p style="text-align:center">

        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®"
                style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
        æœ¬ä½œå“é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯;-)

    </p>
    <hr />

    <script src="https://utteranc.es/client.js" repo="zhrust/comments" issue-term="pathname" label="âœ¨ğŸ’¬âœ¨"
        theme="github-light" crossorigin="anonymous" async>
        </script>

</body>

</html>