<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>be Rustaceans</title>
    <meta name="robots" content="noindex" />


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.png">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/chrome.css">
    <link rel="stylesheet" href="css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
    <link rel="stylesheet" href="fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="tomorrow-night.css">
    <link rel="stylesheet" href="ayu-highlight.css">

    <!-- Custom theme stylesheets -->

</head>

<body>
    <!-- Provide site root to javascript -->
    <script>
        var path_to_root = "";
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script>
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script>
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('light')
        html.classList.add(theme);
        html.classList.add('js');
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script>
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scrollbox">
            <ol class="chapter"><li class="chapter-item expanded "><a href="abt/index.html"><strong aria-hidden="true">1.</strong> æœ‰å…³</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="abt/gh-pages.html"><strong aria-hidden="true">1.1.</strong> gh-pages</a></li><li class="chapter-item expanded "><a href="abt/zhrust.html"><strong aria-hidden="true">1.2.</strong> zhrust</a></li></ol></li><li class="chapter-item expanded "><a href="dev/index.html"><strong aria-hidden="true">2.</strong> å¼€å‘</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="log/20-things-ive-learned-in-my-20-years-as-a-software-engineer.html"><strong aria-hidden="true">2.1.</strong> 20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„10ä»¶äº‹</a></li></ol></li><li class="chapter-item expanded "><a href="tip/index.html"><strong aria-hidden="true">3.</strong> æŠ€å·§</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="log/fun-rust-operators.html"><strong aria-hidden="true">3.1.</strong> è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹</a></li><li class="chapter-item expanded "><a href="log/concepts-i-wish-i-learned-earlier.html"><strong aria-hidden="true">3.2.</strong> å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ</a></li></ol></li><li class="chapter-item expanded "><a href="101/index.html"><strong aria-hidden="true">4.</strong> å­¦ä¹ </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="101/exercism.html"><strong aria-hidden="true">4.1.</strong> Exercism</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="101/ex42all-your-base.html"><strong aria-hidden="true">4.1.1.</strong> 42:all-your-base</a></li><li class="chapter-item expanded "><a href="101/ex43Allergies.html"><strong aria-hidden="true">4.1.2.</strong> 43:Allergies</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="log/index.html"><strong aria-hidden="true">5.</strong> ç¬”è®°</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="log/rust-s-ugly-syntax.html"><strong aria-hidden="true">5.1.</strong> Rust ä¸‘å¥æ³•</a></li></ol></li></ol>
        </div>
        <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
                        <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="menu-bar sticky bordered">
                <div class="left-buttons">
                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                        <i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button>
                        </li>
                    </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                        aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                        aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                </div>

                <h1 class="menu-title">be Rustaceans</h1>

                <div class="right-buttons">
                    <a href="print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    <a href="https://github.com/zhrust/rustacean/tree/main/src" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-github"></i>
                    </a>

                </div>
            </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..."
                        aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script>
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                });
            </script>

            <div id="content" class="content">
                <main>
                    <h1 id="æœ‰å…³"><a class="header" href="#æœ‰å…³">æœ‰å…³</a></h1>
<blockquote>
<p>as Zoom.Quiet</p>
</blockquote>
<h2 id="main-index"><a class="header" href="#main-index">main index</a></h2>
<p><a href="https://zoomquiet.io/">mapping -&gt; ZoomQuiet.io {by gen4dot2htm.py vv.190718 at:190911 18:07:32,877571}</a></p>
<h2 id="location"><a class="header" href="#location">location</a></h2>
<h2 id="actions"><a class="header" href="#actions">actions</a></h2>
<p>...</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gh-pages"><a class="header" href="#gh-pages">gh-pages</a></h1>
<blockquote>
<p>å…è´¹ä½¿ç”¨çš„æˆæœ¬</p>
</blockquote>
<h2 id="background"><a class="header" href="#background">background</a></h2>
<blockquote>
<p>æ— å¥ˆèƒŒæ™¯</p>
</blockquote>
<p>å‡¡æ˜¯å¯ä»¥ç¼–è¯‘ä¸º é™æ€ç½‘ç«™ çš„, éƒ½å¯ä»¥é€šè¿‡ gh-pages/GitHub-Pages æœåŠ¡æ¥è¿›è¡Œå…è´¹å‘å¸ƒ;</p>
<h2 id="goal"><a class="header" href="#goal">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
æœ¬åœ°ç¼–è¯‘å¥½, å˜¦ git push ,ä¸€åˆ‡å°±å¯ä»¥è‡ªåŠ¨å®Œæˆå‘å¸ƒ</li>
<li><input disabled="" type="checkbox"/>
è€Œä¸”å‘å¸ƒåˆ°æŒ‡å®šåŸŸå</li>
</ul>
<h2 id="trace"><a class="header" href="#trace">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<h2 id="refer"><a class="header" href="#refer">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<ul>
<li><a href="https://docs.github.com/cn/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages">éªŒè¯ GitHub Pages çš„è‡ªå®šä¹‰åŸŸ - GitHub Docs</a></li>
</ul>
<h2 id="logging"><a class="header" href="#logging">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221023 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zhrust"><a class="header" href="#zhrust">zhRust</a></h1>
<blockquote>
<p>zn.rust åŸŸå</p>
</blockquote>
<h2 id="background-1"><a class="header" href="#background-1">background</a></h2>
<blockquote>
<p>åæ­£è¨€é¡º</p>
</blockquote>
<p>ï¼²ust å‘å¸ƒæ—¶é—´ä¸çŸ­äº†,
rust ç›¸å…³ä¸­æ–‡ç¤¾åŒºæ¯”å½“å¹´ Python çš„å¤šä¸å°‘,
æ‰€ä»¥, 2022å¹´æœªå¾ˆéš¾æ‰¾åˆ°ç®€çŸ­å¥½è®°çš„åŸŸåå¯ä»¥æ³¨å†Œäº†</p>
<h2 id="goal-1"><a class="header" href="#goal-1">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p>ä½†æ˜¯, æ€»æ˜¯è¦æœ‰ä¸€ä¸ª Rust æ–¹å‘çš„æŒç»­è¾“å‡ºåŸŸå, 
è¦æ±‚ä»æ¥ä¸å˜</p>
<ul>
<li>rust,rustacean ç›¸å…³</li>
<li>è¶ŠçŸ­è¶Šå¥½</li>
<li>è¶Šä¾¿å®œè¶Šå¥½</li>
<li>...</li>
</ul>
<h2 id="trace-1"><a class="header" href="#trace-1">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<ul>
<li>åŸå…ˆæœ‰ 101.camp,101.so æ‰€ä»¥å°è¯• rust.so, å·²ç»æ²¡æœ‰</li>
<li>åˆå°è¯• rustacean.so è¿˜æœ‰,åªæ˜¯è´µè€Œä¸”åˆé•¿...</li>
<li>é‚£ä¹ˆ åœ¨ namecheap.com å†æŒ–æ˜ä¸€ä¸‹, æ²¡æƒ³åˆ°
<ul>
<li>.rust ç«Ÿç„¶æœ‰è¿™ä¸ªæ ¹åŸŸå</li>
<li>ç«‹å³å…ˆæ³¨å†Œ cn.rust ä»¥åŠ china.rust</li>
</ul>
</li>
<li>å¯æƒœå‡ å¤©è¿‡å» dig æŒ‡ä»¤ä¾ç„¶æŸ¥ä¸åˆ°è®°å½•,çœ‹æ¥ <code>.rust</code> è¿˜æ˜¯ä¸€ä¸ªé¢„å¤‡æ ¹åŸŸå,è‡³å°‘ä¸­å›½æ ¹è¿˜ä¸è¯†åˆ«..
<ul>
<li>åªèƒ½æ¢å¤ä½¿ç”¨ <code>rs.101.so</code> è¿™ä¸ªåŸŸå</li>
<li>å¦å¤–å°† <code>weekly.rs.101.so</code> ä¹Ÿå‘å¸ƒå‡ºæ¥å¼€å§‹åšæŒå…³æ³¨æ¯å‘¨ç¤¾åŒºå…³é”®å˜åŒ–...</li>
</ul>
</li>
</ul>
<h2 id="refer-1"><a class="header" href="#refer-1">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-1"><a class="header" href="#logging-1">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>230101 ZQ å˜æ›´åŸŸåæŒ‡å‘</li>
<li>221230 ZQ init.
<ul>
<li>è¿ç§» utterances ğŸ”® è¯„æ³¨åˆ° https://github.com/zhrust/comments</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å¼€å‘"><a class="header" href="#å¼€å‘">å¼€å‘</a></h1>
<blockquote>
<p>projects ...</p>
</blockquote>
<h2 id="background-2"><a class="header" href="#background-2">background</a></h2>
<blockquote>
<p>æ— å¥ˆèƒŒæ™¯</p>
</blockquote>
<p>å¼€å‘è¯­è¨€å­¦ä¹ , ä¸ç”¨æ¥å¼€å‘çœŸå®é¡¹ç›®, åŸºæœ¬æ˜¯è¡¨æ¼”å­¦ä¹ è¡Œä¸ºäº†...</p>
<h2 id="goal-2"><a class="header" href="#goal-2">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p>ä¸€ç»„æ—¥å¸¸è¦ç”¨å·¥å…·, åŸåˆ›/å†åˆ¶/...</p>
<p>å…³é”®æ˜¯ç§¯ç´¯ä¸€ç»„å¯ç”¨ä½œå“, æ‰“åº•å„¿.</p>
<h2 id="trace-2"><a class="header" href="#trace-2">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<p>???</p>
<h2 id="refer-2"><a class="header" href="#refer-2">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-2"><a class="header" href="#logging-2">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221023 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„20ä»¶äº‹"><a class="header" href="#20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„20ä»¶äº‹">20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„20ä»¶äº‹</a></h1>
<p>åŸæ–‡: <a href="https://www.simplethread.com/20-things-ive-learned-in-my-20-years-as-a-software-engineer/">20 Things I've Learned in my 20 Years as a Software Engineer - Simple Thread</a></p>
<h2 id="æ³¨æ„è¯·å…ˆé˜…è¯»æ­¤å†…å®¹"><a class="header" href="#æ³¨æ„è¯·å…ˆé˜…è¯»æ­¤å†…å®¹">æ³¨æ„:è¯·å…ˆé˜…è¯»æ­¤å†…å®¹</a></h2>
<p>å³å°†å±•ç°çš„æ˜¯ä¸€ç¯‡åŒ…å«å¤§é‡å»ºè®®çš„ blog ;
å‘å‰äººå­¦ä¹ å¯¹æˆåŠŸè‡³å…³é‡è¦,ä½†æ˜¯,æˆ‘ä»¬å¸¸å¸¸å¿˜è®°å¦å¤–ä¸€ä¸ªé‡è¦è­¦å‘Š:
å‡ ä¹æ‰€æœ‰çš„å»ºè®®éƒ½æ˜¯ä¸Šä¸‹æ–‡ç›¸å…³çš„, ä½†æ˜¯,å¾ˆå°‘å¯¹ä¸Šä¸‹æ–‡æä¾›ç»†èŠ‚;</p>
<p>&quot;ä½ éœ€è¦æ”¶å–æ›´å¤šè´¹ç”¨!&quot; è¿™ç»è¥äº†20å¹´çš„å…¬å¸è¯´, å¤šå¹´ä»¥æ¥æ”¶è´¹&quot;å¤ªä½&quot;,æ— æ³•èµ¢å¾—å®¢æˆ·å¹¶å–å¾—æˆåŠŸ;</p>
<p>&quot;ä½ éœ€è¦å°†ä¸€åˆ‡æ„å»ºä¸ºå¾®æœåŠ¡!&quot; è¯¥å…¬å¸è¡¨ç¤º, æ„å»ºäº†ä¸€ä¸ªå¿«é€Ÿçš„æ•´ä½“,è·å¾—äº†æ•°åƒå®¢æˆ·,ç„¶å,åœ¨å¼€å§‹é‡åˆ°é—®é¢˜æ—¶, å…¨é¢è½¬å‘äº†å¾®æœåŠ¡;</p>
<p>å¦‚æœä¸äº†è§£ä¸Šä¸‹æ–‡, å»ºè®®å°±æ¯«æ— æ„ä¹‰,ç”šè‡³æ›´ç³Ÿç³•,æœ‰å®³;
å¦‚æœé‚£äº›äººæ—©ç‚¹å¬ä»ä»–ä»¬è‡ªå·±çš„å»ºè®®,ä»–ä»¬è‡ªå·±å¯èƒ½ä¼šå› æ­¤å—è‹¦;
å¯¹äºä»»ä½•å»ºè®®å¾ˆéš¾é€ƒè„±è¿™ä¸ªé™·é˜±;
æˆ‘ä»¬å¯èƒ½æ˜¯æˆ‘ä»¬ç»å†çš„ç»ˆç‚¹,ä½†æ˜¯,æˆ‘ä»¬å´æ˜¯é€šè¿‡ç°åœ¨çš„é•œå¤´æ¥è§‚å¯Ÿ;</p>
<p>å› æ­¤,ä¸ºäº†è®©ä½ äº†è§£ä¸€ä¸‹è¿™äº›å»ºè®®çš„æ¥æº,ç‰¹æ­¤è¯´æ˜:
æˆ‘åœ¨èŒä¸šç”Ÿæ¶¯çš„å‰åŠæ®µæ‹…å½“è½¯ä»¶å·¥ç¨‹å¸ˆ,ä¸ºå„ç§å°å‹ä¼ä¸šå’Œåˆåˆ›å…¬å¸å·¥ä½œ,
ç„¶å,æˆ‘è¿›å…¥å’¨è¯¢è¡Œä¸šå¹¶åœ¨è®¸å¤šéå¸¸å¤ªçš„ä¼ä¸šå·¥ä½œ;
æœ€å, æˆ‘å¼€åˆ›äº† <code>Simple Thread</code>,
æˆ‘ä»¬ä»ä¸€ä¸ª2äººå›¢é˜Ÿæˆé•¿ä¸ºä¸€ä¸ª25äººçš„å›¢é˜Ÿ;
10å¹´å‰, æˆ‘ä»¬ä¸»è¦å’Œä¸­å°å‹ä¼ä¸šåˆä½œ,ç°åœ¨æˆ‘ä»¬å’Œå¤§å‹å’Œå°å‹ä¼ä¸šåˆä½œ;</p>
<p>æˆ‘çš„æ‰€æœ‰å»ºè®®æ¥è‡ªäº:</p>
<ul>
<li>å‡ ä¹æ€»æ˜¯åœ¨å°è€Œç²¾å¹²çš„å›¢é˜Ÿä¸­,æˆ‘ä»¬å¿…é¡»ç”¨å¾ˆå°‘çš„èµ„æºä½œå¾ˆå¤šäº‹æƒ…</li>
<li>é‡è§†å·¥ä½œè½¯ä»¶è€Œä¸æ˜¯ç‰¹å®šå·¥å…·</li>
<li>ä¸€ç›´åœ¨å¼€å§‹æ–°é¡¹ç›®,åŒæ—¶è¿˜è¦ç»´æŠ¤ä¸€äº›ç³»ç»Ÿ</li>
<li>é‡è§†å·¥ç¨‹å¸ˆçš„ç”Ÿäº§åŠ›,è¶…è¿‡å…¶å®ƒå¤§å¤šæ•°è€ƒè™‘å› ç´ </li>
<li>...</li>
</ul>
<p>æˆ‘è¿‡å»20å¹´çš„ç»å†å¡‘é€ äº†å¯¹è½¯ä»¶çš„åè§,
å¹¶ä½¿æˆ‘å½¢æˆäº†ä¸€äº›ä¿¡å¿µ;
æˆ‘è¯•å›¾å°†è¿™äº›ä¿¡å¿µå‹ç¼©ä¸ºä¸€ä¸ªæ˜“äºä½¿ç”¨çš„åˆ—è¡¨,
å¸Œæœ›ä½ èƒ½å‘ç°å¥¹ä»¬çš„ä»·å€¼;</p>
<h2 id="å»ºè®®æ¸…å•"><a class="header" href="#å»ºè®®æ¸…å•">å»ºè®®æ¸…å•:</a></h2>
<h3 id="1-æˆ‘ä»ç„¶æ‡‚çš„ä¸æ˜¯å¤ªå¤š"><a class="header" href="#1-æˆ‘ä»ç„¶æ‡‚çš„ä¸æ˜¯å¤ªå¤š">1. æˆ‘ä»ç„¶æ‡‚çš„ä¸æ˜¯å¤ªå¤š</a></h3>
<p>&quot;ä½ æ€ä¹ˆä¸çŸ¥é“ BGP ?&quot;</p>
<p>&quot;ä½ ä»æ¥æ²¡å¬è¯´è¿‡ Rust?&quot;</p>
<p>æˆ‘ä»¬å¤§å¤šæ•°äººéƒ½è¢«äººè¿™ä¹ˆè¯´è¿‡,
è€Œä¸”å¯èƒ½å¬çš„å¤ªé¢‘ç¹äº†;
æˆ‘ä»¬ä¸­è®¸å¤šäººå–œæ¬¢è½¯ä»¶çš„åŸå› å°±æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯ç»ˆèº«å­¦ä¹ è€…, åœ¨è½¯ä»¶é¢†åŸŸ,
æ— è®ºä½ ä»å“ªä¸ªæ–¹å‘çœ‹, éƒ½æœ‰å¹¿é˜”çš„çŸ¥è¯†å‰æ™¯å‘å„ä¸ªæ–¹å‘å‘å±•,
è€Œä¸”æ¯å¤©éƒ½åœ¨æ‰©å±•;
è¿™æ„å‘³ç€å³ä¾¿ä½ åœ¨èŒä¸šç”Ÿæ¶¯ä¸­åº¦è¿‡æ•°åå¹´,
ä½†æ˜¯, å’ŒåŒæ ·åœ¨çœ‹ä¼¼ç›¸ä¼¼çš„è§’è‰²ä¸­åº¦è¿‡æ•°åå¹´çš„äººç›¸æ¯”,
ä»ç„¶å­˜åœ¨å·¨å¤§çš„çŸ¥è¯†å·®è·;
è¶Šæ—©æ„è¯†åˆ°è¿™ç‚¹, å°±èƒ½è¶Šæ—©å¼€å§‹æ‘†è„± &quot;é¡¶æ›¿è€…ç»¼åˆç—‡&quot; ,
è½¬è€Œä¹äºå‘ä»–äººå­¦ä¹ å’Œæ•™å¯¼ä»–äºº;</p>
<h3 id="2-è½¯ä»¶æœ€éš¾çš„éƒ¨åˆ†æ˜¯æ„å»ºæ­£ç¡®çš„ä¸œè¥¿"><a class="header" href="#2-è½¯ä»¶æœ€éš¾çš„éƒ¨åˆ†æ˜¯æ„å»ºæ­£ç¡®çš„ä¸œè¥¿">2. è½¯ä»¶æœ€éš¾çš„éƒ¨åˆ†æ˜¯æ„å»ºæ­£ç¡®çš„ä¸œè¥¿</a></h3>
<p>æˆ‘çŸ¥é“åœ¨è¿™ç‚¹ä¸Šç®—é™ˆè¯æ»¥è°ƒ,
ä½†æ˜¯, å¤§å¤šæ•°è½¯ä»¶å·¥ç¨‹å¸ˆå¹¶ä¸ç›¸ä¿¡çš„åŸå› æ˜¯, ä»–ä»¬è®¤ä¸ºè¿™åœ¨è´¬ä½ä»–ä»¬çš„å·¥ä½œ;
æˆ‘ä¸ªäººè®¤ä¸ºè¿™æ˜¯æ— ç¨½ä¹‹è°ˆï¼›
ç›¸å,è¿™çªå‡ºäº†æˆ‘ä»¬å¿…é¡»å·¥ä½œçš„ç¯å¢ƒæœ¬èº«å¤æ‚æ€§å’Œä¸åˆç†æ€§,
è¿™æ•…å±…äº†æˆ‘ä»¬çš„æŒ‘æˆ˜;
ä½ å¯ä»¥è®¾è®¡å‡ºä¸–ç•Œä¸ŠæŠ€æœ¯ä¸Šæœ€ä»¤äººå°è±¡æ·±åˆ»çš„ä¸œè¥¿,
ç„¶å, å´æ— äººæ„¿æ„ä½¿ç”¨;
è¿™ç§äº‹å„¿ä¸€ç›´åœ¨å‘ç”Ÿ;
è®¾è®¡è½¯ä»¶ä¸»è¦æ˜¯ä¸€ç§å€¾å¬æ´»åŠ¨,
æˆ‘ä»¬ç»å¸¸ä¸å¾—ä¸æˆä¸ºç«•è½¯ä»¶å·¥ç¨‹å¸ˆ, éƒ¨åˆ†é€šçµå¸ˆ, ä»¥åŠéƒ¨åˆ†äººç±»å­¦å®¶;
æŠ•èµ„åœ¨è¿™ä¸ªè®¾è®¡è¿‡ç¨‹, æ— è®ºæ˜¯é€šè¿‡ä¸“é—¨çš„ UX å›¢é˜Ÿ, è¿˜æ˜¯é€šè¿‡ç®€å•çš„è‡ªæˆ‘æ•™è‚²,
éƒ½å°†å¸¦æ¥å·¨å¤§çš„å›æŠ¥;
å› ä¸º, ä½ å¦‚ä½•è®¡ç®—æ„å»ºé”™è¯¯è½¯ä»¶çš„çœŸæ­£æˆæœ¬?
è¿™ä¸ä»…ä»…æ˜¯æŸå¤±å·¥ç¨‹æ—¶é—´...</p>
<h3 id="3-æœ€å¥½çš„è½¯ä»¶å·¥ç¨‹å¸ˆåƒè®¾è®¡å¸ˆä¸€æ ·æ€è€ƒ"><a class="header" href="#3-æœ€å¥½çš„è½¯ä»¶å·¥ç¨‹å¸ˆåƒè®¾è®¡å¸ˆä¸€æ ·æ€è€ƒ">3. æœ€å¥½çš„è½¯ä»¶å·¥ç¨‹å¸ˆåƒè®¾è®¡å¸ˆä¸€æ ·æ€è€ƒ</a></h3>
<p>ä¼Ÿå¤§çš„è½¯ä»¶å·¥ç¨‹å¸ˆä¼šæ€è€ƒä»–ä»¬ä»£ç çš„ç”¨æˆ·ä½“éªŒ;
ä»–ä»¬å¯èƒ½ä¸ä¼šç”¨å„ç§æœ¯è¯­æ¥è€ƒè™‘,
è€Œæ˜¯è€ƒè™‘åº”è¯¥æ˜¯å¤–éƒ¨API/ç¼–ç¨‹API/ç”¨æˆ·ç•Œé¢/åè®®è¿˜æ˜¯å…¶å®ƒä»»ä½•ç•Œé¢;
ä¼Ÿå¤§çš„å·¥ç¨‹å¸ˆä¼šè€ƒè™‘è°å°†ä½¿ç”¨, ä¸ºä»€ä¹ˆè¦ä½¿ç”¨,å¦‚ä½•ä½¿ç”¨,
ä»¥åŠè¿™äº›å¯¹ç”¨æˆ·æ¥è¯´ä»€ä¹ˆæ˜¯æœ€é‡è¦çš„;
ç‰¢è®°ç”¨æˆ·çš„éœ€æ±‚, ç¡®è®¤æ˜¯è‰¯å¥½ç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒ;</p>
<h3 id="4-æœ€å¥½çš„ä»£ç æ˜¯æ²¡æœ‰ä»£ç æˆ–æ˜¯ä½ ä¸å¿…ç»´æŠ¤çš„"><a class="header" href="#4-æœ€å¥½çš„ä»£ç æ˜¯æ²¡æœ‰ä»£ç æˆ–æ˜¯ä½ ä¸å¿…ç»´æŠ¤çš„">4. æœ€å¥½çš„ä»£ç æ˜¯æ²¡æœ‰ä»£ç ,æˆ–æ˜¯ä½ ä¸å¿…ç»´æŠ¤çš„</a></h3>
<p>æˆ‘åªæƒ³è¯´: &quot;ç å†œåªèƒ½ç¼–ç &quot;;
ä½ é—®ä»»ä½•è¡Œä¸šçš„äººå¦‚ä½•è§£å†³é—®é¢˜, 
ä»–ä»¬éƒ½ä¼šåœ¨ä»–ä»¬æ“…é•¿çš„é¢†åŸŸçŠ¯é”™è¯¯;
å«åªæ˜¯äººæ€§;
å¤§å¤šæ•°è½¯ä»¶å·¥ç¨‹å¸ˆæ€»æ˜¯ä¼šåœ¨ç¼–å†™ä»£ç æ—¶å‡ºé”™,
å°¤å…¶æ˜¯å½“éæŠ€æœ¯è§£å†³æ–¹æ¡ˆä¸æ˜æœ—æ—¶;
ä½ ä¸å¿…ç»´æŠ¤çš„ä»£ç ä¹Ÿæ˜¯å¦‚æ­¤;
å½“å¾ˆå¤šè½®å­å·²ç»å­˜åœ¨æ—¶,
å·¥ç¨‹å›¢é˜Ÿå¾ˆå®¹æ˜“æƒ³è¦é‡æ–°å‘æ˜è½®å­;
è¿™æ˜¯ä¸€ç§å¹³è¡¡è¡Œä¸º, 
æœ‰å¾ˆå¤šç†ç”±è®©ä½ è‡ªå·±å†æ¥ä¸€é,
ä½†æ˜¯, è¦æé˜²è¿™ç§ &quot;æ²¡åœ¨æ­¤ç°å®&quot;(â€œNot Invented Hereâ€) ç»¼åˆç—‡;</p>
<h3 id="5-è½¯ä»¶æ˜¯è¾¾åˆ°ç›®çš„çš„æ‰‹æ®µ"><a class="header" href="#5-è½¯ä»¶æ˜¯è¾¾åˆ°ç›®çš„çš„æ‰‹æ®µ">5. è½¯ä»¶æ˜¯è¾¾åˆ°ç›®çš„çš„æ‰‹æ®µ</a></h3>
<p>ä»»ä½•è½¯ä»¶å·¥ç¨‹å¸ˆçš„ä¸»è¦å·¥ä½œæ˜¯äº¤ä»˜ä»·å€¼;</p>
<p>å¾ˆå°‘æœ‰è½¯ä»¶å¼€å‘è€…ç†è§£è¿™ä¸€ç‚¹, å°†å…¶å†…åŒ–çš„å°±æ›´å°‘äº†;
çœŸæ­£å°†å…¶å†…åŒ–å, èƒ½å¯¼è‡´è§£å†³é—®é¢˜çš„ä¸åŒæ–¹å¼,
ä»¥åŠè§‚å¯Ÿå·¥å…·çš„ä¸åŒæ–¹å¼;
å¦‚æœçœŸçœŸçš„ç›¸ä¿¡è½¯ä»¶æ˜¯ä»å±äºç»“æœçš„,
ä½ å°±ä¼šå‡†å¤‡å¥½æ‰¾åˆ°çœŸæ­£&quot;é€‚åˆçš„å·¥å…·&quot;,
æœ‰æ—¶å¯èƒ½æ ¹æœ¬ä¸æ˜¯è½¯ä»¶;</p>
<h3 id="6-æœ‰æ—¶ä½ å¿…é¡»åœæ­¢ç£¨é”¯ç›´æ¥å¼€å§‹ç å±"><a class="header" href="#6-æœ‰æ—¶ä½ å¿…é¡»åœæ­¢ç£¨é”¯ç›´æ¥å¼€å§‹ç å±">6. æœ‰æ—¶ä½ å¿…é¡»åœæ­¢ç£¨é”¯,ç›´æ¥å¼€å§‹ç å±</a></h3>
<p>æœ‰äº›äººå€¾å‘äºè·³å…¥é—®é¢˜, å¹¶ç«‹å³å¼€å§‹ç¼–å†™ä»£ç ;
å…¶å®ƒäººå¾€å¾€æƒ³è¦ç ”ç©¶å’Œé™·å…¥ç¡¬ä»¶åˆ†æè¿›è€Œç˜«ç—ª;
åœ¨è¿™äº›æƒ…å†µä¸­,ä¸ºè‡ªå·±è®¾å®šä¸€ä¸ªæˆªæ­¢æ—¥æœŸ,
ç„¶å, å¼€å§‹æ¢ç´¢è§£å†³æ–¹æ¡ˆ;
å½“ä½ å¼€å§‹è§£å†³é—®é¢˜æ—¶,ä½ å¾ˆå¿«èƒ½å­¦ä¹ åˆ°æ›´å¤š,
è¿™ä¹Ÿå°†å¼•å¯¼ä½ è¿­ä»£åˆ°æ›´å¥½çš„è§£å†³æ–¹æ¡ˆ;</p>
<h3 id="7-å¦‚æœä½ ä¸èƒ½å¾ˆå¥½çš„ç†è§£æ‰€æœ‰å¯èƒ½æ€§-å°±æ— æ³•è®¾è®¡å‡ºå¥½çš„ç³»ç»Ÿ"><a class="header" href="#7-å¦‚æœä½ ä¸èƒ½å¾ˆå¥½çš„ç†è§£æ‰€æœ‰å¯èƒ½æ€§-å°±æ— æ³•è®¾è®¡å‡ºå¥½çš„ç³»ç»Ÿ">7. å¦‚æœä½ ä¸èƒ½å¾ˆå¥½çš„ç†è§£æ‰€æœ‰å¯èƒ½æ€§, å°±æ— æ³•è®¾è®¡å‡ºå¥½çš„ç³»ç»Ÿ</a></h3>
<p>è¿™æ˜¯æˆ‘ä¸€ç›´åœ¨åŠªåŠ›è§£å†³çš„é—®é¢˜,
å› ä¸º, æˆ‘çš„èŒè´£ä½¿æˆ‘åœ¨è½¯ä»¶å·¥ç¨‹çš„æ—¥å¸¸å·¥ä½œä¸­è¶Šæ¥è¶Šè¿œ;
å³ä¸Šå¼€å‘è€…ç”Ÿæ€æ˜¯ä¸€é¡¹å·¨å¤§çš„å·¥ä½œ,
ä½†æ˜¯,äº†è§£ä»€ä¹ˆæ˜¯å¯èƒ½çš„è‡³å…³é‡è¦;
å¦‚æœä½ ä¸äº†è§£ç»™å®šç”Ÿæ€ä¸­æœ‰ä»€ä¹ˆæ˜¯å¯èƒ½çš„,ä»¥åŠä»€ä¹ˆæ˜¯å¯ç”¨çš„,
é‚£ä¹ˆä½ å°†å‘ç°é™¤äº†æœ€ç®€å•çš„é—®é¢˜ä¹‹å¤–,
ä¸å¯èƒ½è®¾è®¡å‡ºä¸€ä¸ªåˆç†çš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³æ‰€æœ‰é—®é¢˜;
æ€»è€Œè¨€ä¹‹, è¦è­¦æƒ•é‚£äº›å¾ˆé•¿æ—¶é—´æ²¡æœ‰ç¼–å†™ä»»ä½•ä»£ç çš„æ¶æ„ä¸“å®¶;</p>
<h3 id="8-æ¯ä¸ªçš„äº†äº†çš„éƒ½å¾ˆç³Ÿç²•å…‹æœä¸«çš„"><a class="header" href="#8-æ¯ä¸ªçš„äº†äº†çš„éƒ½å¾ˆç³Ÿç²•å…‹æœä¸«çš„">8. æ¯ä¸ªçš„äº†äº†çš„éƒ½å¾ˆç³Ÿç²•,å…‹æœä¸«çš„</a></h3>
<p>Bjarne Stroustrup æœ‰å¥åè¨€:
&quot;åªæœ‰ä¸¤ç§è¯­è¨€: äººä»¬æŠ±æ€¨çš„è¯­è¨€, å’Œæ²¡äººä½¿ç”¨çš„è¯­è¨€&quot;;</p>
<p>è¿™ä¹Ÿå¯ä»¥æ‹“å±•åˆ°å¤§å‹ç³»ç»Ÿ;
æ²¡æœ‰&quot;æ­£ç¡®&quot;çš„æ¶æ„, ä½ æ°¸è¿œæ— æ³•å¿è¿˜æ‰€æœ‰æŠ€æœ¯å€ºåŠ¡,
ä½ æ°¸è¿œæ— æ³•è®¾è®¡å‡ºå®Œç¾çš„ç•Œé¢,
ä½ çš„æµ‹è¯•æ€»æ˜¯å¤ªæ…¢;
è¿™ä¸æ˜¯æ°¸ä¸è®©äº‹æƒ…å˜å¾—æ›´å¥½çš„å€Ÿå£,
è€Œæ˜¯ä¸€ç§ç»™ä½ è§‚ç‚¹çš„æ–¹å¼;
å°‘æ‹…å¿ƒä¼˜é›…å’Œå®Œç¾;
ç›¸å, åŠªåŠ›æŒç»­æ”¹è¿›å¹¶åˆ›å»ºä¸€ä¸ªä½ çš„å›¢é˜Ÿå–œæ¬¢åœ¨å…¶ä¸­å·¥ä½œ,
å¹¶å¯ä»¥æŒç»­åˆ›é€ ä»·å€¼çš„å®œäººç³»ç»Ÿ;</p>
<h3 id="9-æ— äººé—®è¶³ä¸ºä»€ä¹ˆ"><a class="header" href="#9-æ— äººé—®è¶³ä¸ºä»€ä¹ˆ">9. æ— äººé—®è¶³&quot;ä¸ºä»€ä¹ˆ&quot;</a></h3>
<p>æŠ“ä½ä»»ä½•æœºä¼šè´¨ç–‘&quot;ä½œäº‹æ–¹å¼&quot;çš„å‡è®¾å’Œæ–¹æ³•;
æœ‰æ–°äººåŠ å…¥å˜›?
æ³¨æ„ä»–ä»¬åœ¨å“ªé‡Œæ„Ÿåˆ°å›°æƒ‘ä»¥åŠä»–ä»¬åœ¨é—®ä»€ä¹ˆé—®é¢˜;
æœ‰æ²¡æœ‰æ— æ„ä¹‰æ–°åŠŸèƒ½è¯·æ±‚?
ç¡®ä¿ä½ äº†è§£ç›®æ ‡ä»¥åŠæ˜¯ä»€ä¹ˆæ¨åŠ¨äº†å¯¹è¿™ä¸€åŠŸèƒ½çš„æ¸´æœ›;
å¦‚æœä½ æ²¡æœ‰å¾—åˆ°æ˜ç¡®çš„ç­”æ¡ˆ,
è¯·ç»§ç»­é—®ä¸ºä»€ä¹ˆ, ç›´åˆ°ä½ æ˜ç™½ä¸ºæ­¢;</p>
<h3 id="10-æˆ‘ä»¬åº”è¯¥æ›´ä¸“æ³¨äºé¿å…01x-ç¨‹åºå‘˜è€Œä¸æ˜¯å¯»æ‰¾-10x-ç¨‹åºå‘˜"><a class="header" href="#10-æˆ‘ä»¬åº”è¯¥æ›´ä¸“æ³¨äºé¿å…01x-ç¨‹åºå‘˜è€Œä¸æ˜¯å¯»æ‰¾-10x-ç¨‹åºå‘˜">10. æˆ‘ä»¬åº”è¯¥æ›´ä¸“æ³¨äºé¿å…0.1x ç¨‹åºå‘˜,è€Œä¸æ˜¯å¯»æ‰¾ 10x ç¨‹åºå‘˜</a></h3>
<p>10å€é€Ÿç¨‹åºå‘˜æ˜¯ä¸€ä¸ªæ„šè ¢çš„ç¥è¯;
æŸäººå¯ä»¥åœ¨1å¤©é‡Œç”Ÿäº§å‡ºå¦å¤–ä¸€ä½æœ‰èƒ½åŠ›/å‹¤å¥‹/æœ‰ç±»ä¼¼ç»éªŒçš„ç¨‹åºå‘˜éœ€è¦åœ¨2å‘¨ä»¥å†…ç”Ÿäº§ä»£ç çš„æƒ³æ³•æ˜¯æ„šè ¢çš„;
æˆ‘è§è¿‡ç¨‹åºå‘˜ç¼–å†™10å€çš„ä»£ç ,
ç„¶å, ä½ å¿…é¡»ä¿®å¤å®ƒ10å€ä»¥ä¸Šçš„æ¬¡æ•°;
æŸççˆ±å¯ä»¥æˆä¸º10å€ç¨‹åºå‘˜çš„å”¯ä¸€æ–¹æ³•,
æ˜¯å°†ä»–ä»¬å’Œ 0.1 å€é€Ÿç¨‹åºå‘˜è¿›è¡Œæ¯”è¾ƒ;
æœ‰äººæµªè´¹æ—¶é—´, ä¸å¯»æ±‚åé¦ˆ, ä¸æµ‹è¯•ä»£ç ,
ä¸è€ƒè™‘è¾¹ç¼˜æƒ…å†µç­‰ç­‰...</p>
<p>æˆ‘ä»¬åº”è¯¥å…³å¿ƒè®© 0.1 å€é€Ÿç¨‹åºå‘˜è¿œç¦»æˆ‘ä»¬çš„å›¢é˜Ÿ,
è€Œä¸æ˜¯å¯»æ‰¾ç¥è¯èˆ¬çš„ 10 å€é€Ÿç¨‹åºå‘˜;</p>
<h3 id="11-é«˜çº§å·¥ç¨‹å¸ˆå’Œä¸‹çº§å·¥ç¨‹å¸ˆé—´æœ€å¤§çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ä»–ä»¬å·²ç»å½¢æˆäº†å¯¹äº‹æƒ…åº”è¯¥å¦‚ä½•å‘å±•çš„åè§"><a class="header" href="#11-é«˜çº§å·¥ç¨‹å¸ˆå’Œä¸‹çº§å·¥ç¨‹å¸ˆé—´æœ€å¤§çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ä»–ä»¬å·²ç»å½¢æˆäº†å¯¹äº‹æƒ…åº”è¯¥å¦‚ä½•å‘å±•çš„åè§">11. é«˜çº§å·¥ç¨‹å¸ˆå’Œä¸‹çº§å·¥ç¨‹å¸ˆé—´æœ€å¤§çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ä»–ä»¬å·²ç»å½¢æˆäº†å¯¹äº‹æƒ…åº”è¯¥å¦‚ä½•å‘å±•çš„åè§</a></h3>
<p>æ²¡æœ‰ä»€ä¹ˆæ¯”å¯¹ä»–ä»¬çš„å·¥å…·æˆ–æ˜¯å¦‚ä½•æ„å»ºè½¯ä»¶æ²¡æœ‰æœ‰æ„è§çš„é«˜çº§å·¥ç¨‹å¸ˆæ›´è®©æˆ‘æ‹…å¿ƒçš„äº‹å„¿äº†;</p>
<p>æˆ‘å®æ„¿æœ‰äººç»™æœ‰å¼ºçƒˆçš„åå¯¹æ„è§, ä¹Ÿä¸æ„¿ä»–ä»¬å®Œå…¨æ²¡æœ‰æ„è§;
å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ä½ çš„å·¥å…·,è€Œä¸”ä½ è¿˜æ²¡æœ‰æ›´å¤šå–œæ¬¢æˆ–æ˜¯è®¨åŒçš„æƒ…ç»ª,
é‚£ä¹ˆ, ä½ éœ€è¦æ›´å¤šä½“éªŒ;
ä½ éœ€è¦æ¢ç´¢å…¶å®ƒè¯­è¨€/åº“/èŒƒä¾‹;
æ²¡æœ‰ä»€ä¹ˆæ¯”ç§¯æå¯»æ‰¾å…¶å®ƒäººå¦‚ä½•ä½¿ç”¨å’Œä½ ä¸åŒçš„å·¥å…·å’ŒæŠ€æœ¯æ¥å®Œæˆä»»åŠ¡æ›´å¿«æé«˜æŠ€èƒ½çš„æ–¹æ³•äº†;</p>
<h3 id="12-äººä»¬å¹¶ä¸æ˜¯çœŸæƒ³åˆ›æ–°"><a class="header" href="#12-äººä»¬å¹¶ä¸æ˜¯çœŸæƒ³åˆ›æ–°">12. äººä»¬å¹¶ä¸æ˜¯çœŸæƒ³åˆ›æ–°</a></h3>
<p>äººä»¬ç»å¸¸è°ˆè®ºåˆ›æ–°,
ä½†æ˜¯, ä»–ä»¬é€šå¸¸å¯»æ‰¾çš„æ˜¯å»‰ä»·çš„èƒœåˆ©å’Œæ–°å¥‡;
å¦‚æœä½ åœ¨çœŸæ­£çš„åˆ›æ–°, å¹¶æƒ³æ”¹å˜äººä»¬ä½œäº‹çš„æ–¹å¼,
é‚£ä¹ˆå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šæ”¶åˆ°è´Ÿé¢åé¦ˆ;
å¦‚æœä½ ç›¸ä¿¡è‡ªå·±åœ¨ä½œçš„äº‹å„¿,
å¹¶çŸ¥é“ç¡®å®ä¼šæ”¹å–„äº‹æƒ…,
é‚£ä¹ˆä¸ºè‡ªå·±çš„é•¿æœŸæˆ˜æ–—ä½œå¥½å‡†å¤‡;</p>
<h3 id="13-æ•°æ®æ˜¯ä½ ç³»ç»Ÿä¸­æœ€é‡è¦çš„éƒ¨åˆ†"><a class="header" href="#13-æ•°æ®æ˜¯ä½ ç³»ç»Ÿä¸­æœ€é‡è¦çš„éƒ¨åˆ†">13. æ•°æ®æ˜¯ä½ ç³»ç»Ÿä¸­æœ€é‡è¦çš„éƒ¨åˆ†</a></h3>
<p>æˆ‘è§è¿‡å¾ˆå¤šç³»ç»Ÿ, å…¶ä¸­å¸Œæœ›æ•°æ®å®Œå¤‡æ€§æ˜¯ç³»ç»Ÿä¸»è¦æœºåˆ¶;
åœ¨è¿™ç§ç³»ç»Ÿä¸­,
ä»»ä½•åœ¨é»„é‡‘è·¯å¾„ä¹‹å¤–å‘ç”Ÿçš„äº‹æƒ…,éƒ½ä¼šå¿ƒäº§ç”Ÿéƒ¨åˆ†è„æ•°æ®;
å°†æ¥å¤„ç†è¿™äº›æ•°æ®å°†æ˜¯ä¸€åœºå™©æ¢¦;
è¯·è®°ä½, ä½ çš„æ•°æ®å¯èƒ½ä¼šæ¯”ä½ çš„ä»£ç è¦é•¿å¯¿;
èŠ±ç²¾åŠ›ä¿æŒæ•°æ®ç§©åºå’Œæ¸…æ´,ä»é•¿è¿œçœ‹ä¼šæœ‰å¥½çš„å›æŠ¥;</p>
<h3 id="14-å¯»æ‰¾æŠ€æœ¯é²¨é±¼"><a class="header" href="#14-å¯»æ‰¾æŠ€æœ¯é²¨é±¼">14. å¯»æ‰¾æŠ€æœ¯é²¨é±¼</a></h3>
<p>ä»ç„¶å­˜åœ¨çš„æ—§æŠ€æœ¯æ˜¯é²¨é±¼è€Œä¸æ˜¯æé¾™;
ä»–ä»¬è§£å†³é—®é¢˜èƒ½åŠ›å¦‚æ­¤ä¹‹å¼º,ä»¥è‡³åœ¨æŠ€æœ¯ä¸–ç•Œä¸æ–­å‘ç”Ÿçš„å¿«é€Ÿå˜åŒ–ä¸­å¹¸å­˜ä¸‹æ¥;
ä¸è¦å’Œè¿™äº›æŠ€æœ¯æ‰“èµŒ,
åªæœ‰åœ¨æœ‰å……åˆ†ç†ç”±çš„æƒ…å†µä¸‹æ‰è´Ÿæ‹…å®ƒä»¬;
è¿™äº›å·¥å…·ä¸ä¼šåè€Œä¸å®,
ä¹Ÿä¸ä¼šä»¤äººå…´å¥‹,
å¾—æ˜¯ä¸æ˜¯, å®ƒä»¬èƒ½åœ¨æ²¡æœ‰å¾ˆå¤šä¸çœ ä¹‹å¤œçš„æƒ…å†µä¸‹å®Œæˆå·¥ä½œ;</p>
<h3 id="15-è¿˜è¦æŠŠè°¦é€Šè¯¯è®¤ä¸ºæ— çŸ¥"><a class="header" href="#15-è¿˜è¦æŠŠè°¦é€Šè¯¯è®¤ä¸ºæ— çŸ¥">15. è¿˜è¦æŠŠè°¦é€Šè¯¯è®¤ä¸ºæ— çŸ¥</a></h3>
<p>æœ‰å¾ˆå¤šè½¯ä»¶å·¥ç¨‹å¸ˆé™¤éè¢«ç›´æ¥é—®åˆ°,
å¦åˆ™ä¸ä¼šå‘è¡¨æ„è§;
æ°¸è¿œä¸è¦è®¤ä¸ºä»…ä»…å› ä¸ºæœ‰äººæ²¡æœ‰å°†æ„è§æ‰”åˆ°ä½ é¢å‰,
ä»–ä»¬å°±æ²¡æœ‰ä»€ä¹ˆå¯ä»¥è¡¥å……çš„;
æœ‰æ—¶, æœ€åµé—¹çš„äººæ˜¯æˆ‘ä»¬æœ€ä¸æƒ³å¬çš„;
å’Œå‘¨å›´äººäº¤è°ˆ, å¯»æ±‚ä»–ä»¬çš„åé¦ˆå’Œå»ºè®®;
ä½ ä¼šåº†å¹¸ä½ è¿™ä¹ˆä½œäº†;</p>
<h3 id="16-è½¯ä»¶å·¥ç¨‹å¸ˆåº”è¯¥å®šæœŸå†™ä½œ"><a class="header" href="#16-è½¯ä»¶å·¥ç¨‹å¸ˆåº”è¯¥å®šæœŸå†™ä½œ">16. è½¯ä»¶å·¥ç¨‹å¸ˆåº”è¯¥å®šæœŸå†™ä½œ</a></h3>
<p>è½¯ä»¶å·¥ç¨‹å¸ˆåº”è¯¥å®šæœŸå†™ blog/æ—¥è®°/æ–‡æ¡£,
é€šå¸¸ä½œéœ€è¦ä»–ä»¬ä¿æŒä¹¦é¢æ²Ÿé€šæŠ€å·§çš„äº‹å„¿;
å†™ä½œå¯ä»¥å¸®åŠ©ä½ æ€è€ƒé—®é¢˜,
å¹¶å¸®åŠ©ä½ èƒ½æ›´æœ‰æ•ˆçš„å’Œå›¢é˜Ÿä»¥åŠæœªæ¥çš„è‡ªå·±æ²Ÿé€š;
è‰¯å¥½çš„ä¹¦é¢æ²Ÿé€šæ˜¯ä»»ä½•è½¯ä»¶å·¥ç¨‹å¸ˆéƒ½å¿…é¡»æŒæ¡çš„æœ€é‡è¦æŠ€èƒ½ä¹‹ä¸€;</p>
<h3 id="17-å°½å¯èƒ½ä¿æŒæµç¨‹ç®€æ´"><a class="header" href="#17-å°½å¯èƒ½ä¿æŒæµç¨‹ç®€æ´">17. å°½å¯èƒ½ä¿æŒæµç¨‹ç®€æ´</a></h3>
<p>ç°åœ¨æ¯ä¸ªäººæƒ³æƒ³å˜å¾—æ•æ·,
ä½†æ˜¯,&quot;æ•æ·&quot;å°±æ˜¯ä»¥å°å—çš„æ–¹æ³•æ„å»ºäº‹ç‰©/å­¦ä¹ /ç„¶åè¿­ä»£;
å¦‚æœæœ‰äººè¯•å›¾åœ¨å…¶ä¸­å¡å…¥æ›´å¤šä¸œè¥¿,
é‚£ä¹ˆ,ä»–ä»¬å¯èƒ½åªæ˜¯åœ¨å–ä¸œè¥¿;
è¿™å¹¶ä¸æ˜¯è¯´äººä»¬ä¸éœ€è¦é—®è´£æˆ–æ˜¯å¸®åŠ©ä»¥ä¾¿ç”¨è¿™ç§æ–¹å¼åä½œ,
ä½†æ˜¯, ä½ æœ‰å¤šå°‘æ¬¡å¬åˆ°ä½ æœ€å–œæ¬¢çš„ç§‘æŠ€å…¬å¸æˆ–æ˜¯å¤§å‹å¼€æºé¡¹ç›®æˆå‘˜æœ‰å¹å˜˜ä»–ä»¬çš„ Scrum æµç¨‹æœ‰å¤šNB?
ä¿æŒç²¾ç›Šè¿‡ç¨‹,
ç›´åˆ°ä½ çŸ¥é“ä½ éœ€è¦æ›´å¤š;
ç›¸ä¿¡ä½ çš„å›¢é˜Ÿ,ä»–ä»¬èƒ½äº¤ä»˜æˆæœ;</p>
<h3 id="18-è½¯ä»¶å·¥ç¨‹å¸ˆå’Œæ‰€æœ‰äººä¸€æ ·éœ€è¦æœ‰ä¸»äººç¿ç²¾ç¥"><a class="header" href="#18-è½¯ä»¶å·¥ç¨‹å¸ˆå’Œæ‰€æœ‰äººä¸€æ ·éœ€è¦æœ‰ä¸»äººç¿ç²¾ç¥">18. è½¯ä»¶å·¥ç¨‹å¸ˆå’Œæ‰€æœ‰äººä¸€æ ·,éœ€è¦æœ‰ä¸»äººç¿ç²¾ç¥</a></h3>
<p>å¦‚æœä½ å°†æŸäººä»ä»–ä»¬çš„å·¥ä½œæˆæœå°åˆ†ç¦»å‡ºæ¥,
ä»–ä»¬å°±ä¼šæ›´å½¡å…³å¿ƒä»–ä»¬çš„å·¥ä½œ;
æˆ‘è®¤ä¸ºè¿™å‡ ä¹æ˜¯å¿…ç„¶çš„;
è¿™æ˜¯è·¨èŒèƒ½å›¢é˜Ÿä½œçš„å¦‚æ­¤å‡ºè‰²,
ä»¥åŠ DevOps å˜å¾—å¦‚æ­¤æµè¡Œçš„ä¸»è¦åŸå› ;
è¿™ä¸ä»…ä»…æ˜¯å…³äºäº¤æ¥å’Œæ•ˆç‡ä½ä¸‹,
è€Œæ˜¯å…³äºä»å¤´åˆ°å°¾æ‹¥æœ‰æ•´ä¸ªè¿‡ç¨‹, å¹¶ä¸”æ˜¯ç›´æ¥çš„è´Ÿè´£äº¤ä»˜ä»·å€¼;
è®©ä¸€ç¾¤å……æ»¡æ¿€æƒ…çš„äººå®Œå…¨æ‹¥æœ‰è®¾è®¡/æ„å»ºå’Œäº¤ä»˜è½¯ä»¶(æˆ–ä»»ä½•ä¸œè¥¿)çš„æƒåˆ©,
æƒŠäººçš„äº‹æƒ…å°±ä¼šå‘ç”Ÿ;</p>
<p>(è¯‘æ³¨: å½“ç„¶, å¾—æ˜¯æœ‰æ„ä¹‰çš„äº‹åŠ¡, ä¸ºé¢†å¯¼ä¸€äº›å¹»æƒ³å»åŠªåŠ›å¾ˆéš¾æœ‰ä»€ä¹ˆä¸»äººç¿ç²¾ç¥èƒ½è§¦å‘)</p>
<h3 id="19-é¢è¯•å¯¹äºå‘Šè¯‰æŸäººå°†æˆä¸ºå›¢é˜Ÿæˆå‘˜æœ‰å¤šèµå‡ ä¹æ¯«æ— ä»·å€¼"><a class="header" href="#19-é¢è¯•å¯¹äºå‘Šè¯‰æŸäººå°†æˆä¸ºå›¢é˜Ÿæˆå‘˜æœ‰å¤šèµå‡ ä¹æ¯«æ— ä»·å€¼">19. é¢è¯•å¯¹äºå‘Šè¯‰æŸäººå°†æˆä¸ºå›¢é˜Ÿæˆå‘˜æœ‰å¤šèµ,å‡ ä¹æ¯«æ— ä»·å€¼</a></h3>
<p>é¢è¯•æœ€å¥½èŠ±åœ¨äº†è§£æŸäººæ˜¯è°,
ä»¥åŠä»–ä»¬å¯¹ç‰¹å®šä¸“ä¸šé¢†åŸŸçš„å…´è¶£ç¨‹åº¦ä¸Š;
è¯•å›¾æ¨æµ‹ä»–ä»¬å°†æˆä¸ºå¤šä¹ˆä¼˜ç§€çš„å›¢é˜Ÿæˆå‘˜æ˜¯å¾’åŠ³çš„;
ç›¸ä¿¡æˆ‘,
ä¸€ä¸ªäººæœ‰å¤šèªæ˜æˆ–æ˜¯å¤šåšå­¦ä¹Ÿä¸èƒ½å¾ˆå¥½çš„è¯æ˜ä»–ä»¬å°†æˆä¸ºä¸€åä¼˜ç§€çš„å›¢é˜Ÿæˆå‘˜;
æ²¡æœ‰äººä¼šåœ¨é¢è¯•ä¸­å‘Šè¯‰ä½ ä»–ä»¬ä¸å¯é /çˆ±è¾±éª‚/è‡ªè´Ÿæˆ–æ˜¯ä»ä¸å‡†æ—¶å‚åŠ ä¼šè®®;
äººä»¬å¯èƒ½ä¼šå£°ç§°ä»–ä»¬å¯¹è¿™äº›äº‹æƒ…æœ‰&quot;ä¿¡å·&quot;...
&quot;å¦‚æœä»–ä»¬åœ¨ç¬¬ä¸€é¢è¯•æ—¶è¯¢é—®è¯·å‡,é‚£ä¹ˆä»–ä»¬æ°¸è¿œä¸ä¼šå»è¯·å‡!&quot;
ä½†æ˜¯, è¿™äº›éƒ½æ˜¯åºŸè¯;
å¦‚æœä½ ä½¿ç”¨è¿™ç§ä¿¡å·, åªæ˜¯åœ¨çŒœæµ‹å¹¶æ‹’ç»ä¼˜ç§€çš„å€™é€‰äºº;</p>
<h3 id="20-å§‹ç»ˆåŠªåŠ›æ„å»ºä¸€ä¸ªæ›´å°çš„ç³»ç»Ÿ"><a class="header" href="#20-å§‹ç»ˆåŠªåŠ›æ„å»ºä¸€ä¸ªæ›´å°çš„ç³»ç»Ÿ">20. å§‹ç»ˆåŠªåŠ›æ„å»ºä¸€ä¸ªæ›´å°çš„ç³»ç»Ÿ</a></h3>
<p>æœ‰å¾ˆå¤šåŠ›é‡ä¿ƒä½¿ä½ é¢„å…ˆæ„å»ºæ›´å¤§çš„ç³»ç»Ÿ;
é¢„ç®—åˆ†é…, æ— æ³•æµ‹å®šåº”è¯¥ç²¾å‡å“ªäº›åŠŸèƒ½,
å¸Œæœ›æä¾›ç³»ç»Ÿçš„&quot;æœ€ä½³ç‰ˆæœ¬&quot;;
æ‰€æœ‰,è¿™äº›äº‹æƒ…éƒ½éå¸¸æœ‰åŠ›çš„æ¨åŠ¨æˆ‘ä»¬æ„å»ºæ›´å¤š;
ä½ åº”è¯¥é˜»æ­¢è¿™ä¸ª;
ä½ åœ¨æ„å»ºä¸€ä¸ªç³»ç»Ÿæ—¶å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿,
ä½ æœ€ç»ˆå°†è¿­ä»£åˆ°ä¸€ä¸ªæ¯”ä½ æœ€åˆè®¾è®¡çš„ç³»ç»Ÿæ›´å¥½çš„ç‰ˆæœ¬;
ä»¤äººæƒŠè®¶çš„å¿…é¡»,
è¿™å¯¹å¤ªå¤šæ•°äººæ¥è¯´æ˜¯éš¾ä»¥æ¥å—çš„;</p>
<h2 id="ä½ çš„æ•…äº‹å‘¢"><a class="header" href="#ä½ çš„æ•…äº‹å‘¢">ä½ çš„æ•…äº‹å‘¢?</a></h2>
<p>è¿™æ˜¯å…¨éƒ¨äº†, 20å¹´çš„è½¯ä»¶ç”Ÿæ¶¯æç‚¼å‡ºæ¥çš„çš„20æ¡ç²¾è¾Ÿæ–­è¨€;</p>
<p>å¦‚æœæœ‰ä»€ä¹ˆèƒ½å¼•å‘ä½ çš„å…±é¸£,
æˆ‘å¾ˆå¾ˆå¬å¬;
æˆ‘ä¹Ÿå¾ˆæƒ³çŸ¥é“ä½ åœ¨èŒä¸šç”Ÿæºä¸­ç§¯ç´¯çš„æ™ºæ…§å¹¶æ„¿æ„åˆ†äº«å‡ºæ¥;
è¯·åœ¨è¯„è®ºä¸­ç•™è¨€å§;</p>
<h2 id="refer-3"><a class="header" href="#refer-3">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<p>å¾ˆæœ‰äººä¸åŒæ„æ‰€æœ‰è§‚ç‚¹: <a href="https://www.simplethread.com/20-things-ive-learned-in-my-20-years-as-a-software-engineer/#comment-142472">January 25, 2023 at 7:25 pm</a></p>
<h3 id="hard-disagree-with-most-of-the-20-items"><a class="header" href="#hard-disagree-with-most-of-the-20-items">Hard disagree with most of the 20 items.</a></h3>
<ol>
<li>
<p>Writing software is difficult, tedious and needs real work. No silver bullet libraries, no methodology, no framework, no IOT, no amount of unit tests will get the work done faster.</p>
</li>
<li>
<p>Developers collect tools, libraries and pet technologies and make projects go over their time and budget by doing it.</p>
</li>
<li>
<p>Code should encapsulate algorithms and not be structured other wise. Code should follow the business logic and be readable and match business requirements easily.</p>
</li>
<li>
<p>Forgetting history keeps the productivity and industry down. Microsoft re-discovering the same old technology which existed on 1960s mainframes for the 7th time just to sell products, trademark buzzwords, training, certification and everything is an anchor around the modern developerâ€™s neck. Think file transfer -&gt; X12 -&gt; serial communication -&gt; raw socket packets -&gt; corba -&gt; xml soap -&gt; xml http -&gt; Rest JSON http -&gt; gRpc as a 50 year journey of rediscovering the same thing repeatedly, each not really that much better than the older technologies, wrapping mounds of interlarded crud on top of fragile, hard to program libraries and the square peg in a round hole mismatch.</p>
</li>
<li>
<p>Refusing to hold W3C and large tech companies accountable for not fixing web HTTP, HTML, CSS and JavaScript for 25+ years.
â€“ How can I create a control which has HTML, CSS, JS which has encapsulated CSS, encapsulated HTML, encapsulated JS without a 10,000 file framework?
â€“ How to match HTML DOM elements with JS without using quoted magic strings? Quoted magic strings were proven anti-productivity and anti-quality in the 1960s
â€“ How to have a UI without the everything is a call back and function pointer? Function pointers with modern wrappings are just as bad as the 1060s computed jump to function tables</p>
</li>
<li>
<p>Forgetting that tech is a business with a 7 year hype cycle, with the new thing being embryonically hyped for 2 years by cutting edge bloggers, then 2 years by sales marketing of companies, then 3 years of disappointment for companies trying to implement it. Followed by, abandonment when the ROI does not work out. Resume driven development, just for business persons.
And yes, thereâ€™s a new hype every 2 years to waste time and money on</p>
</li>
<li>
<p>Not holding tech companies accountable when they release major products, .net core, which have less than a 5 year full support lifecycle. Long term support .net is under 3 years.
That is a forced upgrade every 3 years for every .net system just to pass the IT auditors at a large company</p>
</li>
<li>
<p>Devaluing your own worth and work as a developer by telling everyone that the proposed product/task is easy. Software dev is hard work, less than 1 of a 1000 people can even do it poorly.
I would not go to a brain surgeon that told everyone that what he does is easy.</p>
</li>
<li>
<p>Forgetting that software development is a hard, tedious, isolated job where people desiring lots of human interaction will rapidly leave the field by their own choice and lots of people not getting into the field by their own choice.</p>
</li>
<li>
<p>Not telling people that you as a developer have to say â€œNo, itâ€™s too expensiveâ€ or â€œNo, itâ€™s too riskyâ€ as a regular part of your job. Persons not developing software treating you poorly with career ending consequences just because you wonâ€™t accept the death march cross to bear of impossible requirements of an impossibly short deadline</p>
</li>
<li>
<p>Not helping your fellow developers out. Speak well of your co-developers, team, and industry. Donâ€™t downplay the difficulty, complexity or contribution of software.</p>
</li>
<li>
<p>Not calling people out when they think that more data, metrics for everything will automatically solve problems. Ask for a business case, ask for the questions they want to answer (in written form), get the business case and questions they want to answer from the requestor, make sure they are approved before committing to a tight deadline</p>
</li>
<li>
<p>Not damaging the next developer on your project â€“ too many technologies, framework of the month, just another nuget package, one more class, have another 3 patterns, data on disk, data in database structure and consistency is not important and, yes, this system will never receive/send upstream/downstream data</p>
</li>
<li>
<p>Accepting code without parameter checking, error handling or in-line comment documentation (<em>cough</em> vendorâ€™s happy path â€˜docâ€™ page or <em>cough</em> signature only documentation with no example code or error handling.)</p>
</li>
<li>
<p>Misguided acceptance that best practices are best and not just a short nicely sized blog entry. Best practices, in many cases, do not scale for large 1,000,000+ line of code systems and make maintenance harder.</p>
</li>
<li>
<p>Not challenging the â€˜more technology is betterâ€™ approach</p>
</li>
</ol>
<h2 id="logging-3"><a class="header" href="#logging-3">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230201 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æŠ€å·§"><a class="header" href="#æŠ€å·§">æŠ€å·§</a></h1>
<blockquote>
<p>tips...é‡è¦ä¹Ÿä¸é‡è¦</p>
</blockquote>
<h2 id="background-3"><a class="header" href="#background-3">background</a></h2>
<blockquote>
<p>æ— å¥ˆèƒŒæ™¯</p>
</blockquote>
<p>åˆšåˆšå¼€å§‹æ„Ÿè§‰å“ªå„¿å“ªå„¿éƒ½è¦æœ‰æŠ€å·§, å…¶å®ä¸ä¸€å®š...</p>
<h2 id="goal-3"><a class="header" href="#goal-3">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p>å°†ä¸€å¤´åˆæ ¼ Rustaceans å€¼å¾—è®°å¿†çš„åŸºæœ¬æŠ€å·§,
æ”¶é›†åˆ° 42% å·¦å³...</p>
<h2 id="trace-3"><a class="header" href="#trace-3">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<p>???</p>
<h2 id="refer-4"><a class="header" href="#refer-4">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-4"><a class="header" href="#logging-4">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221023 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹"><a class="header" href="#rust-è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹">Rust è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹</a></h1>
<p>åŸæ–‡: <a href="https://wishawa.github.io/posts/fun-rust-operators/">Six fun things to do with Rust operator overloading | Wisha Wanichwecharungruang</a></p>
<p><img src="https://wishawa.github.io/posts/fun-rust-operators/dot-product-pooh.jpg" alt="dot-product-pooh" /></p>
<h2 id="å¿«è¯‘"><a class="header" href="#å¿«è¯‘">å¿«è¯‘</a></h2>
<p>C++ Input/Output
Instead of</p>
<p>stdin().read_line(&amp;mut buffer).unwrap();
println!(&quot;Hello I am {name}!!!&quot;);
we can overload the shift operators on cin and cout to allow</p>
<p>cin &gt;&gt; &amp;mut buffer;
cout &lt;&lt; &quot;Hello I am &quot; &lt;&lt; name &lt;&lt; &quot;!!!&quot; &lt;&lt; endl;
Variadic Functions
Instead of</p>
<p>std::cmp::max(x, y);
[w, x, y, z].into_iter().max();
we can make</p>
<p>// max+ is like std::cmp::max but better
// it supports &gt;2 arguments
max+(x, y);
max+(w, x, y, z);
More Concise Builders
Here's a more serious one. Builder pattern sometimes involve a lot of repeated method calls. Take for example this usage of the warp web framework.</p>
<p>let hi = warp::path(&quot;hello&quot;)
.and(warp::path::param())
.and(warp::header(&quot;user-agent&quot;))
.map(|param: String, agent: String| {
format!(&quot;Hello {}, whose agent is {}&quot;, param, agent)
});
What if the API look like this instead?</p>
<p>let hi = warp::path(&quot;hello&quot;)
+	warp::path::param()
+	warp::header(&quot;user-agent&quot;)
&gt;&gt;	|param: String, agent: String| {
format!(&quot;Hello {}, whose agent is {}&quot;, param, agent)
};
Infix Functions
Instead of</p>
<p>x.pow(y);
dot_product(a, b);
a.cross(b.cross(c).cross(d))
we can make</p>
<p>x ^pow^ y;
a <em>dot</em> b;
a <em>cross</em> (b <em>cross</em> c <em>cross</em> d);
Lots of people wanted this!</p>
<p>Doublefish
std::mem provides these functions</p>
<p>size_of::<T>();
size_of_val(&amp;value);
Turbofish enthusiasts would enjoy size_of but not so much size_of_val, so let's make our own improved version of size_of_val that's more turbofishy</p>
<p>size_of::<T>();
size_of_val&lt;&lt;&amp;value&gt;&gt;();
Join and Race
Futures combinators can have short-circuiting behaviors</p>
<p>// quit if any of the 3 errors
(fut1, fut2, fut3).try_join().await;</p>
<p>// quit if any of the 3 succeeds
(fut4, fut5, fut6).race_ok().await;
let's communicate this through &amp; and |</p>
<p>(TryJoin &gt;&gt; fut1 &amp; fut2 &amp; fut3).await;
(RaceOk &gt;&gt; fut4 | fut5 | fut6).await;
Useful Links
Discuss this on Reddit
Playground containing the implementations behind some of the code shown here
std::ops docs
Rust operators precedence table</p>
<h2 id="refer-5"><a class="header" href="#refer-5">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-5"><a class="header" href="#logging-5">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230125 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ"><a class="header" href="#å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ">å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ</a></h1>
<p>åŸæ–‡: <a href="https://rauljordan.com/rust-concepts-i-wish-i-learned-earlier/">rauljordan::blog</a></p>
<h2 id="å¿«è¯‘-1"><a class="header" href="#å¿«è¯‘-1">å¿«è¯‘</a></h2>
<p>è¿‡å»ä¸€ä¸ªæœˆé‡Œ, æˆ‘è¢« Rust è¯­è¨€å½»åº•è¿·ä½äº†,
å› ä¸º,å¥¹åœ¨ç¼–å†™å†…å­˜å®‰å…¨çš„ç°ä»£ç¨‹åºæ–¹é¢å…·æœ‰ç‹¬ç‰¹çš„ä¼˜åŠ¿.
å¤šå¹´ä»¥æ¥, æœ‰å‡ ç§è¯­è¨€å·²ç»æˆä¸ºå·¥ç¨‹å¸ˆç¼–å†™å¼¹æ€§åç«¯è½¯ä»¶çš„é¦–é€‰è¯­è¨€.
æ½®æµå·²ç»ä» JAVA/C++ è½¬å‘ Go å’Œ Rust,
å¥¹ä»¬ç»“åˆäº†æ•°åå¹´ç¼–ç¨‹è¯­è¨€ç†è®ºæ¥æ„å»ºæˆ‘ä»¬è¿™ä¸ªæ—¶ä»£æœ€éœ€è¦çš„å·¥å…·.</p>
<p>Rust çš„åœ°ä½ä¸è¨€åˆ™æ˜.
ä½œä¸ºæœ€å—ä¸€æ¬¢è¿çš„è¯­è¨€, è¿ç»­7å¹´åº¦åœ¨è‘—å <code>stack overflow</code> è°ƒæŸ¥ä¸­æ’åç¬¬ä¸€!
æœ€è¿‘è¿˜ä½œä¸º Linux å†…æ ¸çš„ä¸€éƒ¨åˆ†å‘å¸ƒ -- è¿™æ˜¯é™¤ C ä¹‹å¤–ä»»ä½•è¯­è¨€ä¹‹å‰éƒ½æ— æ³•ä½œåˆ°çš„å£®ä¸¾.
å¯¹æˆ‘è€Œè¨€, è¿™é—¨è¯­è¨€ä»¤äººå…´å¥‹çš„åœ°æ–¹åœ¨äº,
å¥¹åœ¨è½¯ä»¶æ„å»ºè‰ºæœ¯æ–¹é¢æä¾›äº†ä¸€äº›çœŸæ­£æ–°é¢–çš„ä¸œè¥¿.</p>
<pre><pre class="playground"><code class="language-rust">use std::thread;
use std::time::Duration;
use std::{collections::VecDeque, sync::Condvar, sync::Mutex};

fn main() {
    let queue = Mutex::new(VecDeque::new());

    thread::scope(|s| {
        let t = s.spawn(|| loop {
            let item = queue.lock().unwrap().pop_front();
            if let Some(item) = item {
                dbg!(item);
            } else {
                thread::park();
            }
        });

        for i in 0.. {
            queue.lock().unwrap().push_back(i);
            t.thread().unpark();
            thread::sleep(Duration::from_secs(1));
        }
    })
}
</code></pre></pre>
<p>Rust åœ¨æ•´ä¸ªç³»ç»Ÿç¼–ç¨‹ä¸­è·å¾—äº†ä»¤äººéš¾ä»¥ç½®ä¿¡çš„ä½¿ç”¨, 
ä¹Ÿå› éš¾ä»¥å­¦ä¹ è€Œé—»å. å°½ç®¡å¦‚æ­¤, è¿˜æ˜¯æœ‰å¾ˆå¤šä¼˜ç§€çš„ Rust å†…å®¹å¯ä»¥æ»¡è¶³åˆå­¦è€…å’Œé«˜çº§ç¨‹åºå‘˜çš„éœ€æ±‚.
ç„¶è€Œ, ä»–ä»¬ä¸­å¤ªå¤šäººä¸“æ³¨è§£é‡Šè¯­è¨€çš„æ ¸å¿ƒæœºåˆ¶å’Œæ‰€æœ‰æƒæ¦‚å¿µ, è€Œä¸æ˜¯æ„å»ºåº”ç”¨ç¨‹åº.</p>
<p>ä½œä¸ºä¸€åç¼–å†™é«˜å¹¶å‘ç¨‹åºå¹¶ä¸“æ³¨åœ¨ç³»ç»Ÿç¼–ç¨‹çš„ Go å¼€å‘è€…, 
æˆ‘åœ¨å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Rust æ„å»ºçœŸå®ç¨‹åºçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šéšœç¢. 
ä¹Ÿå°±æ˜¯äº¤ç»‡, å¦‚æœæˆ‘å°†å½“å‰æ­£åœ¨ä»äº‹çš„å·¥ä½œç§»æ¤åˆ° Rust ä¸­, é‚£ä¹ˆæ‰€æœ‰è¿™äº›æ•™ç¨‹çš„æ•ˆæœå¦‚ä½•å‘¢?</p>
<p>æ­¤ç¯‡æ–‡ç« æ—¨åœ¨ä»‹ç»æˆ‘è¿›å…¥ Rust å…”å­æ´çš„ç»å†, 
ä»¥åŠæˆ‘å¸Œæœ›ä¸€äº›å­¦ä¹ èµ„æºå¯ä»¥æ›´å¥½é˜è¿°çš„å†…å®¹. 
å¯¹ä¸ªäººè€Œè¨€, æˆ‘æ— æ³•é€šè¿‡ç®€å•çš„è§‚çœ‹ youtube è§†é¢‘æ¥å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€, 
è€Œæ˜¯å¿…é¡»é€šè¿‡ä¸ºè‡ªå·±å¯»æ‰¾è§£å†³æ–¹æ¡ˆ,çŠ¯é”™ä»¥åŠå¯¹è¿‡ç¨‹æ„Ÿå—è°¦å‘æ¥ç§¯ç´¯ï¼</p>
<h3 id="å…³äºå‚è€ƒ"><a class="header" href="#å…³äºå‚è€ƒ">å…³äºå‚è€ƒ</a></h3>
<p>Rust ä¸­æœ‰ä¸¤ç§å¼•ç”¨, å…±äº«å¼•ç”¨(ä¹Ÿç§°ä¸º <code>å€Ÿç”¨</code>)å’Œå¯å˜å¼•ç”¨(ä¹Ÿç§°ä¸º<code>ç‹¬å å¼•ç”¨</code>).
é€šå¸¸è¿™äº›è¢«è§†ä¸ºå˜é‡ x ä¸Šçš„ &amp;x ä»¥åŠ &amp;mut x . 
ä¸€æ—¦æˆ‘å¼€å§‹å°†åè€…ç§°ä¸º&quot;ç‹¬å®¶å‚è€ƒ&quot;, è¿™ä¸¤ç™½é—´çš„åŒºåˆ«å°±æ›´æœ‰æ„ä¹‰äº†.</p>
<p>Rust çš„å‚è€ƒæ¨¡å‹ç›¸å½“ç®€å•. å€Ÿæ¬¾äººå¯ä»¥æ ¹æ®éœ€è¦æ‹¥æœ‰å¯¹æŸå¯¹è±¡çš„å°½å¯èƒ½å¤šçš„å…±äº«å¼•ç”¨, 
ä½†æ˜¯, ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªç‹¬å å¼•ç”¨. 
å¦åˆ™, ä½ å¯èƒ½ä¼šæœ‰å¾ˆå¤šè°ƒç”¨è€…åŒæ—¶å°è¯•å¯¹åŒä¸€ä¸ªå€¼è¿›è¡Œä¿®æ”¹çš„å›§å¢ƒ;
å¦‚æœå¾ˆå¤šå€Ÿç”¨è€…ä¹Ÿå¯ä»¥æŒæœ‰ç‹¬å è¢­ç”¨, 
ä½ å°†é¢ä¸´æœªå®šä¹‰è¡Œä¸ºé£é™©, 
è€Œå®‰å…¨çš„ Rust åˆ™ä¸å…è®¸è¿™ä¹ˆæŠ˜è…¾.</p>
<p>åœ¨å­¦ä¹  Rust æ—¶, éƒ½ç”¨ &amp;mut ç‹¬å®¶å‚è€ƒå¯ä»¥èŠ‚çœå¾ˆå¤šæ—¶é—´:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Foo {
    x: u64,
}

impl Foo {
    /// Any type that borrows an instance of Foo can
    /// call this method, as it only requires a reference to Foo.
    pub fn total(&amp;self) -&gt; u64 {
        self.x
    }
    /// Only exclusive references to instances of Foo
    /// can call this method, as it requires Foo to be mutable.
    pub fn increase(&amp;mut self) {
        self.x += 1;
    }
}

let foo = Foo { x: 10 };
println!(&quot;{}&quot;, foo.total()) // WORKS.
foo.increase() // ERROR: Foo not declared as mut
<span class="boring">}
</span></code></pre></pre>
<h3 id="åŒå‘å¼•ç”¨æ˜¯å¯ä»¥çš„"><a class="header" href="#åŒå‘å¼•ç”¨æ˜¯å¯ä»¥çš„">åŒå‘å¼•ç”¨æ˜¯å¯ä»¥çš„</a></h3>
<blockquote>
<p>Bidirectional references are possible</p>
</blockquote>
<p>åœ¨å…¶å®ƒå…·æœ‰åƒåœ¾æ”¶é›†åŠŸèƒ½çš„è¯­è¨€ä¸­, å¾ˆå®¹æ˜“å®šä¹‰å›¾å½¢æ•°æ®ç»“æ„æˆ–å…¶å®ƒåŒ…å«å¯¹æŸäº›å­é¡¹å¼•ç”¨çš„ç±»å‹, 
å¹¶ä¸”è¿™äº›å¼•ç”¨å¯ä»¥åŒ…å«å¯¹å…¶çˆ¶é¡¹çš„å¼•ç”¨;
åœ¨ Rust ä¸­, å¦‚æœä¸å®Œå…¨ç†è§£å€Ÿç”¨è§„åˆ™, è¿™æ˜¯å¾ˆéš¾ä½œåˆ°çš„;
ä½†æ˜¯, ä»ç„¶å¯ä»¥ä½¿ç”¨æ ‡å‡†åº“æä¾›çš„æ­£æ³•.</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º Node çš„ç»“æ„, 
åŒ…å«ä¸€ç»„å¯¹å­èŠ‚ç‚¹çš„å¼•ç”¨, ä»¥åŠä¸€ä¸ªå¯¹çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨; 
é€šå¸¸, Rust ä¼šæŠ±æ€¨, ä½†æ˜¯, æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†çˆ¶å¼•ç”¨åŒ…è£…åœ¨ç§°ä¸º <code>å¼±æŒ‡é’ˆ</code> çš„ä¸œè¥¿ä¸­æ¥æ»¡è¶³å€Ÿç”¨æ£€æŸ¥å™¨çš„è¦æ±‚;
è¿™ç§ç±»å‹å‘Šè¯‰ Rust ä¸€ä¸ªèŠ‚ç‚¹æ¶ˆå¤±, æˆ–è€…å…¶å­èŠ‚ç‚¹æ¶ˆå¤±, ä¸åº”è¯¥æ„å‘³ç€çˆ¶èŠ‚ç‚¹ä¹Ÿåº”è¯¥è¢«åˆ é™¤;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::cell::RefCell;
use std::rc::{Rc, Weak};

struct Node {
    value: i32,
    parent: RefCell&lt;Weak&lt;Node&gt;&gt;,
    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,
}
<span class="boring">}
</span></code></pre></pre>
<p>è¿™ä¸ºæˆ‘ä»¬æä¾›äº†æ„å»ºåŒå‘å¼•ç”¨çš„ä¾¿åˆ©åŸè¯­; 
ç„¶è€Œ, æˆ‘å¾ˆå¿«å‘ç°åœ¨ Rust ä¸­æ„å»ºå›¾å½¢æ•°æ®çœŸçš„å¾ˆéš¾, 
é™¤éä½ çœŸçš„çŸ¥é“è‡ªå·±åœ¨ä½œä»€ä¹ˆ, è€ƒè™‘åˆ°ä¸€ä¸ªäººéœ€è¦å›´ç»•æœ‰æ•ˆå»ºæ¨¡æ•°æ®æ¥ä½œå¤§é‡çš„ <code>book-keeping</code> å·¥ä½œä»¥æ»¡è¶³ç¼–è¯‘å™¨.</p>
<p>(æ˜¯ä¹Ÿä¹: ç¼–è¯‘å™¨ä½œä¸º Rust ç”Ÿæ€ä¸­æœ€å¤§çš„ BOSS å¿…é¡»ä¼˜å…ˆæ»¡è¶³.)</p>
<h3 id="å®æ–½-deref-ä»¤ä»£ç æ›´æ¸…æ™°"><a class="header" href="#å®æ–½-deref-ä»¤ä»£ç æ›´æ¸…æ™°">å®æ–½ Deref ä»¤ä»£ç æ›´æ¸…æ™°</a></h3>
<blockquote>
<p>Implement Deref to make your code cleaner</p>
</blockquote>
<p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å°†åŒ…è£…å™¨ç±»å‹è§†ä¹‹ä¸ºå…¶åŒ…å«çš„å†…å®¹;
å¯¹äºå¸¸è§çš„æ•°æ®ç»“æ„(æ¯”å¦‚ vec),æ™ºèƒ½æŒ‡é’ˆ(ä¾‹å¦‚ Box) ç”šè‡³å¼•ç”¨è®¡æ•°ç±»å‹(ç±»ä¼¼ Rc å’Œ Arc) éƒ½æ˜¯å¦‚æ­¤;
æ ‡å‡†åº“åŒ…å«ç§°ä¸º Deref å’Œ DerefMut çš„ç‰¹å¾, 
å¥¹ä»¬å°†æŠ¥æ—¶ä½ å‘Šè¯‰ Rust åº”è¯¥å¦‚ä½•å–æ¶ˆå¼•ç”¨ä¸€ä¸ªç±»å‹;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::ops::{Deref, DerefMut};

struct Example&lt;T&gt; {
    value: T
}

impl&lt;T&gt; Deref for Example&lt;T&gt; {
    type Target = T;

    fn deref(&amp;self) -&gt; &amp;Self::Target {
        &amp;self.value
    }
}

impl&lt;T&gt; DerefMut for Example&lt;T&gt; {
    fn deref_mut(&amp;mut self) -&gt; &amp;mut Self::Target {
        &amp;mut self.value
    }
}

let mut x = Example { value: 'a' };
*x = 'b';
assert_eq!('b', x.value);
<span class="boring">}
</span></code></pre></pre>
<p>ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­, æˆ‘ä»¬å¯ä»¥å°† <code>*x</code> è§†ä¸ºå…¶åŸºç¡€å€¼ <code>&quot;a&quot;</code>, 
ç”šè‡³å¯ä»¥æ”¹å˜å®ƒ, å› ä¸º, æˆ‘ä»¬å®šä¹‰äº†åº”è¯¥å¦‚ä½•åœ¨å€Ÿç”¨æˆ–å¯å˜å¼•ç”¨ä¸­å–æ¶ˆå¼•ç”¨çš„è§„åˆ™;
è¿™å¾ˆå¼ºå¤§, ä¹Ÿæ˜¯ä½ æ— éœ€æ‹…å¿ƒåœ¨ Box ç­‰æ™ºèƒ½æŒ‡é’ˆä¸­åŒ…è£…ç±»å‹çš„åŸå› ;</p>
<p>å€¼è¢«è£…ç®±çš„äº‹å®æ˜¯ä¸€ä¸ªå®ç°ç»†èŠ‚, å¯ä»¥é€šè¿‡è¿™äº›ç‰¹å¾æŠ½è±¡å‡ºæ¥;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Foo {
    value: u64,
}
let mut foo = Box::new(Foo { value: 10 });

// Box implements DerefMut, so this will work fine!
*foo = Foo { value: 20 };
// Dot methods will work on foo because Box implements Deref.
// We do not have to worry about the implementation
// detail that Foo is boxed.
assert_eq!(20, foo.value);
<span class="boring">}
</span></code></pre></pre>
<h3 id="å°å¿ƒå®ç°-deref-ç±»å‹æ–¹æ³•"><a class="header" href="#å°å¿ƒå®ç°-deref-ç±»å‹æ–¹æ³•">å°å¿ƒå®ç° Deref ç±»å‹æ–¹æ³•</a></h3>
<blockquote>
<p>Be careful with methods on types that implement Deref</p>
</blockquote>
<p>æœ‰æ²¡æœ‰æƒ³è¿‡, ä¸ºä»€ä¹ˆåƒ <code>Arc::clone</code> è¿™ç±»æ–¹æ³•çš„å­˜åœ¨, 
è€Œæˆ‘ä»¬åªèƒ½å¯¹ Arc å€¼æ‰§è¡Œ <code>.clone()</code>?
åŸå› å’Œç±»å‹å¦‚ä½•å®ç° Deref æœ‰å…³, 
è¿™æ˜¯å¼€å‘è€…åº”è¯¥è­¦æƒ•çš„äº‹å„¿;</p>
<p>è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹, æˆ‘ä»¬æ­£åœ¨å°è¯•ä»æ ‡å‡†åº“ä¸­å®ç°æˆ‘ä»¬è‡ªå·±ç‰ˆæœ¬çš„
å¤šç”Ÿäº§è€…/å•ä¸€æ¶ˆè´¹è€…(mpsc)é€šé“:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::sync::{Arc, Mutex, Condvar};

pub struct Sender&lt;T&gt; {
    inner: Arc&lt;Inner&lt;T&gt;&gt;,
}

impl&lt;T&gt; Sender&lt;T&gt; {
    pub fn send(&amp;mut self, t: T) {
        ...
    }
}

impl&lt;T: Clone&gt; Clone for Sender&lt;T&gt; {
    fn clone(&amp;self) -&gt; Self {
        Self {
            // ERROR: Does not know whether to clone Arc or inner!
            inner: self.inner.clone(),
        }
    }
}

struct Inner&lt;T&gt; {
    ...
}

impl&lt;T: Clone&gt; Clone for Inner&lt;T&gt; {
    fn clone(&amp;self) -&gt; Self {
        ...
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>ä¸Šè¿°ç¤ºä¾‹ä¸­, æˆ‘ä»¬æœ‰ä¸€ä¸ªè¦åœ¨å…¶ä¸Šå®ç° Clone ç‰¹å¾çš„ Sender ç±»å‹;
è¯¥ç»“æ„æœ‰ä¸€ä¸ªåä¸º inner çš„å­—æ®µ, å…¶ç±»å‹ä¸º <code>Arc&lt;Inner&lt;T&gt;&gt;</code> ;
å›æƒ³ä¸€ä¸‹ Arc å·²ç»å®ç°äº† Clone å’Œ Deref ;
æœ€é‡è¦çš„æ˜¯, æˆ‘ä»¬çš„ Inner è¿˜ç°å®äº† Clone ;
å¯¹äºä¸Šé¢çš„ä»£ç , Rust å¹¶ä¸çŸ¥é“æˆ‘ä»¬æ˜¯è¦å…‹éš† Arc è¿˜æ˜¯å®é™…çš„å†…éƒ¨å€¼,
æ‰€ä»¥, ä¸Šé¢ä»£ç ä¼šå¤±è´¥;
åœ¨è¿™ç§æƒ…å†µä¸‹, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Arc ä» sync åŒ…ä¸­æä¾›çš„å®é™…æ–¹æ³•;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl&lt;T: Clone&gt; Clone for Sender&lt;T&gt; {
    fn clone(&amp;self) -&gt; Self {
        Self {
            // Now Rust knows to use the Clone method of Arc instead of the
            // clone method of inner itself.
            inner: Arc::clone(&amp;self.inner),
        }
    }
}
<span class="boring">}
</span></code></pre></pre>
<h3 id="ç†è§£ä½•æ—¶ä»¥åŠä½•æ—¶ä¸ç”¨å†…éƒ¨å¯å˜æ€§"><a class="header" href="#ç†è§£ä½•æ—¶ä»¥åŠä½•æ—¶ä¸ç”¨å†…éƒ¨å¯å˜æ€§">ç†è§£ä½•æ—¶ä»¥åŠä½•æ—¶ä¸ç”¨å†…éƒ¨å¯å˜æ€§</a></h3>
<blockquote>
<p>Understand when and when not to use interior mutability</p>
</blockquote>
<p>æœ‰æ—¶, ä½ éœ€è¦åœ¨ä»£ç ä¸­ä½¿ç”¨ Rc æˆ–æ˜¯ Arc ç­‰ç»“æ„, 
åˆæˆ–è€…å®ç°åŒ…è£…ä¸€äº›æ•°æ®ç»“æ„, ç„¶å, åˆæƒ³è¦æ”¹å˜è¢«åŒ…è£…çš„æ•°æ®;
å¾ˆå¿«, ç¼–è¯‘å™¨å°±ä¼šå‘Šè¯‰ä½ , å†…éƒ¨å¯å˜æ€§æ˜¯ä¸å…è®¸çš„, ä¹çœ‹èµ·æ¥è¿™å¾ˆæ£˜æ‰‹;
ç„¶è€Œ, æœ‰ä¸€äº›æ–¹æ³•å…è®¸ Rust ä¸­çš„å†…éƒ¨å¯å˜æ€§, 
ç”šè‡³æ˜¯ç”±æ ‡å‡†åº“æä¾›çš„;</p>
<p>æœ€ç®€å•çš„ä¸€ç§æ˜¯ Cell, å¥¹ä¸ºä½ æä¾›æ•°æ®çš„å†…å¯å˜æ€§;
ä¹Ÿå°±æ˜¯è¯´, å˜¦æ•°æ®å¤åˆ¶æˆæœ¬ä½, 
ä½ å°±å¯ä»¥åœ¨ Rc ä¸­æ”¹å˜æ•°æ®;
ä½ å¯ä»¥é€šè¿‡å°†æ•°æ®åŒ…è£…åœ¨ <code>Rc&lt;Cell&lt;T&gt;&gt;</code> ä¸­æ¥å®ç°è¿™ä¸€ç‚¹;
å¥¹æä¾›äº† get å’Œ set æ–¹æ³•,
ç”šè‡³ä¸éœ€è¦è¢« mut , å› ä¸º, å¥¹ä»¬æ˜¯åœ¨åº•å±‚å¤åˆ¶æ•°æ®çš„:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// impl&lt;T: Copy&gt; Cell&lt;T&gt;
pub fn get(&amp;self) -&gt; T

// impl&lt;T&gt; Cell&lt;T&gt;
pub fn set(&amp;self, val: T)
<span class="boring">}
</span></code></pre></pre>
<p>å…¶å®ƒç±»å‹, æ¯”å¦‚ RefCell æœ‰åŠ©äºå°†æŸäº›å€Ÿç”¨æ£€æŸ¥ç§»è‡³è¿è¡Œæ—¶, å¹¶è·³è¿‡ä¸€äº›ç¼–è¯‘å™¨çš„ä¸¥æ ¼è¿‡æ»¤;
ç„¶è€Œ, è¿™æ˜¯æœ‰é£é™©çš„, å› ä¸º, å¦‚æœæ²¡æœ‰å®Œæˆå€Ÿç”¨æ£€æŸ¥, å°±å¯èƒ½åœ¨è¿è¡Œæ—¶è§¦å‘ panic ;
å°†ç¼–è¯‘å™¨å½“æˆæœ‹å‹, ä½ ä¼šè·å¾—å›æŠ¥;
é€šè¿‡è·³è¿‡ç¼–è¯‘å™¨æ£€æŸ¥, æˆ–æ˜¯å°†å¥¹ä»¬æ¨è¿Ÿåˆ°è¿è¡Œæ—¶, 
ç­‰äºå‘Šè¯‰ç¼–è¯‘å™¨&quot;ç›¸ä¿¡æˆ‘ --- æˆ‘ä½œçš„éƒ½æ˜¯æ­£ç¡®çš„&quot;;</p>
<p>è€Œ std::cell åŒ…ç”šè‡³é€šè¿‡ä¸€ä¸ªå¾ˆæœ‰å¸®åŠ©çš„æ¶ˆæ¯è­¦å‘Šæˆ‘ä»¬:</p>
<pre><code>
æ›´å¸¸è§çš„ç»§æ‰¿å¯å˜æ€§, å…¶ä¸­å¿…é¡»å…·æœ‰å”¯ä¸€è®¿é—®æƒé™æ‰èƒ½æ”¹å˜å€¼,
è¿™ä¸€è¯­è¨€å…ƒç´ æ˜¯ä»¤ Rust èƒ½å¼ºåŠ›æ¨ç†æŒ‡é’ˆåˆ«å, é™æ€é˜²æ­¢å´©æºƒé”™è¯¯çš„å…³é”®;
å› æ­¤, ç»§ç»­å¯å˜æ€§æ˜¯é¦–é€‰, å†…éƒ¨å¯å˜æ€§æ˜¯æœ€åçš„æ‰‹æ®µ;
ç”±äº Cell ç±»å‹å¯ä»¥åœ¨ä¸å…è®¸çªå˜çš„åœ°æ–¹å¯ç”¨çªå˜, 
å› æ­¤, åœ¨æŸäº›æƒ…å†µä¸­, å†…éƒ¨å¯å˜æ€§ä¹Ÿè®¸æ˜¯åˆé€‚çš„, ç”šè‡³å¿…é¡»ä½¿ç”¨, ä¾‹å¦‚:

- åœ¨ä¸å¯å˜äº‹ç‰©çš„&quot;å†…éƒ¨&quot;å¼•å…¥å¯å˜æ€§
- é€»è¾‘ä¸å¯å˜æ–¹æ³•çš„å®ç°ç»†èŠ‚
- å…‹éš†çš„å˜å¼‚å®ç°

</code></pre>
<h3 id="get-å’Œ-get-mut-æ–¹æ³•æ˜¯ä¸€å›äº‹å„¿"><a class="header" href="#get-å’Œ-get-mut-æ–¹æ³•æ˜¯ä¸€å›äº‹å„¿">get å’Œ get mut æ–¹æ³•æ˜¯ä¸€å›äº‹å„¿</a></h3>
<blockquote>
<p>Get and get mut methods are a thing</p>
</blockquote>
<p>å¾ˆå¤šç±»å‹, åŒ…å« vec éƒ½å®ç°äº† get ä¸ get_mut æ–¹æ³•,
è®©ä½ å¯ä»¥å€Ÿç”¨å’Œæ”¹å˜ç»“æ„ä¸­çš„å…ƒç´ 
(å‰è€…åªæœ‰åœ¨ä½ æœ‰ä¸€ä¸ªå¯¹é›†ä¼šçš„å¯å˜å¼•ç”¨æ—¶æ‰å¯èƒ½);
æˆ‘èŠ±äº†ä¸€æ®µæ—¶é—´, æ‰çŸ¥é“è¿™äº›é€‰é¡¹å¯ç”¨äºè®¸å¤šæ•°æ®ç»“æ„,
å¥¹ä»¬é€šè¿‡æ›´è½»æ¾çš„ç¼–å†™å¹²å‡€çš„ä»£ç , å¸®åŠ©æˆ‘çš„ç”Ÿæ´»æ›´è½»æ¾!</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = &amp;mut [0, 1, 2];

if let Some(elem) = x.get_mut(1) {
    *elem = 42;
}
assert_eq!(x, &amp;[0, 42, 2]);
<span class="boring">}
</span></code></pre></pre>
<h3 id="æ‹¥æŠ±ä¸å®‰å…¨ä½†åˆç†çš„ä»£ç "><a class="header" href="#æ‹¥æŠ±ä¸å®‰å…¨ä½†åˆç†çš„ä»£ç ">æ‹¥æŠ±ä¸å®‰å…¨ä½†åˆç†çš„ä»£ç </a></h3>
<blockquote>
<p>Embrace unsafe but sound code</p>
</blockquote>
<p>ä½œä¸ºä¸€å Go å¼€å‘è€…, &quot;unsafe&quot; åŒ…æ€»æ˜¯æ„Ÿè§‰å¾ˆä¸é è°±,
è€Œä¸”æˆ‘å¾ˆå°‘æ¥è§¦;
ç„¶è€Œ, Rust ä¸­ â€œunsafeâ€ çš„æ¦‚å¿µæ˜¯å®Œå…¨ä¸åŒçš„;
äº‹å®ä¸Š, å¾ˆå¤šæ ‡å‡†åº“éƒ½ä½¿ç”¨ <code>â€œunsafeâ€</code> æ¥å–å¾—å·¨å¤§æˆåŠŸ!</p>
<p>è¿™æ€ä¹ˆå¯èƒ½? å°½ç®¡ Rust ä½¿æœªå®šä¹‰çš„è¡Œä¸ºæˆä¸ºä¸å¯èƒ½,
ä½†æ˜¯, è¿™ä¸é€‚ç”¨äºæ ‡è®°ä¸º â€œunsafeâ€ çš„ä»£ç å—;
ç›¸å, ç¼–å†™ â€œunsafeâ€ Rust çš„å¼€å‘è€…å˜¦ä¿è¯å…¶ä½¿ç”¨åˆç†,
å³å¯è·å¾—æ‰€æœ‰å¥½å¤„;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Example taken from the Rustonomicon
fn item_at_index(idx: usize, arr: &amp;[u8]) -&gt; Option&lt;u8&gt; {
    if idx &lt; arr.len() {
        unsafe {
            Some(*arr.get_unchecked(idx))
        }
    } else {
        None
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>å˜¦ä½ èƒ½è¯æ˜ä½ çš„ API æ˜¯å¯é çš„,
å°±æ¥å— unsafe, ä½†æ˜¯, è¦é¿å…é€ˆä½ çš„æ¶ˆè´¹è€…æš´éœ² unsafe å‡½æ•°,
é™¤éæ˜¯çœŸæ­£æœ‰ä¿è¯çš„;
å‡ºäºè¿™ä¸ªåŸå› , åœ¨ Rust ä¸­,å¯¹ä½ çš„åŒ…å†…éƒ¨è¿›è¡Œä¸¥æ ¼æ§åˆ¶,
å¯ä»¥è¯æ˜ unsafe ä»£ç å—æ˜¯åˆç†çš„äº†;</p>
<p>é€šå¸¸åœ¨æ€§èƒ½ç»å¯¹é‡è¦çš„æƒ…å†µä¸‹, æ‰ä½¿ç”¨ unsafe,
æˆ–è€…å½“ä½ çŸ¥é“ä½¿ç”¨ unsafe ä»£ç å—æ˜¯è§£å†³é—®é¢˜çš„ç®€å•æ–¹æ³•,
å¹¶ä¸”å¯ä»¥è¯æ˜ä»£ç çš„å¯é æ€§æ—¶;</p>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>å®‰å…¨å’Œå¯é åˆ†ç¦», é‚£ä¹ˆ, ä»€ä¹ˆæ˜¯å¯é å‘¢?</p>
<p>)</p>
<h3 id="å°½å¯èƒ½ç”¨-impl-ç±»å‹ä½œä¸ºå‚æ•°è€Œä¸æ˜¯é€šç”¨çº¦æŸ"><a class="header" href="#å°½å¯èƒ½ç”¨-impl-ç±»å‹ä½œä¸ºå‚æ•°è€Œä¸æ˜¯é€šç”¨çº¦æŸ">å°½å¯èƒ½ç”¨ impl ç±»å‹ä½œä¸ºå‚æ•°è€Œä¸æ˜¯é€šç”¨çº¦æŸ</a></h3>
<p>è¿™ç‚¹æ¥è‡ª Golang, æˆ‘è®¤ä¸ºç‰¹å¾å¯ä»¥ä¸€ç›´ç®€å•çš„ä½œä¸ºå‡½æ•°å‚æ•°æ¥æä¾›;
æ¯”å¦‚:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Meower {
    fn meow(&amp;self);
}

struct Cat {}

impl Meower for Cat {
    fn meow(&amp;self) {
        println!(&quot;meow&quot;);
    }
}

// ERROR: Meower cannot be used as it does not have
// a size at compile time!
fn do_the_meow(meower: Meower) {
    meower.meow();
}
<span class="boring">}
</span></code></pre></pre>
<p>...ä½†æ˜¯,ä¸Šè¿°ä»£ç å¤±è´¥äº†,
å› ä¸º, trait å¯¹è±¡åœ¨ç¼–è¯‘æ—¶æ²¡æœ‰ Rust å®Œæˆå·¥ä½œéœ€è¦çš„å†…å­˜å°ºå¯¸;
æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ  <code>&amp;dyn Meower</code> æ¥å‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯åŠ¨æ€è°ƒæ•´å¤§å°æ¥ç»•è¿‡,
ä½†æ˜¯, å¾ˆå¿«æˆ‘äº†è§£åˆ°è¿™ä¸æ˜¯ <code>rusty</code>/é”ˆèŒƒå„¿ è§£å†³æ–¹æ¡ˆ;
ç›¸å,å¼€å‘è€…å€¾å‘äºè¡–å—ç‰¹å¾çº¦æŸçš„é€šç”¨å‚æ•°,
ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn do_the_meow&lt;M: Meower&gt;(meower: M) {
    meower.meow();
}
<span class="boring">}
</span></code></pre></pre>
<p>...ç°åœ¨èƒ½é€šè¿‡ç¼–è¯‘äº†;
ç„¶è€Œ,éšç€å‡½æ•°è¶Šæ¥è¶Šå¤æ‚, å¦‚æœæˆ‘ä»¬è¿˜åŒ…æ‹¬å…¶å®ƒé€šç”¨å‚æ•°,
å°±å¯èƒ½ä¼šæœ‰ä¸€ä¸ªéå¸¸éš¾ä»¥é˜…è¯»çš„å‡½æ•°å£°æ˜;
åœ¨æ­¤ç¤ºä¾‹ä¸­,å¦‚æœæˆ‘ä»¬åªæƒ³ç”¨ä¸€æ¬¡ meow,
é‚£ä¹ˆ, å®é™…ä¸Šå¹¶ä¸éœ€è¦åŠ¨ç”¨æ³›å‹;
æˆ‘ä»¬ç”šè‡³äºå¹¶ä¸å…³å¿ƒ meow çš„ç»“æœ,
æ‰€ä»¥, å¯ä»¥æ”¹å†™ä¸ºè¿™æ ·:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn do_the_meow(meower: &amp;impl Meower) {
    meower.meow();
}
<span class="boring">}
</span></code></pre></pre>
<p>è¿™æ ·å‘Šè¯‰ç¼–è¯‘å™¨:&quot;æˆ‘åªæƒ³è¦å®ç° Meow çš„ä¸œè¥¿&quot;;
å½“ç„¶,è¿™æ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„,
å¹¶ä¸”,é¦–å…ˆä¸éœ€è¦å‡½æ•°çš„é€šç”¨è¿”å›ç±»å‹æ—¶,
æ­¤æ¨¡å¼ä¼šæ›´åŠ æ¸…æ™°;</p>
<h3 id="ç”¨-iter-è¿‡ç¨‹ä¸­æƒ³å€Ÿç”¨æ—¶-iter-mut-ç”¨ä»¥ç‹¬å -refsè€Œ-into-iter-æ”¯æŒæ‹¥æœ‰"><a class="header" href="#ç”¨-iter-è¿‡ç¨‹ä¸­æƒ³å€Ÿç”¨æ—¶-iter-mut-ç”¨ä»¥ç‹¬å -refsè€Œ-into-iter-æ”¯æŒæ‹¥æœ‰">ç”¨ iter() è¿‡ç¨‹ä¸­æƒ³å€Ÿç”¨æ—¶, iter mut() ç”¨ä»¥ç‹¬å  refs,è€Œ into iter() æ”¯æŒæ‹¥æœ‰</a></h3>
<p>å¾ˆå¤šæ•™ç¨‹ç«‹å³è·³è½¬åˆ°ä½¿ç”¨ä¸‹é¢çš„ into_iter æ–¹æ³•æ¥è¿­ä»£ vectors/å‘é‡:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let items = vec![1, 2, 3, 4, 5];
for item in items.into_iter() {
    println!(&quot;{}&quot;, item);
}
<span class="boring">}
</span></code></pre></pre>
<p>ç„¶è€Œ,å½“æˆ‘ä»¬åˆšåˆšå¼€å§‹åœ¨ç»“æ„ä¸­ä½¿ç”¨è¿™ä¸ªè¿­ä»£å™¨æ–¹æ³•æ—¶,
å¾ˆå¤šåˆå­¦è€…(åŒ…æ‹¬ä½œè€…è‡ªå·±)éƒ½ç¢°å£äº†,ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Foo {
    bar: Vec&lt;u32&gt;,
}

impl Foo {
    fn all_zeros(&amp;self) -&gt; bool {
        // ERROR: Cannot move out of self.bar!
        self.bar.into_iter().all(|x| x == 0)
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>å¹¶ç«‹å³æç¤º:</p>
<pre><code>    error[E0507]: cannot move out of `self.bar` which is behind a shared reference
       --&gt; src/main.rs:9:9
        |
    9   |         self.bar.into_iter().all(|x| x == 0)
        |         ^^^^^^^^ ----------- `self.bar` moved due to this method call
        |         |
        |         move occurs because `self.bar` has
        |         type `Vec&lt;u32&gt;`, which does not implement the `Copy` trait

</code></pre>
<p>ä½œä¸ºèœé¸Ÿå°è¯•äº†å¾ˆå¤šåŠæ³•å, æ‰æ„è¯†åˆ° <code>.into_ter()</code> å–å¾—äº†é›†åˆçš„æ‰€æœ‰æƒ,
è¿™ä¸æ˜¯æˆ‘çš„ç›®æ ‡æ‰€éœ€è¦çš„;
ç›¸å, åœ¨è¿­ä»£å™¨ä¸Šè¿˜æœ‰å¦å¤–ä¸¤ç§æœ‰ç”¨çš„æ–¹æ³•, çœŸå¸Œæœ›å½“æ—¶èƒ½æ—©ç‚¹çŸ¥é“ä¸«ä»¬;</p>
<p>ç¬¬ä¸€ä¸ªæ˜¯ <code>.iter()</code> ,å€Ÿç”¨é›†åˆ, è®©ä½ æ–­è¨€å…³äºå…¶å€¼çš„ä¸œè¥¿,ä½†æ˜¯, ä¸æ‹¥æœ‰æˆ–æ˜¯æ”¹å˜å¥¹ä»¬;
å†æœ‰å°±æ˜¯ <code>iter_mut()</code> å¸®åŠ©ä½ æ”¹å˜é›†åˆå†…éƒ¨å€¼,å˜¦ä½ æ˜¯å”¯ä¸€çš„exclusive reference/ç‹¬å å‚è€ƒ;</p>
<p>æ€»ä¹‹, å½“ä½ åªéœ€è¦å€Ÿç”¨æ—¶ç”¨ <code>.iter()</code>,
å½“ä½ æƒ³è¦è·å¾—æ‰€æœ‰æƒæ—¶ç”¨ <code>.into_iter()</code>,
å½“ä½ éœ€è¦æ”¹å˜è¿­ä»£å¯¹è±¡çš„å…ƒç´ æ—¶ç”¨ <code>.iter_mut()</code>;</p>
<h3 id="phantom-æ•°æ®ä¸ä»…ä»…ç”¨ä»¥å¤„ç†æŒ‡å‘ç±»å‹çš„åŸå§‹æŒ‡é’ˆ"><a class="header" href="#phantom-æ•°æ®ä¸ä»…ä»…ç”¨ä»¥å¤„ç†æŒ‡å‘ç±»å‹çš„åŸå§‹æŒ‡é’ˆ">Phantom æ•°æ®ä¸ä»…ä»…ç”¨ä»¥å¤„ç†æŒ‡å‘ç±»å‹çš„åŸå§‹æŒ‡é’ˆ</a></h3>
<p>å½“ä½ ç¬¬ä¸€æ¬¡é‡åˆ° Phantom data/å¹»æ•°æ®æ—¶,
ä¸€å®šæ„Ÿè§‰å¾ˆå¥‡æ€ª,ä½†æ˜¯, å¾ˆå¿«å°±ä¼šæˆä¸ºä¸€ç§å‘Šè¯‰ç¼–è¯‘å™¨&quot;æ‹¥æœ‰&quot;æŸä¸ªå€¼çš„å¥½æ–¹å¼,
å°½ç®¡åªæœ‰ä¸€ä¸ªæŒ‡å‘å¥¹çš„åŸå§‹æŒ‡é’ˆ;
ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::marker;

struct Foo&lt;'a, T: 'a&gt; {
    bar: *const T,
    _marker: marker::PhantomData&lt;&amp;'a T&gt;,
}
<span class="boring">}
</span></code></pre></pre>
<p>è¿™å„¿å‘Šè¯‰ç¼–è¯‘å™¨ Foo æ‹¥æœ‰ T,
å°½ç®¡åªæœ‰ä¸€ä¸ªæŒ‡å‘å¥¹çš„åŸå§‹æŒ‡é’ˆ;
è¿™å¯¹äºéœ€è¦å¤„ç†åŸå§‹æŒ‡é’ˆå’Œä½¿ç”¨ unsafe Rust çš„åº”ç”¨ç¨‹åºå¾ˆæœ‰å¸®åŠ©;</p>
<p>ä½†æ˜¯, ä¹Ÿå¯ä»¥æ˜¯ä¸€ç§å‘Šè¯‰ç¼–è¯‘å™¨ä½ çš„ç±»å‹è¿˜æ²¡å®ç° Send æˆ–æ˜¯ Sync ç‰¹å¾çš„æ–¹æ³•!
ä½ å¯ä»¥ä½¿ç”¨ PhantomData åŒ…è£…ä»¥ä¸‹ç±»å‹,å¹¶åœ¨ä½ çš„ç»“æ„ä¸­ä½¿ç”¨å¥¹ä»¬,
æ¥ä½œä¸ºä¸€ç§æ–¹å¼å‘Šè¯‰ç¼–è¯‘å™¨ä½ çš„ç»“æ„å³ä¸æ˜¯ Send ä¹Ÿä¸æ˜¯ Sync;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub type PhantomUnsync = PhantomData&lt;Cell&lt;()&gt;&gt;;
pub type PhantomUnsend = PhantomData&lt;MutexGuard&lt;'static, ()&gt;&gt;;
<span class="boring">}
</span></code></pre></pre>
<h3 id="ç”¨-rayon-å®ç°å¹¶è¡Œå¢é‡"><a class="header" href="#ç”¨-rayon-å®ç°å¹¶è¡Œå¢é‡">ç”¨ rayon å®ç°å¹¶è¡Œå¢é‡</a></h3>
<p>æœ‰æ—¶, ä½ å¸Œæœ›åœ¨éå†é›†ä¼šæ—¶å¹¶è¡ŒåŒ–å·¥ä½œ,
ä½†æ˜¯, åœ¨å¤„ç†çº¿ç¨‹å’Œç¡®ä¿ç±»å‹å¯ä»¥å®‰å…¨çš„è·¨çº¿ç¨‹å‘é€æ—¶å´ç¢°å£äº†;
æœ‰æ—¶, å¦‚æœé¢å¤–çš„æ ·æ¿æ–‡ä»¶ä»¤ä½ çš„ä»£ç å‡ ä¹ä¸å¯è¯»,é‚£å°±å·²ç»ä¸å€¼å¾—äº†;</p>
<p>ç›¸å, æœ‰ä¸€ä¸ªåä¸º Rayon å¾ˆèµçš„åŒ…, å·²ç»æä¾›äº†ä»¥æ— ç¼æ–¹å¼å¹¶è¡ŒåŒ–è®¡ç®—çš„ä¸Šå¥½å·¥å…·;
ä¾‹å¦‚,å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡ç®—æ•°ç»„å¹³æ–¹å’Œçš„å‡½æ•°:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn sum_of_squares(input: &amp;[i32]) -&gt; i32 {
    input.iter()
            .map(|i| i * i)
            .sum()
}
<span class="boring">}
</span></code></pre></pre>
<p>ç”±äºä¹˜æ³•å’ŒåŠ æ³•çš„æ€§è´¨, ä¸Šè¿°ä»£ç ç»å¯¹å¯ä»¥å¹¶è¡ŒåŒ–,
Rayon é€šè¿‡è®©æˆ‘ä»¬è‡ªåŠ¨è®¿é—®æ•°ç»„ç­‰é›†ä¼šçš„&quot;å¹¶è¡Œè¿­ä»£å™¨&quot;,
ä½¿å¹¶è¡ŒåŒ–å˜å¾—å¾®ä¸è¶³é“;
è¿™æ˜¯å‡ ä¹é›¶æ ·æ¿çš„ä»£ç ;
è€Œä¸”ä¹Ÿå®Œå…¨ä¸å½±å“å¯è¯»æ€§:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Importing rayon prelude is what gives us access to .par_iter on arrays.
use rayon::prelude::*;

fn sum_of_squares(input: &amp;[i32]) -&gt; i32 {
    // We can use par_iter on our array to let rayon
    // handle the parallelization and reconciliation of
    // results at the end.
    input.par_iter()
            .map(|i| i * i)
            .sum()
}
<span class="boring">}
</span></code></pre></pre>
<p>(<code>æ˜¯ä¹Ÿä¹</code>:</p>
<p>å·¥ç¨‹ä¸­å¦‚æœè‡ªå·±è¦æ„é€ å„ç§å†…éƒ¨åº“,
ä¹Ÿå€¼å¾—ç»™å‡ºè¿™ç§ä½¿ç”¨ç•Œé¢,
å’Œä»¥å¾€ä½¿ç”¨å†…ç½®åº“çš„ä»£ç å®Œå…¨å…¼å®¹,
åªæ˜¯åœ¨å…³é”®èŠ‚ç‚¹å¤„æ›¿æ¢ä¸ºè‡ªå·±é­”æ”¹/åŠ å¼ºè¿‡çš„...
)</p>
<h3 id="å¼€å‘-rust-åº“æ—¶ç†è§£-æ‹“å±•ç‰¹å¾-çš„æ¦‚å¿µ"><a class="header" href="#å¼€å‘-rust-åº“æ—¶ç†è§£-æ‹“å±•ç‰¹å¾-çš„æ¦‚å¿µ">å¼€å‘ Rust åº“æ—¶ç†è§£ æ‹“å±•ç‰¹å¾ çš„æ¦‚å¿µ</a></h3>
<p>é‚£ä¹ˆ Rayon æ˜¯å¦‚ä½•ä»¥å¦‚æ­¤å¹²å‡€çš„æ–¹å¼å®Œæˆä¸Šè¿°å·¥ä½œçš„å‘¢?
ç­”æ¡ˆåœ¨äº&quot;æ‹“å±•ç‰¹å¾&quot;,
è¿™äº›ç‰¹å¾å¯ä»¥å®šä¹‰ä¸ºå¯¹å…¶å®ƒç‰¹å¾çš„æ‹“å±•,
ä¾‹å¦‚ Iterator;
ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬å¯ä»¥é€ˆé€šå¸¸å®ç° Itertor ç‰¹å¾çš„é¡¹è¿½åŠ å…¶å®ƒæœ‰ç”¨çš„å‡½æ•°,
ä½†æ˜¯, å¥¹ä»¬åªæœ‰åœ¨ç‰¹æ€§èŒƒç•´ä»¥å†…æ—¶æ‰å¯ç”¨,
æ¯”å¦‚é€šè¿‡å°†å…¶å¯¼å…¥æ–‡ä»¶ä¸­;</p>
<p>è¿™ç§æ–¹å¼éå¸¸å¥½,å› ä¸º,è¿™äº›ç‰¹å¾åªæœ‰åœ¨ä½ åœ¨é¡¹ç›®ä¸­å¯¼å…¥æ‹“å±•ç‰¹å¾æ—¶æ‰å¯ç”¨,
å¹¶æä¾›äº†ä¸€ç§ä½¿ç”¨å¹²å‡€çš„ API æ‹“å±•é€šç”¨é›†åˆå’Œç±»å‹çš„å¥½æ–¹æ³•,
å¼€å‘è€…å¯ä»¥åƒä½¿ç”¨æ™®é€š API ä¸€æ ·è½»æ¾çš„ä½¿ç”¨è¿™äº› API;
ç”±äº Rayon çš„æ‹“å±•ç‰¹å¾,
ä½¿ç”¨å¹¶è¡Œè¿­ä»£å™¨å°±åƒåœ¨ Rust ä¸­ä½¿ç”¨æ™®é€šè¿­ä»£å™¨ä¸€æ ·ç®€å•;</p>
<p>äº‹å®ä¸Š,è¿™æœ‰ä¸€ä¸ªä¿¡æ¯é‡å¾ˆå¤§çš„æ¼”è®²,è§£é‡Šäº†å¦‚ä½•ä½¿ç”¨ æ‹“å±•ç‰¹å¾ æ¥å¼€å‘ä¸€ä¸ªåœ¨è¿­ä»£å™¨ä¸Šæä¾›è¿›åº¦æ¡çš„åº“;</p>
<p>(<code>æ˜¯ä¹Ÿä¹</code>:</p>
<p><a href="https://www.youtube.com/watch?v=bnnacleqg6k">&quot;Type-Driven API Design in Rust&quot; by Will Crichton - YouTube</a></p>
<p>é…å¥—çœ‹çœ‹ Rayon å®˜æ–¹å¯¹è‡ªå·±å®ç°åŸç†çš„å—¯å“¼: <a href="https://github.com/rayon-rs/rayon/tree/master/src/iter/plumbing">rayon/src/iter/plumbing at master Â· rayon-rs/rayon</a>
ä»¥åŠä¸“é—¨çš„è§£ææ–‡ç« : <a href="https://developers.redhat.com/articles/2023/01/30/run-app-under-openshift-service-mesh">How Rust supports Rayon's data parallelism | Red Hat Developer</a></p>
<p>å¤§çº¦å¯ä»¥æ„Ÿå—åˆ° Rust ä¸–ç•Œçš„ä»»æ€§äº†...
)</p>
<h3 id="æ‹¥æŠ±-option-å’Œ-result-ç±»å‹çš„ä¸€å…ƒæ€§"><a class="header" href="#æ‹¥æŠ±-option-å’Œ-result-ç±»å‹çš„ä¸€å…ƒæ€§">æ‹¥æŠ± Option å’Œ Result ç±»å‹çš„ä¸€å…ƒæ€§</a></h3>
<p>ä½¿ç”¨ Option å’Œ Result ä¹‹å,
äººä»¬ä¼šå¾ˆå¿«çœ‹åˆ°<code>.unwrap()</code> å°†å€¼ä»å¥¹ä»¬ç§»å‡º,
å¦‚æœ Option å’Œ Result æ˜¯å…±äº«å¼•ç”¨(æ¯”å¦‚ struct)çš„ä¸€éƒ¨åˆ†,
å°±å°†å¯¼è‡´å¤±è´¥;
ç„¶è€Œ,æœ‰æ—¶æˆ‘ä»¬æƒ³è¦çš„åªæ˜¯æ–­è¨€ Option åŒ¹é…å†…éƒ¨çš„å€¼æˆ–è·å–å¯¹å…¶å†…éƒ¨çš„å¼•ç”¨;
æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥ä½œåˆ°è¿™ç‚¹,
ä½†æ˜¯, è¿˜æœ‰ä¸€ç§æ–¹å¼èƒ½ä¸ç”¨ç¦»å¼€ Option é¢†åŸŸ:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn check_five(x: Option&lt;i32&gt;) -&gt; bool {
    // Contains can just check if the Option has what we want.
    x.contains(&amp;5)
}
<span class="boring">}
</span></code></pre></pre>
<p>å¦ä¸€ä¸ªç¤ºä¾‹æ˜¯æˆ‘ä»¬æƒ³è¦ç”¨ None å€¼æ›¿æ¢ Option å†…æ•°æ®,
ä¹Ÿå°±æ˜¯å’ŒæŸäº›ç»“æ„äº¤äº’æ—¶;
æˆ‘ä»¬å¯ä»¥ç”¨æŒ‡ä»¤å¼ç¼–ç¨‹çš„æ–¹å¼æ¥ç¼–å†™,
å¹¶æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è¯¦ç»†å®Œæˆ:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Foo {
    data: Option&lt;T&gt;,
}

impl&lt;T&gt; Foo&lt;T&gt; {
    // Takes the value of data and leaves None in its place.
    fn pop(&amp;mut self) -&gt; Option&lt;T&gt; {
        if self.data.is_none() {
            return None;
        }
        let value = self.data.unwrap();
        self.data = None;
        value
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>ç„¶è€Œ, Option æœ‰ä¸€äº›éå¸¸é…·çš„å±æ€§,
å› ä¸º, å¥¹ä»¬çš„åŸºæœ¬æ€§è´¨æ˜¯å®šä¹‰äº†æœ‰ç”¨çš„æ–¹æ³•,
å¯ä»¥è®©æˆ‘ä»¬çš„ç”Ÿæºæ›´åŠ è½»æ¾;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Takes the value of data and leaves None in its place.
fn pop(&amp;mut self) -&gt; Option&lt;T&gt; {
    self.data.take()
}
<span class="boring">}
</span></code></pre></pre>
<p>Rust ä¸­çš„ Option ä»¥å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ç›¸åŒçš„èŒƒä¾‹ä¸ºæ¨¡å‹,
å±äºæ›´å¹¿æ³›çš„æ•°æ®ç±»å‹ç±»åˆ«, ç§°ä¸º Monad;
ä¸ç”¨æ·±å…¥ç†è§£ Monad æ˜¯ä»€ä¹ˆ, è€Œå˜¦å°†å…¶è§†ä¸ºæ•°æ®çš„åŒ…è£…å™¨,
æˆ‘ä»¬å¯ä»¥åœ¨ä¸éœ€è¦ä»ä¸­å–å‡ºä¸œè¥¿çš„æƒ…å†µä¸‹å¯¹å…¶è¿›è¡Œæ“ä½œ;
æ¯”å¦‚, æƒ³è±¡ä¸€ä¸ªå°†ä¸¤ä¸ª Option å†…éƒ¨å€¼ç›¸åŠ å¹¶è¿”å›ä¸€ä¸ª Option çš„å‡½æ•°:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn add(x: Option&lt;i32&gt;, y: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
    if x.is_none() || y.is_none() {
        return None;
    }
    return Some(x.unwrap() + y.unwrap());
}
<span class="boring">}
</span></code></pre></pre>
<p>ä¸Šè¿°ä»£ç çœ‹èµ·æ¥æœ‰ç‚¹ç‚¹ç¬¨æ‹™,å› ä¸º,éœ€è¦æ‰§è¡Œ none æ£€éªŒ,
è€Œä¸”æˆ‘ä»¬å¿…é¡»ä»ä¸¤ä¸ª Option ä¸­æå–å€¼å¹¶ä»ä¸­æ„å»ºä¸€ä¸ªæ–° Option å°±å¾ˆå›§;
ç„¶è€Œ, ç”±äº Option çš„ç‰¹æ®Šå±æ€§,
æˆ‘ä»¬å¯ä»¥ä½œçš„æ›´å¥½!
è¿™æ˜¯æˆ‘ä»¬å¯ä»¥è·å¾—çš„:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn add(x: Option&lt;i32&gt;, y: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
    x.zip(y).map(|(a, b)| a+b)
}
<span class="boring">}
</span></code></pre></pre>
<p>å¯ä»¥å¯¹ option ä½¿ç”¨ zip å’Œ map ,
å°±åƒæˆ‘ä»¬å¯ä»¥å¤„ç†æ•°ç»„å’Œå‘é‡ä¸€æ ·;
æ­¤å±æ€§ä¹Ÿå­˜åœ¨äº Result ç±»å‹ä¸­,
ç”šè‡³å­˜åœ¨äºè¯¸å¦‚ <code>Future</code> ç±»å‹ä¹‹ç±»äº‹ç‰©ä¸­;
å¦‚æœä½ å¯¹ä¸ºä»€ä¹ˆè¿™ä¹ˆä½œæ„Ÿåˆ°å¥½å¥‡,
è¯·ç»§ç»­æŒ–æ˜ Monad çš„æ›´å¤šä¿¡æ¯ -&gt; <a href="https://stackoverflow.com/questions/2704652/monad-in-plain-english-for-the-oop-programmer-with-no-fp-background">functional programming - Monad in plain English? (For the OOP programmer with no FP background) - Stack Overflow</a></p>
<p>æ¥å— Option å’Œ Result ç±»å‹çš„ä¸€å…ƒæ€§è´¨,
ä¸è¦åˆ°å¤„ä½¿ç”¨ unwrap å’Œ if x.is_none() {} else ;
æœ¬èº«å°±åŒ…å«äº†å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•,
ä½ å¯ä»¥åœ¨æ ‡å‡†åº“ä¸­é˜…è¯»è¿™äº›æ–¹æ³•;</p>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>æ‰€ä»¥, æ ‡å‡†åº“çš„é€šè¯»æ˜¯ä¸€ä¸ªåŸºæœ¬åŠŸäº†,
ä¸è¿‡, ç›¸æ¯” Python ç­‰å…¶å®ƒè¯­è¨€çš„å®˜æ–¹æ–‡æ¡£,
docs.rs å®åœ¨å¤ªéº»äº†ç‚¹å„¿,è¿˜è¦ä¹ æƒ¯ä¸€ä¸‹;</p>
<p>)</p>
<h3 id="äº†è§£-drop-åº”è¯¥å¦‚ä½•é’ˆå¯¹ä¸åŒæ•°æ®ç»“æ„å®ç°"><a class="header" href="#äº†è§£-drop-åº”è¯¥å¦‚ä½•é’ˆå¯¹ä¸åŒæ•°æ®ç»“æ„å®ç°">äº†è§£ Drop åº”è¯¥å¦‚ä½•é’ˆå¯¹ä¸åŒæ•°æ®ç»“æ„å®ç°</a></h3>
<p>æ ‡å‡†åº“å°† Drop ç‰¹æ€§æè¿°ä¸º:</p>
<p>å½“ä¸å†éœ€è¦æŸä¸ªå€¼æ—¶, Rust å°†å¯¹è¯¥å€¼è¿è¡Œ&quot;ææ„å‡½æ•°&quot;;
ä¸å†éœ€è¦æŸä¸ªå€¼æœ€å¸¸è§æ–¹å¼æ˜¯è¶…å‡ºä½œç”¨åŸŸ;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Drop {
    fn drop(&amp;mut self);
}
<span class="boring">}
</span></code></pre></pre>
<p>åœ¨ Rust ä¸­ç¼–å†™æ•°æ®ç»“æ„æ—¶, Drop æ˜¯è‡³å…³é‡è¦çš„;
äººä»¬å¿…é¡»æœ‰ä¸€ç§åˆç†çš„æ–¹æ³•æ¥å¤„ç†ä¸€æ—¦ä¸å†éœ€è¦å†…å­˜æ—¶å¦‚ä½•ä¸¢å¼ƒ(å®‰å…¨çš„);
ä½¿ç”¨å¼•ç”¨è®¡æ•°ç±»å‹å¯ä»¥æŠ¥æ—¶ä½ å…‹æœè¿™äº›éšœç¢,
ä½†æ˜¯, è¿™å¹¶ä¸æ€»æ˜¯è¶³å¤Ÿçš„;
ä¾‹å¦‚,ç¼–å†™è‡ªå®šä¹‰é“¾è¡¨æˆ–æ˜¯ç¼–å†™ä½¿ç”¨é€šé“çš„ç»“æ„æ—¶,é€šå¸¸è¦å®ç°è‡ªå®šä¹‰ç‰ˆæœ¬çš„ Drop;
å½“ä½ çœ‹åˆ°æ ‡å‡†åº“å®é™…å¦‚ä½•æ‰§è¡Œæ—¶,
å®ç° Drop æ¯”å¹¶çœ‹èµ·æ¥å®¹æ˜“çš„å¤š:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// That's it!
fn drop&lt;T&gt;(t: T) {}
<span class="boring">}
</span></code></pre></pre>
<p>å·§å¦™åˆ©ç”¨å¤±å»ä½œç”¨åŸŸæ—¶é”€æ¯çš„è§„åˆ™,
<code>std::mem::drop</code> æœ‰ä¸€ä¸ªç©ºå‡½æ•°ä½“!</p>
<p>è¿™æ˜¯ä¸€ä¸ªæŠ€å·§, ä½ å¯ä»¥åœ¨è‡ªå·±çš„è‡ªå®šä¹‰ Drop å®ç°ä¸­ä½¿ç”¨,
å˜¦ä½ æ¶µç›–æ‰€æœ‰åŸºç±»?å³å¯;</p>
<h3 id="çœŸçš„å¯¹å€Ÿç”¨æ£€æŸ¥å‘˜å¾ˆæ°”-é‚£å°±ç”¨ä¸å¯å˜æ•°æ®ç»“æ„"><a class="header" href="#çœŸçš„å¯¹å€Ÿç”¨æ£€æŸ¥å‘˜å¾ˆæ°”-é‚£å°±ç”¨ä¸å¯å˜æ•°æ®ç»“æ„">çœŸçš„å¯¹å€Ÿç”¨æ£€æŸ¥å‘˜å¾ˆæ°”? é‚£å°±ç”¨ä¸å¯å˜æ•°æ®ç»“æ„</a></h3>
<p>å‡½æ•°å¼ç¨‹åºå‘˜å–œæ¬¢è¯´å…¨å±€çš„/å¯å˜çš„çŠ¶æ€æ˜¯ä¸‡æ¶ä¹‹æº,
å¦‚æœå¯ä»¥é¿å…,é‚£æ¯›è¿˜è¦ä½¿ç”¨å‘¢?
å¤šäºäº† Rust çš„å‡½æ•°å¼ç»“æ„,
æˆ‘ä»¬æ‰èƒ½æ„å»ºä»ä¸€å¼€å§‹å°±ä¸å¯èƒ½çªå˜çš„ç»“æ„ç»“æ„!
å½“ä½ éœ€è¦ç¼–å†™ç±»ä¼¼åœ¨ Haskell/OCaml æˆ–å…¶å®ƒè¯­è¨€ä¸­çœ‹åˆ°çš„çº¯ç²¹å‡½æ•°å¼ä»£ç æ—¶,
è¿™å°¤å…¶æœ‰ç”¨;</p>
<p>é€šè¿‡é“¾æ¥åˆ—è¡¨ç»¼åˆæ•™ç¨‹ä¸­çš„ç¤ºä¾‹,
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä½•æ„å»ºä¸€ä¸ªä¸å¯å˜åˆ—è¡¨,å…¶ä¸­èŠ‚ç‚¹æœ‰å¼•ç”¨è®¡æ•°:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::rc::Rc;

pub struct List&lt;T&gt; {
    head: Link&lt;T&gt;,
}

type Link&lt;T&gt; = Option&lt;Rc&lt;Node&lt;T&gt;&gt;&gt;;

struct Node&lt;T&gt; {
    elem: T,
    next: Link&lt;T&gt;,
}

impl&lt;T&gt; List&lt;T&gt; {
    pub fn new() -&gt; Self {
        List { head: None }
    }

    pub fn prepend(&amp;self, elem: T) -&gt; List&lt;T&gt; {
        List { head: Some(Rc::new(Node {
            elem: elem,
            next: self.head.clone(),
        }))}
    }

    pub fn tail(&amp;self) -&gt; List&lt;T&gt; {
        List { head: self.head.as_ref().and_then(|node| node.next.clone()) }
    }
    ...
<span class="boring">}
</span></code></pre></pre>
<p>è¿™å°±å¾ˆèµ,å› ä¸º,å…¶è¡Œä¸ºç±»ä¼¼äºå‡½æ•°å¼æ•°æ®ç»“æ„,
åœ¨å‡½æ•°å¼æ•°æ®ç»“æ„ä¸­,
äººä»¬ä¸ä¼šé€šè¿‡è¿½åŠ å‰ç¼€æ¥ä¿®æ”¹åˆ—è¡¨,
è€Œæ˜¯é€šè¿‡ä»¥æ–°å…ƒç´ ä½œä¸ºå…¶å¤´éƒ¨å’Œç°æœ‰åˆ—è¡¨ä½œä¸ºå°¾éƒ¨æ¥æ„å»ºåˆ—è¡¨å®Œæˆæ–°æ„å»º;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    [head] ++ tail
<span class="boring">}
</span></code></pre></pre>
<p>è¯·æ³¨æ„,ä¸Šè¿°æ–¹æ³•éƒ½ä¸éœ€è¦ mut, å› ä¸º,æˆ‘ä»¬çš„æ•°æ®ç»“æ„æ˜¯ä¸å¯å˜çš„!
è¿™åœ¨å†…å­˜ä¸Šä¹Ÿæ˜¯éå¸¸é«˜æ•ˆçš„,å› ä¸º,è¯¥ç»“æ„æ˜¯å¼•ç”¨è®¡æ•°çš„,
è¿™æ„å‘³ç€å¦‚æœæ­¤æ•°æ®ç»“æ„ä¸Šæœ‰å¤šä¸ªè°ƒç”¨è€…,
æˆ‘ä»¬ä¸ä¼šæµªè´¹ä¸å¿…è¦çš„èµ„æºæ¥å¤åˆ¶èŠ‚ç‚¹çš„åº•å±‚å†…å­˜;</p>
<p>Rust ä¸­çš„çº¯å‡½æ•°ä»£ç å¾ˆç®€æ´,
ä½†æ˜¯,å¤šæ•°æ—¶å€™,éœ€è¦å°¾é€’å½’æ¥äº†æŠŠç”¨æˆ‘å¿«è¿™ç§æ–¹å¼å®ç°çš„é«˜æ€§èƒ½ä»£ç ï¼›
è€Œä¸”ï¼Œè¦å°å¿ƒï¼Œæ¯•ç«Ÿ Rust ç¼–è¯‘å™¨ä¸ä¿è¯å°¾è°ƒç”¨ä¼˜åŒ–ï¼›
å€¼å¾—è¿›ä¸€æ­¥æŒ–æ˜æ›´å¤šä¿¡æ¯ -&gt; <a href="https://stackoverflow.com/questions/59257543/when-is-tail-recursion-guaranteed-in-rust">When is tail recursion guaranteed in Rust? - Stack Overflow</a></p>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>è¿™å°±å°´å°¬äº†, åªæ˜¯ä¸ªçœ‹èµ·æ¥å¾ˆç¾çš„æ€è·¯,
æ¯•ç«Ÿ Rust ä¸æ˜¯çº¯å‡½æ•°è¯­è¨€,
é€’å½’å¹¶ä¸æ˜¯ç¬¬ä¸€å…¬æ°‘;</p>
<p>æ‰€ä»¥, è¿™ç§åœºæ™¯ä¸­,è¿˜æ˜¯è€å®å’Œ å€Ÿç”¨ç®¡ç†å‘˜ å¥½å¥½å•†é‡å§...</p>
<p>)</p>
<h3 id="traits-ç¯®æœ‰åŠ©å‡å°‘é‡å¤"><a class="header" href="#traits-ç¯®æœ‰åŠ©å‡å°‘é‡å¤">traits ç¯®æœ‰åŠ©å‡å°‘é‡å¤</a></h3>
<p>æœ‰æ—¶,å¯èƒ½å¸Œæœ›é€šè¿‡å¾ˆå¤šä¸åŒçš„ç‰¹å¾æ¥çº¦æŸæ³›å‹å‚æ•°:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Foo&lt;T: Copy + Clone + Ord + Bar + Baz + Nyan&gt; {
    vals: Vec&lt;T&gt;,
}
<span class="boring">}
</span></code></pre></pre>
<p>ä½†æ˜¯,ä¸€æ—¦ä½ å¼€å§‹ç¼–å†™ impl è¯­å¥,
æˆ–æ˜¯å½“ä½ æœ‰å¤šä¸ªé€šç”¨å‚æ•°æ—¶,
è¿™å¾ˆå¿«å°±ä¼šå¤±æ§;
ç›¸åä½ å¯æº¶æ€§å®šä¹‰ä¸€ä¸ªæ•´ä½“ç‰¹å¾, ä½¿ä»£ç æ›´åŠ  DRY;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Fooer: Copy + Clone + Ord + Bar + Baz + Nyan {}

struct Foo&lt;F: Fooer&gt; {
    vals: Vec&lt;F&gt;,
}

impl&lt;F: Fooer&gt; Foo&lt;F&gt; { ... }
<span class="boring">}
</span></code></pre></pre>
<p>traits ç¯®å¯ä»¥å¸®åŠ©å‡å°‘é‡å¤ï¼Œ
ä½†æ˜¯ï¼Œä¸è¦è®©å…¶å˜å¾—è¿‡å¤§ï¼›
åœ¨å¾ˆå¤šæƒ…å†µä¸­ï¼Œ
è®©ä¸€ä¸ªç±»å‹éœ€è¦å¦‚æ­¤å¤šçš„çº¦æŸå¯èƒ½ä¼šäº§ç”Ÿåå‘³é“,
å› ä¸º,ä½ åˆ›å»ºçš„æŠ½è±¡å¤ªå¤§äº†;
ç›¸å,å¦‚æœä½ å‘ç°çº¦æŸæ— ç¼˜æ— æ•…çš„å˜å¾—å¤ªå¤§,
è¯·ä¼ å…¥å…·ä½“ç±»å‹;
ç„¶è€Œ,æŸäº›åº”ç”¨å’Œè¿œåˆå¯èƒ½å—ç›Šäº blanket traits/ç‰¹å¾ç¯®,
ä¾‹å¦‚æ—¨åœ¨æä¾›å°½å¯èƒ½é€šç”¨çš„ API åº“;</p>
<h3 id="match-statements-are-very-flexible-and-structural-in-nature"><a class="header" href="#match-statements-are-very-flexible-and-structural-in-nature">Match statements are very flexible and structural in nature</a></h3>
<p>Instead of nesting match statements, for example, one could bring values together as tuples and do the following:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn player_outcome(player: &amp;Move, opp: &amp;Move) -&gt; Outcome {
    use Move::*;
    use Outcome::*;
    match (player, opp) {
        // Rock moves.
        (Rock, Rock) =&gt; Draw,
        (Rock, Paper) =&gt; Lose,
        (Rock, Scissors) =&gt; Win,
        // Paper moves.
        (Paper, Rock) =&gt; Win,
        (Paper, Paper) =&gt; Draw,
        (Paper, Scissors) =&gt; Lose,
        // Scissor moves.
        (Scissors, Rock) =&gt; Lose,
        (Scissors, Paper) =&gt; Win,
        (Scissors, Scissors) =&gt; Draw,
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>This is an example of why pattern matching is far more powerful than switch statements seen in imperative languages and it can do more much than that when it comes to deconstructing inner values!</p>
<h3 id="avoid-_--clauses-in-match-statements-if-your-matchees-are-finite-and-known"><a class="header" href="#avoid-_--clauses-in-match-statements-if-your-matchees-are-finite-and-known">Avoid _ =&gt; clauses in match statements if your matchees are finite and known</a></h3>
<p>For example, letâ€™s say we have an enum:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Foo {
    Bar,
    Baz,
    Nyan,
    Zab,
    Azb,
    Bza,
}
<span class="boring">}
</span></code></pre></pre>
<p>When writing match statements, we should match every single type of the enum if we can and not resort to catch-all clauses</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>match f {
    Bar =&gt; { ... },
    Baz =&gt; { ... },
    Nyan =&gt; { ... },
    Zab =&gt; { ... },
    Azb =&gt; { ... },
    Bza =&gt; { ... },
}
<span class="boring">}
</span></code></pre></pre>
<p>This is really helpful for maintenance of code, because if the original writer of the enum adds more variants to it, the project wonâ€™t compile if we forget to handle the new variants in our match statements.</p>
<h3 id="match-guard-clauses-are-powerful"><a class="header" href="#match-guard-clauses-are-powerful">Match guard clauses are powerful</a></h3>
<p>Match guards are awesome when you have an unknown or potentially infinite number of matchees, such as ranges of numbers. However, they will force you to have a catch-all <code>_ =&gt;</code> if your range cannot be fully encompassed by the guard, which can be a downside when writing maintainable code.</p>
<p>The canonical example from the Rust book is below:</p>
<pre><pre class="playground"><code class="language-rust">enum Temperature {
    Celsius(i32),
    Fahrenheit(i32),
}

fn main() {
    let temperature = Temperature::Celsius(35);
    match temperature {
        Temperature::Celsius(t) if t &gt; 30 =&gt; println!(&quot;{}C is above 30 Celsius&quot;, t),
        Temperature::Celsius(t) =&gt; println!(&quot;{}C is below 30 Celsius&quot;, t),
        Temperature::Fahrenheit(t) if t &gt; 86 =&gt; println!(&quot;{}F is above 86 Fahrenheit&quot;, t),
        Temperature::Fahrenheit(t) =&gt; println!(&quot;{}F is below 86 Fahrenheit&quot;, t),
    }
}
</code></pre></pre>
<h3 id="need-to-mess-with-raw-asm-theres-a-macro-for-that"><a class="header" href="#need-to-mess-with-raw-asm-theres-a-macro-for-that">Need to mess with raw asm? Thereâ€™s a macro for that!</a></h3>
<p>Core asm provides a macro that lets you write inline assembly in Rust, which can help when doing fancy things such as directly intercepting the CPUâ€™s stack, or wanting to implement advanced optimizations. Hereâ€™s an example where we use inline assembly to trick the processorâ€™s stack to execute our function by simply moving the stack pointer to it!</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use core::arch::asm;

const MAX_DEPTH: isize = 48;
const STACK_SIZE: usize = 1024 * 1024 * 2;

#[derive(Debug, Default)]
#[repr(C)]
struct StackContext {
    rsp: u64,
}

fn nyan() -&gt; ! {
    println!(&quot;nyan nyan nyan&quot;);
    loop {}
}

pub fn move_to_nyan() {
    let mut ctx = StackContext::default();
    let mut stack = vec![0u8; MAX as usize];
    unsafe {
        let stack_bottom = stack.as_mut_ptr().offset(MAX_DEPTH);
        let aligned = (stack_bottom as usize &amp; !15) as *mut u8;
        std::ptr::write(aligned.offset(-16) as *mut u64, nyan as u64);
        ctx.rsp = aligned.offset(-16) as u64;
        switch_stack_to_fn(&amp;mut ctx);
    }
}

unsafe fn switch_stack_to_fn(new: *const StackContext) {
    asm!(
        &quot;mov rsp, [{0} + 0x00]&quot;,
        &quot;ret&quot;,
        in(reg) new,
    )
}
<span class="boring">}
</span></code></pre></pre>
<h3 id="use-criterion-to-benchmark-your-code-and-its-throughput"><a class="header" href="#use-criterion-to-benchmark-your-code-and-its-throughput">Use Criterion to benchmark your code and its throughput</a></h3>
<p>The Criterion package for benchmarking Rust code is a fantastic work of engineering. It gives you access to awesome benchmarking features with graphs, regression analysis, and other fancy tools. It can even be used to measure different dimensions of your functions such as time and throughput. For example, we can see how fast we can construct, take, and collect raw bytes using the standard libraryâ€™s iterator methods at different histogram buckets.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::iter;

use criterion::BenchmarkId;
use criterion::Criterion;
use criterion::Throughput;
use criterion::{criterion_group, criterion_main};

fn from_elem(c: &amp;mut Criterion) {
    static KB: usize = 1024;

    let mut group = c.benchmark_group(&quot;from_elem&quot;);
    for size in [KB, 2 * KB, 4 * KB, 8 * KB, 16 * KB].iter() {
        group.throughput(Throughput::Bytes(*size as u64));
        group.bench_with_input(BenchmarkId::from_parameter(size), size, |b, &amp;size| {
            b.iter(|| iter::repeat(0u8).take(size).collect::&lt;Vec&lt;_&gt;&gt;());
        });
    }
    group.finish();
}

criterion_group!(benches, from_elem);
criterion_main!(benches);
<span class="boring">}
</span></code></pre></pre>
<p>and after adding the following entries to the projectâ€™s Cargo.toml file, one can run it with <code>cargo bench</code>.</p>
<pre><code class="language-toml">[dev-dependencies]
criterion = &quot;0.3&quot;

[[bench]]
name = &quot;BENCH_NAME&quot;
harness = false
</code></pre>
<p>Not only does criterion show you really awesome charts and descriptive info, but it can also remember prior results of benchmark runs, telling you of performance regressions. In this case, I was using my computer to do a lot of other things at the same time as I ran the benchmark, so it naturally regressed from the last time I measured it. Nonetheless, this is really cool!</p>
<pre><code>    Found 11 outliers among 100 measurements (11.00%)
      2 (2.00%) low mild
      4 (4.00%) high mild
      5 (5.00%) high severe
    from_elem/8192          time:   [79.816 ns 79.866 ns 79.913 ns]
                            thrpt:  [95.471 GiB/s 95.528 GiB/s 95.587 GiB/s]
                     change:
                            time:   [+7.3168% +7.9223% +8.4362%] (p = 0.00 &lt; 0.05)
                            thrpt:  [-7.7799% -7.3407% -6.8180%]
                            Performance has regressed.
    Found 3 outliers among 100 measurements (3.00%)
      2 (2.00%) high mild
      1 (1.00%) high severe
    from_elem/16384         time:   [107.22 ns 107.28 ns 107.34 ns]
                            thrpt:  [142.15 GiB/s 142.23 GiB/s 142.31 GiB/s]
                     change:
                            time:   [+3.1408% +3.4311% +3.7094%] (p = 0.00 &lt; 0.05)
                            thrpt:  [-3.5767% -3.3173% -3.0451%]
                            Performance has regressed.
</code></pre>
<h3 id="understand-key-concepts-by-reading-the-std-lib"><a class="header" href="#understand-key-concepts-by-reading-the-std-lib">Understand key concepts by reading the std lib!</a></h3>
<p>I love to get lost in some of the standard library, especially std::rc, std::iter, and std::collections. Here are some awesome tidbits I learned from it on my own:</p>
<ul>
<li>How vec is actually implemented</li>
<li>The ways in which interior mutability is achieved by different methods in std::cell and std::rc</li>
<li>How channels are implemented in std::sync</li>
<li>The magic of std::sync::Arc</li>
<li>Hearing the thorough explanations of design decisions made while developing its libraries from Rustâ€™s authors</li>
</ul>
<p>I hope this post was informative for folks coming into Rust and hitting some of its obstacles. Expect more Rust content to come soon, especially on more advanced topics!</p>
<h3 id="shoutout"><a class="header" href="#shoutout">Shoutout</a></h3>
<p>Shoutout to my colleagues at Offchain Labs, Rachel and Lee Bousfield for their incredible breadth of knowledge of the language. Some of their tips inspired this post</p>
<h2 id="refer-6"><a class="header" href="#refer-6">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-6"><a class="header" href="#logging-6">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230120 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å­¦ä¹ "><a class="header" href="#å­¦ä¹ ">å­¦ä¹ </a></h1>
<blockquote>
<p>learnning ...</p>
</blockquote>
<h2 id="background-4"><a class="header" href="#background-4">background</a></h2>
<blockquote>
<p>å¯èƒ½èƒŒæ™¯</p>
</blockquote>
<p>å’Œå…¶å®ƒè¯­è¨€ä¸åŒ, Rust æœ‰å¤ªå¤šå…¬å¼€çš„ç§˜å¯†,å¦‚æœä¸èƒ½å¿«é€Ÿå…ˆä¹ æƒ¯ä¸€æ‰¹,
å¾ˆéš¾å†™å‡ºå¯ä»¥è¿è¡Œçš„è½¯ä»¶æ¥...</p>
<h2 id="goal-4"><a class="header" href="#goal-4">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p>æœ€å¸¸ç”¨çš„é‚£ 20% Rust å¸¸è¯†...</p>
<h2 id="trace-4"><a class="header" href="#trace-4">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<h2 id="refer-7"><a class="header" href="#refer-7">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<h2 id="logging-7"><a class="header" href="#logging-7">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221214 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="exercism"><a class="header" href="#exercism">Exercism</a></h1>
<blockquote>
<p>ç»ƒä¹ ä¸»ä¹‰</p>
</blockquote>
<h2 id="background-5"><a class="header" href="#background-5">background</a></h2>
<blockquote>
<p>å…·ä½“èƒŒæ™¯</p>
</blockquote>
<p><a href="https://exercism.org/about">About Exercism</a></p>
<p>æ˜¯ä¸€ä¸ªç¥å¥‡çš„ç½‘ç«™</p>
<p><img src="https://ipic.zoomquiet.top/2022-12-14-zshot%202022-12-14%2021.30.38.jpg" alt="" /></p>
<p>ä¸€æ˜¯ä¸ªä¸“æ³¨ç”¨ç»ƒä¹ é¢˜æ¥å­¦ä¹ å„ç§å¼€å‘è¯­è¨€çš„ç½‘ç«™,
å…è´¹,åŒ…å«è¶Šæ¥è¶Šå¤šçš„è¯­è¨€</p>
<h2 id="goal-5"><a class="header" href="#goal-5">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p><a href="https://exercism.org/tracks/rust">Rust on Exercism</a></p>
<p>è‡³å°‘å…ˆåˆ·å®Œè¿™ 103 é“é¢˜ç›®, ç„¶å, å†å¼€å‘å…·ä½“çš„å®ç”¨å·¥å…·;</p>
<h2 id="trace-5"><a class="header" href="#trace-5">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<p><img src="https://ipic.zoomquiet.top/2022-12-14-zshot%202022-12-14%2021.31.48.jpg" alt="rust" /></p>
<p>ä¸è¿‡æœ€ç»ˆæ˜¯ä¹±åºæ¥çš„</p>
<h2 id="refer-8"><a class="header" href="#refer-8">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<p><a href="https://cheats.rs/">Rust Language Cheat Sheet</a></p>
<ul>
<li><a href="https://juejin.cn/post/7146144676532191262">16ï½œæ•°æ®ç»“æ„ï¼šVec<T>ã€&amp;[T]ã€Box&lt;[T]&gt; ï¼Œä½ çœŸçš„äº†è§£é›†åˆå®¹å™¨ä¹ˆï¼Ÿ - æ˜é‡‘</a></li>
<li>...</li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a16a825f50d4d34866d432c15fa3ebd~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="" /></p>
<h2 id="logging-8"><a class="header" href="#logging-8">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221214 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rs42all-your-base"><a class="header" href="#rs42all-your-base">rs42all-your-base</a></h1>
<blockquote>
<p>æ‰€æœ‰è¿›åˆ¶</p>
</blockquote>
<h2 id="background-6"><a class="header" href="#background-6">background</a></h2>
<blockquote>
<p>å…·ä½“èƒŒæ™¯</p>
</blockquote>
<p><a href="https://exercism.org/docs/tracks/rust">All Your Base in Rust on Exercism</a></p>
<h2 id="logging-9"><a class="header" href="#logging-9">logging</a></h2>
<blockquote>
<p>è®°è¦</p>
</blockquote>
<h3 id="try_fold"><a class="header" href="#try_fold">try_fold()</a></h3>
<blockquote>
<p>è¡¨è¾¾èƒ½åŠ›çš„å…¸èŒƒ...</p>
</blockquote>
<h2 id="refer-9"><a class="header" href="#refer-9">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Positional_notation#External_links">Positional notation - Wikipedia</a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/trait.Iterator.html">Iterator in std::iter - Rust</a>
<ul>
<li><a href="https://qiita.com/lo48576/items/34887794c146042aebf1">Rustã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®ç¶²ç¾…çš„ã‹ã¤å¤§é›‘æŠŠãªç´¹ä»‹ - Qiita</a></li>
<li><a href="https://zenn.dev/megeton/articles/fb6266bcb6aa1b">Rubyè„³ã®ãŸã‚ã®Rusté…åˆ—ç³»ãƒ¡ã‚½ãƒƒãƒ‰ã¾ã¨ã‚</a></li>
<li>...</li>
</ul>
</li>
<li><a href="https://rustcc.cn/article?id=2f4b3a15-7874-4c68-b9d8-5a717e9a3af0">rustæ–°æ‰‹çš„ä¸€ä¸ªé—®é¢˜ï¼šfoldå’Œscanã€‚ - Rustè¯­è¨€ä¸­æ–‡ç¤¾åŒº</a>
<ul>
<li><a href="https://juejin.cn/post/7067102952602746910">æŠ›å¼ƒRustçš„try...catchå’Œnullæ£€æŸ¥ - æ˜é‡‘</a></li>
<li>...</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ex43allergies"><a class="header" href="#ex43allergies">ex43Allergies</a></h1>
<blockquote>
<p>è¿‡æ•æº</p>
</blockquote>
<h2 id="background-7"><a class="header" href="#background-7">background</a></h2>
<blockquote>
<p>å…·ä½“èƒŒæ™¯</p>
</blockquote>
<p><a href="https://exercism.org/tracks/rust/exercises/allergies">Allergies in Rust on Exercism</a></p>
<h2 id="logging-10"><a class="header" href="#logging-10">logging</a></h2>
<blockquote>
<p>è®°è¦</p>
</blockquote>
<h3 id=""><a class="header" href="#">&amp;</a></h3>
<blockquote>
<p>ç°å®ä¸–ç•Œçš„ ä¸è®¡ç®—</p>
</blockquote>
<h2 id="refer-10"><a class="header" href="#refer-10">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<ul>
<li><a href="https://hltj.me/lang/2016/11/07/10m-letters.html">ç”±â€œåƒä¸‡å­—æ¯è¡¨é—®é¢˜â€çœ‹å¤šèŒƒå¼ç¼–ç¨‹è¯­è¨€ | ç°è“æ—¶å…‰</a>
<ul>
<li><a href="http://www.nct9.ne.jp/m_hiroi/linux/rust14.html">Linux Programming / ãŠæ°—æ¥½ Rust ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¶…å…¥é–€</a></li>
</ul>
</li>
<li>...</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ç¬”è®°"><a class="header" href="#ç¬”è®°">ç¬”è®°</a></h1>
<blockquote>
<p>logging</p>
</blockquote>
<h2 id="background-8"><a class="header" href="#background-8">background</a></h2>
<blockquote>
<p>æ— å¥ˆèƒŒæ™¯</p>
</blockquote>
<p>ä»»ä½•è‡ªå­¦éƒ½éœ€è¦æ¢ç´¢+å†…çœ, åŒæ—¶æ¥, å¦åˆ™, å¾ˆå®¹æ˜“ä¸çŸ¥é“åœ¨æŠ˜è…¾ä»€ä¹ˆ...</p>
<h2 id="goal-6"><a class="header" href="#goal-6">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<ul>
<li>æ˜¯è°?</li>
<li>åœ¨å“ª?</li>
<li>å»å“ª?</li>
</ul>
<p>éšæ—¶å—¯å“¼æ˜ç™½...</p>
<h2 id="trace-6"><a class="header" href="#trace-6">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
åŸºæœ¬ç¯å¢ƒ</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬è¯­æ³•</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬ std</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬é¡¹ç›®ç»“æ„</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬ç»å…¸å·¥ç¨‹</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬...ä¹ æƒ¯ä»¬?</li>
</ul>
<h2 id="refer-11"><a class="header" href="#refer-11">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-11"><a class="header" href="#logging-11">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221023 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-ä¸‘å¥æ³•"><a class="header" href="#rust-ä¸‘å¥æ³•">Rust ä¸‘å¥æ³•</a></h1>
<p>åŸæ–‡: <a href="https://matklad.github.io/2023/01/26/rusts-ugly-syntax.html#Rust-s-Ugly-Syntax">Rust's Ugly Syntax</a></p>
<h2 id="å¿«è¯‘-2"><a class="header" href="#å¿«è¯‘-2">å¿«è¯‘</a></h2>
<p>å¤§å®¶æŠ±æ€¨ Rust çš„è¯­æ³•;
ä¸è¿‡,ä¿ºæƒ³å¤§å¤šæ•°æ—¶å€™,
å½“äººä»¬è®¤ä¸ºåœ¨å¯¹ Rust è¯­æ³•æœ‰ç–‘é—®æ—¶,
å®é™…ä¸Šåœ¨åæŠ—å¯¹åº”è¯­ä¹‰;
åœ¨è¿™ç¯‡æœ‰ç‚¹å„¿å¼‚æƒ³å¤©å¼€çš„æ–‡ç« ä¸­,
ä¿ºå°†å°è¯•ç†æ¸…è¿™ä¸¤ç‚¹;</p>
<p>å…ˆä»ä¸€ä¸ªä¸‘é™‹çš„è¯­æ³•ç¤ºä¾‹å¼€å§‹:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read&lt;P: AsRef&lt;Path&gt;&gt;(path: P) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
  fn inner(path: &amp;Path) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
    let mut file = File::open(path)?;
    let mut bytes = Vec::new();
    file.read_to_end(&amp;mut bytes)?;
    Ok(bytes)
  }
  inner(path.as_ref())
}
<span class="boring">}
</span></code></pre></pre>
<p>æ­¤å‡½æ•°è¯»å–ç»™å®šäºŒè¿›åˆ¶æ–‡ä»¶å†…å®¹;
è¿™æ˜¯ç›´æ¥ä»æ ‡å‡†åº“ä¸­æå–çš„, æ‰€ä»¥, ä¸ç®—æ˜¯ç¨»è‰äººå¼æ— ç”¨ç¤ºä¾‹;
è€Œä¸”,è‡³å°‘å¯¹ä¿ºæ¥è¯´, è¿™ç»å¯¹ä¸ç®—æ¼‚äº®;</p>
<p>è®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹,å¦‚æœ Rust æœ‰æ›´å¥½çš„è¯­æ³•, è¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å„¿;
å¦‚æœå’ŒçœŸæ­£çš„ç¼–ç¨‹è¯­è¨€æœ‰ä»»ä½•ç›¸ä¼¼ä¹‹å¤„, æ— è®ºçœŸå‡, çº¯å±è¯•åˆ!</p>
<p>ä» Rs++ å¼€å§‹:</p>
<pre><code class="language-c++">template&lt;std::HasConstReference&lt;std::Path&gt; P&gt;
std::io::outcome&lt;std::vector&lt;uint8_t&gt;&gt;
std::read(P path) {
    return read_(path.as_reference());
}

static
std::io::outcome&lt;std::vector&lt;uint8_t&gt;&gt;
read_(&amp;auto const std::Path path) {
    auto file = try std::File::open(path);
    std::vector bytes;
    try file.read_to_end(&amp;bytes);
    return okey(bytes);
}
</code></pre>
<p>Rhodes å˜ä½“:</p>
<pre><code class="language-ruby">public io.Result&lt;ArrayList&lt;Byte&gt;&gt; read&lt;P extends ReferencingFinal&lt;Path&gt;&gt;(
        P path) {
    return myRead(path.get_final_reference());
}

private io.Result&lt;ArrayList&lt;Byte&gt;&gt; myRead(
        final reference lifetime var Path path) {
    var file = try File.open(path);
    ArrayList&lt;Byte&gt; bytes = ArrayList.new();
    try file.readToEnd(borrow bytes);
    return Success(bytes);
}
</code></pre>
<p>ç»å…¸ RhodesScript:</p>
<pre><code class="language-js">public function read&lt;P extends IncludingRef&lt;Path&gt;&gt;(
    path: P,
): io.Result&lt;Array&lt;byte&gt;&gt; {
    return myRead(path.included_ref());
}

private function myRead(
    path: &amp;const Path,
): io.Result&lt;Array&lt;byte&gt;&gt; {
    let file = try File.open(path);
    Array&lt;byte&gt; bytes = Array.new()
    try file.readToEnd(&amp;bytes)
    return Ok(bytes);
}
</code></pre>
<p>å“å°¾è›‡/Rattlesnake:</p>
<pre><code class="language-python">def read[P: Refing[Path]](path: P): io.Result[List[byte]]:
    def inner(path: @Path): io.Result[List[byte]]:
        file := try File.open(path)
        bytes := List.new()
        try file.read_to_end(@: bytes)
        return Ok(bytes)
    return inner(path.ref)
</code></pre>
<p>ä»¥åŠ, CrabML:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>read :: 'p  ref_of =&gt; 'p -&gt; u8 vec io.either.t
let read p =
  let
    inner :: &amp;path -&gt; u8 vec.t io.either.t
    inner p =
      let mut file = try (File.open p) in
      let mut bytes = vec.new () in
      try (file.read_to_end (&amp;mut bytes)); Right bytes
  in
    ref_op p |&gt; inner
;;
<span class="boring">}
</span></code></pre></pre>
<p>ä½œä¸ºä¸€ä¸ªç¨å¾®ä¸¥è‚ƒå’Œæœ‰ç”¨çš„ç»ƒä¹ ,
è®©æˆ‘ä»¬ä½œç›¸åçš„å°è¯•--ä¿ç•™ Rust è¯­æ³•,
ä½†æ˜¯, å°è¯•ç®€åŒ–è¯­ä¹‰ç›´åˆ°æœ€ç»ˆç»“æœ, çœ‹ä¼šæ˜¯ä»€ä¹ˆæ ·å„¿;</p>
<p>è¿™æ˜¯æˆ‘ä»¬çš„èµ·ç‚¹:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read&lt;P: AsRef&lt;Path&gt;&gt;(path: P) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
  fn inner(path: &amp;Path) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
    let mut file = File::open(path)?;
    let mut bytes = Vec::new();
    file.read_to_end(&amp;mut bytes)?;
    Ok(bytes)
  }
  inner(path.as_ref())
}
<span class="boring">}
</span></code></pre></pre>
<p>è¿™æ—¶, æœ€å¤§çš„å™ªéŸ³æºæ˜¯åµŒå¥—å‡½æ•°;
åŠ¨æœºæœ‰ç‚¹å„¿æ·±å¥¥;
å¤–éƒ¨å‡½æ•°æ˜¯é€šç”¨çš„,è€Œå†…éƒ¨ä¸æ˜¯;
ä½¿ç”¨ç¼–è¯‘æ¨¡å¼,è¿™æ„å‘³ç€å¤–éƒ¨å‡½æ•°å’Œç”¨æˆ·ä»£ç ä¸€èµ·ç¼–è¯‘,
è€ŒåµŒçš„å°†ä¼˜åŒ–;
ç›¸æ¯”ä¹‹ä¸‹, å†…éƒ¨å‡½æ•°æ˜¯åœ¨ç¼–è¯‘ std æœ¬èº«æ—¶ç¼–è¯‘çš„,
ä»è€ŒèŠ‚çœäº†ç¼–è¯‘ç”¨æˆ·ä»£ç çš„æ—¶é—´;
ç®€åŒ–è¿™ä¸€ç‚¹(æŸå¤±ä¸€äº›æ€§èƒ½)çš„ä¸€ç§æ–¹æ³•,
è¯´æ˜¯æ³›å‹å‡½æ•°æ€»æ˜¯å•ç‹¬ç¼–è¯‘,
ä½†æ˜¯,èƒ½åœ¨å¹•åæ¥å—ä¸€ä¸ªé¢å¤–çš„è¿è¡Œæ—¶ç§‹ç²®, å¯ä»¥æè¿°ç‰©ç†ç»´åº¦ä¸Šçš„è¾“å…¥å‚æ•°;</p>
<p>è¿™æ ·æˆ‘ä»¬è·å¾—:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read&lt;P: AsRef&lt;Path&gt;&gt;(path: P) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
  let mut file = File::open(path.as_ref())?;
  let mut bytes = Vec::new();
  file.read_to_end(&amp;mut bytes)?;
  Ok(bytes)
}
<span class="boring">}
</span></code></pre></pre>
<p>ä¸‹ä¸ªå™ªéŸ³å…ƒç´ æ˜¯ <code>&lt;P: AsRef&lt;Path&gt;&gt;</code> çº¦æŸ;
è¿™æ˜¯å¿…éœ€çš„,å› ä¸º Rust å–œæ¬¢å°†å†…å­˜ä¸­å­—èŠ‚çš„ç‰©ç†å¸ƒå±€ä½œä¸ºæ¥å£å…¬å¼€,
ç‰¹åˆ«æ˜¯å¯¹å¯ä»¥å¸¦æ¥æ€§èƒ½çš„æƒ…å†µ;
ç‰¹æ®Šçš„, Path çš„å«ä¹‰å¹¶ä¸æ˜¯æ–‡ä»¶è·¯å¾„çš„æŸç§æŠ½è±¡,
è¿™é‡Œåªæ˜¯å­—é¢æ„ä¹‰ä¸Šå†…å­˜ä¸­çš„ä¸€å †è¿ç»­å­—èŠ‚;
æ‰€ä»¥, æˆ‘ä»¬éœ€è¦ AsRef æ¥å°†å…¶å’Œä»»ä½•èƒ½å¤Ÿè¡¨ç¤ºè¿™ç§å­—èŠ‚ç‰‡çš„æŠ½è±¡ä¸€èµ·å·¥ä½œ;
ä½†æ˜¯, å¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒæ€§èƒ½,
å°±å¯ä»¥è¦æ±‚æ‰€æœ‰æ¥å£éƒ½ç›¸å½“æŠ½è±¡,å¹¶é€šè¿‡è™šå‡½æ•°è°ƒç”¨è¿›è¡Œè°ƒè§£,
è€Œä¸æ˜¯ç›´æ¥è®¿é—®å†…å­˜;
é‚£ä¹ˆ, æˆ‘ä»¬å°±ä¸éœ€è¦ AsRef è¿™å †ä¸œè¥¿äº†:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read(path: &amp;Path) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
  let mut file = File::open(path)?;
  let mut bytes = Vec::new();
  file.read_to_end(&amp;mut bytes)?;
  Ok(bytes)
}
<span class="boring">}
</span></code></pre></pre>
<p>è¿™æ ·ç®€åŒ–å,æˆ‘ä»¬å®é™…ä¸Šä¹Ÿå¯ä»¥æ‘†è„± <code>Vec&lt;u8&gt;</code> -- å¦‚æœæˆ‘ä»¬ä¸å†ä½¿ç”¨æ³›å‹æ¥è¡¨è¾¾è¯­è¨€æœ¬èº«çš„é«˜æ•ˆå¯å¢é•¿å­—èŠ‚æ•°ç»„;
æˆ‘ä»¬å¿…é¡»ä½¿ç”¨è¿è¡Œæ—¶æä¾›çš„ä¸€äº›ä¸é€æ˜å­—èŠ‚ç±»å‹:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read(path: &amp;Path) -&gt; io::Result&lt;Bytes&gt; {
  let mut file = File::open(path)?;
  let mut bytes = Bytes::new();
  file.read_to_end(&amp;mut bytes)?;
  Ok(bytes)
}
<span class="boring">}
</span></code></pre></pre>
<p>ä»æŠ€æœ¯ä¸Šè®²,æˆ‘ä»¬ä»ç„¶éšèº«æºå¸¦æ‰€æœ‰æƒå’Œå¤‡ç”¨ç³»ç»Ÿ,
ä½†æ˜¯,ç”±äºæ— æ³•ç›´æ¥æ§åˆ¶ç±»å‹çš„å†…å­˜å¸ƒå±€,
å°±æ— æ³•å¸¦æ¥å·¨å¤§çš„æ€§èƒ½ä¼˜åŠ¿;
ä»ç„¶æœ‰åŠ©äºé¿å… GC,é˜²æ­¢è¿­ä»£å™¨å¤±æ•ˆ,
å¹¶é™æ€æ£€éªŒéçº¿ç¨‹å®‰å…¨ä»£ç æ˜¯å¦å®é™…ä¸Šæ²¡æœ‰è·¨çº¿ç¨‹ä½¿ç”¨;
ä¸è¿‡, å¦‚æœæˆ‘ä»¬åªåˆ‡æ¢åˆ° GC, æˆ‘ä»¬å¯ä»¥è½»æ¾æ‘†è„±é‚£äº› &amp;æŒ‡é’ˆ;
æˆ‘ä»¬ç”šè‡³äºä¸éœ€è¦å¤ªæ‹…å¿ƒå¹¶å‘æ€§--å› ä¸º,æˆ‘ä»¬çš„å¯¹è±¡æ˜¯å•ç‹¬åˆ†é…çš„,è€Œä¸”æ€»æ˜¯åœ¨æŒ‡é’ˆåé¢,
æˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨æ„åˆ°æŒ‡é’ˆå¤§å°,
æ— è®ºæ˜¯å¦åœ¨ x86 ç³»ç»Ÿä¸Šéƒ½æ˜¯åŸå­æ“ä½œæ¥æ¶ˆé™¤æ•°æ®ç«äº‰;</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read(path: Path) -&gt; io::Result&lt;Bytes&gt; {
  let file = File::open(path)?;
  let bytes = Bytes::new();
  file.read_to_end(bytes)?;
  Ok(bytes)
}
<span class="boring">}
</span></code></pre></pre>
<p>æœ€å,æˆ‘ä»¬åœ¨è¿™å¯¹é”™è¯¯çš„å¤„ç†è¿‡äºè¿‚è… -- æˆ‘ä»¬å¹¶ä»…è¦å…³æ³¨è¿”å›ç±»å‹å¤±è´¥çš„å¯èƒ½,
ç”šè‡³äºè¦ç”¨ ? æ¥çªå‡ºæŒ‡ç¤ºä»»ä½•å¯èƒ½å¤±è´¥çš„ç‰¹å®šè¡¨è¾¾å¼;
å®Œå…¨ä¸è€ƒè™‘é”™è¯¯å¤„ç†,
è®©ä¸€äº›é¡¶å±‚å¤„ç†ç¨‹åºæ¥å¤„ç†:
(æ¯”å¦‚: try { } catch (...) { /* intentionally empty */ })</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read(path: Path) -&gt; Bytes {
  let file = File::open(path);
  let bytes = Bytes::new();
  file.read_to_end(bytes);
  bytes
}
<span class="boring">}
</span></code></pre></pre>
<p>ç°åœ¨æ˜¯å¦å¥½å¤šäº†?</p>
<h2 id="ps"><a class="header" href="#ps">PS:</a></h2>
<p>çš„ç¡®æ˜¯ç¯‡å¥‡æƒ³, è¿™æ ·ç®€åŒ–å, å‡ ä¹å°±æ˜¯ å¤šäº†ä¸€äº›æ§åˆ¶ç¬¦å·çš„ Python äº†,
åˆæˆ–æ˜¯æ ¹æœ¬å¯ä»¥è§†ä¸º TypeScript äº†;
å½“ç„¶, å¦‚æœæœ‰è¿™ç§ä½æ•ˆç‰ˆ Rust å¤šæ•°ç¨‹åºå‘˜è¿˜æ˜¯æ„¿æ„ä½¿ç”¨çš„;
å°±è±¡å½“å¹´ CoffeeScript çš„å°è¯•;</p>
<h2 id="logging-12"><a class="header" href="#logging-12">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230206 ZQ init.</li>
</ul>

                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->


                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">

        </nav>

    </div>




    <script>
        window.playground_copyable = true;
    </script>


    <script src="elasticlunr.min.js" charset="utf-8"></script>
    <script src="mark.min.js" charset="utf-8"></script>
    <script src="searcher.js" charset="utf-8"></script>

    <script src="clipboard.min.js" charset="utf-8"></script>
    <script src="highlight.js" charset="utf-8"></script>
    <script src="book.js" charset="utf-8"></script>

    <!-- Custom JS scripts -->

    <script>
        window.addEventListener('load', function () {
            window.setTimeout(window.print, 100);
        });
    </script>

    <hr />

    <p style="text-align:center">

        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®"
                style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
        æœ¬ä½œå“é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯;-)

    </p>
    <hr />

    <script src="https://utteranc.es/client.js" repo="zhrust/comments" issue-term="pathname" label="âœ¨ğŸ’¬âœ¨"
        theme="github-light" crossorigin="anonymous" async>
        </script>

</body>

</html>