<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>be Rustaceans</title>
    <meta name="robots" content="noindex" />


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="å¦‚ä½•æˆä¸ºä¸€ååˆæ ¼çš„ Rustacean ? è‚¯å®šæœ‰ä¸ªè¿‡ç¨‹, è¿™å„¿è®°å½•äº†ç§äººè¿™ä¸ªè½¬åŒ–è¿‡ç¨‹...">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.png">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/chrome.css">
    <link rel="stylesheet" href="css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
    <link rel="stylesheet" href="fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="tomorrow-night.css">
    <link rel="stylesheet" href="ayu-highlight.css">

    <!-- Custom theme stylesheets -->

</head>

<body>
    <!-- Provide site root to javascript -->
    <script>
        var path_to_root = "";
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script>
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script>
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('light')
        html.classList.add(theme);
        html.classList.add('js');
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script>
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scrollbox">
            <ol class="chapter"><li class="chapter-item "><a href="abt/index.html"><strong aria-hidden="true">1.</strong> æˆä¸º Rustacean</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="abt/gh-pages.html"><strong aria-hidden="true">1.1.</strong> gh-pages</a></li><li class="chapter-item "><a href="abt/zhrust.html"><strong aria-hidden="true">1.2.</strong> zhrust</a></li><li class="spacer"></li></ol></li><li class="chapter-item "><a href="101/index.html"><strong aria-hidden="true">2.</strong> Rust å­¦ä¹ </a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="101/tracing.html"><strong aria-hidden="true">2.1.</strong> tracing åˆæ­¥</a></li><li class="chapter-item "><a href="101/chatgpt101.html"><strong aria-hidden="true">2.2.</strong> ä¼´å­¦ChatGPT</a></li><li class="chapter-item "><a href="101/exercism.html"><strong aria-hidden="true">2.3.</strong> Exercism</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="101/ex42all-your-base.html"><strong aria-hidden="true">2.3.1.</strong> 42:all-your-base</a></li><li class="chapter-item "><a href="101/ex43Allergies.html"><strong aria-hidden="true">2.3.2.</strong> 43:Allergies</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item "><a href="dev/index.html"><strong aria-hidden="true">3.</strong> Rust å¼€å‘</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="dev/dama-projects.html"><strong aria-hidden="true">3.1.</strong> å°ä½œå“</a></li><li class="chapter-item "><a href="dev/20-things-ive-learned-in-my-20-years-as-a-software-engineer.html"><strong aria-hidden="true">3.2.</strong> 20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„10ä»¶äº‹</a></li><li class="chapter-item "><a href="dev/concepts-i-wish-i-learned-earlier.html"><strong aria-hidden="true">3.3.</strong> å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ</a></li><li class="spacer"></li></ol></li><li class="chapter-item "><a href="tip/index.html"><strong aria-hidden="true">4.</strong> Rust æŠ€è‰º</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="tip/rust6fun-operator-overloading.html"><strong aria-hidden="true">4.1.</strong> è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹</a></li><li class="chapter-item "><a href="tip/oop-1-encapsulation.html"><strong aria-hidden="true">4.2.</strong> Rust è¶…è¶Šé¢å‘å¯¹è±¡,ç¬¬1éƒ¨åˆ†</a></li><li class="chapter-item "><a href="tip/oop-2-polymorphism.html"><strong aria-hidden="true">4.3.</strong> Rust è¶…è¶Šé¢å‘å¯¹è±¡,ç¬¬2éƒ¨åˆ†</a></li><li class="chapter-item "><a href="tip/default-params.html"><strong aria-hidden="true">4.4.</strong> OOP:Rust å’Œé»˜è®¤å‚æ•°</a></li><li class="spacer"></li></ol></li><li class="chapter-item "><a href="log/index.html"><strong aria-hidden="true">5.</strong> ç¬”è®°</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="log/rust-s-ugly-syntax.html"><strong aria-hidden="true">5.1.</strong> Rust ä¸‘å¥æ³•</a></li><li class="chapter-item "><a href="log/rust101logging.html"><strong aria-hidden="true">5.2.</strong> Rust è¯¾ç¨‹ç¬”è®°</a></li><li class="chapter-item "><a href="log/graph-rust-move-copy-borrow.html"><strong aria-hidden="true">5.3.</strong> å›¾å½¢æè¿° Rust ä¸­æ‰€æœ‰æƒå’Œå€Ÿç”¨</a></li></ol></li></ol>
        </div>
        <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
                        <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="menu-bar sticky bordered">
                <div class="left-buttons">
                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                        <i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button>
                        </li>
                    </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                        aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                        aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                </div>

                <h1 class="menu-title">be Rustaceans</h1>

                <div class="right-buttons">
                    <a href="print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>
                    <a href="https://github.com/zhrust/rustacean/tree/main/src" title="Git repository" aria-label="Git repository">
                        <i id="git-repository-button" class="fa fa-github"></i>
                    </a>

                </div>
            </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..."
                        aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script>
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                });
            </script>

            <div id="content" class="content">
                <main>
                    <h1 id="æœ‰å…³å¦‚ä½•æˆä¸º-rustacean"><a class="header" href="#æœ‰å…³å¦‚ä½•æˆä¸º-rustacean">æœ‰å…³&quot;å¦‚ä½•æˆä¸º Rustacean&quot;...</a></h1>
<blockquote>
<p>as Zoom.Quiet</p>
</blockquote>
<h2 id="background"><a class="header" href="#background">background</a></h2>
<p>è‡ªå­¦ä½¿ç”¨ Python ç¬¬21å¹´,
çœ‹ç€ Perl7 æ¶ˆå¤±,
çœ‹ç€ Golang çªç„¶å˜æˆ G+,
çœ‹ç€ Rust çªç„¶å˜æˆç°å­¦,
å¿ä¸ä½äº†...</p>
<h2 id="goal"><a class="header" href="#goal">goal</a></h2>
<p>å……åˆ†å¤ç”¨ä»¥å¾€å„ç§æŠ€æœ¯æ ˆçš„è‡ªå­¦ç»éªŒ,
å°½å¯èƒ½åˆç†å’Œæ•ˆç‡çš„å®Œæˆ Pythoneer -&gt; Rustacean çš„è½¬åŒ–;
æˆ–æ˜¯å¤–æŒ‚?</p>
<h2 id="trace"><a class="header" href="#trace">trace</a></h2>
<ul>
<li>...</li>
<li>230225 mdbook è¿½åŠ  RRS å¤±è´¥, ä¸è¿‡, æ ¹æ®å…¶å®ƒå…¬å¼€å›¾ä¹¦é¡¹ç›®çš„é…ç½®, å°†èœå•æŠ˜å äº†...</li>
<li>230101 é”ˆå‘¨åˆŠå¼€å§‹è¿è½½: <a href="https://weekly.rs.101.so/2023/RR23W1.html#%E6%96%87%E7%AB%A0%E5%97%AF%E5%93%BC">RR23W1 - Weekly for China Rustaceans</a></li>
<li>221111 æœ€ç»ˆä»¥ rs.101.so ~ å¦‚æ­¤åŸºç¡€çš„ Rust , åŸŸåå‘å¸ƒ</li>
<li>221022 ä»“åº“åˆ›å»º</li>
<li>220918 ç¡®å®šè‚¯å®šå·²ç»æ˜ç¡®å¼€å§‹è½¬åŒ–è¿›ç¨‹</li>
</ul>
<h2 id="refer"><a class="header" href="#refer">refer.</a></h2>
<ul>
<li>å¤§å¦ˆ:
<ul>
<li>ä¸»ç´¢å¼•: <a href="https://zoomquiet.io/">mapping -&gt; ZoomQuiet.io {by gen4dot2htm.py vv.190718 at:190911 18:07:32,877571}</a></li>
<li>...</li>
</ul>
</li>
</ul>
<h2 id="logging"><a class="header" href="#logging">logging</a></h2>
<ul>
<li>...</li>
<li>221111 ZQ å°è¯• .rs åŸŸåå¤±è´¥</li>
<li>221101 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gh-pages"><a class="header" href="#gh-pages">gh-pages</a></h1>
<blockquote>
<p>å…è´¹ä½¿ç”¨çš„æˆæœ¬</p>
</blockquote>
<h2 id="background-1"><a class="header" href="#background-1">background</a></h2>
<blockquote>
<p>æ— å¥ˆèƒŒæ™¯</p>
</blockquote>
<p>å‡¡æ˜¯å¯ä»¥ç¼–è¯‘ä¸º é™æ€ç½‘ç«™ çš„, éƒ½å¯ä»¥é€šè¿‡ gh-pages/GitHub-Pages æœåŠ¡æ¥è¿›è¡Œå…è´¹å‘å¸ƒ;</p>
<h2 id="goal-1"><a class="header" href="#goal-1">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
æœ¬åœ°ç¼–è¯‘å¥½, å˜¦ git push ,ä¸€åˆ‡å°±å¯ä»¥è‡ªåŠ¨å®Œæˆå‘å¸ƒ</li>
<li><input disabled="" type="checkbox"/>
è€Œä¸”å‘å¸ƒåˆ°æŒ‡å®šåŸŸå</li>
</ul>
<h2 id="trace-1"><a class="header" href="#trace-1">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<h2 id="refer-1"><a class="header" href="#refer-1">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<ul>
<li><a href="https://docs.github.com/cn/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages">éªŒè¯ GitHub Pages çš„è‡ªå®šä¹‰åŸŸ - GitHub Docs</a></li>
</ul>
<h2 id="logging-1"><a class="header" href="#logging-1">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221023 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zhrust"><a class="header" href="#zhrust">zhRust</a></h1>
<blockquote>
<p>zn.rust åŸŸå</p>
</blockquote>
<h2 id="background-2"><a class="header" href="#background-2">background</a></h2>
<blockquote>
<p>åæ­£è¨€é¡º</p>
</blockquote>
<p>ï¼²ust å‘å¸ƒæ—¶é—´ä¸çŸ­äº†,
rust ç›¸å…³ä¸­æ–‡ç¤¾åŒºæ¯”å½“å¹´ Python çš„å¤šä¸å°‘,
æ‰€ä»¥, 2022å¹´æœªå¾ˆéš¾æ‰¾åˆ°ç®€çŸ­å¥½è®°çš„åŸŸåå¯ä»¥æ³¨å†Œäº†</p>
<h2 id="goal-2"><a class="header" href="#goal-2">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p>ä½†æ˜¯, æ€»æ˜¯è¦æœ‰ä¸€ä¸ª Rust æ–¹å‘çš„æŒç»­è¾“å‡ºåŸŸå, 
è¦æ±‚ä»æ¥ä¸å˜</p>
<ul>
<li>rust,rustacean ç›¸å…³</li>
<li>è¶ŠçŸ­è¶Šå¥½</li>
<li>è¶Šä¾¿å®œè¶Šå¥½</li>
<li>...</li>
</ul>
<h2 id="trace-2"><a class="header" href="#trace-2">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<ul>
<li>åŸå…ˆæœ‰ 101.camp,101.so æ‰€ä»¥å°è¯• rust.so, å·²ç»æ²¡æœ‰</li>
<li>åˆå°è¯• rustacean.so è¿˜æœ‰,åªæ˜¯è´µè€Œä¸”åˆé•¿...</li>
<li>é‚£ä¹ˆ åœ¨ namecheap.com å†æŒ–æ˜ä¸€ä¸‹, æ²¡æƒ³åˆ°
<ul>
<li>.rust ç«Ÿç„¶æœ‰è¿™ä¸ªæ ¹åŸŸå</li>
<li>ç«‹å³å…ˆæ³¨å†Œ cn.rust ä»¥åŠ china.rust</li>
</ul>
</li>
<li>å¯æƒœå‡ å¤©è¿‡å» dig æŒ‡ä»¤ä¾ç„¶æŸ¥ä¸åˆ°è®°å½•,çœ‹æ¥ <code>.rust</code> è¿˜æ˜¯ä¸€ä¸ªé¢„å¤‡æ ¹åŸŸå,è‡³å°‘ä¸­å›½æ ¹è¿˜ä¸è¯†åˆ«..
<ul>
<li>åªèƒ½æ¢å¤ä½¿ç”¨ <code>rs.101.so</code> è¿™ä¸ªåŸŸå</li>
<li>å¦å¤–å°† <code>weekly.rs.101.so</code> ä¹Ÿå‘å¸ƒå‡ºæ¥å¼€å§‹åšæŒå…³æ³¨æ¯å‘¨ç¤¾åŒºå…³é”®å˜åŒ–...</li>
</ul>
</li>
</ul>
<h2 id="refer-2"><a class="header" href="#refer-2">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-2"><a class="header" href="#logging-2">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>230101 ZQ å˜æ›´åŸŸåæŒ‡å‘</li>
<li>221230 ZQ init.
<ul>
<li>è¿ç§» utterances ğŸ”® è¯„æ³¨åˆ° https://github.com/zhrust/comments</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å­¦ä¹ "><a class="header" href="#å­¦ä¹ ">å­¦ä¹ </a></h1>
<blockquote>
<p>learnning ...</p>
</blockquote>
<h2 id="background-3"><a class="header" href="#background-3">background</a></h2>
<blockquote>
<p>å¯èƒ½èƒŒæ™¯</p>
</blockquote>
<p>å’Œå…¶å®ƒè¯­è¨€ä¸åŒ, Rust æœ‰å¤ªå¤šå…¬å¼€çš„ç§˜å¯†,å¦‚æœä¸èƒ½å¿«é€Ÿå…ˆä¹ æƒ¯ä¸€æ‰¹,
å¾ˆéš¾å†™å‡ºå¯ä»¥è¿è¡Œçš„è½¯ä»¶æ¥...</p>
<h2 id="goal-3"><a class="header" href="#goal-3">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p>æœ€å¸¸ç”¨çš„é‚£ 20% Rust å¸¸è¯†...ä»¥ä¾¿è§£å†³ 80% åº”ç”¨åœºæ™¯</p>
<h2 id="trace-3"><a class="header" href="#trace-3">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<ul>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬æ¦‚å¿µ
<ul>
<li><input disabled="" type="checkbox"/>
æ‰€æœ‰æƒ/å€Ÿç”¨/ä½œç”¨åŸŸ</li>
<li><input disabled="" type="checkbox"/>
Option</li>
<li><input disabled="" type="checkbox"/>
Box</li>
<li><input disabled="" type="checkbox"/>
...</li>
</ul>
</li>
<li><input disabled="" type="checkbox"/>
æ ¸å¿ƒæ•°æ®ç»“æ„,åŠå…¶å¸¸ç”¨æ“ä½œ</li>
<li><input disabled="" type="checkbox"/>
æ¨èå·¥ç¨‹ç»“æ„
<ul>
<li><input disabled="" type="checkbox"/>
crate ä»¥åŠå†…éƒ¨æ¨¡å—ç®¡ç†</li>
<li><input disabled="" type="checkbox" checked=""/>
logging
<ul>
<li>tracing = &quot;0.1&quot;</li>
<li>clia-tracing-config = &quot;0.2&quot;</li>
</ul>
</li>
</ul>
</li>
<li><input disabled="" type="checkbox"/>
å®ç”¨å¼€å‘/è°ƒè¯•æµç¨‹
<ul>
<li><input disabled="" type="checkbox"/>
MVP/ CLI å·¥ç¨‹</li>
<li><input disabled="" type="checkbox"/>
MVP/ web å·¥ç¨‹</li>
<li><input disabled="" type="checkbox"/>
MVP/ å¾®æœåŠ¡</li>
<li><input disabled="" type="checkbox"/>
MVP/ ç³»ç»ŸæœåŠ¡</li>
<li><input disabled="" type="checkbox"/>
...</li>
</ul>
</li>
<li><input disabled="" type="checkbox"/>
å®æ•ˆ TDD æµç¨‹</li>
<li><input disabled="" type="checkbox"/>
åº•å±‚è°ƒè¯•æŠ€å·§: gdb ...</li>
</ul>
<h2 id="refer-3"><a class="header" href="#refer-3">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<h3 id="youtube"><a class="header" href="#youtube">Youtube</a></h3>
<blockquote>
<p>çœŸçš„æ˜¯ä»€ä¹ˆéƒ½æœ‰</p>
</blockquote>
<ul>
<li>å„ç§åŠè§£:
<ul>
<li><a href="https://www.youtube.com/watch?v=sDtQaO5_SOw">Rust Linz, June 2021 - Tim McNamara - How to learn Rust - YouTube</a></li>
</ul>
</li>
<li>110+<a href="https://www.youtube.com/playlist?list=PL3azK8C0kje1DUJbaOqce19j3R_-tIc4_">Rust ç¼–ç¨‹è¯­è¨€å…¥é—¨æ•™ç¨‹ [2021] - YouTube</a>
<ul>
<li>94+ <a href="https://www.youtube.com/playlist?list=PLVhhUNGAUIQScqB26DdUq4n1Y2n3auM7X">Rust - YouTube</a>
<ul>
<li>ä¸“é¢˜:<a href="https://www.youtube.com/watch?v=xhU8KDzL0vA&amp;list=PLVhhUNGAUIQRR7JheZsDaxF_Cd5Pf5slw">rusqlite - YouTube</a></li>
<li><a href="http://ogcrazcalm.blogspot.com/2015/11/sql-cheat-sheet.html">SQL Cheat Sheet | Crazcalm</a></li>
<li><a href="https://rust-lang-nursery.github.io/rust-cookbook/database/sqlite.html#insert-and-select-data">SQLite - Rust Cookbook</a></li>
<li><a href="https://crates.io/crates/rusqlite">rusqlite - crates.io: Rust Package Registry</a></li>
<li><a href="https://doc.rust-lang.org/std/fs/struct.File.html#examples">File in std::fs - Rust</a></li>
</ul>
</li>
<li>42+<a href="https://www.youtube.com/playlist?list=PLVvjrrRCBy2JSHf9tGxGKJ-bYAN_uDCUL">RUST PROGRAMMING TUTORIALS - YouTube</a></li>
<li>44+<a href="https://www.youtube.com/playlist?list=PLJbE2Yu2zumDF6BX6_RdPisRVHgzV02NW">Intro to Rust - YouTube</a></li>
<li>14+<a href="https://www.youtube.com/playlist?list=PLKkEWK6xRmes17LQUEA5bNjYISuCEOTXx">Rust For Starters - YouTube</a></li>
</ul>
</li>
<li>44+<a href="https://www.youtube.com/playlist?list=PLai5B987bZ9CoVR-QEIN9foz4QCJ0H2Y8">The Rust Lang Book - YouTube</a></li>
<li>25+<a href="https://www.youtube.com/playlist?list=PLJbE2Yu2zumDD5vy2BuSHvFZU0a6RDmgb">Rust Projects - YouTube</a>
<ul>
<li>24+<a href="https://www.youtube.com/playlist?list=PL5dTjWUk_cPYuhHm9_QImW7_u4lr5d6zO">50 RUST Projects - YouTube</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/@jonhoo">Jon Gjengset - YouTube</a>
<ul>
<li><a href="https://www.youtube.com/playlist?list=PLqbS7AVVErFgY2faCIYjJZv_RluGkTlKt">Rust live-coding - YouTube</a>
<ul>
<li>éƒ½æ˜¯å‡ ä¸ªå°æ—¶çš„è¿ç»­è°ƒè¯•è¿‡ç¨‹</li>
</ul>
</li>
<li><a href="https://www.youtube.com/playlist?list=PLqbS7AVVErFiWDOAVrPt7aYmnuuOLYvOa">Crust of Rust - YouTube</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/playlist?list=PLZaoyhMXgBzoM9bfb5pyUOT3zjnaDdSEP">Rust Talks - YouTube</a>
<ul>
<li>å„ç§ç•…æƒ³...</li>
<li><a href="https://www.youtube.com/playlist?list=PLnhCUtqrIE-zgfmf6hn6fLwhfR_hDSG9T">Contributing to Rustc - YouTube</a> ~ ç‰›äººç›´æ’­å¦‚ä½•ä¸º Rust ç¼–è¯‘å™¨è´¡çŒ®ç‰¹æ€§...</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=_jMSrMex6R0&amp;list=PLFjq8z-aGyQ6t_LGp7wqHsHTYO-pDDx84">Rust - YouTube</a>
<ul>
<li>å„ç§å‰æ™¯åˆ†æ</li>
<li><a href="https://www.youtube.com/watch?v=qjwWF6K-7uE&amp;list=PLFjq8z-aGyQ78CQu1G3C5CT9ieiNpsnbJ">WebAssembly - YouTube</a> ~ å„ç§å®ç°åº”ç”¨</li>
</ul>
</li>
<li>...</li>
</ul>
<h3 id="free-books"><a class="header" href="#free-books">free Books</a></h3>
<blockquote>
<p>è¿™ä¸ªä¸–ç•Œä¸Šå…è´¹å¥½èµ„æºå¤ªå¤šäº†...</p>
</blockquote>
<p><a href="https://github.com/EbookFoundation/free-programming-books/blob/main/books/free-programming-books-langs.md#rust">free-programming-books/free-programming-books-langs.md at main Â· EbookFoundation/free-programming-books</a></p>
<h2 id="logging-3"><a class="header" href="#logging-3">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221214 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tracing"><a class="header" href="#tracing">tracing</a></h1>
<blockquote>
<p>ä¸€æ­¥åˆ°ä½æ—¥å¿—å·¥å…·?</p>
</blockquote>
<h2 id="background-4"><a class="header" href="#background-4">background</a></h2>
<p>æ— è®ºå“ªç§çº§åˆ«çš„å¼€å‘,
ä¸€ä¸ªæ—¥å¿—å·¥å…·æ˜¯å¿…è¦çš„,
å¦åˆ™,å‘ç”Ÿç‚¹å„¿ä»€ä¹ˆäº‹å„¿, ä¸€ç‚¹å„¿æ•°æ®/é…ç½®/...çš„æ®‹å½±éƒ½æ²¡æœ‰é‚£æ˜¯çœŸä¸€ç‚¹å„¿åŠæ³•ä¹Ÿæ²¡æœ‰...</p>
<h2 id="goal-4"><a class="header" href="#goal-4">goal</a></h2>
<ul>
<li>Rust åŸç”Ÿ</li>
<li>æˆç†Ÿ</li>
<li>æ”¯æŒå¤šç§æ ¼å¼/é…ç½®/å®šåˆ¶/...</li>
<li>æ–‡æ¡£å®Œå¤‡, å®‰è£…æµç•…, æ²¡æœ‰æ€¥è½¬å¼¯....</li>
</ul>
<h2 id="trace-4"><a class="header" href="#trace-4">trace</a></h2>
<h3 id="install"><a class="header" href="#install">install</a></h3>
<p>Cargo.toml ä¸­è¿½åŠ :</p>
<pre><code>[dependencies]
log = &quot;0.4&quot;
tracing = &quot;0.1&quot;
clia-tracing-config = &quot;0.2&quot;
</code></pre>
<blockquote>
<p>$ cargo check </p>
</blockquote>
<p>è‡ªåŠ¨å®‰è£…å¯¹åº” crate</p>
<pre><pre class="playground"><code class="language-rust edition2021">fn main() -&gt; Result&lt;()&gt;{

    let _guard = clia_tracing_config::build()
        .filter_level(&quot;debug&quot;)//fatal,error,warn,info,debug
        .with_ansi(true)
        .to_stdout(false)
        .directory(&quot;./log&quot;)
        .file_name(&quot;debug.log&quot;)
        .rolling(&quot;daily&quot;)
        .init();

/// ...

    Ok(())

}</code></pre></pre>
<p>åœ¨éœ€è¦çš„åœºæ™¯ä¸­å®šä¹‰ä¸ª <code>_guard</code> å°±å®Œæˆäº†æ‰€æœ‰å…³é”®é…ç½®,
è¿™æ˜¯ç”± <code>clia-tracing-config</code> å®ç°çš„,</p>
<p>ç°åœ¨, å°±å¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>log::debug!(&quot;{}&quot;, foobar);
log::info!(&quot;{}&quot;, foobar);
log::warn!(&quot;{}&quot;, foobar);
log::error!(&quot;{}&quot;, foobar);
<span class="boring">}</span></code></pre></pre>
<p>è¿›è¡Œæ—¥å¿—è¾“å‡º, è€Œä¸”æ¯å¤©è‡ªåŠ¨æ´»åŠ¨, ä½†æ˜¯, æœ‰è‡ªåŠ¨ link ,
å¯ä»¥ä½¿ç”¨ <code>tail -f </code> ä¸€ç›´è¿½è¸ªè§‚å¯Ÿ;</p>
<pre><code>é¡¹ç›®/
    +- Cargo.toml
    +- README.md
    +- src/
    |   +- main.rs
    +- tests/
    |   +- cli.rs
    +- log/
    |   +- debug.log -&gt; debug.log.2023-02-25
    |   +- ...
    |   +- debug.log.2023-02-23
    |   `- debug.log.2023-02-25
    ...
</code></pre>
<h2 id="refer-4"><a class="header" href="#refer-4">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<ul>
<li><a href="https://awesomerank.github.io/lists/rust-unofficial/awesome-rust.html#cryptocurrencies">Awesome Rank for rust-unofficial/awesome-rust</a>
<ul>
<li><a href="https://github.com/rust-unofficial/awesome-rust">rust-unofficial/awesome-rust: A curated list of Rust code and resources.</a></li>
<li>å…ˆä»ç¤¾åŒºçŸ¥é“ logging æ¨¡å—çš„å¤§çº¦èŒƒç•´</li>
</ul>
</li>
<li><a href="https://blog.logrocket.com/comparing-logging-tracing-rust/">Comparing logging and tracing in Rust - LogRocket Blog</a>
<ul>
<li><a href="https://privaterookie.github.io/posts/2020-02-03-log4rs-Rust-log%E5%BA%93.html">log4rs-Rust-logåº“ - å¤œé›¨ç§‹ç¯å½•</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10252834">åœ¨ Rust ä¸­ä½¿ç”¨ logï¼š log / slog / tracing - iT é‚¦å¹«å¿™</a></li>
<li>å†ä»å¯¹æ¯”ä¸­å®šä½ç›®æ ‡</li>
</ul>
</li>
<li><a href="https://choosealicense.com/licenses/mit">tracing - crates.io: Rust Package Registry</a>
<ul>
<li><a href="https://course.rs/logs/tracing.html">ä½¿ç”¨ tracing è®°å½•æ—¥å¿— - Rustè¯­è¨€åœ£ç»(Rust Course)</a></li>
<li><a href="https://crates.io/crates/clia-tracing-config">clia-tracing-config - crates.io: Rust Package Registry</a></li>
</ul>
</li>
<li>...</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ä¼´å­¦chatgpt"><a class="header" href="#ä¼´å­¦chatgpt">ä¼´å­¦ChatGPT</a></h1>
<blockquote>
<p>chatting for debugging ...</p>
</blockquote>
<h2 id="background-5"><a class="header" href="#background-5">background</a></h2>
<p>é€šè¿‡ç½‘ç»œä¸­å„ç§å…è´¹æ•™ç¨‹/å›¾ä¹¦å­¦ä¹ æ—¶,
ä½œè€…æ–‡å­—èƒŒåçš„æ€è€ƒè¿‡ç¨‹æ— æ³•äº¤æµ...</p>
<h2 id="goal-5"><a class="header" href="#goal-5">goal</a></h2>
<p>åˆç†ä½¿ç”¨ ChatGPT è¿›è¡Œæç¤ºå·¥ç¨‹style å­¦ä¹ </p>
<h2 id="trace-5"><a class="header" href="#trace-5">trace</a></h2>
<blockquote>
<p>è®°å½•å„ç§èˆ’æœçš„å§¿åŠ¿:</p>
</blockquote>
<h3 id="cli-æµ‹è¯•å§¿åŠ¿"><a class="header" href="#cli-æµ‹è¯•å§¿åŠ¿">CLI æµ‹è¯•å§¿åŠ¿</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>se assert_cmd::Command;
use predicates::prelude::*;
use std::fs;

type TestResult = Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt;;

#[test]
fn dies_no_args() -&gt; TestResult {
    let mut cmd = Command::cargo_bin(&quot;echor&quot;)?; 
    cmd.assert()
        .failure()
        .stderr(predicate::str::contains(&quot;USAGE&quot;));
    Ok(()) 
}

#[test]
fn hello1() -&gt; TestResult {
    let expected = fs::read_to_string(&quot;tests/expected/hello1.txt&quot;)?;
    let mut cmd = Command::cargo_bin(&quot;echor&quot;)?;
    cmd.arg(&quot;Hello there&quot;).assert().success().stdout(expected);
    Ok(())
}
<span class="boring">}</span></code></pre></pre>
<blockquote>
<p>Q:</p>
</blockquote>
<p>ä»¥ä¸Šä»£ç ä¸­, ä¸ºä»€ä¹ˆè¦ä¸“é—¨å®šä¹‰ TestResult ç±»å‹?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>åœ¨ Rust ä¸­ï¼Œæµ‹è¯•å‡½æ•°å¿…é¡»è¿”å› Result&lt;(), Box<dyn std::error::Error>&gt; ç±»å‹ã€‚è¿™æ˜¯å› ä¸ºæµ‹è¯•æ¡†æ¶éœ€è¦å¤„ç†æµ‹è¯•å‡½æ•°ä¸­å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œå¹¶å°†è¿™äº›é”™è¯¯è½¬æ¢ä¸ºæµ‹è¯•ç»“æœã€‚å¦‚æœæµ‹è¯•å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªæ™®é€šçš„é”™è¯¯ç±»å‹ï¼Œæµ‹è¯•æ¡†æ¶æ— æ³•å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ Result ç±»å‹ã€‚TestResult ç±»å‹åªæ˜¯ä¸ºäº†æ›´æ¸…æ™°åœ°è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å‡½æ•°è¿”å›çš„ç»“æœç±»å‹ï¼Œå¹¶æ²¡æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>Result&lt;(), Box<dyn std::error::Error>&gt; è¿™ä¸€ç±»å‹, å…·ä½“æœ‰ä»€ä¹ˆè¦æ±‚?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>Result&lt;(), Box<dyn std::error::Error>&gt; æ˜¯ Rust ä¸­æµ‹è¯•å‡½æ•°çš„æ ‡å‡†è¿”å›ç±»å‹ã€‚å…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¿”å›ç±»å‹ä¸º Resultï¼Œè¡¨ç¤ºæµ‹è¯•å‡½æ•°å¯ä»¥è¿”å›æˆåŠŸæˆ–å¤±è´¥çš„ç»“æœã€‚</li>
<li>() è¡¨ç¤ºæµ‹è¯•å‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ï¼Œå› ä¸ºæµ‹è¯•å‡½æ•°çš„ç›®çš„æ˜¯éªŒè¯ä»£ç çš„è¡Œä¸ºæ˜¯å¦æ­£ç¡®ï¼Œè€Œä¸æ˜¯ç”Ÿæˆæœ‰ç”¨çš„è¾“å‡ºã€‚</li>
<li>Box<dyn std::error::Error> è¡¨ç¤ºæµ‹è¯•å‡½æ•°è¿”å›çš„é”™è¯¯ç±»å‹å¯ä»¥æ˜¯ä»»ä½•å®ç°äº† std::error::Error trait çš„ç±»å‹ï¼Œè€Œä¸”è¿™ä¸ªç±»å‹è¢«åŒ…è£…åœ¨ Box ä¸­ã€‚è¿™æ˜¯å› ä¸ºæµ‹è¯•æ¡†æ¶éœ€è¦èƒ½å¤Ÿå¤„ç†å„ç§å¯èƒ½çš„é”™è¯¯ç±»å‹ï¼ŒåŒ…æ‹¬ç¼–è¯‘é”™è¯¯ã€è¿è¡Œæ—¶é”™è¯¯ç­‰ç­‰ã€‚ä½¿ç”¨ Box<dyn std::error::Error> å¯ä»¥ä½¿æµ‹è¯•å‡½æ•°è¿”å›ä»»ä½•å®ç°äº† std::error::Error trait çš„é”™è¯¯ç±»å‹ï¼ŒåŒæ—¶åˆèƒ½å¤Ÿåœ¨æµ‹è¯•æ¡†æ¶ä¸­æ–¹ä¾¿åœ°å¤„ç†è¿™äº›é”™è¯¯ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼ŒResult&lt;(), Box<dyn std::error::Error>&gt; è¡¨ç¤ºæµ‹è¯•å‡½æ•°å¯ä»¥è¿”å›æˆåŠŸæˆ–å¤±è´¥çš„ç»“æœï¼Œä¸è¿”å›ä»»ä½•å€¼ï¼Œä½†æ˜¯å¯ä»¥è¿”å›ä»»ä½•å®ç°äº† std::error::Error trait çš„é”™è¯¯ç±»å‹ã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>ä»»ä½•å®ç°äº† std::error::Error trait çš„é”™è¯¯ç±»å‹ ä¸€èˆ¬æœ‰ä»€ä¹ˆç±»å‹åŒ…å«è¿™ç§ trait? èƒ½ä¸¾ä¾‹è¯´æ˜å˜›?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>ä»»ä½•å®ç°äº† std::error::Error trait çš„ç±»å‹éƒ½å¯ä»¥ä½œä¸ºæµ‹è¯•å‡½æ•°è¿”å›çš„é”™è¯¯ç±»å‹ã€‚åœ¨ Rust ä¸­ï¼Œæ ‡å‡†åº“ä¸­çš„å¾ˆå¤šé”™è¯¯ç±»å‹éƒ½å®ç°äº† std::error::Error traitï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>std::io::Errorï¼šè¡¨ç¤º I/O æ“ä½œä¸­å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œå¦‚æ–‡ä»¶è¯»å†™é”™è¯¯ã€ç½‘ç»œé€šä¿¡é”™è¯¯ç­‰ã€‚</li>
<li>std::num::ParseIntErrorï¼šè¡¨ç¤ºå°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—æ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œå¦‚å­—ç¬¦ä¸²ä¸ç¬¦åˆæ•°å­—æ ¼å¼ç­‰ã€‚</li>
<li>std::env::VarErrorï¼šè¡¨ç¤ºè·å–ç¯å¢ƒå˜é‡æ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œå¦‚ç¯å¢ƒå˜é‡ä¸å­˜åœ¨ç­‰ã€‚</li>
<li>serde_json::Errorï¼šè¡¨ç¤ºå¤„ç† JSON æ•°æ®æ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œå¦‚ JSON æ•°æ®æ ¼å¼é”™è¯¯ç­‰ã€‚</li>
</ul>
<p>è¿™äº›ç±»å‹éƒ½å®ç°äº† std::error::Error traitï¼Œå› æ­¤å¯ä»¥ä½œä¸ºæµ‹è¯•å‡½æ•°è¿”å›çš„é”™è¯¯ç±»å‹ã€‚åœ¨æµ‹è¯•å‡½æ•°ä¸­ï¼Œå¦‚æœæŸä¸ªæ“ä½œå‡ºç°äº†è¿™äº›é”™è¯¯ï¼Œå¯ä»¥å°†é”™è¯¯åŒ…è£…æˆ Box<dyn std::error::Error> ç±»å‹è¿”å›ï¼Œè¿™æ ·æµ‹è¯•æ¡†æ¶å°±å¯ä»¥å¤„ç†è¿™äº›é”™è¯¯å¹¶å°†å…¶è§†ä¸ºæµ‹è¯•å¤±è´¥ã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>å¦‚æœè¦ä¸ºè‡ªå®šä¹‰æ–°æ•°æ®ç±»å‹è¿½åŠ è¿™ç§ trait æœ‰å“ªäº›å¯è¡Œæ–¹æ¡ˆ? ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>å¦‚æœè¦ä¸ºè‡ªå®šä¹‰çš„æ–°æ•°æ®ç±»å‹è¿½åŠ  std::error::Error traitï¼Œæœ‰ä»¥ä¸‹å‡ ç§å¯è¡Œçš„æ–¹æ¡ˆï¼š</p>
<ul>
<li>å®ç° std::error::Error traitï¼šåœ¨æ–°æ•°æ®ç±»å‹çš„å®ç°ä»£ç ä¸­æ‰‹åŠ¨å®ç° std::error::Error traitï¼ŒåŒ…æ‹¬å®ç° description æ–¹æ³•å’Œ source æ–¹æ³•ã€‚è¿™æ ·å°±å¯ä»¥å°†æ–°æ•°æ®ç±»å‹ä½œä¸ºæµ‹è¯•å‡½æ•°çš„é”™è¯¯ç±»å‹è¿”å›ã€‚ä¾‹å¦‚ï¼š</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021">use std::error::Error;

#[derive(Debug)]
struct MyError {
    message: String,
}

impl std::fmt::Display for MyError {
    fn fmt(&amp;self, f: &amp;mut std::fmt::Formatter&lt;'_&gt;) -&gt; std::fmt::Result {
        write!(f, &quot;{}&quot;, self.message)
    }
}

impl Error for MyError {
    fn description(&amp;self) -&gt; &amp;str {
        &amp;self.message
    }

    fn source(&amp;self) -&gt; Option&lt;&amp;(dyn Error + 'static)&gt; {
        None
    }
}

fn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    let result = Err(MyError {
        message: &quot;An error occurred&quot;.to_owned(),
    });
    result.map_err(Box::new)?;
    Ok(())
}</code></pre></pre>
<ul>
<li>ä½¿ç”¨ thiserror crateï¼šthiserror æ˜¯ä¸€ä¸ª Rust crateï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•æ¥å®ç° std::error::Error traitã€‚ä½¿ç”¨ thiserror crate å¯ä»¥é€šè¿‡å®æ¥è‡ªåŠ¨ç”Ÿæˆé”™è¯¯ç±»å‹çš„å®ç°ä»£ç ï¼ŒåŒ…æ‹¬å®ç° std::error::Error traitã€‚ä¾‹å¦‚ï¼š</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021">use std::error::Error;
use thiserror::Error;

#[derive(Debug, Error)]
#[error(&quot;An error occurred: {message}&quot;)]
struct MyError {
    message: String,
}

fn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    let result = Err(MyError {
        message: &quot;An error occurred&quot;.to_owned(),
    });
    result.map_err(Box::new)?;
    Ok(())
}
</code></pre></pre>
<p>... åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½¿ç”¨ thiserror crate å®šä¹‰äº†ä¸€ä¸ª MyError ç±»å‹ï¼Œé€šè¿‡ #[derive(Error)] å®è‡ªåŠ¨ç”Ÿæˆäº†å®ç° std::error::Error trait çš„ä»£ç ã€‚æ­¤æ—¶ï¼ŒMyError ç±»å‹å°±å¯ä»¥ä½œä¸ºæµ‹è¯•å‡½æ•°çš„é”™è¯¯ç±»å‹è¿”å›äº†ã€‚</p>
<p>æ— è®ºä½¿ç”¨å“ªç§æ–¹æ³•ï¼Œä¸€æ—¦ä¸ºæ–°æ•°æ®ç±»å‹è¿½åŠ äº† std::error::Error traitï¼Œå°±å¯ä»¥å°†å…¶ä½œä¸ºæµ‹è¯•å‡½æ•°çš„é”™è¯¯ç±»å‹è¿”å›äº†ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ç±»å‹è¿›è¡Œæµ‹è¯•çš„ç¤ºä¾‹ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::error::Error;

#[derive(Debug)]
struct MyError {
    message: String,
}

impl std::fmt::Display for MyError {
    fn fmt(&amp;self, f: &amp;mut std::fmt::Formatter&lt;'_&gt;) -&gt; std::fmt::Result {
        write!(f, &quot;{}&quot;, self.message)
    }
}

impl Error for MyError {
    fn description(&amp;self) -&gt; &amp;str {
        &amp;self.message
    }

    fn source(&amp;self) -&gt; Option&lt;&amp;(dyn Error + 'static)&gt; {
        None
    }
}

fn foo() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    Err(MyError {
        message: &quot;An error occurred&quot;.to_owned(),
    })
}

#[test]
fn test_foo() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    let result = foo();
    assert!(result.is_err());
    Ok(())
}
<span class="boring">}</span></code></pre></pre>
<h3 id="crate-æ€è·¯"><a class="header" href="#crate-æ€è·¯">crate æ€è·¯</a></h3>
<blockquote>
<p>Q:</p>
</blockquote>
<p>å¦‚ä½•å°†ä¸€ä¸ª CLI å·¥å…·é¡¹ç›®å‘å¸ƒä¸ºä¸€ä¸ª crate? è¦è¿›è¡Œå“ªäº›æ”¹é€ ? ä»¥åŠè¦æ³¨æ„ä»€ä¹ˆ?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>è¦å°†ä¸€ä¸ª CLI å·¥å…·é¡¹ç›®å‘å¸ƒä¸ºä¸€ä¸ª crateï¼Œä½ éœ€è¦è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li>å°†ä½ çš„ CLI å·¥å…·é¡¹ç›®æ‰“åŒ…æˆä¸€ä¸ªåº“ã€‚åœ¨ Rust ä¸­ï¼Œåº“æ–‡ä»¶é€šå¸¸ä»¥ lib.rs æ–‡ä»¶ä¸ºå…¥å£ç‚¹ï¼Œå¹¶å°† CLI ä»£ç é‡æ„ä¸ºå‡½æ•°æˆ–ç»“æ„ä½“æ–¹æ³•ã€‚è¿™æ ·å¯ä»¥å°†ä½ çš„ä»£ç è§£è€¦ï¼Œå¹¶ä½¿å…¶æ›´æ˜“äºæµ‹è¯•å’Œé‡ç”¨ã€‚</li>
<li>åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª Cargo.toml æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
<ul>
<li>åŒ…çš„åç§°ã€ç‰ˆæœ¬å·å’Œä½œè€…ä¿¡æ¯ã€‚</li>
<li>é¡¹ç›®çš„æè¿°ä¿¡æ¯ã€‚</li>
<li>é¡¹ç›®çš„ä¾èµ–é¡¹å’Œå…¶ç‰ˆæœ¬è¦æ±‚ã€‚</li>
<li>åŒ…çš„ç±»å‹ï¼Œä¾‹å¦‚åº“æˆ–äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li>
<li>åŒ…çš„è®¸å¯è¯ç±»å‹ã€‚</li>
</ul>
</li>
<li>å°†ä½ çš„ä»£ç ä¸Šä¼ åˆ° crates.ioã€‚é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ª crates.io å¸æˆ·ã€‚ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ cargo login å‘½ä»¤ç™»å½•å¹¶ä¸Šä¼ ä½ çš„ä»£ç ã€‚åœ¨ä¸Šä¼ å‰ï¼Œç¡®ä¿ä½ çš„ä»£ç å·²ç»å®Œæˆäº†æµ‹è¯•ï¼Œå¹¶ä¸”åŒ…å«äº†åˆé€‚çš„æ–‡æ¡£å’Œè®¸å¯è¯ä¿¡æ¯ã€‚</li>
<li>ç»™ä½ çš„ crate æ·»åŠ æ–‡æ¡£ã€‚Rust ç¤¾åŒºéå¸¸æ³¨é‡ä»£ç æ–‡æ¡£ï¼Œå› æ­¤ä½ éœ€è¦ç¡®ä¿ä½ çš„ crate åŒ…å«äº†é€‚å½“çš„æ–‡æ¡£å’Œæ³¨é‡Šã€‚ä½ å¯ä»¥ä½¿ç”¨ Rust å†…ç½®çš„æ–‡æ¡£å·¥å…·æ¥ç”Ÿæˆæ–‡æ¡£ï¼Œå¹¶å°†å…¶ä¸Šä¼ åˆ° crates.ioã€‚</li>
<li>æ›´æ–°ä½ çš„é¡¹ç›®æ–‡æ¡£å’Œ READMEã€‚åœ¨å°†ä½ çš„ crate å‘å¸ƒåˆ° crates.io åï¼Œä½ éœ€è¦æ›´æ–°ä½ çš„é¡¹ç›®æ–‡æ¡£å’Œ README æ–‡ä»¶ï¼Œä»¥ä¾¿å…¶ä»–å¼€å‘è€…å¯ä»¥ä½¿ç”¨ä½ çš„ crateã€‚</li>
</ul>
<p>åœ¨å‘å¸ƒä½ çš„ crate å‰ï¼Œä½ éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>ä½ éœ€è¦ç¡®ä¿ä½ çš„ä»£ç è´¨é‡å’Œå¯é æ€§ã€‚è¿™åŒ…æ‹¬ç¡®ä¿ä½ çš„ä»£ç é€šè¿‡äº†å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œå¹¶å°½å¯èƒ½é¿å…ä½¿ç”¨æœªç»æµ‹è¯•çš„ä¾èµ–é¡¹ã€‚</li>
<li>ä½ éœ€è¦ç¡®ä¿ä½ çš„ä»£ç ç¬¦åˆ Rust ç¤¾åŒºçš„ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µã€‚</li>
<li>ä½ éœ€è¦ç¡®ä¿ä½ çš„ crate åŒ…å«äº†é€‚å½“çš„è®¸å¯è¯ä¿¡æ¯ï¼Œå¹¶ç¡®ä¿ä½ æœ‰æƒå‘å¸ƒä½ çš„ä»£ç ã€‚</li>
<li>ä½ éœ€è¦ç¡®ä¿ä½ çš„ crate åŒ…å«äº†åˆé€‚çš„æ–‡æ¡£å’Œæ³¨é‡Šï¼Œä»¥ä¾¿å…¶ä»–å¼€å‘è€…å¯ä»¥è½»æ¾åœ°ä½¿ç”¨ä½ çš„ä»£ç ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œå°†ä¸€ä¸ª CLI å·¥å…·é¡¹ç›®å‘å¸ƒä¸ºä¸€ä¸ª crate éœ€è¦å¯¹ä»£ç è¿›è¡Œä¸€äº›æ”¹é€ ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œå¯é æ€§ï¼Œå¹¶ä¸”éµå¾ª Rust ç¤¾åŒºçš„æœ€ä½³å®è·µå’Œè§„èŒƒã€‚å‘å¸ƒå‰ï¼Œä½ éœ€è¦ç¡®ä¿ä½ çš„ä»£ç åŒ…å«äº†é€‚å½“çš„æ–‡æ¡£å’Œè®¸å¯è¯ä¿¡æ¯ï¼Œå¹¶æ›´æ–°ä½ çš„é¡¹ç›®æ–‡æ¡£å’Œ README æ–‡ä»¶ã€‚</p>
<h3 id="toml-ä½œä¸ºé…ç½®"><a class="header" href="#toml-ä½œä¸ºé…ç½®">.toml ä½œä¸ºé…ç½®</a></h3>
<blockquote>
<p>Q:</p>
</blockquote>
<p>rudt ä¸­è¯»å†™ .toml æ–‡ä»¶, æœ€æ¨èçš„ create æ˜¯å“ªä¸ª? å¦‚ä½•ä½¿ç”¨?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>å¦‚æœä½ éœ€è¦åœ¨ Rust ä¸­è¯»å†™ TOML æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ toml crateã€‚è¿™ä¸ª crate å¯ä»¥åœ¨ Cargo.toml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="language-toml">[dependencies]
toml = &quot;0.5.8&quot;
</code></pre>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ toml crate è¯»å–ä¸€ä¸ªåä¸º &quot;config.toml&quot; çš„ TOML æ–‡ä»¶ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::fs;
use toml::Value;

fn main() {
    // è¯»å–æ–‡ä»¶
    let contents = fs::read_to_string(&quot;config.toml&quot;)
        .expect(&quot;Something went wrong reading the file&quot;);

    // è§£æ TOML
    let parsed_toml: Value = toml::from_str(&amp;contents).unwrap();

    // è®¿é—®å€¼
    let title = parsed_toml[&quot;title&quot;].as_str().unwrap();
    let subtitle = parsed_toml[&quot;subtitle&quot;].as_str().unwrap();

    println!(&quot;{}: {}&quot;, title, subtitle);
}</code></pre></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œé¦–å…ˆä½¿ç”¨ fs::read_to_string å‡½æ•°è¯»å– TOML æ–‡ä»¶çš„å†…å®¹ã€‚ç„¶åï¼Œä½¿ç”¨ toml::from_str å‡½æ•°å°†å†…å®¹è§£æä¸º toml::Value ç±»å‹çš„å€¼ã€‚æ¥ä¸‹æ¥ï¼Œå¯ä»¥è®¿é—®è§£æåçš„ TOML å€¼ï¼Œä¾‹å¦‚ parsed_toml[&quot;title&quot;].as_str().unwrap() ç”¨äºè·å– TOML æ–‡ä»¶ä¸­çš„ &quot;title&quot; å€¼ã€‚æœ€åï¼Œå°†è¿™äº›å€¼æ‰“å°åˆ°æ§åˆ¶å°ã€‚</p>
<p>å¦‚æœä½ éœ€è¦å°†æ•°æ®å†™å…¥ TOML æ–‡ä»¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ toml crate çš„ to_string å‡½æ•°å°† toml::Value ç±»å‹çš„å€¼è½¬æ¢ä¸º TOML æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œç„¶åä½¿ç”¨ fs::write å‡½æ•°å°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ toml crate å†™å…¥ä¸€ä¸ªåä¸º &quot;config.toml&quot; çš„ TOML æ–‡ä»¶ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::fs;
use toml::Value;

fn main() {
    // åˆ›å»ºä¸€ä¸ª `toml::Value` ç±»å‹çš„å€¼
    let mut toml_value = Value::new();
    toml_value[&quot;title&quot;] = &quot;My Title&quot;.into();
    toml_value[&quot;subtitle&quot;] = &quot;My Subtitle&quot;.into();

    // å°†å€¼è½¬æ¢ä¸º TOML æ ¼å¼çš„å­—ç¬¦ä¸²
    let toml_str = toml::to_string(&amp;toml_value).unwrap();

    // å†™å…¥æ–‡ä»¶
    fs::write(&quot;config.toml&quot;, toml_str).expect(&quot;Something went wrong writing the file&quot;);
}
</code></pre></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª toml::Value ç±»å‹çš„å€¼ï¼Œè¯¥å€¼åŒ…å«è¦å†™å…¥ TOML æ–‡ä»¶çš„æ•°æ®ã€‚ç„¶åï¼Œä½¿ç”¨ toml::to_string å‡½æ•°å°†è¯¥å€¼è½¬æ¢ä¸º TOML æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚æœ€åï¼Œä½¿ç”¨ fs::write å‡½æ•°å°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ã€‚</p>
<h3 id="å±•å¼€-bufreader"><a class="header" href="#å±•å¼€-bufreader">å±•å¼€ BufReader</a></h3>
<blockquote>
<p>Q:</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust edition2021">use std::io::prelude::*;
use std::io::BufReader;
use std::fs::File;

fn main() -&gt; std::io::Result&lt;()&gt; {
    let f = File::open(&quot;log.txt&quot;)?;
    let mut reader = BufReader::new(f);

    let mut line = String::new();
    let len = reader.read_line(&amp;mut line)?;
    println!(&quot;First line is {} bytes long&quot;, len);
    Ok(())
}</code></pre></pre>
<p>å¦‚ä½•å°†è¿™æ®µä»£ç ä¿®æ”¹ä¸ºå¾ªç¯å°†æŒ‡å®šæ–‡ä»¶æ‰€æœ‰è¡Œå†…å®¹é€ä¸€è¾“å‡º?</p>
<blockquote>
<p>PS: ä» <a href="https://doc.rust-lang.org/1.39.0/std/io/struct.BufReader.html#examples">std::io::BufReader - Rust</a> æŠ„çš„</p>
</blockquote>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>è¦å¾ªç¯è¾“å‡ºæ–‡ä»¶çš„æ‰€æœ‰è¡Œå†…å®¹ï¼Œæ‚¨å¯ä»¥åœ¨ä¸€ä¸ªå¾ªç¯ä¸­ä½¿ç”¨BufReaderçš„read_lineæ–¹æ³•ã€‚æ¯æ¬¡è¿­ä»£æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè¯»å–æ–‡ä»¶ä¸­çš„ä¸€è¡Œï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ç»™å®šçš„å­—ç¬¦ä¸²å˜é‡ä¸­ã€‚å½“æ²¡æœ‰æ›´å¤šçš„è¡Œå¯ä»¥è¯»å–æ—¶ï¼Œè¯¥æ–¹æ³•å°†è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º0çš„ç»“æœï¼Œè¿™æ˜¯è·³å‡ºå¾ªç¯çš„ä¿¡å·ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¿®æ”¹åçš„ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::io::prelude::*;
use std::io::BufReader;
use std::fs::File;

fn main() -&gt; std::io::Result&lt;()&gt; {
    let f = File::open(&quot;log.txt&quot;)?;
    let reader = BufReader::new(f);

    for line in reader.lines() {
        println!(&quot;{}&quot;, line?);
    }
    Ok(())
}</code></pre></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†reader.lines()æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªstd::io::Linesè¿­ä»£å™¨ã€‚æ¯æ¬¡è¿­ä»£æ—¶ï¼Œè¯¥è¿­ä»£å™¨éƒ½ä¼šè¯»å–æ–‡ä»¶ä¸­çš„ä¸€è¡Œï¼Œå¹¶å°†å…¶åŒ…è£…åœ¨ä¸€ä¸ªstd::io::Result<String>ä¸­è¿”å›ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨?æ“ä½œç¬¦æ¥è§£åŒ…è¿™ä¸ªç»“æœï¼Œå¦‚æœè¯»å–å¤±è´¥ï¼Œå®ƒä¼šå°†é”™è¯¯ä¼ æ’­åˆ°mainå‡½æ•°çš„è°ƒç”¨æ–¹ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€è¡Œè¯»å–æ–‡ä»¶å¹¶å°†æ¯ä¸€è¡Œå†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p>
<blockquote>
<p>Q:
std::io::prelude æ˜¯ä»€ä¹ˆåº“? å¼•ç”¨äº†ä»€ä¹ˆè¿›æ¥? ç”¨åœ¨å“ªå„¿äº†?</p>
</blockquote>
<blockquote>
<p>GPT:</p>
</blockquote>
<p><code>std::io::prelude</code> æ˜¯ä¸€ä¸ªæ¨¡å—ï¼ŒåŒ…å«äº†ä¸€äº›å¸¸è§çš„ I/O trait å’Œç±»å‹çš„é¢„å®šä¹‰å¯¼å…¥ã€‚è¿™äº›é¢„å®šä¹‰å¯¼å…¥ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°ä½¿ç”¨ Rust æ ‡å‡†åº“ä¸­çš„ I/O åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†å¤§é‡çš„ä»£ç é‡å¤ã€‚</p>
<p>åœ¨ Rust ä»£ç ä¸­ï¼Œé€šè¿‡å¼•å…¥std::io::preludeæ¨¡å—æ¥ä½¿ç”¨é¢„å®šä¹‰å¯¼å…¥ï¼Œé€šå¸¸ä¼šå‡ºç°åœ¨å¤„ç† I/O ç›¸å…³æ“ä½œçš„ä»£ç ä¸­ã€‚è¿™ä¸ªæ¨¡å—åŒ…å«äº†ä»¥ä¸‹å‡ ä¸ª trait çš„é¢„å®šä¹‰å¯¼å…¥ï¼š</p>
<ul>
<li>Read: ç”¨äºè¯»å–æ•°æ®çš„ traitã€‚</li>
<li>BufRead: ç”¨äºè¯»å–ç¼“å†²åŒºçš„ traitã€‚</li>
<li>Write: ç”¨äºå†™å…¥æ•°æ®çš„ traitã€‚</li>
</ul>
<p>è¿™äº› trait éƒ½è¢«ç”¨äºåœ¨ Rust ä¸­è¿›è¡Œ I/O æ“ä½œï¼Œå› æ­¤å®ƒä»¬ç»å¸¸ä¼šè¢«å…¶ä»–çš„ I/O æ¨¡å—æˆ–åº“ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢æä¾›çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†std::io::preludeæ¥å¯¼å…¥Read traitï¼Œä»è€Œä½¿ç”¨BufReaderçš„read_lineæ–¹æ³•è¯»å–æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œå†…å®¹ã€‚</p>
<blockquote>
<p>A: 
å¦‚ä½•å¯¹å¾ªç¯ä¸­çš„ line è¿›è¡Œç±»ä¼¼ contains çš„åˆ¤å®šå‘¢?</p>
</blockquote>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>è¦å¯¹è¯»å–çš„æ¯ä¸€è¡Œå†…å®¹è¿›è¡ŒåŒ…å«ï¼ˆcontainsï¼‰çš„åˆ¤å®šï¼Œæ‚¨å¯ä»¥åœ¨forå¾ªç¯å†…ä½¿ç”¨ifè¯­å¥ï¼Œå¯¹æ¯ä¸€è¡Œè¿›è¡Œæ£€æŸ¥ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::io::prelude::*;
use std::io::BufReader;
use std::fs::File;

fn main() -&gt; std::io::Result&lt;()&gt; {
    let f = File::open(&quot;log.txt&quot;)?;
    let reader = BufReader::new(f);

    for line in reader.lines() {
        let line_content = line?;
        if line_content.contains(&quot;Error&quot;) {
            println!(&quot;{}&quot;, line_content);
        }
    }
    Ok(())
}</code></pre></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨containsæ–¹æ³•æ£€æŸ¥æ¯ä¸€è¡Œå†…å®¹æ˜¯å¦åŒ…å«å­—ç¬¦ä¸²&quot;Error&quot;ã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬å°†è¯¥è¡Œå†…å®¹æ‰“å°åˆ°æ§åˆ¶å°ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°†è·³è¿‡è¯¥è¡Œå¹¶ç»§ç»­è¯»å–æ–‡ä»¶çš„ä¸‹ä¸€è¡Œã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>å¯¹åº”ä»£ç ä¿®æ”¹ä¸º:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    let f = File::open(&amp;args.path)
        .expect(&quot;could NOT read the file&quot;);
    let reader = BufReader::new(f);

    let mut line = String::new();
    for line in reader.lines() {
            let line_content = line?;
            if line_content.contains(&quot;Error&quot;) {
                println!(&quot;{}&quot;, line_content);
            }
        }
<span class="boring">}</span></code></pre></pre>
<p>ä½†æ˜¯æŠ¥é”™:</p>
<pre><code>error[E0277]: the `?` operator can only be used in a function that returns `Result` or `Option` (or another type that implements `FromResidual`)
  --&gt; src/main.rs:66:36
   |
24 | fn main() {
   | --------- this function should return `Result` or `Option` to accept `?`
...
66 |             let line_content = line?;
   |                                    ^ cannot use the `?` operator in a function that returns `()`
   |
   = help: the trait `FromResidual&lt;Result&lt;Infallible, std::io::Error&gt;&gt;` is not implemented for `()`

For more information about this error, try `rustc --explain E0277`.
</code></pre>
<p>åº”è¯¥å¦‚ä½•è§£å†³?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>è¯¥é”™è¯¯æ˜¯å› ä¸ºåœ¨mainå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨å¾ªç¯ä¸­ä½¿ç”¨?æ“ä½œç¬¦ã€‚?æ“ä½œç¬¦åªèƒ½ç”¨äºè¿”å›Resultæˆ–Optionçš„å‡½æ•°æˆ–æ–¹æ³•ä¸­ï¼Œå®ƒä¼šåœ¨å‘ç”Ÿé”™è¯¯æ—¶è‡ªåŠ¨å°†é”™è¯¯è¿”å›ç»™è°ƒç”¨è€…ã€‚</p>
<p>åœ¨mainå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨å¤„ç†é”™è¯¯å¹¶å†³å®šå¦‚ä½•å¤„ç†å®ƒä»¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†é”™è¯¯æ‰“å°åˆ°æ§åˆ¶å°ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::io::prelude::*;
use std::io::BufReader;
use std::fs::File;
use std::env;

fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();
    if args.len() != 2 {
        println!(&quot;Usage: {} &lt;path_to_file&gt;&quot;, args[0]);
        return;
    }

    let f = File::open(&amp;args[1]).expect(&quot;Could not read file&quot;);
    let reader = BufReader::new(f);

    for line in reader.lines() {
        if let Ok(line_content) = line {
            if line_content.contains(&quot;Error&quot;) {
                println!(&quot;{}&quot;, line_content);
            }
        } else {
            eprintln!(&quot;Error while reading file&quot;);
            return;
        }
    }
}</code></pre></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨if letè¯­å¥æ£€æŸ¥è¯»å–æ¯ä¸€è¡Œæ˜¯å¦æˆåŠŸã€‚å¦‚æœæˆåŠŸï¼Œæˆ‘ä»¬æ£€æŸ¥è¡Œå†…å®¹æ˜¯å¦åŒ…å«å­—ç¬¦ä¸²&quot;Error&quot;ï¼Œå¦‚æœæ˜¯åˆ™å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ã€‚å¦‚æœè¯»å–è¡Œæ—¶å‘ç”Ÿé”™è¯¯ï¼Œæˆ‘ä»¬å°†é”™è¯¯æ‰“å°åˆ°æ ‡å‡†é”™è¯¯æµï¼ˆstderrï¼‰ï¼Œå¹¶é€€å‡ºç¨‹åºã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>çœ‹èµ·æ¥è¿™é‡Œæœ‰å¤šå±‚ if ä¸æ˜¯å¾ˆ rusty, æœ‰å…¶å®ƒæ–¹æ¡ˆæ¥è¾¾æˆç›¸åŒæ•ˆæœå˜›?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>æ‚¨å¯ä»¥ä½¿ç”¨matchè¯­å¥æ¥ä»£æ›¿åµŒå¥—çš„if letè¯­å¥ï¼Œä»¥é¿å…å¤šå±‚åµŒå¥—å’Œæé«˜ä»£ç å¯è¯»æ€§ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨matchè¯­å¥é‡å†™çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::io::prelude::*;
use std::io::BufReader;
use std::fs::File;
use std::env;

fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();
    if args.len() != 2 {
        println!(&quot;Usage: {} &lt;path_to_file&gt;&quot;, args[0]);
        return;
    }

    let f = File::open(&amp;args[1]).expect(&quot;Could not read file&quot;);
    let reader = BufReader::new(f);

    for line in reader.lines() {
        match line {
            Ok(line_content) =&gt; {
                if line_content.contains(&quot;Error&quot;) {
                    println!(&quot;{}&quot;, line_content);
                }
            }
            Err(_) =&gt; {
                eprintln!(&quot;Error while reading file&quot;);
                return;
            }
        }
    }
}</code></pre></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨matchè¯­å¥åŒ¹é…lineçš„å€¼ã€‚å¦‚æœè¯»å–è¡ŒæˆåŠŸï¼Œæˆ‘ä»¬ä½¿ç”¨Ok(line_content)åˆ†æ”¯æ¥å¤„ç†è¡Œå†…å®¹ï¼Œå¦‚æœè¡Œå†…å®¹åŒ…å«å­—ç¬¦ä¸²&quot;Error&quot;ï¼Œåˆ™å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ã€‚å¦‚æœè¯»å–è¡Œæ—¶å‡ºç°é”™è¯¯ï¼Œæˆ‘ä»¬ä½¿ç”¨Err(_)åˆ†æ”¯æ¥å¤„ç†é”™è¯¯ï¼Œå¹¶å°†é”™è¯¯æ‰“å°åˆ°æ ‡å‡†é”™è¯¯æµï¼ˆstderrï¼‰ï¼Œå¹¶é€€å‡ºç¨‹åºã€‚</p>
<p>ç›¸æ¯”ä½¿ç”¨åµŒå¥—çš„if letè¯­å¥ï¼Œmatchè¯­å¥æ›´åŠ æ¸…æ™°å’Œç®€æ´ã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>æ²¡é”™, match çœ‹èµ·æ¥ä¼˜é›…å¤šäº†, ä¸è¿‡, è¿˜æœ‰å…¶å®ƒæ–¹æ¡ˆå˜›?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>æ˜¯çš„ï¼Œé™¤äº†ä½¿ç”¨matchè¯­å¥ï¼Œè¿˜æœ‰ä¸€ç§æ›´ç®€æ´çš„æ–¹æ³•æ¥å®ç°ç±»ä¼¼çš„æ•ˆæœã€‚å¯ä»¥ä½¿ç”¨filter_mapæ–¹æ³•å’Œstd::result::Result::okå‡½æ•°æ¥è¿‡æ»¤è¡Œå¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºå¯é€‰çš„å­—ç¬¦ä¸²ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨forå¾ªç¯è¿­ä»£è¿™äº›å­—ç¬¦ä¸²å¹¶å°†å®ƒä»¬æ‰“å°å‡ºæ¥ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨filter_mapå’Œstd::result::Result::okå‡½æ•°çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::io::prelude::*;
use std::io::BufReader;
use std::fs::File;
use std::env;

fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();
    if args.len() != 2 {
        println!(&quot;Usage: {} &lt;path_to_file&gt;&quot;, args[0]);
        return;
    }

    let f = File::open(&amp;args[1]).expect(&quot;Could not read file&quot;);
    let reader = BufReader::new(f);

    for line in reader.lines().filter_map(Result::ok).filter(|line| line.contains(&quot;Error&quot;)) {
        println!(&quot;{}&quot;, line);
    }
}
</code></pre></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè°ƒç”¨filter_mapæ–¹æ³•æ¥è¿‡æ»¤æ‰é‚£äº›è¯»å–è¡Œæ—¶è¿”å›é”™è¯¯çš„è¡Œï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå¯é€‰çš„å­—ç¬¦ä¸²ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨filteræ–¹æ³•æ¥è¿‡æ»¤æ‰é‚£äº›ä¸åŒ…å«å­—ç¬¦ä¸²&quot;Error&quot;çš„è¡Œã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨forå¾ªç¯è¿­ä»£è¿™äº›å­—ç¬¦ä¸²ï¼Œå¹¶å°†å®ƒä»¬æ‰“å°åˆ°æ§åˆ¶å°ã€‚</p>
<p>ç›¸æ¯”ä½¿ç”¨matchè¯­å¥å’ŒåµŒå¥—çš„if letè¯­å¥ï¼Œè¿™ç§æ–¹æ³•æ›´åŠ ç®€æ´å’Œä¼˜é›…ã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>è¿˜æœ‰æ›´åŠ ä¼˜é›…çš„æ–¹æ¡ˆå˜›?</p>
<blockquote>
<p>GPT:
å½“ç„¶ï¼ŒRust çš„æ ‡å‡†åº“æä¾›äº†éå¸¸å¼ºå¤§çš„è¿­ä»£å™¨å’Œå‡½æ•°å¼ç¼–ç¨‹å·¥å…·ç®±ï¼Œå¯ä»¥è®©ä»£ç æ›´åŠ ç®€æ´å’Œä¼˜é›…ã€‚</p>
</blockquote>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨filteræ–¹æ³•å’Œé—­åŒ…æ¥è¿‡æ»¤æ‰ä¸åŒ…å«&quot;Error&quot;çš„è¡Œï¼Œç„¶åä½¿ç”¨mapæ–¹æ³•å’Œunwrapå‡½æ•°å°†å¯é€‰çš„è¡Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ä¸Šã€‚è¿™æ˜¯ä»£ç çš„ç¤ºä¾‹ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::io::prelude::*;
use std::io::BufReader;
use std::fs::File;
use std::env;

fn main() {
    let args: Vec&lt;String&gt; = env::args().collect();
    if args.len() != 2 {
        println!(&quot;Usage: {} &lt;path_to_file&gt;&quot;, args[0]);
        return;
    }

    let f = File::open(&amp;args[1]).expect(&quot;Could not read file&quot;);
    let reader = BufReader::new(f);

    reader.lines()
          .filter(|line| line.as_ref().map(|s| s.contains(&quot;Error&quot;)).unwrap_or(false))
          .map(|line| line.unwrap())
          .for_each(|line| println!(&quot;{}&quot;, line));
}</code></pre></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè°ƒç”¨filteræ–¹æ³•æ¥è¿‡æ»¤æ‰é‚£äº›ä¸åŒ…å«å­—ç¬¦ä¸²&quot;Error&quot;çš„è¡Œã€‚ç”±äºlinesæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«Result&lt;Option<String>&gt;çš„è¿­ä»£å™¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é—­åŒ…ä¸­ä½¿ç”¨as_refæ–¹æ³•æ¥å°†Result&lt;Option<String>&gt;è½¬æ¢ä¸ºOption&lt;&amp;String&gt;ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨mapæ–¹æ³•å’Œunwrapå‡½æ•°æ¥å°†å¯é€‰çš„è¡Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ä¸Šã€‚</p>
<p>ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»£ç è¿›ä¸€æ­¥ç®€åŒ–ï¼Œå¹¶æ›´åŠ æ¸…æ™°åœ°è¡¨è¾¾æˆ‘ä»¬çš„æ„å›¾ã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>æ²¡é”™, è¿™æ ·åˆç®€æ´,åˆæ•´é½,è€Œä¸”æ„ä¹‰æ˜ç¡®;
çœ‹èµ·æ¥ è¿­ä»£å™¨å’Œå‡½æ•°å¼å·¥å…·æœ‰å¾ˆå¤š, ç±»ä¼¼ filter å’Œ map çš„å†…ç½®å·¥å…·è¿˜æœ‰å“ªäº›? åˆ†åˆ«æœ‰ä»€ä¹ˆä¼˜é›…çš„å®ç”¨æ¡ˆä¾‹?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>Rust çš„æ ‡å‡†åº“æä¾›äº†ä¸°å¯Œçš„è¿­ä»£å™¨å’Œå‡½æ•°å¼ç¼–ç¨‹å·¥å…·ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>mapï¼šå°†ä¸€ä¸ªè¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹çš„å…ƒç´ ï¼Œé€šå¸¸ç”¨äºæ•°æ®ç±»å‹è½¬æ¢å’Œè®¡ç®—ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3, 4, 5];
let squares: Vec&lt;i32&gt; = numbers.iter().map(|n| n * n).collect();
// squares is [1, 4, 9, 16, 25]
<span class="boring">}</span></code></pre></pre>
<ul>
<li>filterï¼šæ ¹æ®æŸä¸ªæ¡ä»¶è¿‡æ»¤å‡ºè¿­ä»£å™¨ä¸­çš„å…ƒç´ ï¼Œé€šå¸¸ç”¨äºæ•°æ®è¿‡æ»¤å’Œç­›é€‰ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3, 4, 5];
let evens: Vec&lt;i32&gt; = numbers.iter().filter(|n| n % 2 == 0).collect();
// evens is [2, 4]
<span class="boring">}</span></code></pre></pre>
<ul>
<li>foldï¼šä½¿ç”¨æŸç§ç´¯åŠ å™¨ï¼ˆåˆå§‹å€¼ï¼‰å’Œä¸€ä¸ªé—­åŒ…æ¥èšåˆè¿­ä»£å™¨ä¸­çš„å…ƒç´ ï¼Œé€šå¸¸ç”¨äºæ±‚å’Œã€å¹³å‡å€¼å’Œå­—ç¬¦ä¸²æ‹¼æ¥ç­‰æ“ä½œã€‚
<ul>
<li>ç¤ºä¾‹ï¼šè®¡ç®—ä¸€ä¸ªæ•°å­—å‘é‡ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œã€‚</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3, 4, 5];
let sum: i32 = numbers.iter().fold(0, |acc, n| acc + n);
// sum is 15
<span class="boring">}</span></code></pre></pre>
<ul>
<li>flat_mapï¼šå°†ä¸€ä¸ªè¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ è½¬æ¢ä¸ºå¦ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç„¶åå°†æ‰€æœ‰çš„è¿­ä»£å™¨åˆå¹¶ä¸ºä¸€ä¸ªè¿­ä»£å™¨ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let words = vec![&quot;hello world&quot;, &quot;foo bar&quot;, &quot;baz qux&quot;];
let letters: Vec&lt;char&gt; = words.iter().flat_map(|s| s.chars()).collect();
// letters is ['h', 'e', 'l', 'l', 'o', ' ', 'w', 'o', 'r', 'l', 'd', 'f', 'o', 'o', ' ', 'b', 'a', 'r', 'b', 'a', 'z', ' ', 'q', 'u', 'x']
<span class="boring">}</span></code></pre></pre>
<ul>
<li>any å’Œ allï¼šæ£€æŸ¥è¿­ä»£å™¨ä¸­æ˜¯å¦å­˜åœ¨ä»»æ„å…ƒç´ æˆ–æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æŸä¸ªæ¡ä»¶ã€‚
<ul>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3, 4, 5];
let any_odd = numbers.iter().any(|n| n % 2 == 1);
let all_even = numbers.iter().all(|n| n % 2 == 0);
// any_odd is true, all_even is false
<span class="boring">}</span></code></pre></pre>
<ul>
<li>enumerate: æšä¸¾è¿­ä»£å™¨ä¸­çš„å…ƒç´ ï¼Œå¹¶å°†å…ƒç´ ç´¢å¼•å’Œå€¼ç»„æˆä¸€ä¸ªå…ƒç»„è¿”å›ã€‚
<ul>
<li>ç¤ºä¾‹ï¼šéå†ä¸€ä¸ªå­—ç¬¦ä¸²å‘é‡å¹¶æ‰“å°æ¯ä¸ªå…ƒç´ çš„ç´¢å¼•å’Œå€¼ã€‚</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let v = vec![&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;];
for (i, s) in v.iter().enumerate() {
    println!(&quot;{}: {}&quot;, i, s);
}

<span class="boring">}</span></code></pre></pre>
<ul>
<li>zipï¼šå°†ä¸¤ä¸ªè¿­ä»£å™¨åˆå¹¶ä¸ºä¸€ä¸ªå…ƒç´ å¯¹çš„è¿­ä»£å™¨ã€‚
<ul>
<li>ç¤ºä¾‹ï¼šä»ä¸¤ä¸ªå‘é‡ä¸­å–å‡ºå¯¹åº”ä½ç½®çš„å…ƒç´ å¹¶ç»„æˆä¸€ä¸ªæ–°çš„å‘é‡</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3];
let letters = vec!['a', 'b', 'c'];
let pairs: Vec&lt;(i32, char)&gt; = numbers.iter().zip(letters.iter()).collect();
// pairs is [(1, 'a'), (2, 'b'), (3, 'c')]

<span class="boring">}</span></code></pre></pre>
<p>å½“ä½¿ç”¨è¿­ä»£å™¨å¤„ç†æ•°æ®æ—¶ï¼Œæœ‰æ—¶éœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†æ®µå¤„ç†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ take å’Œ skip æ–¹æ³•ã€‚</p>
<ul>
<li>takeï¼šä»ä¸€ä¸ªé›†åˆä¸­å–å‡ºå‰å‡ ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œä»ä¸€ä¸ªåŒ…å«æ‰€æœ‰äººçš„å‘é‡ä¸­å–å‡ºå‰ 10 ä¸ªäººã€‚
<ul>
<li>take(n) æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ï¼Œå®ƒåªåŒ…å«åŸå§‹è¿­ä»£å™¨çš„å‰ n ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼š</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3, 4, 5];
let first_three = numbers.iter().take(3);
for number in first_three {
    println!(&quot;{}&quot;, number);
}
// è¾“å‡º:
// 1
// 2
// 3
<span class="boring">}</span></code></pre></pre>
<ul>
<li>skipï¼šè·³è¿‡ä¸€ä¸ªé›†åˆä¸­çš„å‰å‡ ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œä»ä¸€ä¸ªåŒ…å«æ‰€æœ‰äººçš„å‘é‡ä¸­è·³è¿‡å‰ 10 ä¸ªäººï¼Œç„¶åè¿”å›å‰©ä½™çš„æ‰€æœ‰äººã€‚
<ul>
<li>skip(n) æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ï¼Œå®ƒè·³è¿‡åŸå§‹è¿­ä»£å™¨çš„å‰ n ä¸ªå…ƒç´ ï¼Œç„¶åè¿­ä»£å…¶ä½™çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼š</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3, 4, 5];
let last_two = numbers.iter().skip(3);
for number in last_two {
    println!(&quot;{}&quot;, number);
}
// è¾“å‡º:
// 4
// 5

<span class="boring">}</span></code></pre></pre>
<ul>
<li>chainï¼šå°†ä¸¤ä¸ªé›†åˆè¿æ¥åœ¨ä¸€èµ·ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„é›†åˆã€‚ä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç”·æ€§çš„å‘é‡å’Œä¸€ä¸ªåŒ…å«æ‰€æœ‰å¥³æ€§çš„å‘é‡è¿æ¥åœ¨ä¸€èµ·ï¼Œç„¶åè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰äººçš„å‘é‡ã€‚
<ul>
<li>å¦ä¸€ä¸ªå¸¸è§çš„è¿­ä»£å™¨æ–¹æ³•æ˜¯ chain æ–¹æ³•ã€‚å®ƒæ¥æ”¶å¦ä¸€ä¸ªè¿­ä»£å™¨ä½œä¸ºå‚æ•°ï¼Œå°†å…¶æ·»åŠ åˆ°å½“å‰è¿­ä»£å™¨çš„æœ«å°¾ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ã€‚ä¾‹å¦‚ï¼š</li>
</ul>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers1 = vec![1, 2, 3];
let numbers2 = vec![4, 5, 6];
let all_numbers = numbers1.iter().chain(numbers2.iter());
for number in all_numbers {
    println!(&quot;{}&quot;, number);
}
// è¾“å‡º:
// 1
// 2
// 3
// 4
// 5
// 6

<span class="boring">}</span></code></pre></pre>
<p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸¤ä¸ªå‘é‡ numbers1 å’Œ numbers2ï¼Œç„¶åå°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ all_numbersã€‚æœ€åï¼Œæˆ‘ä»¬éå† all_numbers å¹¶è¾“å‡ºå…¶ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<p>è¿™äº›æ˜¯ Rust ä¸­ä¸€äº›å¸¸è§çš„è¿­ä»£å™¨æ–¹æ³•å’Œå‡½æ•°å¼å·¥å…·ï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥é€‰æ‹©ä½¿ç”¨å®ƒä»¬ã€‚åœ¨ Rust ä¸­ï¼Œè¿­ä»£å™¨å’Œå‡½æ•°å¼ç¼–ç¨‹è¢«å¹¿æ³›åº”ç”¨äºå„ç§åœºæ™¯ï¼Œä¾‹å¦‚å¤„ç†é›†åˆã€è¿‡æ»¤å’Œæ’åºæ•°æ®ã€å¤„ç†æ–‡æœ¬ç­‰ç­‰ã€‚é€šè¿‡ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œæ‚¨å¯ä»¥ç¼–å†™æ›´åŠ ç®€æ´ã€ä¼˜é›…ã€é«˜æ•ˆå’Œå®‰å…¨çš„ä»£ç ã€‚</p>
<blockquote>
<p>Q:</p>
</blockquote>
<p>å‘ç°è¿˜æœ‰ try_fold ä¹‹ç±»å¸¦æœ‰ try_ çš„è¿­ä»£å™¨,ä¸€èˆ¬æ˜¯ç”¨åœ¨ä»€ä¹ˆåœºæ™¯ä¸­çš„?</p>
<blockquote>
<p>GPT:</p>
</blockquote>
<p>try_fold æ–¹æ³•æ˜¯ä¸€ä¸ªå¸¦æœ‰ try_ å‰ç¼€çš„è¿­ä»£å™¨æ–¹æ³•ï¼Œå®ƒç±»ä¼¼äº fold æ–¹æ³•ï¼Œä½†æ˜¯å®ƒå…è®¸åœ¨è¿­ä»£å™¨å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå¹¶å°†é”™è¯¯ä¼ é€’ç»™è°ƒç”¨æ–¹è¿›è¡Œå¤„ç†ã€‚try_fold æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯é€šå¸¸æ˜¯å¤„ç†å¯èƒ½ä¼šå¤±è´¥çš„æ“ä½œçš„è¿­ä»£å™¨å…ƒç´ åºåˆ—ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚æˆ–æ–‡ä»¶ I/O æ“ä½œã€‚</p>
<p>try_fold æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªåˆå§‹ç´¯åŠ å™¨å’Œä¸€ä¸ªé—­åŒ…ï¼Œé—­åŒ…å°†å½“å‰ç´¯åŠ å™¨çš„å€¼å’Œè¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª Result å€¼ã€‚å¦‚æœé—­åŒ…è¿”å›ä¸€ä¸ª Ok å€¼ï¼Œåˆ™ try_fold æ–¹æ³•ä¼šç»§ç»­è¿­ä»£ã€‚å¦‚æœé—­åŒ…è¿”å›ä¸€ä¸ª Err å€¼ï¼Œåˆ™ try_fold æ–¹æ³•ä¼šç«‹å³åœæ­¢è¿­ä»£å¹¶å°†é”™è¯¯ä¼ é€’ç»™è°ƒç”¨æ–¹ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ try_fold æ–¹æ³•æ¥è®¡ç®—å‘é‡ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ Result&lt;i32, String&gt; ç±»å‹ï¼š</p>
<pre><pre class="playground"><code class="language-rust edition2021">fn main() {
    let vec = vec![Ok(1), Ok(2), Err(&quot;failed&quot;.to_string()), Ok(3)];
    let sum = vec
        .into_iter()
        .try_fold(0, |acc, x| x.map(|n| acc + n));
    match sum {
        Ok(result) =&gt; println!(&quot;Sum is {}&quot;, result),
        Err(error) =&gt; println!(&quot;Error: {}&quot;, error),
    }
}</code></pre></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå‘é‡ vecï¼Œå…¶ä¸­åŒ…å«ä¸‰ä¸ª Ok å€¼å’Œä¸€ä¸ª Err å€¼ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨ into_iter æ–¹æ³•å°†å‘é‡è½¬æ¢ä¸ºè¿­ä»£å™¨ï¼Œä½¿ç”¨ try_fold æ–¹æ³•æ¥è®¡ç®—æ‰€æœ‰å…ƒç´ çš„å’Œï¼Œå…¶ä¸­ä½¿ç”¨ map æ–¹æ³•å°† Ok å€¼æ˜ å°„åˆ°å®ƒä»¬çš„æ•´æ•°å€¼ï¼Œå¹¶å¿½ç•¥ Err å€¼ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ match æ¥å¤„ç†å¯èƒ½çš„é”™è¯¯å’Œç»“æœã€‚</p>
<h2 id="refer-5"><a class="header" href="#refer-5">refer.</a></h2>
<blockquote>
<p>å…¶å®å®˜æ–¹çš„æ–‡æ¡£åƒé€, åŸºæœ¬å¯ä»¥å¹³è¶Ÿ 80% çš„æ—¥å¸¸å¼€å‘äº†...</p>
</blockquote>
<ul>
<li><a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html#">Iterator in std::iter - Rust</a></li>
</ul>
<h2 id="logging-4"><a class="header" href="#logging-4">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230224 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="exercism"><a class="header" href="#exercism">Exercism</a></h1>
<blockquote>
<p>ç»ƒä¹ ä¸»ä¹‰</p>
</blockquote>
<h2 id="background-6"><a class="header" href="#background-6">background</a></h2>
<blockquote>
<p>å…·ä½“èƒŒæ™¯</p>
</blockquote>
<p><a href="https://exercism.org/about">About Exercism</a></p>
<p>æ˜¯ä¸€ä¸ªç¥å¥‡çš„ç½‘ç«™</p>
<p><img src="https://ipic.zoomquiet.top/2022-12-14-zshot%202022-12-14%2021.30.38.jpg" alt="" /></p>
<p>ä¸€æ˜¯ä¸ªä¸“æ³¨ç”¨ç»ƒä¹ é¢˜æ¥å­¦ä¹ å„ç§å¼€å‘è¯­è¨€çš„ç½‘ç«™,
å…è´¹,åŒ…å«è¶Šæ¥è¶Šå¤šçš„è¯­è¨€</p>
<h2 id="goal-6"><a class="header" href="#goal-6">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p><a href="https://exercism.org/tracks/rust">Rust on Exercism</a></p>
<p>è‡³å°‘å…ˆåˆ·å®Œè¿™ 103 é“é¢˜ç›®, ç„¶å, å†å¼€å‘å…·ä½“çš„å®ç”¨å·¥å…·;</p>
<h2 id="trace-6"><a class="header" href="#trace-6">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<p><img src="https://ipic.zoomquiet.top/2022-12-14-zshot%202022-12-14%2021.31.48.jpg" alt="rust" /></p>
<p>ä¸è¿‡æœ€ç»ˆæ˜¯ä¹±åºæ¥çš„</p>
<h2 id="refer-6"><a class="header" href="#refer-6">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<p><a href="https://cheats.rs/">Rust Language Cheat Sheet</a></p>
<ul>
<li><a href="https://juejin.cn/post/7146144676532191262">16ï½œæ•°æ®ç»“æ„ï¼šVec<T>ã€&amp;[T]ã€Box&lt;[T]&gt; ï¼Œä½ çœŸçš„äº†è§£é›†åˆå®¹å™¨ä¹ˆï¼Ÿ - æ˜é‡‘</a></li>
<li>...</li>
</ul>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a16a825f50d4d34866d432c15fa3ebd~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.image?" alt="" /></p>
<h2 id="logging-5"><a class="header" href="#logging-5">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221214 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rs42all-your-base"><a class="header" href="#rs42all-your-base">rs42all-your-base</a></h1>
<blockquote>
<p>æ‰€æœ‰è¿›åˆ¶</p>
</blockquote>
<h2 id="background-7"><a class="header" href="#background-7">background</a></h2>
<blockquote>
<p>å…·ä½“èƒŒæ™¯</p>
</blockquote>
<p><a href="https://exercism.org/docs/tracks/rust">All Your Base in Rust on Exercism</a></p>
<h2 id="logging-6"><a class="header" href="#logging-6">logging</a></h2>
<blockquote>
<p>è®°è¦</p>
</blockquote>
<h3 id="try_fold"><a class="header" href="#try_fold">try_fold()</a></h3>
<blockquote>
<p>è¡¨è¾¾èƒ½åŠ›çš„å…¸èŒƒ...</p>
</blockquote>
<h2 id="refer-7"><a class="header" href="#refer-7">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Positional_notation#External_links">Positional notation - Wikipedia</a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/trait.Iterator.html">Iterator in std::iter - Rust</a>
<ul>
<li><a href="https://qiita.com/lo48576/items/34887794c146042aebf1">Rustã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã®ç¶²ç¾…çš„ã‹ã¤å¤§é›‘æŠŠãªç´¹ä»‹ - Qiita</a></li>
<li><a href="https://zenn.dev/megeton/articles/fb6266bcb6aa1b">Rubyè„³ã®ãŸã‚ã®Rusté…åˆ—ç³»ãƒ¡ã‚½ãƒƒãƒ‰ã¾ã¨ã‚</a></li>
<li>...</li>
</ul>
</li>
<li><a href="https://rustcc.cn/article?id=2f4b3a15-7874-4c68-b9d8-5a717e9a3af0">rustæ–°æ‰‹çš„ä¸€ä¸ªé—®é¢˜ï¼šfoldå’Œscanã€‚ - Rustè¯­è¨€ä¸­æ–‡ç¤¾åŒº</a>
<ul>
<li><a href="https://juejin.cn/post/7067102952602746910">æŠ›å¼ƒRustçš„try...catchå’Œnullæ£€æŸ¥ - æ˜é‡‘</a></li>
<li>...</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ex43allergies"><a class="header" href="#ex43allergies">ex43Allergies</a></h1>
<blockquote>
<p>è¿‡æ•æº</p>
</blockquote>
<h2 id="background-8"><a class="header" href="#background-8">background</a></h2>
<blockquote>
<p>å…·ä½“èƒŒæ™¯</p>
</blockquote>
<p><a href="https://exercism.org/tracks/rust/exercises/allergies">Allergies in Rust on Exercism</a></p>
<h2 id="logging-7"><a class="header" href="#logging-7">logging</a></h2>
<blockquote>
<p>è®°è¦</p>
</blockquote>
<h3 id=""><a class="header" href="#">&amp;</a></h3>
<blockquote>
<p>ç°å®ä¸–ç•Œçš„ ä¸è®¡ç®—</p>
</blockquote>
<h2 id="refer-8"><a class="header" href="#refer-8">refer.</a></h2>
<blockquote>
<p>å„ç§å‚è€ƒ</p>
</blockquote>
<ul>
<li><a href="https://hltj.me/lang/2016/11/07/10m-letters.html">ç”±â€œåƒä¸‡å­—æ¯è¡¨é—®é¢˜â€çœ‹å¤šèŒƒå¼ç¼–ç¨‹è¯­è¨€ | ç°è“æ—¶å…‰</a>
<ul>
<li><a href="http://www.nct9.ne.jp/m_hiroi/linux/rust14.html">Linux Programming / ãŠæ°—æ¥½ Rust ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¶…å…¥é–€</a></li>
</ul>
</li>
<li>...</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å¼€å‘"><a class="header" href="#å¼€å‘">å¼€å‘</a></h1>
<blockquote>
<p>projects ...</p>
</blockquote>
<h2 id="background-9"><a class="header" href="#background-9">background</a></h2>
<blockquote>
<p>æ— å¥ˆèƒŒæ™¯</p>
</blockquote>
<p>å¼€å‘è¯­è¨€å­¦ä¹ , ä¸ç”¨æ¥å¼€å‘çœŸå®é¡¹ç›®, åŸºæœ¬æ˜¯è¡¨æ¼”å­¦ä¹ è¡Œä¸ºäº†...</p>
<h2 id="goal-7"><a class="header" href="#goal-7">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p>ä¸€ç»„æ—¥å¸¸è¦ç”¨å·¥å…·, åŸåˆ›/å†åˆ¶/...</p>
<p>å…³é”®æ˜¯ç§¯ç´¯ä¸€ç»„å¯ç”¨ä½œå“, æ‰“åº•å„¿.</p>
<h2 id="trace-7"><a class="header" href="#trace-7">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<p>???</p>
<h2 id="refer-9"><a class="header" href="#refer-9">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-8"><a class="header" href="#logging-8">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221023 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å®è·µä½œå“"><a class="header" href="#å®è·µä½œå“">å®è·µä½œå“</a></h1>
<h2 id="background-10"><a class="header" href="#background-10">background</a></h2>
<p>å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€, æœ€é«˜æ•ˆçš„å§¿åŠ¿å°±æ˜¯æ‹¿æ¥ä½¿ç”¨äº†</p>
<h2 id="goal-8"><a class="header" href="#goal-8">goal</a></h2>
<p>å°†å½“å‰æ—¥å¸¸è¦ç”¨çš„å„ç§å·¥å…·, è½¬åŒ–ä¸º rust ç‰ˆæœ¬çš„...</p>
<h2 id="plan"><a class="header" href="#plan">plan</a></h2>
<ul>
<li><input disabled="" type="checkbox"/>
NNera ~ ç‰›å¦çºªå…ƒ</li>
<li><input disabled="" type="checkbox"/>
bxmr ~ BXM è¾“å…¥ç è¡¨ç»´æŠ¤å™¨</li>
<li><input disabled="" type="checkbox"/>
yuzu ~ æŸšå­, ç®€é™‹çš„ç§ç”¨çŸ­å€ç”Ÿæˆå™¨
<ul>
<li><input disabled="" type="checkbox" checked=""/>
SUUID ~ çŸ­ UUID ç”Ÿæˆå™¨; ç»„åˆæ ‡å‡†çš„ UUID+Md5 å°±å¥½</li>
<li><input disabled="" type="checkbox"/>
è‡ªåˆ¶, å‚è€ƒ: <a href="https://github.com/skorokithakis/shortuuid/blob/master/shortuuid/main.py">shortuuid/main.py at master Â· skorokithakis/shortuuid</a></li>
</ul>
</li>
<li><input disabled="" type="checkbox"/>
Yazi ~ çšçœ¦ git ä»“åº“è¡Œä¸ºåˆ†æå™¨</li>
</ul>
<h2 id="trace-8"><a class="header" href="#trace-8">trace</a></h2>
<blockquote>
<p>è¿½è¸ªç¬”è®°</p>
</blockquote>
<h2 id="refer-10"><a class="header" href="#refer-10">refer.</a></h2>
<blockquote>
<p>å„ç§ç›¸å…³å‚è€ƒ...</p>
</blockquote>
<ul>
<li><a href="https://www.oreilly.com/library/view/command-line-rust/9781098109424/">Command-Line Rust [Book]</a></li>
<li>...</li>
</ul>
<h2 id="logging-9"><a class="header" href="#logging-9">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>...</li>
<li>230122 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„20ä»¶äº‹"><a class="header" href="#20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„20ä»¶äº‹">20å¹´æ¥ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆå­¦åˆ°çš„20ä»¶äº‹</a></h1>
<p>åŸæ–‡: <a href="https://www.simplethread.com/20-things-ive-learned-in-my-20-years-as-a-software-engineer/">20 Things I've Learned in my 20 Years as a Software Engineer - Simple Thread</a></p>
<h2 id="æ³¨æ„è¯·å…ˆé˜…è¯»æ­¤å†…å®¹"><a class="header" href="#æ³¨æ„è¯·å…ˆé˜…è¯»æ­¤å†…å®¹">æ³¨æ„:è¯·å…ˆé˜…è¯»æ­¤å†…å®¹</a></h2>
<p>å³å°†å±•ç°çš„æ˜¯ä¸€ç¯‡åŒ…å«å¤§é‡å»ºè®®çš„ blog ;
å‘å‰äººå­¦ä¹ å¯¹æˆåŠŸè‡³å…³é‡è¦,ä½†æ˜¯,æˆ‘ä»¬å¸¸å¸¸å¿˜è®°å¦å¤–ä¸€ä¸ªé‡è¦è­¦å‘Š:
å‡ ä¹æ‰€æœ‰çš„å»ºè®®éƒ½æ˜¯ä¸Šä¸‹æ–‡ç›¸å…³çš„, ä½†æ˜¯,å¾ˆå°‘å¯¹ä¸Šä¸‹æ–‡æä¾›ç»†èŠ‚;</p>
<p>&quot;ä½ éœ€è¦æ”¶å–æ›´å¤šè´¹ç”¨!&quot; è¿™ç»è¥äº†20å¹´çš„å…¬å¸è¯´, å¤šå¹´ä»¥æ¥æ”¶è´¹&quot;å¤ªä½&quot;,æ— æ³•èµ¢å¾—å®¢æˆ·å¹¶å–å¾—æˆåŠŸ;</p>
<p>&quot;ä½ éœ€è¦å°†ä¸€åˆ‡æ„å»ºä¸ºå¾®æœåŠ¡!&quot; è¯¥å…¬å¸è¡¨ç¤º, æ„å»ºäº†ä¸€ä¸ªå¿«é€Ÿçš„æ•´ä½“,è·å¾—äº†æ•°åƒå®¢æˆ·,ç„¶å,åœ¨å¼€å§‹é‡åˆ°é—®é¢˜æ—¶, å…¨é¢è½¬å‘äº†å¾®æœåŠ¡;</p>
<p>å¦‚æœä¸äº†è§£ä¸Šä¸‹æ–‡, å»ºè®®å°±æ¯«æ— æ„ä¹‰,ç”šè‡³æ›´ç³Ÿç³•,æœ‰å®³;
å¦‚æœé‚£äº›äººæ—©ç‚¹å¬ä»ä»–ä»¬è‡ªå·±çš„å»ºè®®,ä»–ä»¬è‡ªå·±å¯èƒ½ä¼šå› æ­¤å—è‹¦;
å¯¹äºä»»ä½•å»ºè®®å¾ˆéš¾é€ƒè„±è¿™ä¸ªé™·é˜±;
æˆ‘ä»¬å¯èƒ½æ˜¯æˆ‘ä»¬ç»å†çš„ç»ˆç‚¹,ä½†æ˜¯,æˆ‘ä»¬å´æ˜¯é€šè¿‡ç°åœ¨çš„é•œå¤´æ¥è§‚å¯Ÿ;</p>
<p>å› æ­¤,ä¸ºäº†è®©ä½ äº†è§£ä¸€ä¸‹è¿™äº›å»ºè®®çš„æ¥æº,ç‰¹æ­¤è¯´æ˜:
æˆ‘åœ¨èŒä¸šç”Ÿæ¶¯çš„å‰åŠæ®µæ‹…å½“è½¯ä»¶å·¥ç¨‹å¸ˆ,ä¸ºå„ç§å°å‹ä¼ä¸šå’Œåˆåˆ›å…¬å¸å·¥ä½œ,
ç„¶å,æˆ‘è¿›å…¥å’¨è¯¢è¡Œä¸šå¹¶åœ¨è®¸å¤šéå¸¸å¤ªçš„ä¼ä¸šå·¥ä½œ;
æœ€å, æˆ‘å¼€åˆ›äº† <code>Simple Thread</code>,
æˆ‘ä»¬ä»ä¸€ä¸ª2äººå›¢é˜Ÿæˆé•¿ä¸ºä¸€ä¸ª25äººçš„å›¢é˜Ÿ;
10å¹´å‰, æˆ‘ä»¬ä¸»è¦å’Œä¸­å°å‹ä¼ä¸šåˆä½œ,ç°åœ¨æˆ‘ä»¬å’Œå¤§å‹å’Œå°å‹ä¼ä¸šåˆä½œ;</p>
<p>æˆ‘çš„æ‰€æœ‰å»ºè®®æ¥è‡ªäº:</p>
<ul>
<li>å‡ ä¹æ€»æ˜¯åœ¨å°è€Œç²¾å¹²çš„å›¢é˜Ÿä¸­,æˆ‘ä»¬å¿…é¡»ç”¨å¾ˆå°‘çš„èµ„æºä½œå¾ˆå¤šäº‹æƒ…</li>
<li>é‡è§†å·¥ä½œè½¯ä»¶è€Œä¸æ˜¯ç‰¹å®šå·¥å…·</li>
<li>ä¸€ç›´åœ¨å¼€å§‹æ–°é¡¹ç›®,åŒæ—¶è¿˜è¦ç»´æŠ¤ä¸€äº›ç³»ç»Ÿ</li>
<li>é‡è§†å·¥ç¨‹å¸ˆçš„ç”Ÿäº§åŠ›,è¶…è¿‡å…¶å®ƒå¤§å¤šæ•°è€ƒè™‘å› ç´ </li>
<li>...</li>
</ul>
<p>æˆ‘è¿‡å»20å¹´çš„ç»å†å¡‘é€ äº†å¯¹è½¯ä»¶çš„åè§,
å¹¶ä½¿æˆ‘å½¢æˆäº†ä¸€äº›ä¿¡å¿µ;
æˆ‘è¯•å›¾å°†è¿™äº›ä¿¡å¿µå‹ç¼©ä¸ºä¸€ä¸ªæ˜“äºä½¿ç”¨çš„åˆ—è¡¨,
å¸Œæœ›ä½ èƒ½å‘ç°å¥¹ä»¬çš„ä»·å€¼;</p>
<h2 id="å»ºè®®æ¸…å•"><a class="header" href="#å»ºè®®æ¸…å•">å»ºè®®æ¸…å•:</a></h2>
<h3 id="1-æˆ‘ä»ç„¶æ‡‚çš„ä¸æ˜¯å¤ªå¤š"><a class="header" href="#1-æˆ‘ä»ç„¶æ‡‚çš„ä¸æ˜¯å¤ªå¤š">1. æˆ‘ä»ç„¶æ‡‚çš„ä¸æ˜¯å¤ªå¤š</a></h3>
<p>&quot;ä½ æ€ä¹ˆä¸çŸ¥é“ BGP ?&quot;</p>
<p>&quot;ä½ ä»æ¥æ²¡å¬è¯´è¿‡ Rust?&quot;</p>
<p>æˆ‘ä»¬å¤§å¤šæ•°äººéƒ½è¢«äººè¿™ä¹ˆè¯´è¿‡,
è€Œä¸”å¯èƒ½å¬çš„å¤ªé¢‘ç¹äº†;
æˆ‘ä»¬ä¸­è®¸å¤šäººå–œæ¬¢è½¯ä»¶çš„åŸå› å°±æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯ç»ˆèº«å­¦ä¹ è€…, åœ¨è½¯ä»¶é¢†åŸŸ,
æ— è®ºä½ ä»å“ªä¸ªæ–¹å‘çœ‹, éƒ½æœ‰å¹¿é˜”çš„çŸ¥è¯†å‰æ™¯å‘å„ä¸ªæ–¹å‘å‘å±•,
è€Œä¸”æ¯å¤©éƒ½åœ¨æ‰©å±•;
è¿™æ„å‘³ç€å³ä¾¿ä½ åœ¨èŒä¸šç”Ÿæ¶¯ä¸­åº¦è¿‡æ•°åå¹´,
ä½†æ˜¯, å’ŒåŒæ ·åœ¨çœ‹ä¼¼ç›¸ä¼¼çš„è§’è‰²ä¸­åº¦è¿‡æ•°åå¹´çš„äººç›¸æ¯”,
ä»ç„¶å­˜åœ¨å·¨å¤§çš„çŸ¥è¯†å·®è·;
è¶Šæ—©æ„è¯†åˆ°è¿™ç‚¹, å°±èƒ½è¶Šæ—©å¼€å§‹æ‘†è„± &quot;é¡¶æ›¿è€…ç»¼åˆç—‡&quot; ,
è½¬è€Œä¹äºå‘ä»–äººå­¦ä¹ å’Œæ•™å¯¼ä»–äºº;</p>
<h3 id="2-è½¯ä»¶æœ€éš¾çš„éƒ¨åˆ†æ˜¯æ„å»ºæ­£ç¡®çš„ä¸œè¥¿"><a class="header" href="#2-è½¯ä»¶æœ€éš¾çš„éƒ¨åˆ†æ˜¯æ„å»ºæ­£ç¡®çš„ä¸œè¥¿">2. è½¯ä»¶æœ€éš¾çš„éƒ¨åˆ†æ˜¯æ„å»ºæ­£ç¡®çš„ä¸œè¥¿</a></h3>
<p>æˆ‘çŸ¥é“åœ¨è¿™ç‚¹ä¸Šç®—é™ˆè¯æ»¥è°ƒ,
ä½†æ˜¯, å¤§å¤šæ•°è½¯ä»¶å·¥ç¨‹å¸ˆå¹¶ä¸ç›¸ä¿¡çš„åŸå› æ˜¯, ä»–ä»¬è®¤ä¸ºè¿™åœ¨è´¬ä½ä»–ä»¬çš„å·¥ä½œ;
æˆ‘ä¸ªäººè®¤ä¸ºè¿™æ˜¯æ— ç¨½ä¹‹è°ˆï¼›
ç›¸å,è¿™çªå‡ºäº†æˆ‘ä»¬å¿…é¡»å·¥ä½œçš„ç¯å¢ƒæœ¬èº«å¤æ‚æ€§å’Œä¸åˆç†æ€§,
è¿™æ•…å±…äº†æˆ‘ä»¬çš„æŒ‘æˆ˜;
ä½ å¯ä»¥è®¾è®¡å‡ºä¸–ç•Œä¸ŠæŠ€æœ¯ä¸Šæœ€ä»¤äººå°è±¡æ·±åˆ»çš„ä¸œè¥¿,
ç„¶å, å´æ— äººæ„¿æ„ä½¿ç”¨;
è¿™ç§äº‹å„¿ä¸€ç›´åœ¨å‘ç”Ÿ;
è®¾è®¡è½¯ä»¶ä¸»è¦æ˜¯ä¸€ç§å€¾å¬æ´»åŠ¨,
æˆ‘ä»¬ç»å¸¸ä¸å¾—ä¸æˆä¸ºç«•è½¯ä»¶å·¥ç¨‹å¸ˆ, éƒ¨åˆ†é€šçµå¸ˆ, ä»¥åŠéƒ¨åˆ†äººç±»å­¦å®¶;
æŠ•èµ„åœ¨è¿™ä¸ªè®¾è®¡è¿‡ç¨‹, æ— è®ºæ˜¯é€šè¿‡ä¸“é—¨çš„ UX å›¢é˜Ÿ, è¿˜æ˜¯é€šè¿‡ç®€å•çš„è‡ªæˆ‘æ•™è‚²,
éƒ½å°†å¸¦æ¥å·¨å¤§çš„å›æŠ¥;
å› ä¸º, ä½ å¦‚ä½•è®¡ç®—æ„å»ºé”™è¯¯è½¯ä»¶çš„çœŸæ­£æˆæœ¬?
è¿™ä¸ä»…ä»…æ˜¯æŸå¤±å·¥ç¨‹æ—¶é—´...</p>
<h3 id="3-æœ€å¥½çš„è½¯ä»¶å·¥ç¨‹å¸ˆåƒè®¾è®¡å¸ˆä¸€æ ·æ€è€ƒ"><a class="header" href="#3-æœ€å¥½çš„è½¯ä»¶å·¥ç¨‹å¸ˆåƒè®¾è®¡å¸ˆä¸€æ ·æ€è€ƒ">3. æœ€å¥½çš„è½¯ä»¶å·¥ç¨‹å¸ˆåƒè®¾è®¡å¸ˆä¸€æ ·æ€è€ƒ</a></h3>
<p>ä¼Ÿå¤§çš„è½¯ä»¶å·¥ç¨‹å¸ˆä¼šæ€è€ƒä»–ä»¬ä»£ç çš„ç”¨æˆ·ä½“éªŒ;
ä»–ä»¬å¯èƒ½ä¸ä¼šç”¨å„ç§æœ¯è¯­æ¥è€ƒè™‘,
è€Œæ˜¯è€ƒè™‘åº”è¯¥æ˜¯å¤–éƒ¨API/ç¼–ç¨‹API/ç”¨æˆ·ç•Œé¢/åè®®è¿˜æ˜¯å…¶å®ƒä»»ä½•ç•Œé¢;
ä¼Ÿå¤§çš„å·¥ç¨‹å¸ˆä¼šè€ƒè™‘è°å°†ä½¿ç”¨, ä¸ºä»€ä¹ˆè¦ä½¿ç”¨,å¦‚ä½•ä½¿ç”¨,
ä»¥åŠè¿™äº›å¯¹ç”¨æˆ·æ¥è¯´ä»€ä¹ˆæ˜¯æœ€é‡è¦çš„;
ç‰¢è®°ç”¨æˆ·çš„éœ€æ±‚, ç¡®è®¤æ˜¯è‰¯å¥½ç”¨æˆ·ä½“éªŒçš„æ ¸å¿ƒ;</p>
<h3 id="4-æœ€å¥½çš„ä»£ç æ˜¯æ²¡æœ‰ä»£ç æˆ–æ˜¯ä½ ä¸å¿…ç»´æŠ¤çš„"><a class="header" href="#4-æœ€å¥½çš„ä»£ç æ˜¯æ²¡æœ‰ä»£ç æˆ–æ˜¯ä½ ä¸å¿…ç»´æŠ¤çš„">4. æœ€å¥½çš„ä»£ç æ˜¯æ²¡æœ‰ä»£ç ,æˆ–æ˜¯ä½ ä¸å¿…ç»´æŠ¤çš„</a></h3>
<p>æˆ‘åªæƒ³è¯´: &quot;ç å†œåªèƒ½ç¼–ç &quot;;
ä½ é—®ä»»ä½•è¡Œä¸šçš„äººå¦‚ä½•è§£å†³é—®é¢˜, 
ä»–ä»¬éƒ½ä¼šåœ¨ä»–ä»¬æ“…é•¿çš„é¢†åŸŸçŠ¯é”™è¯¯;
å«åªæ˜¯äººæ€§;
å¤§å¤šæ•°è½¯ä»¶å·¥ç¨‹å¸ˆæ€»æ˜¯ä¼šåœ¨ç¼–å†™ä»£ç æ—¶å‡ºé”™,
å°¤å…¶æ˜¯å½“éæŠ€æœ¯è§£å†³æ–¹æ¡ˆä¸æ˜æœ—æ—¶;
ä½ ä¸å¿…ç»´æŠ¤çš„ä»£ç ä¹Ÿæ˜¯å¦‚æ­¤;
å½“å¾ˆå¤šè½®å­å·²ç»å­˜åœ¨æ—¶,
å·¥ç¨‹å›¢é˜Ÿå¾ˆå®¹æ˜“æƒ³è¦é‡æ–°å‘æ˜è½®å­;
è¿™æ˜¯ä¸€ç§å¹³è¡¡è¡Œä¸º, 
æœ‰å¾ˆå¤šç†ç”±è®©ä½ è‡ªå·±å†æ¥ä¸€é,
ä½†æ˜¯, è¦æé˜²è¿™ç§ &quot;æ²¡åœ¨æ­¤ç°å®&quot;(â€œNot Invented Hereâ€) ç»¼åˆç—‡;</p>
<h3 id="5-è½¯ä»¶æ˜¯è¾¾åˆ°ç›®çš„çš„æ‰‹æ®µ"><a class="header" href="#5-è½¯ä»¶æ˜¯è¾¾åˆ°ç›®çš„çš„æ‰‹æ®µ">5. è½¯ä»¶æ˜¯è¾¾åˆ°ç›®çš„çš„æ‰‹æ®µ</a></h3>
<p>ä»»ä½•è½¯ä»¶å·¥ç¨‹å¸ˆçš„ä¸»è¦å·¥ä½œæ˜¯äº¤ä»˜ä»·å€¼;</p>
<p>å¾ˆå°‘æœ‰è½¯ä»¶å¼€å‘è€…ç†è§£è¿™ä¸€ç‚¹, å°†å…¶å†…åŒ–çš„å°±æ›´å°‘äº†;
çœŸæ­£å°†å…¶å†…åŒ–å, èƒ½å¯¼è‡´è§£å†³é—®é¢˜çš„ä¸åŒæ–¹å¼,
ä»¥åŠè§‚å¯Ÿå·¥å…·çš„ä¸åŒæ–¹å¼;
å¦‚æœçœŸçœŸçš„ç›¸ä¿¡è½¯ä»¶æ˜¯ä»å±äºç»“æœçš„,
ä½ å°±ä¼šå‡†å¤‡å¥½æ‰¾åˆ°çœŸæ­£&quot;é€‚åˆçš„å·¥å…·&quot;,
æœ‰æ—¶å¯èƒ½æ ¹æœ¬ä¸æ˜¯è½¯ä»¶;</p>
<h3 id="6-æœ‰æ—¶ä½ å¿…é¡»åœæ­¢ç£¨é”¯ç›´æ¥å¼€å§‹ç å±"><a class="header" href="#6-æœ‰æ—¶ä½ å¿…é¡»åœæ­¢ç£¨é”¯ç›´æ¥å¼€å§‹ç å±">6. æœ‰æ—¶ä½ å¿…é¡»åœæ­¢ç£¨é”¯,ç›´æ¥å¼€å§‹ç å±</a></h3>
<p>æœ‰äº›äººå€¾å‘äºè·³å…¥é—®é¢˜, å¹¶ç«‹å³å¼€å§‹ç¼–å†™ä»£ç ;
å…¶å®ƒäººå¾€å¾€æƒ³è¦ç ”ç©¶å’Œé™·å…¥ç¡¬ä»¶åˆ†æè¿›è€Œç˜«ç—ª;
åœ¨è¿™äº›æƒ…å†µä¸­,ä¸ºè‡ªå·±è®¾å®šä¸€ä¸ªæˆªæ­¢æ—¥æœŸ,
ç„¶å, å¼€å§‹æ¢ç´¢è§£å†³æ–¹æ¡ˆ;
å½“ä½ å¼€å§‹è§£å†³é—®é¢˜æ—¶,ä½ å¾ˆå¿«èƒ½å­¦ä¹ åˆ°æ›´å¤š,
è¿™ä¹Ÿå°†å¼•å¯¼ä½ è¿­ä»£åˆ°æ›´å¥½çš„è§£å†³æ–¹æ¡ˆ;</p>
<h3 id="7-å¦‚æœä½ ä¸èƒ½å¾ˆå¥½çš„ç†è§£æ‰€æœ‰å¯èƒ½æ€§-å°±æ— æ³•è®¾è®¡å‡ºå¥½çš„ç³»ç»Ÿ"><a class="header" href="#7-å¦‚æœä½ ä¸èƒ½å¾ˆå¥½çš„ç†è§£æ‰€æœ‰å¯èƒ½æ€§-å°±æ— æ³•è®¾è®¡å‡ºå¥½çš„ç³»ç»Ÿ">7. å¦‚æœä½ ä¸èƒ½å¾ˆå¥½çš„ç†è§£æ‰€æœ‰å¯èƒ½æ€§, å°±æ— æ³•è®¾è®¡å‡ºå¥½çš„ç³»ç»Ÿ</a></h3>
<p>è¿™æ˜¯æˆ‘ä¸€ç›´åœ¨åŠªåŠ›è§£å†³çš„é—®é¢˜,
å› ä¸º, æˆ‘çš„èŒè´£ä½¿æˆ‘åœ¨è½¯ä»¶å·¥ç¨‹çš„æ—¥å¸¸å·¥ä½œä¸­è¶Šæ¥è¶Šè¿œ;
å³ä¸Šå¼€å‘è€…ç”Ÿæ€æ˜¯ä¸€é¡¹å·¨å¤§çš„å·¥ä½œ,
ä½†æ˜¯,äº†è§£ä»€ä¹ˆæ˜¯å¯èƒ½çš„è‡³å…³é‡è¦;
å¦‚æœä½ ä¸äº†è§£ç»™å®šç”Ÿæ€ä¸­æœ‰ä»€ä¹ˆæ˜¯å¯èƒ½çš„,ä»¥åŠä»€ä¹ˆæ˜¯å¯ç”¨çš„,
é‚£ä¹ˆä½ å°†å‘ç°é™¤äº†æœ€ç®€å•çš„é—®é¢˜ä¹‹å¤–,
ä¸å¯èƒ½è®¾è®¡å‡ºä¸€ä¸ªåˆç†çš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³æ‰€æœ‰é—®é¢˜;
æ€»è€Œè¨€ä¹‹, è¦è­¦æƒ•é‚£äº›å¾ˆé•¿æ—¶é—´æ²¡æœ‰ç¼–å†™ä»»ä½•ä»£ç çš„æ¶æ„ä¸“å®¶;</p>
<h3 id="8-æ¯ä¸ªçš„äº†äº†çš„éƒ½å¾ˆç³Ÿç²•å…‹æœä¸«çš„"><a class="header" href="#8-æ¯ä¸ªçš„äº†äº†çš„éƒ½å¾ˆç³Ÿç²•å…‹æœä¸«çš„">8. æ¯ä¸ªçš„äº†äº†çš„éƒ½å¾ˆç³Ÿç²•,å…‹æœä¸«çš„</a></h3>
<p>Bjarne Stroustrup æœ‰å¥åè¨€:
&quot;åªæœ‰ä¸¤ç§è¯­è¨€: äººä»¬æŠ±æ€¨çš„è¯­è¨€, å’Œæ²¡äººä½¿ç”¨çš„è¯­è¨€&quot;;</p>
<p>è¿™ä¹Ÿå¯ä»¥æ‹“å±•åˆ°å¤§å‹ç³»ç»Ÿ;
æ²¡æœ‰&quot;æ­£ç¡®&quot;çš„æ¶æ„, ä½ æ°¸è¿œæ— æ³•å¿è¿˜æ‰€æœ‰æŠ€æœ¯å€ºåŠ¡,
ä½ æ°¸è¿œæ— æ³•è®¾è®¡å‡ºå®Œç¾çš„ç•Œé¢,
ä½ çš„æµ‹è¯•æ€»æ˜¯å¤ªæ…¢;
è¿™ä¸æ˜¯æ°¸ä¸è®©äº‹æƒ…å˜å¾—æ›´å¥½çš„å€Ÿå£,
è€Œæ˜¯ä¸€ç§ç»™ä½ è§‚ç‚¹çš„æ–¹å¼;
å°‘æ‹…å¿ƒä¼˜é›…å’Œå®Œç¾;
ç›¸å, åŠªåŠ›æŒç»­æ”¹è¿›å¹¶åˆ›å»ºä¸€ä¸ªä½ çš„å›¢é˜Ÿå–œæ¬¢åœ¨å…¶ä¸­å·¥ä½œ,
å¹¶å¯ä»¥æŒç»­åˆ›é€ ä»·å€¼çš„å®œäººç³»ç»Ÿ;</p>
<h3 id="9-æ— äººé—®è¶³ä¸ºä»€ä¹ˆ"><a class="header" href="#9-æ— äººé—®è¶³ä¸ºä»€ä¹ˆ">9. æ— äººé—®è¶³&quot;ä¸ºä»€ä¹ˆ&quot;</a></h3>
<p>æŠ“ä½ä»»ä½•æœºä¼šè´¨ç–‘&quot;ä½œäº‹æ–¹å¼&quot;çš„å‡è®¾å’Œæ–¹æ³•;
æœ‰æ–°äººåŠ å…¥å˜›?
æ³¨æ„ä»–ä»¬åœ¨å“ªé‡Œæ„Ÿåˆ°å›°æƒ‘ä»¥åŠä»–ä»¬åœ¨é—®ä»€ä¹ˆé—®é¢˜;
æœ‰æ²¡æœ‰æ— æ„ä¹‰æ–°åŠŸèƒ½è¯·æ±‚?
ç¡®ä¿ä½ äº†è§£ç›®æ ‡ä»¥åŠæ˜¯ä»€ä¹ˆæ¨åŠ¨äº†å¯¹è¿™ä¸€åŠŸèƒ½çš„æ¸´æœ›;
å¦‚æœä½ æ²¡æœ‰å¾—åˆ°æ˜ç¡®çš„ç­”æ¡ˆ,
è¯·ç»§ç»­é—®ä¸ºä»€ä¹ˆ, ç›´åˆ°ä½ æ˜ç™½ä¸ºæ­¢;</p>
<h3 id="10-æˆ‘ä»¬åº”è¯¥æ›´ä¸“æ³¨äºé¿å…01x-ç¨‹åºå‘˜è€Œä¸æ˜¯å¯»æ‰¾-10x-ç¨‹åºå‘˜"><a class="header" href="#10-æˆ‘ä»¬åº”è¯¥æ›´ä¸“æ³¨äºé¿å…01x-ç¨‹åºå‘˜è€Œä¸æ˜¯å¯»æ‰¾-10x-ç¨‹åºå‘˜">10. æˆ‘ä»¬åº”è¯¥æ›´ä¸“æ³¨äºé¿å…0.1x ç¨‹åºå‘˜,è€Œä¸æ˜¯å¯»æ‰¾ 10x ç¨‹åºå‘˜</a></h3>
<p>10å€é€Ÿç¨‹åºå‘˜æ˜¯ä¸€ä¸ªæ„šè ¢çš„ç¥è¯;
æŸäººå¯ä»¥åœ¨1å¤©é‡Œç”Ÿäº§å‡ºå¦å¤–ä¸€ä½æœ‰èƒ½åŠ›/å‹¤å¥‹/æœ‰ç±»ä¼¼ç»éªŒçš„ç¨‹åºå‘˜éœ€è¦åœ¨2å‘¨ä»¥å†…ç”Ÿäº§ä»£ç çš„æƒ³æ³•æ˜¯æ„šè ¢çš„;
æˆ‘è§è¿‡ç¨‹åºå‘˜ç¼–å†™10å€çš„ä»£ç ,
ç„¶å, ä½ å¿…é¡»ä¿®å¤å®ƒ10å€ä»¥ä¸Šçš„æ¬¡æ•°;
æŸççˆ±å¯ä»¥æˆä¸º10å€ç¨‹åºå‘˜çš„å”¯ä¸€æ–¹æ³•,
æ˜¯å°†ä»–ä»¬å’Œ 0.1 å€é€Ÿç¨‹åºå‘˜è¿›è¡Œæ¯”è¾ƒ;
æœ‰äººæµªè´¹æ—¶é—´, ä¸å¯»æ±‚åé¦ˆ, ä¸æµ‹è¯•ä»£ç ,
ä¸è€ƒè™‘è¾¹ç¼˜æƒ…å†µç­‰ç­‰...</p>
<p>æˆ‘ä»¬åº”è¯¥å…³å¿ƒè®© 0.1 å€é€Ÿç¨‹åºå‘˜è¿œç¦»æˆ‘ä»¬çš„å›¢é˜Ÿ,
è€Œä¸æ˜¯å¯»æ‰¾ç¥è¯èˆ¬çš„ 10 å€é€Ÿç¨‹åºå‘˜;</p>
<h3 id="11-é«˜çº§å·¥ç¨‹å¸ˆå’Œä¸‹çº§å·¥ç¨‹å¸ˆé—´æœ€å¤§çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ä»–ä»¬å·²ç»å½¢æˆäº†å¯¹äº‹æƒ…åº”è¯¥å¦‚ä½•å‘å±•çš„åè§"><a class="header" href="#11-é«˜çº§å·¥ç¨‹å¸ˆå’Œä¸‹çº§å·¥ç¨‹å¸ˆé—´æœ€å¤§çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ä»–ä»¬å·²ç»å½¢æˆäº†å¯¹äº‹æƒ…åº”è¯¥å¦‚ä½•å‘å±•çš„åè§">11. é«˜çº§å·¥ç¨‹å¸ˆå’Œä¸‹çº§å·¥ç¨‹å¸ˆé—´æœ€å¤§çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ä»–ä»¬å·²ç»å½¢æˆäº†å¯¹äº‹æƒ…åº”è¯¥å¦‚ä½•å‘å±•çš„åè§</a></h3>
<p>æ²¡æœ‰ä»€ä¹ˆæ¯”å¯¹ä»–ä»¬çš„å·¥å…·æˆ–æ˜¯å¦‚ä½•æ„å»ºè½¯ä»¶æ²¡æœ‰æœ‰æ„è§çš„é«˜çº§å·¥ç¨‹å¸ˆæ›´è®©æˆ‘æ‹…å¿ƒçš„äº‹å„¿äº†;</p>
<p>æˆ‘å®æ„¿æœ‰äººç»™æœ‰å¼ºçƒˆçš„åå¯¹æ„è§, ä¹Ÿä¸æ„¿ä»–ä»¬å®Œå…¨æ²¡æœ‰æ„è§;
å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ä½ çš„å·¥å…·,è€Œä¸”ä½ è¿˜æ²¡æœ‰æ›´å¤šå–œæ¬¢æˆ–æ˜¯è®¨åŒçš„æƒ…ç»ª,
é‚£ä¹ˆ, ä½ éœ€è¦æ›´å¤šä½“éªŒ;
ä½ éœ€è¦æ¢ç´¢å…¶å®ƒè¯­è¨€/åº“/èŒƒä¾‹;
æ²¡æœ‰ä»€ä¹ˆæ¯”ç§¯æå¯»æ‰¾å…¶å®ƒäººå¦‚ä½•ä½¿ç”¨å’Œä½ ä¸åŒçš„å·¥å…·å’ŒæŠ€æœ¯æ¥å®Œæˆä»»åŠ¡æ›´å¿«æé«˜æŠ€èƒ½çš„æ–¹æ³•äº†;</p>
<h3 id="12-äººä»¬å¹¶ä¸æ˜¯çœŸæƒ³åˆ›æ–°"><a class="header" href="#12-äººä»¬å¹¶ä¸æ˜¯çœŸæƒ³åˆ›æ–°">12. äººä»¬å¹¶ä¸æ˜¯çœŸæƒ³åˆ›æ–°</a></h3>
<p>äººä»¬ç»å¸¸è°ˆè®ºåˆ›æ–°,
ä½†æ˜¯, ä»–ä»¬é€šå¸¸å¯»æ‰¾çš„æ˜¯å»‰ä»·çš„èƒœåˆ©å’Œæ–°å¥‡;
å¦‚æœä½ åœ¨çœŸæ­£çš„åˆ›æ–°, å¹¶æƒ³æ”¹å˜äººä»¬ä½œäº‹çš„æ–¹å¼,
é‚£ä¹ˆå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šæ”¶åˆ°è´Ÿé¢åé¦ˆ;
å¦‚æœä½ ç›¸ä¿¡è‡ªå·±åœ¨ä½œçš„äº‹å„¿,
å¹¶çŸ¥é“ç¡®å®ä¼šæ”¹å–„äº‹æƒ…,
é‚£ä¹ˆä¸ºè‡ªå·±çš„é•¿æœŸæˆ˜æ–—ä½œå¥½å‡†å¤‡;</p>
<h3 id="13-æ•°æ®æ˜¯ä½ ç³»ç»Ÿä¸­æœ€é‡è¦çš„éƒ¨åˆ†"><a class="header" href="#13-æ•°æ®æ˜¯ä½ ç³»ç»Ÿä¸­æœ€é‡è¦çš„éƒ¨åˆ†">13. æ•°æ®æ˜¯ä½ ç³»ç»Ÿä¸­æœ€é‡è¦çš„éƒ¨åˆ†</a></h3>
<p>æˆ‘è§è¿‡å¾ˆå¤šç³»ç»Ÿ, å…¶ä¸­å¸Œæœ›æ•°æ®å®Œå¤‡æ€§æ˜¯ç³»ç»Ÿä¸»è¦æœºåˆ¶;
åœ¨è¿™ç§ç³»ç»Ÿä¸­,
ä»»ä½•åœ¨é»„é‡‘è·¯å¾„ä¹‹å¤–å‘ç”Ÿçš„äº‹æƒ…,éƒ½ä¼šå¿ƒäº§ç”Ÿéƒ¨åˆ†è„æ•°æ®;
å°†æ¥å¤„ç†è¿™äº›æ•°æ®å°†æ˜¯ä¸€åœºå™©æ¢¦;
è¯·è®°ä½, ä½ çš„æ•°æ®å¯èƒ½ä¼šæ¯”ä½ çš„ä»£ç è¦é•¿å¯¿;
èŠ±ç²¾åŠ›ä¿æŒæ•°æ®ç§©åºå’Œæ¸…æ´,ä»é•¿è¿œçœ‹ä¼šæœ‰å¥½çš„å›æŠ¥;</p>
<h3 id="14-å¯»æ‰¾æŠ€æœ¯é²¨é±¼"><a class="header" href="#14-å¯»æ‰¾æŠ€æœ¯é²¨é±¼">14. å¯»æ‰¾æŠ€æœ¯é²¨é±¼</a></h3>
<p>ä»ç„¶å­˜åœ¨çš„æ—§æŠ€æœ¯æ˜¯é²¨é±¼è€Œä¸æ˜¯æé¾™;
ä»–ä»¬è§£å†³é—®é¢˜èƒ½åŠ›å¦‚æ­¤ä¹‹å¼º,ä»¥è‡³åœ¨æŠ€æœ¯ä¸–ç•Œä¸æ–­å‘ç”Ÿçš„å¿«é€Ÿå˜åŒ–ä¸­å¹¸å­˜ä¸‹æ¥;
ä¸è¦å’Œè¿™äº›æŠ€æœ¯æ‰“èµŒ,
åªæœ‰åœ¨æœ‰å……åˆ†ç†ç”±çš„æƒ…å†µä¸‹æ‰è´Ÿæ‹…å®ƒä»¬;
è¿™äº›å·¥å…·ä¸ä¼šåè€Œä¸å®,
ä¹Ÿä¸ä¼šä»¤äººå…´å¥‹,
å¾—æ˜¯ä¸æ˜¯, å®ƒä»¬èƒ½åœ¨æ²¡æœ‰å¾ˆå¤šä¸çœ ä¹‹å¤œçš„æƒ…å†µä¸‹å®Œæˆå·¥ä½œ;</p>
<h3 id="15-è¿˜è¦æŠŠè°¦é€Šè¯¯è®¤ä¸ºæ— çŸ¥"><a class="header" href="#15-è¿˜è¦æŠŠè°¦é€Šè¯¯è®¤ä¸ºæ— çŸ¥">15. è¿˜è¦æŠŠè°¦é€Šè¯¯è®¤ä¸ºæ— çŸ¥</a></h3>
<p>æœ‰å¾ˆå¤šè½¯ä»¶å·¥ç¨‹å¸ˆé™¤éè¢«ç›´æ¥é—®åˆ°,
å¦åˆ™ä¸ä¼šå‘è¡¨æ„è§;
æ°¸è¿œä¸è¦è®¤ä¸ºä»…ä»…å› ä¸ºæœ‰äººæ²¡æœ‰å°†æ„è§æ‰”åˆ°ä½ é¢å‰,
ä»–ä»¬å°±æ²¡æœ‰ä»€ä¹ˆå¯ä»¥è¡¥å……çš„;
æœ‰æ—¶, æœ€åµé—¹çš„äººæ˜¯æˆ‘ä»¬æœ€ä¸æƒ³å¬çš„;
å’Œå‘¨å›´äººäº¤è°ˆ, å¯»æ±‚ä»–ä»¬çš„åé¦ˆå’Œå»ºè®®;
ä½ ä¼šåº†å¹¸ä½ è¿™ä¹ˆä½œäº†;</p>
<h3 id="16-è½¯ä»¶å·¥ç¨‹å¸ˆåº”è¯¥å®šæœŸå†™ä½œ"><a class="header" href="#16-è½¯ä»¶å·¥ç¨‹å¸ˆåº”è¯¥å®šæœŸå†™ä½œ">16. è½¯ä»¶å·¥ç¨‹å¸ˆåº”è¯¥å®šæœŸå†™ä½œ</a></h3>
<p>è½¯ä»¶å·¥ç¨‹å¸ˆåº”è¯¥å®šæœŸå†™ blog/æ—¥è®°/æ–‡æ¡£,
é€šå¸¸ä½œéœ€è¦ä»–ä»¬ä¿æŒä¹¦é¢æ²Ÿé€šæŠ€å·§çš„äº‹å„¿;
å†™ä½œå¯ä»¥å¸®åŠ©ä½ æ€è€ƒé—®é¢˜,
å¹¶å¸®åŠ©ä½ èƒ½æ›´æœ‰æ•ˆçš„å’Œå›¢é˜Ÿä»¥åŠæœªæ¥çš„è‡ªå·±æ²Ÿé€š;
è‰¯å¥½çš„ä¹¦é¢æ²Ÿé€šæ˜¯ä»»ä½•è½¯ä»¶å·¥ç¨‹å¸ˆéƒ½å¿…é¡»æŒæ¡çš„æœ€é‡è¦æŠ€èƒ½ä¹‹ä¸€;</p>
<h3 id="17-å°½å¯èƒ½ä¿æŒæµç¨‹ç®€æ´"><a class="header" href="#17-å°½å¯èƒ½ä¿æŒæµç¨‹ç®€æ´">17. å°½å¯èƒ½ä¿æŒæµç¨‹ç®€æ´</a></h3>
<p>ç°åœ¨æ¯ä¸ªäººæƒ³æƒ³å˜å¾—æ•æ·,
ä½†æ˜¯,&quot;æ•æ·&quot;å°±æ˜¯ä»¥å°å—çš„æ–¹æ³•æ„å»ºäº‹ç‰©/å­¦ä¹ /ç„¶åè¿­ä»£;
å¦‚æœæœ‰äººè¯•å›¾åœ¨å…¶ä¸­å¡å…¥æ›´å¤šä¸œè¥¿,
é‚£ä¹ˆ,ä»–ä»¬å¯èƒ½åªæ˜¯åœ¨å–ä¸œè¥¿;
è¿™å¹¶ä¸æ˜¯è¯´äººä»¬ä¸éœ€è¦é—®è´£æˆ–æ˜¯å¸®åŠ©ä»¥ä¾¿ç”¨è¿™ç§æ–¹å¼åä½œ,
ä½†æ˜¯, ä½ æœ‰å¤šå°‘æ¬¡å¬åˆ°ä½ æœ€å–œæ¬¢çš„ç§‘æŠ€å…¬å¸æˆ–æ˜¯å¤§å‹å¼€æºé¡¹ç›®æˆå‘˜æœ‰å¹å˜˜ä»–ä»¬çš„ Scrum æµç¨‹æœ‰å¤šNB?
ä¿æŒç²¾ç›Šè¿‡ç¨‹,
ç›´åˆ°ä½ çŸ¥é“ä½ éœ€è¦æ›´å¤š;
ç›¸ä¿¡ä½ çš„å›¢é˜Ÿ,ä»–ä»¬èƒ½äº¤ä»˜æˆæœ;</p>
<h3 id="18-è½¯ä»¶å·¥ç¨‹å¸ˆå’Œæ‰€æœ‰äººä¸€æ ·éœ€è¦æœ‰ä¸»äººç¿ç²¾ç¥"><a class="header" href="#18-è½¯ä»¶å·¥ç¨‹å¸ˆå’Œæ‰€æœ‰äººä¸€æ ·éœ€è¦æœ‰ä¸»äººç¿ç²¾ç¥">18. è½¯ä»¶å·¥ç¨‹å¸ˆå’Œæ‰€æœ‰äººä¸€æ ·,éœ€è¦æœ‰ä¸»äººç¿ç²¾ç¥</a></h3>
<p>å¦‚æœä½ å°†æŸäººä»ä»–ä»¬çš„å·¥ä½œæˆæœå°åˆ†ç¦»å‡ºæ¥,
ä»–ä»¬å°±ä¼šæ›´å½¡å…³å¿ƒä»–ä»¬çš„å·¥ä½œ;
æˆ‘è®¤ä¸ºè¿™å‡ ä¹æ˜¯å¿…ç„¶çš„;
è¿™æ˜¯è·¨èŒèƒ½å›¢é˜Ÿä½œçš„å¦‚æ­¤å‡ºè‰²,
ä»¥åŠ DevOps å˜å¾—å¦‚æ­¤æµè¡Œçš„ä¸»è¦åŸå› ;
è¿™ä¸ä»…ä»…æ˜¯å…³äºäº¤æ¥å’Œæ•ˆç‡ä½ä¸‹,
è€Œæ˜¯å…³äºä»å¤´åˆ°å°¾æ‹¥æœ‰æ•´ä¸ªè¿‡ç¨‹, å¹¶ä¸”æ˜¯ç›´æ¥çš„è´Ÿè´£äº¤ä»˜ä»·å€¼;
è®©ä¸€ç¾¤å……æ»¡æ¿€æƒ…çš„äººå®Œå…¨æ‹¥æœ‰è®¾è®¡/æ„å»ºå’Œäº¤ä»˜è½¯ä»¶(æˆ–ä»»ä½•ä¸œè¥¿)çš„æƒåˆ©,
æƒŠäººçš„äº‹æƒ…å°±ä¼šå‘ç”Ÿ;</p>
<p>(è¯‘æ³¨: å½“ç„¶, å¾—æ˜¯æœ‰æ„ä¹‰çš„äº‹åŠ¡, ä¸ºé¢†å¯¼ä¸€äº›å¹»æƒ³å»åŠªåŠ›å¾ˆéš¾æœ‰ä»€ä¹ˆä¸»äººç¿ç²¾ç¥èƒ½è§¦å‘)</p>
<h3 id="19-é¢è¯•å¯¹äºå‘Šè¯‰æŸäººå°†æˆä¸ºå›¢é˜Ÿæˆå‘˜æœ‰å¤šèµå‡ ä¹æ¯«æ— ä»·å€¼"><a class="header" href="#19-é¢è¯•å¯¹äºå‘Šè¯‰æŸäººå°†æˆä¸ºå›¢é˜Ÿæˆå‘˜æœ‰å¤šèµå‡ ä¹æ¯«æ— ä»·å€¼">19. é¢è¯•å¯¹äºå‘Šè¯‰æŸäººå°†æˆä¸ºå›¢é˜Ÿæˆå‘˜æœ‰å¤šèµ,å‡ ä¹æ¯«æ— ä»·å€¼</a></h3>
<p>é¢è¯•æœ€å¥½èŠ±åœ¨äº†è§£æŸäººæ˜¯è°,
ä»¥åŠä»–ä»¬å¯¹ç‰¹å®šä¸“ä¸šé¢†åŸŸçš„å…´è¶£ç¨‹åº¦ä¸Š;
è¯•å›¾æ¨æµ‹ä»–ä»¬å°†æˆä¸ºå¤šä¹ˆä¼˜ç§€çš„å›¢é˜Ÿæˆå‘˜æ˜¯å¾’åŠ³çš„;
ç›¸ä¿¡æˆ‘,
ä¸€ä¸ªäººæœ‰å¤šèªæ˜æˆ–æ˜¯å¤šåšå­¦ä¹Ÿä¸èƒ½å¾ˆå¥½çš„è¯æ˜ä»–ä»¬å°†æˆä¸ºä¸€åä¼˜ç§€çš„å›¢é˜Ÿæˆå‘˜;
æ²¡æœ‰äººä¼šåœ¨é¢è¯•ä¸­å‘Šè¯‰ä½ ä»–ä»¬ä¸å¯é /çˆ±è¾±éª‚/è‡ªè´Ÿæˆ–æ˜¯ä»ä¸å‡†æ—¶å‚åŠ ä¼šè®®;
äººä»¬å¯èƒ½ä¼šå£°ç§°ä»–ä»¬å¯¹è¿™äº›äº‹æƒ…æœ‰&quot;ä¿¡å·&quot;...
&quot;å¦‚æœä»–ä»¬åœ¨ç¬¬ä¸€é¢è¯•æ—¶è¯¢é—®è¯·å‡,é‚£ä¹ˆä»–ä»¬æ°¸è¿œä¸ä¼šå»è¯·å‡!&quot;
ä½†æ˜¯, è¿™äº›éƒ½æ˜¯åºŸè¯;
å¦‚æœä½ ä½¿ç”¨è¿™ç§ä¿¡å·, åªæ˜¯åœ¨çŒœæµ‹å¹¶æ‹’ç»ä¼˜ç§€çš„å€™é€‰äºº;</p>
<h3 id="20-å§‹ç»ˆåŠªåŠ›æ„å»ºä¸€ä¸ªæ›´å°çš„ç³»ç»Ÿ"><a class="header" href="#20-å§‹ç»ˆåŠªåŠ›æ„å»ºä¸€ä¸ªæ›´å°çš„ç³»ç»Ÿ">20. å§‹ç»ˆåŠªåŠ›æ„å»ºä¸€ä¸ªæ›´å°çš„ç³»ç»Ÿ</a></h3>
<p>æœ‰å¾ˆå¤šåŠ›é‡ä¿ƒä½¿ä½ é¢„å…ˆæ„å»ºæ›´å¤§çš„ç³»ç»Ÿ;
é¢„ç®—åˆ†é…, æ— æ³•æµ‹å®šåº”è¯¥ç²¾å‡å“ªäº›åŠŸèƒ½,
å¸Œæœ›æä¾›ç³»ç»Ÿçš„&quot;æœ€ä½³ç‰ˆæœ¬&quot;;
æ‰€æœ‰,è¿™äº›äº‹æƒ…éƒ½éå¸¸æœ‰åŠ›çš„æ¨åŠ¨æˆ‘ä»¬æ„å»ºæ›´å¤š;
ä½ åº”è¯¥é˜»æ­¢è¿™ä¸ª;
ä½ åœ¨æ„å»ºä¸€ä¸ªç³»ç»Ÿæ—¶å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿,
ä½ æœ€ç»ˆå°†è¿­ä»£åˆ°ä¸€ä¸ªæ¯”ä½ æœ€åˆè®¾è®¡çš„ç³»ç»Ÿæ›´å¥½çš„ç‰ˆæœ¬;
ä»¤äººæƒŠè®¶çš„å¿…é¡»,
è¿™å¯¹å¤ªå¤šæ•°äººæ¥è¯´æ˜¯éš¾ä»¥æ¥å—çš„;</p>
<h2 id="ä½ çš„æ•…äº‹å‘¢"><a class="header" href="#ä½ çš„æ•…äº‹å‘¢">ä½ çš„æ•…äº‹å‘¢?</a></h2>
<p>è¿™æ˜¯å…¨éƒ¨äº†, 20å¹´çš„è½¯ä»¶ç”Ÿæ¶¯æç‚¼å‡ºæ¥çš„çš„20æ¡ç²¾è¾Ÿæ–­è¨€;</p>
<p>å¦‚æœæœ‰ä»€ä¹ˆèƒ½å¼•å‘ä½ çš„å…±é¸£,
æˆ‘å¾ˆå¾ˆå¬å¬;
æˆ‘ä¹Ÿå¾ˆæƒ³çŸ¥é“ä½ åœ¨èŒä¸šç”Ÿæºä¸­ç§¯ç´¯çš„æ™ºæ…§å¹¶æ„¿æ„åˆ†äº«å‡ºæ¥;
è¯·åœ¨è¯„è®ºä¸­ç•™è¨€å§;</p>
<h2 id="refer-11"><a class="header" href="#refer-11">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<p>å¾ˆæœ‰äººä¸åŒæ„æ‰€æœ‰è§‚ç‚¹: <a href="https://www.simplethread.com/20-things-ive-learned-in-my-20-years-as-a-software-engineer/#comment-142472">January 25, 2023 at 7:25 pm</a></p>
<h3 id="hard-disagree-with-most-of-the-20-items"><a class="header" href="#hard-disagree-with-most-of-the-20-items">Hard disagree with most of the 20 items.</a></h3>
<ol>
<li>
<p>Writing software is difficult, tedious and needs real work. No silver bullet libraries, no methodology, no framework, no IOT, no amount of unit tests will get the work done faster.</p>
</li>
<li>
<p>Developers collect tools, libraries and pet technologies and make projects go over their time and budget by doing it.</p>
</li>
<li>
<p>Code should encapsulate algorithms and not be structured other wise. Code should follow the business logic and be readable and match business requirements easily.</p>
</li>
<li>
<p>Forgetting history keeps the productivity and industry down. Microsoft re-discovering the same old technology which existed on 1960s mainframes for the 7th time just to sell products, trademark buzzwords, training, certification and everything is an anchor around the modern developerâ€™s neck. Think file transfer -&gt; X12 -&gt; serial communication -&gt; raw socket packets -&gt; corba -&gt; xml soap -&gt; xml http -&gt; Rest JSON http -&gt; gRpc as a 50 year journey of rediscovering the same thing repeatedly, each not really that much better than the older technologies, wrapping mounds of interlarded crud on top of fragile, hard to program libraries and the square peg in a round hole mismatch.</p>
</li>
<li>
<p>Refusing to hold W3C and large tech companies accountable for not fixing web HTTP, HTML, CSS and JavaScript for 25+ years.
â€“ How can I create a control which has HTML, CSS, JS which has encapsulated CSS, encapsulated HTML, encapsulated JS without a 10,000 file framework?
â€“ How to match HTML DOM elements with JS without using quoted magic strings? Quoted magic strings were proven anti-productivity and anti-quality in the 1960s
â€“ How to have a UI without the everything is a call back and function pointer? Function pointers with modern wrappings are just as bad as the 1060s computed jump to function tables</p>
</li>
<li>
<p>Forgetting that tech is a business with a 7 year hype cycle, with the new thing being embryonically hyped for 2 years by cutting edge bloggers, then 2 years by sales marketing of companies, then 3 years of disappointment for companies trying to implement it. Followed by, abandonment when the ROI does not work out. Resume driven development, just for business persons.
And yes, thereâ€™s a new hype every 2 years to waste time and money on</p>
</li>
<li>
<p>Not holding tech companies accountable when they release major products, .net core, which have less than a 5 year full support lifecycle. Long term support .net is under 3 years.
That is a forced upgrade every 3 years for every .net system just to pass the IT auditors at a large company</p>
</li>
<li>
<p>Devaluing your own worth and work as a developer by telling everyone that the proposed product/task is easy. Software dev is hard work, less than 1 of a 1000 people can even do it poorly.
I would not go to a brain surgeon that told everyone that what he does is easy.</p>
</li>
<li>
<p>Forgetting that software development is a hard, tedious, isolated job where people desiring lots of human interaction will rapidly leave the field by their own choice and lots of people not getting into the field by their own choice.</p>
</li>
<li>
<p>Not telling people that you as a developer have to say â€œNo, itâ€™s too expensiveâ€ or â€œNo, itâ€™s too riskyâ€ as a regular part of your job. Persons not developing software treating you poorly with career ending consequences just because you wonâ€™t accept the death march cross to bear of impossible requirements of an impossibly short deadline</p>
</li>
<li>
<p>Not helping your fellow developers out. Speak well of your co-developers, team, and industry. Donâ€™t downplay the difficulty, complexity or contribution of software.</p>
</li>
<li>
<p>Not calling people out when they think that more data, metrics for everything will automatically solve problems. Ask for a business case, ask for the questions they want to answer (in written form), get the business case and questions they want to answer from the requestor, make sure they are approved before committing to a tight deadline</p>
</li>
<li>
<p>Not damaging the next developer on your project â€“ too many technologies, framework of the month, just another nuget package, one more class, have another 3 patterns, data on disk, data in database structure and consistency is not important and, yes, this system will never receive/send upstream/downstream data</p>
</li>
<li>
<p>Accepting code without parameter checking, error handling or in-line comment documentation (<em>cough</em> vendorâ€™s happy path â€˜docâ€™ page or <em>cough</em> signature only documentation with no example code or error handling.)</p>
</li>
<li>
<p>Misguided acceptance that best practices are best and not just a short nicely sized blog entry. Best practices, in many cases, do not scale for large 1,000,000+ line of code systems and make maintenance harder.</p>
</li>
<li>
<p>Not challenging the â€˜more technology is betterâ€™ approach</p>
</li>
</ol>
<h2 id="logging-10"><a class="header" href="#logging-10">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230201 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ"><a class="header" href="#å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ">å¸Œæœ›ä¸€æ—©çŸ¥é“çš„å…³é”®æ¦‚å¿µ</a></h1>
<p>åŸæ–‡: <a href="https://rauljordan.com/rust-concepts-i-wish-i-learned-earlier/">rauljordan::blog</a></p>
<h2 id="å¿«è¯‘"><a class="header" href="#å¿«è¯‘">å¿«è¯‘</a></h2>
<p>è¿‡å»ä¸€ä¸ªæœˆé‡Œ, æˆ‘è¢« Rust è¯­è¨€å½»åº•è¿·ä½äº†,
å› ä¸º,å¥¹åœ¨ç¼–å†™å†…å­˜å®‰å…¨çš„ç°ä»£ç¨‹åºæ–¹é¢å…·æœ‰ç‹¬ç‰¹çš„ä¼˜åŠ¿.
å¤šå¹´ä»¥æ¥, æœ‰å‡ ç§è¯­è¨€å·²ç»æˆä¸ºå·¥ç¨‹å¸ˆç¼–å†™å¼¹æ€§åç«¯è½¯ä»¶çš„é¦–é€‰è¯­è¨€.
æ½®æµå·²ç»ä» JAVA/C++ è½¬å‘ Go å’Œ Rust,
å¥¹ä»¬ç»“åˆäº†æ•°åå¹´ç¼–ç¨‹è¯­è¨€ç†è®ºæ¥æ„å»ºæˆ‘ä»¬è¿™ä¸ªæ—¶ä»£æœ€éœ€è¦çš„å·¥å…·.</p>
<p>Rust çš„åœ°ä½ä¸è¨€åˆ™æ˜.
ä½œä¸ºæœ€å—ä¸€æ¬¢è¿çš„è¯­è¨€, è¿ç»­7å¹´åº¦åœ¨è‘—å <code>stack overflow</code> è°ƒæŸ¥ä¸­æ’åç¬¬ä¸€!
æœ€è¿‘è¿˜ä½œä¸º Linux å†…æ ¸çš„ä¸€éƒ¨åˆ†å‘å¸ƒ -- è¿™æ˜¯é™¤ C ä¹‹å¤–ä»»ä½•è¯­è¨€ä¹‹å‰éƒ½æ— æ³•ä½œåˆ°çš„å£®ä¸¾.
å¯¹æˆ‘è€Œè¨€, è¿™é—¨è¯­è¨€ä»¤äººå…´å¥‹çš„åœ°æ–¹åœ¨äº,
å¥¹åœ¨è½¯ä»¶æ„å»ºè‰ºæœ¯æ–¹é¢æä¾›äº†ä¸€äº›çœŸæ­£æ–°é¢–çš„ä¸œè¥¿.</p>
<pre><pre class="playground"><code class="language-rust edition2021">use std::thread;
use std::time::Duration;
use std::{collections::VecDeque, sync::Condvar, sync::Mutex};

fn main() {
    let queue = Mutex::new(VecDeque::new());

    thread::scope(|s| {
        let t = s.spawn(|| loop {
            let item = queue.lock().unwrap().pop_front();
            if let Some(item) = item {
                dbg!(item);
            } else {
                thread::park();
            }
        });

        for i in 0.. {
            queue.lock().unwrap().push_back(i);
            t.thread().unpark();
            thread::sleep(Duration::from_secs(1));
        }
    })
}</code></pre></pre>
<p>Rust åœ¨æ•´ä¸ªç³»ç»Ÿç¼–ç¨‹ä¸­è·å¾—äº†ä»¤äººéš¾ä»¥ç½®ä¿¡çš„ä½¿ç”¨, 
ä¹Ÿå› éš¾ä»¥å­¦ä¹ è€Œé—»å. å°½ç®¡å¦‚æ­¤, è¿˜æ˜¯æœ‰å¾ˆå¤šä¼˜ç§€çš„ Rust å†…å®¹å¯ä»¥æ»¡è¶³åˆå­¦è€…å’Œé«˜çº§ç¨‹åºå‘˜çš„éœ€æ±‚.
ç„¶è€Œ, ä»–ä»¬ä¸­å¤ªå¤šäººä¸“æ³¨è§£é‡Šè¯­è¨€çš„æ ¸å¿ƒæœºåˆ¶å’Œæ‰€æœ‰æƒæ¦‚å¿µ, è€Œä¸æ˜¯æ„å»ºåº”ç”¨ç¨‹åº.</p>
<p>ä½œä¸ºä¸€åç¼–å†™é«˜å¹¶å‘ç¨‹åºå¹¶ä¸“æ³¨åœ¨ç³»ç»Ÿç¼–ç¨‹çš„ Go å¼€å‘è€…, 
æˆ‘åœ¨å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Rust æ„å»ºçœŸå®ç¨‹åºçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šéšœç¢. 
ä¹Ÿå°±æ˜¯äº¤ç»‡, å¦‚æœæˆ‘å°†å½“å‰æ­£åœ¨ä»äº‹çš„å·¥ä½œç§»æ¤åˆ° Rust ä¸­, é‚£ä¹ˆæ‰€æœ‰è¿™äº›æ•™ç¨‹çš„æ•ˆæœå¦‚ä½•å‘¢?</p>
<p>æ­¤ç¯‡æ–‡ç« æ—¨åœ¨ä»‹ç»æˆ‘è¿›å…¥ Rust å…”å­æ´çš„ç»å†, 
ä»¥åŠæˆ‘å¸Œæœ›ä¸€äº›å­¦ä¹ èµ„æºå¯ä»¥æ›´å¥½é˜è¿°çš„å†…å®¹. 
å¯¹ä¸ªäººè€Œè¨€, æˆ‘æ— æ³•é€šè¿‡ç®€å•çš„è§‚çœ‹ youtube è§†é¢‘æ¥å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€, 
è€Œæ˜¯å¿…é¡»é€šè¿‡ä¸ºè‡ªå·±å¯»æ‰¾è§£å†³æ–¹æ¡ˆ,çŠ¯é”™ä»¥åŠå¯¹è¿‡ç¨‹æ„Ÿå—è°¦å‘æ¥ç§¯ç´¯ï¼</p>
<h3 id="å…³äºå‚è€ƒ"><a class="header" href="#å…³äºå‚è€ƒ">å…³äºå‚è€ƒ</a></h3>
<p>Rust ä¸­æœ‰ä¸¤ç§å¼•ç”¨, å…±äº«å¼•ç”¨(ä¹Ÿç§°ä¸º <code>å€Ÿç”¨</code>)å’Œå¯å˜å¼•ç”¨(ä¹Ÿç§°ä¸º<code>ç‹¬å å¼•ç”¨</code>).
é€šå¸¸è¿™äº›è¢«è§†ä¸ºå˜é‡ x ä¸Šçš„ &amp;x ä»¥åŠ &amp;mut x . 
ä¸€æ—¦æˆ‘å¼€å§‹å°†åè€…ç§°ä¸º&quot;ç‹¬å®¶å‚è€ƒ&quot;, è¿™ä¸¤ç™½é—´çš„åŒºåˆ«å°±æ›´æœ‰æ„ä¹‰äº†.</p>
<p>Rust çš„å‚è€ƒæ¨¡å‹ç›¸å½“ç®€å•. å€Ÿæ¬¾äººå¯ä»¥æ ¹æ®éœ€è¦æ‹¥æœ‰å¯¹æŸå¯¹è±¡çš„å°½å¯èƒ½å¤šçš„å…±äº«å¼•ç”¨, 
ä½†æ˜¯, ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªç‹¬å å¼•ç”¨. 
å¦åˆ™, ä½ å¯èƒ½ä¼šæœ‰å¾ˆå¤šè°ƒç”¨è€…åŒæ—¶å°è¯•å¯¹åŒä¸€ä¸ªå€¼è¿›è¡Œä¿®æ”¹çš„å›§å¢ƒ;
å¦‚æœå¾ˆå¤šå€Ÿç”¨è€…ä¹Ÿå¯ä»¥æŒæœ‰ç‹¬å è¢­ç”¨, 
ä½ å°†é¢ä¸´æœªå®šä¹‰è¡Œä¸ºé£é™©, 
è€Œå®‰å…¨çš„ Rust åˆ™ä¸å…è®¸è¿™ä¹ˆæŠ˜è…¾.</p>
<p>åœ¨å­¦ä¹  Rust æ—¶, éƒ½ç”¨ &amp;mut ç‹¬å®¶å‚è€ƒå¯ä»¥èŠ‚çœå¾ˆå¤šæ—¶é—´:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Foo {
    x: u64,
}

impl Foo {
    /// Any type that borrows an instance of Foo can
    /// call this method, as it only requires a reference to Foo.
    pub fn total(&amp;self) -&gt; u64 {
        self.x
    }
    /// Only exclusive references to instances of Foo
    /// can call this method, as it requires Foo to be mutable.
    pub fn increase(&amp;mut self) {
        self.x += 1;
    }
}

let foo = Foo { x: 10 };
println!(&quot;{}&quot;, foo.total()) // WORKS.
foo.increase() // ERROR: Foo not declared as mut
<span class="boring">}</span></code></pre></pre>
<h3 id="åŒå‘å¼•ç”¨æ˜¯å¯ä»¥çš„"><a class="header" href="#åŒå‘å¼•ç”¨æ˜¯å¯ä»¥çš„">åŒå‘å¼•ç”¨æ˜¯å¯ä»¥çš„</a></h3>
<blockquote>
<p>Bidirectional references are possible</p>
</blockquote>
<p>åœ¨å…¶å®ƒå…·æœ‰åƒåœ¾æ”¶é›†åŠŸèƒ½çš„è¯­è¨€ä¸­, å¾ˆå®¹æ˜“å®šä¹‰å›¾å½¢æ•°æ®ç»“æ„æˆ–å…¶å®ƒåŒ…å«å¯¹æŸäº›å­é¡¹å¼•ç”¨çš„ç±»å‹, 
å¹¶ä¸”è¿™äº›å¼•ç”¨å¯ä»¥åŒ…å«å¯¹å…¶çˆ¶é¡¹çš„å¼•ç”¨;
åœ¨ Rust ä¸­, å¦‚æœä¸å®Œå…¨ç†è§£å€Ÿç”¨è§„åˆ™, è¿™æ˜¯å¾ˆéš¾ä½œåˆ°çš„;
ä½†æ˜¯, ä»ç„¶å¯ä»¥ä½¿ç”¨æ ‡å‡†åº“æä¾›çš„æ­£æ³•.</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º Node çš„ç»“æ„, 
åŒ…å«ä¸€ç»„å¯¹å­èŠ‚ç‚¹çš„å¼•ç”¨, ä»¥åŠä¸€ä¸ªå¯¹çˆ¶èŠ‚ç‚¹çš„å¼•ç”¨; 
é€šå¸¸, Rust ä¼šæŠ±æ€¨, ä½†æ˜¯, æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†çˆ¶å¼•ç”¨åŒ…è£…åœ¨ç§°ä¸º <code>å¼±æŒ‡é’ˆ</code> çš„ä¸œè¥¿ä¸­æ¥æ»¡è¶³å€Ÿç”¨æ£€æŸ¥å™¨çš„è¦æ±‚;
è¿™ç§ç±»å‹å‘Šè¯‰ Rust ä¸€ä¸ªèŠ‚ç‚¹æ¶ˆå¤±, æˆ–è€…å…¶å­èŠ‚ç‚¹æ¶ˆå¤±, ä¸åº”è¯¥æ„å‘³ç€çˆ¶èŠ‚ç‚¹ä¹Ÿåº”è¯¥è¢«åˆ é™¤;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::cell::RefCell;
use std::rc::{Rc, Weak};

struct Node {
    value: i32,
    parent: RefCell&lt;Weak&lt;Node&gt;&gt;,
    children: RefCell&lt;Vec&lt;Rc&lt;Node&gt;&gt;&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™ä¸ºæˆ‘ä»¬æä¾›äº†æ„å»ºåŒå‘å¼•ç”¨çš„ä¾¿åˆ©åŸè¯­; 
ç„¶è€Œ, æˆ‘å¾ˆå¿«å‘ç°åœ¨ Rust ä¸­æ„å»ºå›¾å½¢æ•°æ®çœŸçš„å¾ˆéš¾, 
é™¤éä½ çœŸçš„çŸ¥é“è‡ªå·±åœ¨ä½œä»€ä¹ˆ, è€ƒè™‘åˆ°ä¸€ä¸ªäººéœ€è¦å›´ç»•æœ‰æ•ˆå»ºæ¨¡æ•°æ®æ¥ä½œå¤§é‡çš„ <code>book-keeping</code> å·¥ä½œä»¥æ»¡è¶³ç¼–è¯‘å™¨.</p>
<p>(æ˜¯ä¹Ÿä¹: ç¼–è¯‘å™¨ä½œä¸º Rust ç”Ÿæ€ä¸­æœ€å¤§çš„ BOSS å¿…é¡»ä¼˜å…ˆæ»¡è¶³.)</p>
<h3 id="å®æ–½-deref-ä»¤ä»£ç æ›´æ¸…æ™°"><a class="header" href="#å®æ–½-deref-ä»¤ä»£ç æ›´æ¸…æ™°">å®æ–½ Deref ä»¤ä»£ç æ›´æ¸…æ™°</a></h3>
<blockquote>
<p>Implement Deref to make your code cleaner</p>
</blockquote>
<p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å°†åŒ…è£…å™¨ç±»å‹è§†ä¹‹ä¸ºå…¶åŒ…å«çš„å†…å®¹;
å¯¹äºå¸¸è§çš„æ•°æ®ç»“æ„(æ¯”å¦‚ vec),æ™ºèƒ½æŒ‡é’ˆ(ä¾‹å¦‚ Box) ç”šè‡³å¼•ç”¨è®¡æ•°ç±»å‹(ç±»ä¼¼ Rc å’Œ Arc) éƒ½æ˜¯å¦‚æ­¤;
æ ‡å‡†åº“åŒ…å«ç§°ä¸º Deref å’Œ DerefMut çš„ç‰¹å¾, 
å¥¹ä»¬å°†æŠ¥æ—¶ä½ å‘Šè¯‰ Rust åº”è¯¥å¦‚ä½•å–æ¶ˆå¼•ç”¨ä¸€ä¸ªç±»å‹;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::ops::{Deref, DerefMut};

struct Example&lt;T&gt; {
    value: T
}

impl&lt;T&gt; Deref for Example&lt;T&gt; {
    type Target = T;

    fn deref(&amp;self) -&gt; &amp;Self::Target {
        &amp;self.value
    }
}

impl&lt;T&gt; DerefMut for Example&lt;T&gt; {
    fn deref_mut(&amp;mut self) -&gt; &amp;mut Self::Target {
        &amp;mut self.value
    }
}

let mut x = Example { value: 'a' };
*x = 'b';
assert_eq!('b', x.value);
<span class="boring">}</span></code></pre></pre>
<p>ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­, æˆ‘ä»¬å¯ä»¥å°† <code>*x</code> è§†ä¸ºå…¶åŸºç¡€å€¼ <code>&quot;a&quot;</code>, 
ç”šè‡³å¯ä»¥æ”¹å˜å®ƒ, å› ä¸º, æˆ‘ä»¬å®šä¹‰äº†åº”è¯¥å¦‚ä½•åœ¨å€Ÿç”¨æˆ–å¯å˜å¼•ç”¨ä¸­å–æ¶ˆå¼•ç”¨çš„è§„åˆ™;
è¿™å¾ˆå¼ºå¤§, ä¹Ÿæ˜¯ä½ æ— éœ€æ‹…å¿ƒåœ¨ Box ç­‰æ™ºèƒ½æŒ‡é’ˆä¸­åŒ…è£…ç±»å‹çš„åŸå› ;</p>
<p>å€¼è¢«è£…ç®±çš„äº‹å®æ˜¯ä¸€ä¸ªå®ç°ç»†èŠ‚, å¯ä»¥é€šè¿‡è¿™äº›ç‰¹å¾æŠ½è±¡å‡ºæ¥;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Foo {
    value: u64,
}
let mut foo = Box::new(Foo { value: 10 });

// Box implements DerefMut, so this will work fine!
*foo = Foo { value: 20 };
// Dot methods will work on foo because Box implements Deref.
// We do not have to worry about the implementation
// detail that Foo is boxed.
assert_eq!(20, foo.value);
<span class="boring">}</span></code></pre></pre>
<h3 id="å°å¿ƒå®ç°-deref-ç±»å‹æ–¹æ³•"><a class="header" href="#å°å¿ƒå®ç°-deref-ç±»å‹æ–¹æ³•">å°å¿ƒå®ç° Deref ç±»å‹æ–¹æ³•</a></h3>
<blockquote>
<p>Be careful with methods on types that implement Deref</p>
</blockquote>
<p>æœ‰æ²¡æœ‰æƒ³è¿‡, ä¸ºä»€ä¹ˆåƒ <code>Arc::clone</code> è¿™ç±»æ–¹æ³•çš„å­˜åœ¨, 
è€Œæˆ‘ä»¬åªèƒ½å¯¹ Arc å€¼æ‰§è¡Œ <code>.clone()</code>?
åŸå› å’Œç±»å‹å¦‚ä½•å®ç° Deref æœ‰å…³, 
è¿™æ˜¯å¼€å‘è€…åº”è¯¥è­¦æƒ•çš„äº‹å„¿;</p>
<p>è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹, æˆ‘ä»¬æ­£åœ¨å°è¯•ä»æ ‡å‡†åº“ä¸­å®ç°æˆ‘ä»¬è‡ªå·±ç‰ˆæœ¬çš„
å¤šç”Ÿäº§è€…/å•ä¸€æ¶ˆè´¹è€…(mpsc)é€šé“:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::sync::{Arc, Mutex, Condvar};

pub struct Sender&lt;T&gt; {
    inner: Arc&lt;Inner&lt;T&gt;&gt;,
}

impl&lt;T&gt; Sender&lt;T&gt; {
    pub fn send(&amp;mut self, t: T) {
        ...
    }
}

impl&lt;T: Clone&gt; Clone for Sender&lt;T&gt; {
    fn clone(&amp;self) -&gt; Self {
        Self {
            // ERROR: Does not know whether to clone Arc or inner!
            inner: self.inner.clone(),
        }
    }
}

struct Inner&lt;T&gt; {
    ...
}

impl&lt;T: Clone&gt; Clone for Inner&lt;T&gt; {
    fn clone(&amp;self) -&gt; Self {
        ...
    }
}
<span class="boring">}</span></code></pre></pre>
<p>ä¸Šè¿°ç¤ºä¾‹ä¸­, æˆ‘ä»¬æœ‰ä¸€ä¸ªè¦åœ¨å…¶ä¸Šå®ç° Clone ç‰¹å¾çš„ Sender ç±»å‹;
è¯¥ç»“æ„æœ‰ä¸€ä¸ªåä¸º inner çš„å­—æ®µ, å…¶ç±»å‹ä¸º <code>Arc&lt;Inner&lt;T&gt;&gt;</code> ;
å›æƒ³ä¸€ä¸‹ Arc å·²ç»å®ç°äº† Clone å’Œ Deref ;
æœ€é‡è¦çš„æ˜¯, æˆ‘ä»¬çš„ Inner è¿˜ç°å®äº† Clone ;
å¯¹äºä¸Šé¢çš„ä»£ç , Rust å¹¶ä¸çŸ¥é“æˆ‘ä»¬æ˜¯è¦å…‹éš† Arc è¿˜æ˜¯å®é™…çš„å†…éƒ¨å€¼,
æ‰€ä»¥, ä¸Šé¢ä»£ç ä¼šå¤±è´¥;
åœ¨è¿™ç§æƒ…å†µä¸‹, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Arc ä» sync åŒ…ä¸­æä¾›çš„å®é™…æ–¹æ³•;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl&lt;T: Clone&gt; Clone for Sender&lt;T&gt; {
    fn clone(&amp;self) -&gt; Self {
        Self {
            // Now Rust knows to use the Clone method of Arc instead of the
            // clone method of inner itself.
            inner: Arc::clone(&amp;self.inner),
        }
    }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="ç†è§£ä½•æ—¶ä»¥åŠä½•æ—¶ä¸ç”¨å†…éƒ¨å¯å˜æ€§"><a class="header" href="#ç†è§£ä½•æ—¶ä»¥åŠä½•æ—¶ä¸ç”¨å†…éƒ¨å¯å˜æ€§">ç†è§£ä½•æ—¶ä»¥åŠä½•æ—¶ä¸ç”¨å†…éƒ¨å¯å˜æ€§</a></h3>
<blockquote>
<p>Understand when and when not to use interior mutability</p>
</blockquote>
<p>æœ‰æ—¶, ä½ éœ€è¦åœ¨ä»£ç ä¸­ä½¿ç”¨ Rc æˆ–æ˜¯ Arc ç­‰ç»“æ„, 
åˆæˆ–è€…å®ç°åŒ…è£…ä¸€äº›æ•°æ®ç»“æ„, ç„¶å, åˆæƒ³è¦æ”¹å˜è¢«åŒ…è£…çš„æ•°æ®;
å¾ˆå¿«, ç¼–è¯‘å™¨å°±ä¼šå‘Šè¯‰ä½ , å†…éƒ¨å¯å˜æ€§æ˜¯ä¸å…è®¸çš„, ä¹çœ‹èµ·æ¥è¿™å¾ˆæ£˜æ‰‹;
ç„¶è€Œ, æœ‰ä¸€äº›æ–¹æ³•å…è®¸ Rust ä¸­çš„å†…éƒ¨å¯å˜æ€§, 
ç”šè‡³æ˜¯ç”±æ ‡å‡†åº“æä¾›çš„;</p>
<p>æœ€ç®€å•çš„ä¸€ç§æ˜¯ Cell, å¥¹ä¸ºä½ æä¾›æ•°æ®çš„å†…å¯å˜æ€§;
ä¹Ÿå°±æ˜¯è¯´, å˜¦æ•°æ®å¤åˆ¶æˆæœ¬ä½, 
ä½ å°±å¯ä»¥åœ¨ Rc ä¸­æ”¹å˜æ•°æ®;
ä½ å¯ä»¥é€šè¿‡å°†æ•°æ®åŒ…è£…åœ¨ <code>Rc&lt;Cell&lt;T&gt;&gt;</code> ä¸­æ¥å®ç°è¿™ä¸€ç‚¹;
å¥¹æä¾›äº† get å’Œ set æ–¹æ³•,
ç”šè‡³ä¸éœ€è¦è¢« mut , å› ä¸º, å¥¹ä»¬æ˜¯åœ¨åº•å±‚å¤åˆ¶æ•°æ®çš„:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// impl&lt;T: Copy&gt; Cell&lt;T&gt;
pub fn get(&amp;self) -&gt; T

// impl&lt;T&gt; Cell&lt;T&gt;
pub fn set(&amp;self, val: T)
<span class="boring">}</span></code></pre></pre>
<p>å…¶å®ƒç±»å‹, æ¯”å¦‚ RefCell æœ‰åŠ©äºå°†æŸäº›å€Ÿç”¨æ£€æŸ¥ç§»è‡³è¿è¡Œæ—¶, å¹¶è·³è¿‡ä¸€äº›ç¼–è¯‘å™¨çš„ä¸¥æ ¼è¿‡æ»¤;
ç„¶è€Œ, è¿™æ˜¯æœ‰é£é™©çš„, å› ä¸º, å¦‚æœæ²¡æœ‰å®Œæˆå€Ÿç”¨æ£€æŸ¥, å°±å¯èƒ½åœ¨è¿è¡Œæ—¶è§¦å‘ panic ;
å°†ç¼–è¯‘å™¨å½“æˆæœ‹å‹, ä½ ä¼šè·å¾—å›æŠ¥;
é€šè¿‡è·³è¿‡ç¼–è¯‘å™¨æ£€æŸ¥, æˆ–æ˜¯å°†å¥¹ä»¬æ¨è¿Ÿåˆ°è¿è¡Œæ—¶, 
ç­‰äºå‘Šè¯‰ç¼–è¯‘å™¨&quot;ç›¸ä¿¡æˆ‘ --- æˆ‘ä½œçš„éƒ½æ˜¯æ­£ç¡®çš„&quot;;</p>
<p>è€Œ std::cell åŒ…ç”šè‡³é€šè¿‡ä¸€ä¸ªå¾ˆæœ‰å¸®åŠ©çš„æ¶ˆæ¯è­¦å‘Šæˆ‘ä»¬:</p>
<pre><code>
æ›´å¸¸è§çš„ç»§æ‰¿å¯å˜æ€§, å…¶ä¸­å¿…é¡»å…·æœ‰å”¯ä¸€è®¿é—®æƒé™æ‰èƒ½æ”¹å˜å€¼,
è¿™ä¸€è¯­è¨€å…ƒç´ æ˜¯ä»¤ Rust èƒ½å¼ºåŠ›æ¨ç†æŒ‡é’ˆåˆ«å, é™æ€é˜²æ­¢å´©æºƒé”™è¯¯çš„å…³é”®;
å› æ­¤, ç»§ç»­å¯å˜æ€§æ˜¯é¦–é€‰, å†…éƒ¨å¯å˜æ€§æ˜¯æœ€åçš„æ‰‹æ®µ;
ç”±äº Cell ç±»å‹å¯ä»¥åœ¨ä¸å…è®¸çªå˜çš„åœ°æ–¹å¯ç”¨çªå˜, 
å› æ­¤, åœ¨æŸäº›æƒ…å†µä¸­, å†…éƒ¨å¯å˜æ€§ä¹Ÿè®¸æ˜¯åˆé€‚çš„, ç”šè‡³å¿…é¡»ä½¿ç”¨, ä¾‹å¦‚:

- åœ¨ä¸å¯å˜äº‹ç‰©çš„&quot;å†…éƒ¨&quot;å¼•å…¥å¯å˜æ€§
- é€»è¾‘ä¸å¯å˜æ–¹æ³•çš„å®ç°ç»†èŠ‚
- å…‹éš†çš„å˜å¼‚å®ç°

</code></pre>
<h3 id="get-å’Œ-get-mut-æ–¹æ³•æ˜¯ä¸€å›äº‹å„¿"><a class="header" href="#get-å’Œ-get-mut-æ–¹æ³•æ˜¯ä¸€å›äº‹å„¿">get å’Œ get mut æ–¹æ³•æ˜¯ä¸€å›äº‹å„¿</a></h3>
<blockquote>
<p>Get and get mut methods are a thing</p>
</blockquote>
<p>å¾ˆå¤šç±»å‹, åŒ…å« vec éƒ½å®ç°äº† get ä¸ get_mut æ–¹æ³•,
è®©ä½ å¯ä»¥å€Ÿç”¨å’Œæ”¹å˜ç»“æ„ä¸­çš„å…ƒç´ 
(å‰è€…åªæœ‰åœ¨ä½ æœ‰ä¸€ä¸ªå¯¹é›†ä¼šçš„å¯å˜å¼•ç”¨æ—¶æ‰å¯èƒ½);
æˆ‘èŠ±äº†ä¸€æ®µæ—¶é—´, æ‰çŸ¥é“è¿™äº›é€‰é¡¹å¯ç”¨äºè®¸å¤šæ•°æ®ç»“æ„,
å¥¹ä»¬é€šè¿‡æ›´è½»æ¾çš„ç¼–å†™å¹²å‡€çš„ä»£ç , å¸®åŠ©æˆ‘çš„ç”Ÿæ´»æ›´è½»æ¾!</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = &amp;mut [0, 1, 2];

if let Some(elem) = x.get_mut(1) {
    *elem = 42;
}
assert_eq!(x, &amp;[0, 42, 2]);
<span class="boring">}</span></code></pre></pre>
<h3 id="æ‹¥æŠ±ä¸å®‰å…¨ä½†åˆç†çš„ä»£ç "><a class="header" href="#æ‹¥æŠ±ä¸å®‰å…¨ä½†åˆç†çš„ä»£ç ">æ‹¥æŠ±ä¸å®‰å…¨ä½†åˆç†çš„ä»£ç </a></h3>
<blockquote>
<p>Embrace unsafe but sound code</p>
</blockquote>
<p>ä½œä¸ºä¸€å Go å¼€å‘è€…, &quot;unsafe&quot; åŒ…æ€»æ˜¯æ„Ÿè§‰å¾ˆä¸é è°±,
è€Œä¸”æˆ‘å¾ˆå°‘æ¥è§¦;
ç„¶è€Œ, Rust ä¸­ â€œunsafeâ€ çš„æ¦‚å¿µæ˜¯å®Œå…¨ä¸åŒçš„;
äº‹å®ä¸Š, å¾ˆå¤šæ ‡å‡†åº“éƒ½ä½¿ç”¨ <code>â€œunsafeâ€</code> æ¥å–å¾—å·¨å¤§æˆåŠŸ!</p>
<p>è¿™æ€ä¹ˆå¯èƒ½? å°½ç®¡ Rust ä½¿æœªå®šä¹‰çš„è¡Œä¸ºæˆä¸ºä¸å¯èƒ½,
ä½†æ˜¯, è¿™ä¸é€‚ç”¨äºæ ‡è®°ä¸º â€œunsafeâ€ çš„ä»£ç å—;
ç›¸å, ç¼–å†™ â€œunsafeâ€ Rust çš„å¼€å‘è€…å˜¦ä¿è¯å…¶ä½¿ç”¨åˆç†,
å³å¯è·å¾—æ‰€æœ‰å¥½å¤„;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Example taken from the Rustonomicon
fn item_at_index(idx: usize, arr: &amp;[u8]) -&gt; Option&lt;u8&gt; {
    if idx &lt; arr.len() {
        unsafe {
            Some(*arr.get_unchecked(idx))
        }
    } else {
        None
    }
}
<span class="boring">}</span></code></pre></pre>
<p>å˜¦ä½ èƒ½è¯æ˜ä½ çš„ API æ˜¯å¯é çš„,
å°±æ¥å— unsafe, ä½†æ˜¯, è¦é¿å…é€ˆä½ çš„æ¶ˆè´¹è€…æš´éœ² unsafe å‡½æ•°,
é™¤éæ˜¯çœŸæ­£æœ‰ä¿è¯çš„;
å‡ºäºè¿™ä¸ªåŸå› , åœ¨ Rust ä¸­,å¯¹ä½ çš„åŒ…å†…éƒ¨è¿›è¡Œä¸¥æ ¼æ§åˆ¶,
å¯ä»¥è¯æ˜ unsafe ä»£ç å—æ˜¯åˆç†çš„äº†;</p>
<p>é€šå¸¸åœ¨æ€§èƒ½ç»å¯¹é‡è¦çš„æƒ…å†µä¸‹, æ‰ä½¿ç”¨ unsafe,
æˆ–è€…å½“ä½ çŸ¥é“ä½¿ç”¨ unsafe ä»£ç å—æ˜¯è§£å†³é—®é¢˜çš„ç®€å•æ–¹æ³•,
å¹¶ä¸”å¯ä»¥è¯æ˜ä»£ç çš„å¯é æ€§æ—¶;</p>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>å®‰å…¨å’Œå¯é åˆ†ç¦», é‚£ä¹ˆ, ä»€ä¹ˆæ˜¯å¯é å‘¢?</p>
<p>)</p>
<h3 id="å°½å¯èƒ½ç”¨-impl-ç±»å‹ä½œä¸ºå‚æ•°è€Œä¸æ˜¯é€šç”¨çº¦æŸ"><a class="header" href="#å°½å¯èƒ½ç”¨-impl-ç±»å‹ä½œä¸ºå‚æ•°è€Œä¸æ˜¯é€šç”¨çº¦æŸ">å°½å¯èƒ½ç”¨ impl ç±»å‹ä½œä¸ºå‚æ•°è€Œä¸æ˜¯é€šç”¨çº¦æŸ</a></h3>
<p>è¿™ç‚¹æ¥è‡ª Golang, æˆ‘è®¤ä¸ºç‰¹å¾å¯ä»¥ä¸€ç›´ç®€å•çš„ä½œä¸ºå‡½æ•°å‚æ•°æ¥æä¾›;
æ¯”å¦‚:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Meower {
    fn meow(&amp;self);
}

struct Cat {}

impl Meower for Cat {
    fn meow(&amp;self) {
        println!(&quot;meow&quot;);
    }
}

// ERROR: Meower cannot be used as it does not have
// a size at compile time!
fn do_the_meow(meower: Meower) {
    meower.meow();
}
<span class="boring">}</span></code></pre></pre>
<p>...ä½†æ˜¯,ä¸Šè¿°ä»£ç å¤±è´¥äº†,
å› ä¸º, trait å¯¹è±¡åœ¨ç¼–è¯‘æ—¶æ²¡æœ‰ Rust å®Œæˆå·¥ä½œéœ€è¦çš„å†…å­˜å°ºå¯¸;
æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ  <code>&amp;dyn Meower</code> æ¥å‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯åŠ¨æ€è°ƒæ•´å¤§å°æ¥ç»•è¿‡,
ä½†æ˜¯, å¾ˆå¿«æˆ‘äº†è§£åˆ°è¿™ä¸æ˜¯ <code>rusty</code>/é”ˆèŒƒå„¿ è§£å†³æ–¹æ¡ˆ;
ç›¸å,å¼€å‘è€…å€¾å‘äºè¡–å—ç‰¹å¾çº¦æŸçš„é€šç”¨å‚æ•°,
ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn do_the_meow&lt;M: Meower&gt;(meower: M) {
    meower.meow();
}
<span class="boring">}</span></code></pre></pre>
<p>...ç°åœ¨èƒ½é€šè¿‡ç¼–è¯‘äº†;
ç„¶è€Œ,éšç€å‡½æ•°è¶Šæ¥è¶Šå¤æ‚, å¦‚æœæˆ‘ä»¬è¿˜åŒ…æ‹¬å…¶å®ƒé€šç”¨å‚æ•°,
å°±å¯èƒ½ä¼šæœ‰ä¸€ä¸ªéå¸¸éš¾ä»¥é˜…è¯»çš„å‡½æ•°å£°æ˜;
åœ¨æ­¤ç¤ºä¾‹ä¸­,å¦‚æœæˆ‘ä»¬åªæƒ³ç”¨ä¸€æ¬¡ meow,
é‚£ä¹ˆ, å®é™…ä¸Šå¹¶ä¸éœ€è¦åŠ¨ç”¨æ³›å‹;
æˆ‘ä»¬ç”šè‡³äºå¹¶ä¸å…³å¿ƒ meow çš„ç»“æœ,
æ‰€ä»¥, å¯ä»¥æ”¹å†™ä¸ºè¿™æ ·:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn do_the_meow(meower: &amp;impl Meower) {
    meower.meow();
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™æ ·å‘Šè¯‰ç¼–è¯‘å™¨:&quot;æˆ‘åªæƒ³è¦å®ç° Meow çš„ä¸œè¥¿&quot;;
å½“ç„¶,è¿™æ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„,
å¹¶ä¸”,é¦–å…ˆä¸éœ€è¦å‡½æ•°çš„é€šç”¨è¿”å›ç±»å‹æ—¶,
æ­¤æ¨¡å¼ä¼šæ›´åŠ æ¸…æ™°;</p>
<h3 id="ç”¨-iter-è¿‡ç¨‹ä¸­æƒ³å€Ÿç”¨æ—¶-iter-mut-ç”¨ä»¥ç‹¬å -refsè€Œ-into-iter-æ”¯æŒæ‹¥æœ‰"><a class="header" href="#ç”¨-iter-è¿‡ç¨‹ä¸­æƒ³å€Ÿç”¨æ—¶-iter-mut-ç”¨ä»¥ç‹¬å -refsè€Œ-into-iter-æ”¯æŒæ‹¥æœ‰">ç”¨ iter() è¿‡ç¨‹ä¸­æƒ³å€Ÿç”¨æ—¶, iter mut() ç”¨ä»¥ç‹¬å  refs,è€Œ into iter() æ”¯æŒæ‹¥æœ‰</a></h3>
<p>å¾ˆå¤šæ•™ç¨‹ç«‹å³è·³è½¬åˆ°ä½¿ç”¨ä¸‹é¢çš„ into_iter æ–¹æ³•æ¥è¿­ä»£ vectors/å‘é‡:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let items = vec![1, 2, 3, 4, 5];
for item in items.into_iter() {
    println!(&quot;{}&quot;, item);
}
<span class="boring">}</span></code></pre></pre>
<p>ç„¶è€Œ,å½“æˆ‘ä»¬åˆšåˆšå¼€å§‹åœ¨ç»“æ„ä¸­ä½¿ç”¨è¿™ä¸ªè¿­ä»£å™¨æ–¹æ³•æ—¶,
å¾ˆå¤šåˆå­¦è€…(åŒ…æ‹¬ä½œè€…è‡ªå·±)éƒ½ç¢°å£äº†,ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Foo {
    bar: Vec&lt;u32&gt;,
}

impl Foo {
    fn all_zeros(&amp;self) -&gt; bool {
        // ERROR: Cannot move out of self.bar!
        self.bar.into_iter().all(|x| x == 0)
    }
}
<span class="boring">}</span></code></pre></pre>
<p>å¹¶ç«‹å³æç¤º:</p>
<pre><code>    error[E0507]: cannot move out of `self.bar` which is behind a shared reference
       --&gt; src/main.rs:9:9
        |
    9   |         self.bar.into_iter().all(|x| x == 0)
        |         ^^^^^^^^ ----------- `self.bar` moved due to this method call
        |         |
        |         move occurs because `self.bar` has
        |         type `Vec&lt;u32&gt;`, which does not implement the `Copy` trait

</code></pre>
<p>ä½œä¸ºèœé¸Ÿå°è¯•äº†å¾ˆå¤šåŠæ³•å, æ‰æ„è¯†åˆ° <code>.into_ter()</code> å–å¾—äº†é›†åˆçš„æ‰€æœ‰æƒ,
è¿™ä¸æ˜¯æˆ‘çš„ç›®æ ‡æ‰€éœ€è¦çš„;
ç›¸å, åœ¨è¿­ä»£å™¨ä¸Šè¿˜æœ‰å¦å¤–ä¸¤ç§æœ‰ç”¨çš„æ–¹æ³•, çœŸå¸Œæœ›å½“æ—¶èƒ½æ—©ç‚¹çŸ¥é“ä¸«ä»¬;</p>
<p>ç¬¬ä¸€ä¸ªæ˜¯ <code>.iter()</code> ,å€Ÿç”¨é›†åˆ, è®©ä½ æ–­è¨€å…³äºå…¶å€¼çš„ä¸œè¥¿,ä½†æ˜¯, ä¸æ‹¥æœ‰æˆ–æ˜¯æ”¹å˜å¥¹ä»¬;
å†æœ‰å°±æ˜¯ <code>iter_mut()</code> å¸®åŠ©ä½ æ”¹å˜é›†åˆå†…éƒ¨å€¼,å˜¦ä½ æ˜¯å”¯ä¸€çš„exclusive reference/ç‹¬å å‚è€ƒ;</p>
<p>æ€»ä¹‹, å½“ä½ åªéœ€è¦å€Ÿç”¨æ—¶ç”¨ <code>.iter()</code>,
å½“ä½ æƒ³è¦è·å¾—æ‰€æœ‰æƒæ—¶ç”¨ <code>.into_iter()</code>,
å½“ä½ éœ€è¦æ”¹å˜è¿­ä»£å¯¹è±¡çš„å…ƒç´ æ—¶ç”¨ <code>.iter_mut()</code>;</p>
<h3 id="phantom-æ•°æ®ä¸ä»…ä»…ç”¨ä»¥å¤„ç†æŒ‡å‘ç±»å‹çš„åŸå§‹æŒ‡é’ˆ"><a class="header" href="#phantom-æ•°æ®ä¸ä»…ä»…ç”¨ä»¥å¤„ç†æŒ‡å‘ç±»å‹çš„åŸå§‹æŒ‡é’ˆ">Phantom æ•°æ®ä¸ä»…ä»…ç”¨ä»¥å¤„ç†æŒ‡å‘ç±»å‹çš„åŸå§‹æŒ‡é’ˆ</a></h3>
<p>å½“ä½ ç¬¬ä¸€æ¬¡é‡åˆ° Phantom data/å¹»æ•°æ®æ—¶,
ä¸€å®šæ„Ÿè§‰å¾ˆå¥‡æ€ª,ä½†æ˜¯, å¾ˆå¿«å°±ä¼šæˆä¸ºä¸€ç§å‘Šè¯‰ç¼–è¯‘å™¨&quot;æ‹¥æœ‰&quot;æŸä¸ªå€¼çš„å¥½æ–¹å¼,
å°½ç®¡åªæœ‰ä¸€ä¸ªæŒ‡å‘å¥¹çš„åŸå§‹æŒ‡é’ˆ;
ä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::marker;

struct Foo&lt;'a, T: 'a&gt; {
    bar: *const T,
    _marker: marker::PhantomData&lt;&amp;'a T&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™å„¿å‘Šè¯‰ç¼–è¯‘å™¨ Foo æ‹¥æœ‰ T,
å°½ç®¡åªæœ‰ä¸€ä¸ªæŒ‡å‘å¥¹çš„åŸå§‹æŒ‡é’ˆ;
è¿™å¯¹äºéœ€è¦å¤„ç†åŸå§‹æŒ‡é’ˆå’Œä½¿ç”¨ unsafe Rust çš„åº”ç”¨ç¨‹åºå¾ˆæœ‰å¸®åŠ©;</p>
<p>ä½†æ˜¯, ä¹Ÿå¯ä»¥æ˜¯ä¸€ç§å‘Šè¯‰ç¼–è¯‘å™¨ä½ çš„ç±»å‹è¿˜æ²¡å®ç° Send æˆ–æ˜¯ Sync ç‰¹å¾çš„æ–¹æ³•!
ä½ å¯ä»¥ä½¿ç”¨ PhantomData åŒ…è£…ä»¥ä¸‹ç±»å‹,å¹¶åœ¨ä½ çš„ç»“æ„ä¸­ä½¿ç”¨å¥¹ä»¬,
æ¥ä½œä¸ºä¸€ç§æ–¹å¼å‘Šè¯‰ç¼–è¯‘å™¨ä½ çš„ç»“æ„å³ä¸æ˜¯ Send ä¹Ÿä¸æ˜¯ Sync;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub type PhantomUnsync = PhantomData&lt;Cell&lt;()&gt;&gt;;
pub type PhantomUnsend = PhantomData&lt;MutexGuard&lt;'static, ()&gt;&gt;;
<span class="boring">}</span></code></pre></pre>
<h3 id="ç”¨-rayon-å®ç°å¹¶è¡Œå¢é‡"><a class="header" href="#ç”¨-rayon-å®ç°å¹¶è¡Œå¢é‡">ç”¨ rayon å®ç°å¹¶è¡Œå¢é‡</a></h3>
<p>æœ‰æ—¶, ä½ å¸Œæœ›åœ¨éå†é›†ä¼šæ—¶å¹¶è¡ŒåŒ–å·¥ä½œ,
ä½†æ˜¯, åœ¨å¤„ç†çº¿ç¨‹å’Œç¡®ä¿ç±»å‹å¯ä»¥å®‰å…¨çš„è·¨çº¿ç¨‹å‘é€æ—¶å´ç¢°å£äº†;
æœ‰æ—¶, å¦‚æœé¢å¤–çš„æ ·æ¿æ–‡ä»¶ä»¤ä½ çš„ä»£ç å‡ ä¹ä¸å¯è¯»,é‚£å°±å·²ç»ä¸å€¼å¾—äº†;</p>
<p>ç›¸å, æœ‰ä¸€ä¸ªåä¸º Rayon å¾ˆèµçš„åŒ…, å·²ç»æä¾›äº†ä»¥æ— ç¼æ–¹å¼å¹¶è¡ŒåŒ–è®¡ç®—çš„ä¸Šå¥½å·¥å…·;
ä¾‹å¦‚,å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡ç®—æ•°ç»„å¹³æ–¹å’Œçš„å‡½æ•°:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn sum_of_squares(input: &amp;[i32]) -&gt; i32 {
    input.iter()
            .map(|i| i * i)
            .sum()
}
<span class="boring">}</span></code></pre></pre>
<p>ç”±äºä¹˜æ³•å’ŒåŠ æ³•çš„æ€§è´¨, ä¸Šè¿°ä»£ç ç»å¯¹å¯ä»¥å¹¶è¡ŒåŒ–,
Rayon é€šè¿‡è®©æˆ‘ä»¬è‡ªåŠ¨è®¿é—®æ•°ç»„ç­‰é›†ä¼šçš„&quot;å¹¶è¡Œè¿­ä»£å™¨&quot;,
ä½¿å¹¶è¡ŒåŒ–å˜å¾—å¾®ä¸è¶³é“;
è¿™æ˜¯å‡ ä¹é›¶æ ·æ¿çš„ä»£ç ;
è€Œä¸”ä¹Ÿå®Œå…¨ä¸å½±å“å¯è¯»æ€§:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Importing rayon prelude is what gives us access to .par_iter on arrays.
use rayon::prelude::*;

fn sum_of_squares(input: &amp;[i32]) -&gt; i32 {
    // We can use par_iter on our array to let rayon
    // handle the parallelization and reconciliation of
    // results at the end.
    input.par_iter()
            .map(|i| i * i)
            .sum()
}
<span class="boring">}</span></code></pre></pre>
<p>(<code>æ˜¯ä¹Ÿä¹</code>:</p>
<p>å·¥ç¨‹ä¸­å¦‚æœè‡ªå·±è¦æ„é€ å„ç§å†…éƒ¨åº“,
ä¹Ÿå€¼å¾—ç»™å‡ºè¿™ç§ä½¿ç”¨ç•Œé¢,
å’Œä»¥å¾€ä½¿ç”¨å†…ç½®åº“çš„ä»£ç å®Œå…¨å…¼å®¹,
åªæ˜¯åœ¨å…³é”®èŠ‚ç‚¹å¤„æ›¿æ¢ä¸ºè‡ªå·±é­”æ”¹/åŠ å¼ºè¿‡çš„...
)</p>
<h3 id="å¼€å‘-rust-åº“æ—¶ç†è§£-æ‹“å±•ç‰¹å¾-çš„æ¦‚å¿µ"><a class="header" href="#å¼€å‘-rust-åº“æ—¶ç†è§£-æ‹“å±•ç‰¹å¾-çš„æ¦‚å¿µ">å¼€å‘ Rust åº“æ—¶ç†è§£ æ‹“å±•ç‰¹å¾ çš„æ¦‚å¿µ</a></h3>
<p>é‚£ä¹ˆ Rayon æ˜¯å¦‚ä½•ä»¥å¦‚æ­¤å¹²å‡€çš„æ–¹å¼å®Œæˆä¸Šè¿°å·¥ä½œçš„å‘¢?
ç­”æ¡ˆåœ¨äº&quot;æ‹“å±•ç‰¹å¾&quot;,
è¿™äº›ç‰¹å¾å¯ä»¥å®šä¹‰ä¸ºå¯¹å…¶å®ƒç‰¹å¾çš„æ‹“å±•,
ä¾‹å¦‚ Iterator;
ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬å¯ä»¥é€ˆé€šå¸¸å®ç° Itertor ç‰¹å¾çš„é¡¹è¿½åŠ å…¶å®ƒæœ‰ç”¨çš„å‡½æ•°,
ä½†æ˜¯, å¥¹ä»¬åªæœ‰åœ¨ç‰¹æ€§èŒƒç•´ä»¥å†…æ—¶æ‰å¯ç”¨,
æ¯”å¦‚é€šè¿‡å°†å…¶å¯¼å…¥æ–‡ä»¶ä¸­;</p>
<p>è¿™ç§æ–¹å¼éå¸¸å¥½,å› ä¸º,è¿™äº›ç‰¹å¾åªæœ‰åœ¨ä½ åœ¨é¡¹ç›®ä¸­å¯¼å…¥æ‹“å±•ç‰¹å¾æ—¶æ‰å¯ç”¨,
å¹¶æä¾›äº†ä¸€ç§ä½¿ç”¨å¹²å‡€çš„ API æ‹“å±•é€šç”¨é›†åˆå’Œç±»å‹çš„å¥½æ–¹æ³•,
å¼€å‘è€…å¯ä»¥åƒä½¿ç”¨æ™®é€š API ä¸€æ ·è½»æ¾çš„ä½¿ç”¨è¿™äº› API;
ç”±äº Rayon çš„æ‹“å±•ç‰¹å¾,
ä½¿ç”¨å¹¶è¡Œè¿­ä»£å™¨å°±åƒåœ¨ Rust ä¸­ä½¿ç”¨æ™®é€šè¿­ä»£å™¨ä¸€æ ·ç®€å•;</p>
<p>äº‹å®ä¸Š,è¿™æœ‰ä¸€ä¸ªä¿¡æ¯é‡å¾ˆå¤§çš„æ¼”è®²,è§£é‡Šäº†å¦‚ä½•ä½¿ç”¨ æ‹“å±•ç‰¹å¾ æ¥å¼€å‘ä¸€ä¸ªåœ¨è¿­ä»£å™¨ä¸Šæä¾›è¿›åº¦æ¡çš„åº“;</p>
<p>(<code>æ˜¯ä¹Ÿä¹</code>:</p>
<p><a href="https://www.youtube.com/watch?v=bnnacleqg6k">&quot;Type-Driven API Design in Rust&quot; by Will Crichton - YouTube</a></p>
<p>é…å¥—çœ‹çœ‹ Rayon å®˜æ–¹å¯¹è‡ªå·±å®ç°åŸç†çš„å—¯å“¼: <a href="https://github.com/rayon-rs/rayon/tree/master/src/iter/plumbing">rayon/src/iter/plumbing at master Â· rayon-rs/rayon</a>
ä»¥åŠä¸“é—¨çš„è§£ææ–‡ç« : <a href="https://developers.redhat.com/articles/2023/01/30/run-app-under-openshift-service-mesh">How Rust supports Rayon's data parallelism | Red Hat Developer</a></p>
<p>å¤§çº¦å¯ä»¥æ„Ÿå—åˆ° Rust ä¸–ç•Œçš„ä»»æ€§äº†...
)</p>
<h3 id="æ‹¥æŠ±-option-å’Œ-result-ç±»å‹çš„ä¸€å…ƒæ€§"><a class="header" href="#æ‹¥æŠ±-option-å’Œ-result-ç±»å‹çš„ä¸€å…ƒæ€§">æ‹¥æŠ± Option å’Œ Result ç±»å‹çš„ä¸€å…ƒæ€§</a></h3>
<p>ä½¿ç”¨ Option å’Œ Result ä¹‹å,
äººä»¬ä¼šå¾ˆå¿«çœ‹åˆ°<code>.unwrap()</code> å°†å€¼ä»å¥¹ä»¬ç§»å‡º,
å¦‚æœ Option å’Œ Result æ˜¯å…±äº«å¼•ç”¨(æ¯”å¦‚ struct)çš„ä¸€éƒ¨åˆ†,
å°±å°†å¯¼è‡´å¤±è´¥;
ç„¶è€Œ,æœ‰æ—¶æˆ‘ä»¬æƒ³è¦çš„åªæ˜¯æ–­è¨€ Option åŒ¹é…å†…éƒ¨çš„å€¼æˆ–è·å–å¯¹å…¶å†…éƒ¨çš„å¼•ç”¨;
æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥ä½œåˆ°è¿™ç‚¹,
ä½†æ˜¯, è¿˜æœ‰ä¸€ç§æ–¹å¼èƒ½ä¸ç”¨ç¦»å¼€ Option é¢†åŸŸ:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn check_five(x: Option&lt;i32&gt;) -&gt; bool {
    // Contains can just check if the Option has what we want.
    x.contains(&amp;5)
}
<span class="boring">}</span></code></pre></pre>
<p>å¦ä¸€ä¸ªç¤ºä¾‹æ˜¯æˆ‘ä»¬æƒ³è¦ç”¨ None å€¼æ›¿æ¢ Option å†…æ•°æ®,
ä¹Ÿå°±æ˜¯å’ŒæŸäº›ç»“æ„äº¤äº’æ—¶;
æˆ‘ä»¬å¯ä»¥ç”¨æŒ‡ä»¤å¼ç¼–ç¨‹çš„æ–¹å¼æ¥ç¼–å†™,
å¹¶æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è¯¦ç»†å®Œæˆ:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Foo {
    data: Option&lt;T&gt;,
}

impl&lt;T&gt; Foo&lt;T&gt; {
    // Takes the value of data and leaves None in its place.
    fn pop(&amp;mut self) -&gt; Option&lt;T&gt; {
        if self.data.is_none() {
            return None;
        }
        let value = self.data.unwrap();
        self.data = None;
        value
    }
}
<span class="boring">}</span></code></pre></pre>
<p>ç„¶è€Œ, Option æœ‰ä¸€äº›éå¸¸é…·çš„å±æ€§,
å› ä¸º, å¥¹ä»¬çš„åŸºæœ¬æ€§è´¨æ˜¯å®šä¹‰äº†æœ‰ç”¨çš„æ–¹æ³•,
å¯ä»¥è®©æˆ‘ä»¬çš„ç”Ÿæºæ›´åŠ è½»æ¾;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Takes the value of data and leaves None in its place.
fn pop(&amp;mut self) -&gt; Option&lt;T&gt; {
    self.data.take()
}
<span class="boring">}</span></code></pre></pre>
<p>Rust ä¸­çš„ Option ä»¥å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ç›¸åŒçš„èŒƒä¾‹ä¸ºæ¨¡å‹,
å±äºæ›´å¹¿æ³›çš„æ•°æ®ç±»å‹ç±»åˆ«, ç§°ä¸º Monad;
ä¸ç”¨æ·±å…¥ç†è§£ Monad æ˜¯ä»€ä¹ˆ, è€Œå˜¦å°†å…¶è§†ä¸ºæ•°æ®çš„åŒ…è£…å™¨,
æˆ‘ä»¬å¯ä»¥åœ¨ä¸éœ€è¦ä»ä¸­å–å‡ºä¸œè¥¿çš„æƒ…å†µä¸‹å¯¹å…¶è¿›è¡Œæ“ä½œ;
æ¯”å¦‚, æƒ³è±¡ä¸€ä¸ªå°†ä¸¤ä¸ª Option å†…éƒ¨å€¼ç›¸åŠ å¹¶è¿”å›ä¸€ä¸ª Option çš„å‡½æ•°:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn add(x: Option&lt;i32&gt;, y: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
    if x.is_none() || y.is_none() {
        return None;
    }
    return Some(x.unwrap() + y.unwrap());
}
<span class="boring">}</span></code></pre></pre>
<p>ä¸Šè¿°ä»£ç çœ‹èµ·æ¥æœ‰ç‚¹ç‚¹ç¬¨æ‹™,å› ä¸º,éœ€è¦æ‰§è¡Œ none æ£€éªŒ,
è€Œä¸”æˆ‘ä»¬å¿…é¡»ä»ä¸¤ä¸ª Option ä¸­æå–å€¼å¹¶ä»ä¸­æ„å»ºä¸€ä¸ªæ–° Option å°±å¾ˆå›§;
ç„¶è€Œ, ç”±äº Option çš„ç‰¹æ®Šå±æ€§,
æˆ‘ä»¬å¯ä»¥ä½œçš„æ›´å¥½!
è¿™æ˜¯æˆ‘ä»¬å¯ä»¥è·å¾—çš„:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn add(x: Option&lt;i32&gt;, y: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {
    x.zip(y).map(|(a, b)| a+b)
}
<span class="boring">}</span></code></pre></pre>
<p>å¯ä»¥å¯¹ option ä½¿ç”¨ zip å’Œ map ,
å°±åƒæˆ‘ä»¬å¯ä»¥å¤„ç†æ•°ç»„å’Œå‘é‡ä¸€æ ·;
æ­¤å±æ€§ä¹Ÿå­˜åœ¨äº Result ç±»å‹ä¸­,
ç”šè‡³å­˜åœ¨äºè¯¸å¦‚ <code>Future</code> ç±»å‹ä¹‹ç±»äº‹ç‰©ä¸­;
å¦‚æœä½ å¯¹ä¸ºä»€ä¹ˆè¿™ä¹ˆä½œæ„Ÿåˆ°å¥½å¥‡,
è¯·ç»§ç»­æŒ–æ˜ Monad çš„æ›´å¤šä¿¡æ¯ -&gt; <a href="https://stackoverflow.com/questions/2704652/monad-in-plain-english-for-the-oop-programmer-with-no-fp-background">functional programming - Monad in plain English? (For the OOP programmer with no FP background) - Stack Overflow</a></p>
<p>æ¥å— Option å’Œ Result ç±»å‹çš„ä¸€å…ƒæ€§è´¨,
ä¸è¦åˆ°å¤„ä½¿ç”¨ unwrap å’Œ if x.is_none() {} else ;
æœ¬èº«å°±åŒ…å«äº†å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•,
ä½ å¯ä»¥åœ¨æ ‡å‡†åº“ä¸­é˜…è¯»è¿™äº›æ–¹æ³•;</p>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>æ‰€ä»¥, æ ‡å‡†åº“çš„é€šè¯»æ˜¯ä¸€ä¸ªåŸºæœ¬åŠŸäº†,
ä¸è¿‡, ç›¸æ¯” Python ç­‰å…¶å®ƒè¯­è¨€çš„å®˜æ–¹æ–‡æ¡£,
docs.rs å®åœ¨å¤ªéº»äº†ç‚¹å„¿,è¿˜è¦ä¹ æƒ¯ä¸€ä¸‹;</p>
<p>)</p>
<h3 id="äº†è§£-drop-åº”è¯¥å¦‚ä½•é’ˆå¯¹ä¸åŒæ•°æ®ç»“æ„å®ç°"><a class="header" href="#äº†è§£-drop-åº”è¯¥å¦‚ä½•é’ˆå¯¹ä¸åŒæ•°æ®ç»“æ„å®ç°">äº†è§£ Drop åº”è¯¥å¦‚ä½•é’ˆå¯¹ä¸åŒæ•°æ®ç»“æ„å®ç°</a></h3>
<p>æ ‡å‡†åº“å°† Drop ç‰¹æ€§æè¿°ä¸º:</p>
<p>å½“ä¸å†éœ€è¦æŸä¸ªå€¼æ—¶, Rust å°†å¯¹è¯¥å€¼è¿è¡Œ&quot;ææ„å‡½æ•°&quot;;
ä¸å†éœ€è¦æŸä¸ªå€¼æœ€å¸¸è§æ–¹å¼æ˜¯è¶…å‡ºä½œç”¨åŸŸ;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait Drop {
    fn drop(&amp;mut self);
}
<span class="boring">}</span></code></pre></pre>
<p>åœ¨ Rust ä¸­ç¼–å†™æ•°æ®ç»“æ„æ—¶, Drop æ˜¯è‡³å…³é‡è¦çš„;
äººä»¬å¿…é¡»æœ‰ä¸€ç§åˆç†çš„æ–¹æ³•æ¥å¤„ç†ä¸€æ—¦ä¸å†éœ€è¦å†…å­˜æ—¶å¦‚ä½•ä¸¢å¼ƒ(å®‰å…¨çš„);
ä½¿ç”¨å¼•ç”¨è®¡æ•°ç±»å‹å¯ä»¥æŠ¥æ—¶ä½ å…‹æœè¿™äº›éšœç¢,
ä½†æ˜¯, è¿™å¹¶ä¸æ€»æ˜¯è¶³å¤Ÿçš„;
ä¾‹å¦‚,ç¼–å†™è‡ªå®šä¹‰é“¾è¡¨æˆ–æ˜¯ç¼–å†™ä½¿ç”¨é€šé“çš„ç»“æ„æ—¶,é€šå¸¸è¦å®ç°è‡ªå®šä¹‰ç‰ˆæœ¬çš„ Drop;
å½“ä½ çœ‹åˆ°æ ‡å‡†åº“å®é™…å¦‚ä½•æ‰§è¡Œæ—¶,
å®ç° Drop æ¯”å¹¶çœ‹èµ·æ¥å®¹æ˜“çš„å¤š:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// That's it!
fn drop&lt;T&gt;(t: T) {}
<span class="boring">}</span></code></pre></pre>
<p>å·§å¦™åˆ©ç”¨å¤±å»ä½œç”¨åŸŸæ—¶é”€æ¯çš„è§„åˆ™,
<code>std::mem::drop</code> æœ‰ä¸€ä¸ªç©ºå‡½æ•°ä½“!</p>
<p>è¿™æ˜¯ä¸€ä¸ªæŠ€å·§, ä½ å¯ä»¥åœ¨è‡ªå·±çš„è‡ªå®šä¹‰ Drop å®ç°ä¸­ä½¿ç”¨,
å˜¦ä½ æ¶µç›–æ‰€æœ‰åŸºç±»?å³å¯;</p>
<h3 id="çœŸçš„å¯¹å€Ÿç”¨æ£€æŸ¥å‘˜å¾ˆæ°”-é‚£å°±ç”¨ä¸å¯å˜æ•°æ®ç»“æ„"><a class="header" href="#çœŸçš„å¯¹å€Ÿç”¨æ£€æŸ¥å‘˜å¾ˆæ°”-é‚£å°±ç”¨ä¸å¯å˜æ•°æ®ç»“æ„">çœŸçš„å¯¹å€Ÿç”¨æ£€æŸ¥å‘˜å¾ˆæ°”? é‚£å°±ç”¨ä¸å¯å˜æ•°æ®ç»“æ„</a></h3>
<p>å‡½æ•°å¼ç¨‹åºå‘˜å–œæ¬¢è¯´å…¨å±€çš„/å¯å˜çš„çŠ¶æ€æ˜¯ä¸‡æ¶ä¹‹æº,
å¦‚æœå¯ä»¥é¿å…,é‚£æ¯›è¿˜è¦ä½¿ç”¨å‘¢?
å¤šäºäº† Rust çš„å‡½æ•°å¼ç»“æ„,
æˆ‘ä»¬æ‰èƒ½æ„å»ºä»ä¸€å¼€å§‹å°±ä¸å¯èƒ½çªå˜çš„ç»“æ„ç»“æ„!
å½“ä½ éœ€è¦ç¼–å†™ç±»ä¼¼åœ¨ Haskell/OCaml æˆ–å…¶å®ƒè¯­è¨€ä¸­çœ‹åˆ°çš„çº¯ç²¹å‡½æ•°å¼ä»£ç æ—¶,
è¿™å°¤å…¶æœ‰ç”¨;</p>
<p>é€šè¿‡é“¾æ¥åˆ—è¡¨ç»¼åˆæ•™ç¨‹ä¸­çš„ç¤ºä¾‹,
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä½•æ„å»ºä¸€ä¸ªä¸å¯å˜åˆ—è¡¨,å…¶ä¸­èŠ‚ç‚¹æœ‰å¼•ç”¨è®¡æ•°:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::rc::Rc;

pub struct List&lt;T&gt; {
    head: Link&lt;T&gt;,
}

type Link&lt;T&gt; = Option&lt;Rc&lt;Node&lt;T&gt;&gt;&gt;;

struct Node&lt;T&gt; {
    elem: T,
    next: Link&lt;T&gt;,
}

impl&lt;T&gt; List&lt;T&gt; {
    pub fn new() -&gt; Self {
        List { head: None }
    }

    pub fn prepend(&amp;self, elem: T) -&gt; List&lt;T&gt; {
        List { head: Some(Rc::new(Node {
            elem: elem,
            next: self.head.clone(),
        }))}
    }

    pub fn tail(&amp;self) -&gt; List&lt;T&gt; {
        List { head: self.head.as_ref().and_then(|node| node.next.clone()) }
    }
    ...
<span class="boring">}</span></code></pre></pre>
<p>è¿™å°±å¾ˆèµ,å› ä¸º,å…¶è¡Œä¸ºç±»ä¼¼äºå‡½æ•°å¼æ•°æ®ç»“æ„,
åœ¨å‡½æ•°å¼æ•°æ®ç»“æ„ä¸­,
äººä»¬ä¸ä¼šé€šè¿‡è¿½åŠ å‰ç¼€æ¥ä¿®æ”¹åˆ—è¡¨,
è€Œæ˜¯é€šè¿‡ä»¥æ–°å…ƒç´ ä½œä¸ºå…¶å¤´éƒ¨å’Œç°æœ‰åˆ—è¡¨ä½œä¸ºå°¾éƒ¨æ¥æ„å»ºåˆ—è¡¨å®Œæˆæ–°æ„å»º;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>    [head] ++ tail
<span class="boring">}</span></code></pre></pre>
<p>è¯·æ³¨æ„,ä¸Šè¿°æ–¹æ³•éƒ½ä¸éœ€è¦ mut, å› ä¸º,æˆ‘ä»¬çš„æ•°æ®ç»“æ„æ˜¯ä¸å¯å˜çš„!
è¿™åœ¨å†…å­˜ä¸Šä¹Ÿæ˜¯éå¸¸é«˜æ•ˆçš„,å› ä¸º,è¯¥ç»“æ„æ˜¯å¼•ç”¨è®¡æ•°çš„,
è¿™æ„å‘³ç€å¦‚æœæ­¤æ•°æ®ç»“æ„ä¸Šæœ‰å¤šä¸ªè°ƒç”¨è€…,
æˆ‘ä»¬ä¸ä¼šæµªè´¹ä¸å¿…è¦çš„èµ„æºæ¥å¤åˆ¶èŠ‚ç‚¹çš„åº•å±‚å†…å­˜;</p>
<p>Rust ä¸­çš„çº¯å‡½æ•°ä»£ç å¾ˆç®€æ´,
ä½†æ˜¯,å¤šæ•°æ—¶å€™,éœ€è¦å°¾é€’å½’æ¥äº†æŠŠç”¨æˆ‘å¿«è¿™ç§æ–¹å¼å®ç°çš„é«˜æ€§èƒ½ä»£ç ï¼›
è€Œä¸”ï¼Œè¦å°å¿ƒï¼Œæ¯•ç«Ÿ Rust ç¼–è¯‘å™¨ä¸ä¿è¯å°¾è°ƒç”¨ä¼˜åŒ–ï¼›
å€¼å¾—è¿›ä¸€æ­¥æŒ–æ˜æ›´å¤šä¿¡æ¯ -&gt; <a href="https://stackoverflow.com/questions/59257543/when-is-tail-recursion-guaranteed-in-rust">When is tail recursion guaranteed in Rust? - Stack Overflow</a></p>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>è¿™å°±å°´å°¬äº†, åªæ˜¯ä¸ªçœ‹èµ·æ¥å¾ˆç¾çš„æ€è·¯,
æ¯•ç«Ÿ Rust ä¸æ˜¯çº¯å‡½æ•°è¯­è¨€,
é€’å½’å¹¶ä¸æ˜¯ç¬¬ä¸€å…¬æ°‘;</p>
<p>æ‰€ä»¥, è¿™ç§åœºæ™¯ä¸­,è¿˜æ˜¯è€å®å’Œ å€Ÿç”¨ç®¡ç†å‘˜ å¥½å¥½å•†é‡å§...</p>
<p>)</p>
<h3 id="traits-ç¯®æœ‰åŠ©å‡å°‘é‡å¤"><a class="header" href="#traits-ç¯®æœ‰åŠ©å‡å°‘é‡å¤">traits ç¯®æœ‰åŠ©å‡å°‘é‡å¤</a></h3>
<p>æœ‰æ—¶,å¯èƒ½å¸Œæœ›é€šè¿‡å¾ˆå¤šä¸åŒçš„ç‰¹å¾æ¥çº¦æŸæ³›å‹å‚æ•°:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Foo&lt;T: Copy + Clone + Ord + Bar + Baz + Nyan&gt; {
    vals: Vec&lt;T&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>ä½†æ˜¯,ä¸€æ—¦ä½ å¼€å§‹ç¼–å†™ impl è¯­å¥,
æˆ–æ˜¯å½“ä½ æœ‰å¤šä¸ªé€šç”¨å‚æ•°æ—¶,
è¿™å¾ˆå¿«å°±ä¼šå¤±æ§;
ç›¸åä½ å¯æº¶æ€§å®šä¹‰ä¸€ä¸ªæ•´ä½“ç‰¹å¾, ä½¿ä»£ç æ›´åŠ  DRY;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Fooer: Copy + Clone + Ord + Bar + Baz + Nyan {}

struct Foo&lt;F: Fooer&gt; {
    vals: Vec&lt;F&gt;,
}

impl&lt;F: Fooer&gt; Foo&lt;F&gt; { ... }
<span class="boring">}</span></code></pre></pre>
<p>traits ç¯®å¯ä»¥å¸®åŠ©å‡å°‘é‡å¤ï¼Œ
ä½†æ˜¯ï¼Œä¸è¦è®©å…¶å˜å¾—è¿‡å¤§ï¼›
åœ¨å¾ˆå¤šæƒ…å†µä¸­ï¼Œ
è®©ä¸€ä¸ªç±»å‹éœ€è¦å¦‚æ­¤å¤šçš„çº¦æŸå¯èƒ½ä¼šäº§ç”Ÿåå‘³é“,
å› ä¸º,ä½ åˆ›å»ºçš„æŠ½è±¡å¤ªå¤§äº†;
ç›¸å,å¦‚æœä½ å‘ç°çº¦æŸæ— ç¼˜æ— æ•…çš„å˜å¾—å¤ªå¤§,
è¯·ä¼ å…¥å…·ä½“ç±»å‹;
ç„¶è€Œ,æŸäº›åº”ç”¨å’Œè¿œåˆå¯èƒ½å—ç›Šäº blanket traits/ç‰¹å¾ç¯®,
ä¾‹å¦‚æ—¨åœ¨æä¾›å°½å¯èƒ½é€šç”¨çš„ API åº“;</p>
<h3 id="match-è¯­å¥æœ¬è´¨ä¸Šå¾ˆçµæ´»å’Œç»“æ„åŒ–çš„"><a class="header" href="#match-è¯­å¥æœ¬è´¨ä¸Šå¾ˆçµæ´»å’Œç»“æ„åŒ–çš„">Match è¯­å¥æœ¬è´¨ä¸Šå¾ˆçµæ´»å’Œç»“æ„åŒ–çš„</a></h3>
<p>ä¾‹å¦‚,å¯ä»¥å°†å€¼ä½œä¸ºå…ƒç»„ç»„åˆåœ¨ä¸€èµ·å¹¶æ‰§è¡Œä»¥ä¸‹æ“ä½œ,è€Œä¸æ˜¯åµŒå¥—åŒ¹é…è¯­å¥:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn player_outcome(player: &amp;Move, opp: &amp;Move) -&gt; Outcome {
    use Move::*;
    use Outcome::*;
    match (player, opp) {
        // Rock moves.
        (Rock, Rock) =&gt; Draw,
        (Rock, Paper) =&gt; Lose,
        (Rock, Scissors) =&gt; Win,
        // Paper moves.
        (Paper, Rock) =&gt; Win,
        (Paper, Paper) =&gt; Draw,
        (Paper, Scissors) =&gt; Lose,
        // Scissor moves.
        (Scissors, Rock) =&gt; Lose,
        (Scissors, Paper) =&gt; Win,
        (Scissors, Scissors) =&gt; Draw,
    }
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™ä¸ªç¤ºä¾‹è¶³ä»¥è¯´æ˜ä¸ºä»€ä¹ˆæ¨¡å‹åŒ¹é…æ¯”æŒ‡ä»¤å¼è¯­è¨€ä¸­çš„ switch è¯­å¥æ›´å¼ºå¤§,
è€Œä¸”, åœ¨åŠ³æ¨¡å†…éƒ¨å€¼æ–¹é¢å¯ä»¥ä½œçš„æ›´å¤š.</p>
<h3 id="å¦‚æœåŒ¹é…å¯¹è±¡æ˜¯æœ‰é™ä¸”å·²çŸ¥çš„å«‘ä½¿ç”¨-_--å­å¥"><a class="header" href="#å¦‚æœåŒ¹é…å¯¹è±¡æ˜¯æœ‰é™ä¸”å·²çŸ¥çš„å«‘ä½¿ç”¨-_--å­å¥">å¦‚æœåŒ¹é…å¯¹è±¡æ˜¯æœ‰é™ä¸”å·²çŸ¥çš„,å«‘ä½¿ç”¨ _ =&gt; å­å¥</a></h3>
<p>ä¾‹å¦‚,æˆ‘ä»¬æœ‰ä¸ªæšä¸¾:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Foo {
    Bar,
    Baz,
    Nyan,
    Zab,
    Azb,
    Bza,
}
<span class="boring">}</span></code></pre></pre>
<p>åœ¨ç¼–å†™ match è¯­å¥æ—¶,å¦‚æœå¯èƒ½çš„è¯, åº”è¯¥åŒ¹é…æšä¸¾çš„æ‰€æœ‰ç±»å‹,è€Œä¸æ˜¯æ±‚åŠ©äº catch-all å­å¥:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>match f {
    Bar =&gt; { ... },
    Baz =&gt; { ... },
    Nyan =&gt; { ... },
    Zab =&gt; { ... },
    Azb =&gt; { ... },
    Bza =&gt; { ... },
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™å¯¹ä»£ç ç»´æŠ¤éå¸¸æœ‰å¸®åŠ©,å› ä¸º,å¦‚æœæšä¸¾çš„åŸå§‹ç¼–å†™è€…é€ˆå…¶è¿½åŠ æ›´å¤šå˜ä½“,
å¦‚æœæˆ‘ä»¬å¿˜è®°åœ¨åŒ¹é…è¯­å¥ä¸­å¤„ç†æ–°å˜ä½“, åŠŸèƒ½å°†æ— æ³•ç¼–è¯‘;</p>
<h3 id="match-ä¿æŠ¤æ¡æ¬¾ä¹Ÿå¾ˆå¼ºå¤§"><a class="header" href="#match-ä¿æŠ¤æ¡æ¬¾ä¹Ÿå¾ˆå¼ºå¤§">Match ä¿æŠ¤æ¡æ¬¾ä¹Ÿå¾ˆå¼ºå¤§</a></h3>
<p>å½“ä½ æœ‰æœªçŸ¥æˆ–æ˜¯å¯èƒ½æ— é™æ•°é‡çš„åŒ¹é…é¡¹æ—¶(ä¾‹å¦‚æ•°å­—èŒƒå›´),
åŒ¹é…å®ˆå«å°±å¾ˆæ£’;
ç„¶è€Œ, å¦‚æœä½ çš„èŒƒå›´ä¸èƒ½è¢«å®ˆå«å®Œå…¨åŒ…å«æ—¶,
å°†è¿«ä½¿ä½ ä½¿ç”¨ä¸€ä¸ªåŒ…ç½—ä¸‡è±¡çš„ <code>_ =&gt;</code>,
è¿™åœ¨ç¼–å†™å¯ç»´æŠ¤ä»£ç æ—¶å¯èƒ½å°±æ˜¯ä¸€ä¸ªç¼ºç‚¹;</p>
<p>Rust ä¹¦ä¸­å…¸å‹ç¤ºä¾‹å¦‚ä¸‹:</p>
<pre><pre class="playground"><code class="language-rust edition2021">enum Temperature {
    Celsius(i32),
    Fahrenheit(i32),
}

fn main() {
    let temperature = Temperature::Celsius(35);
    match temperature {
        Temperature::Celsius(t) if t &gt; 30 =&gt; println!(&quot;{}C is above 30 Celsius&quot;, t),
        Temperature::Celsius(t) =&gt; println!(&quot;{}C is below 30 Celsius&quot;, t),
        Temperature::Fahrenheit(t) if t &gt; 86 =&gt; println!(&quot;{}F is above 86 Fahrenheit&quot;, t),
        Temperature::Fahrenheit(t) =&gt; println!(&quot;{}F is below 86 Fahrenheit&quot;, t),
    }
}</code></pre></pre>
<h3 id="éœ€è¦æä¹±åŸå§‹æ±‡ç¼–å˜›-æœ‰ä¸€ä¸ªå®"><a class="header" href="#éœ€è¦æä¹±åŸå§‹æ±‡ç¼–å˜›-æœ‰ä¸€ä¸ªå®">éœ€è¦æä¹±åŸå§‹æ±‡ç¼–å˜›? æœ‰ä¸€ä¸ªå®!</a></h3>
<p>core asm æä¾›äº†ä¸€ä¸ªé—³, å¯ä»¥è®©ä½ åœ¨ Rust ä¸­ç¼–å†™å†…è”æ±‡ç¼–è¯­å¥,
è¿™åœ¨æŠ˜è…¾ä¸€äº›èŠ±å“¨çš„äº‹æƒ…æ—¶å¾ˆæœ‰å¸®åŠ©,
æ¯”å¦‚ç›´æ¥æ‹¦æˆª CPU çš„å †æ ˆ,
æˆ–æ˜¯æƒ³è¦å®ç°é«˜çº§ä¼˜åŒ–;</p>
<p>è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹,æˆ‘ä»¬ä½¿ç”¨å†…è”æ±‡ç¼–é€šè¿‡ç®€å•çš„å°†å †æ ˆæŒ‡é’ˆç§»åŠ¨åˆ°ç”¨æ¥æ¬ºéª—å¤„ç†å™¨çš„å †æ ˆæ¥æ‰§è¡Œæˆ‘ä»¬çš„å‡½æ•°!</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use core::arch::asm;

const MAX_DEPTH: isize = 48;
const STACK_SIZE: usize = 1024 * 1024 * 2;

#[derive(Debug, Default)]
#[repr(C)]
struct StackContext {
    rsp: u64,
}

fn nyan() -&gt; ! {
    println!(&quot;nyan nyan nyan&quot;);
    loop {}
}

pub fn move_to_nyan() {
    let mut ctx = StackContext::default();
    let mut stack = vec![0u8; MAX as usize];
    unsafe {
        let stack_bottom = stack.as_mut_ptr().offset(MAX_DEPTH);
        let aligned = (stack_bottom as usize &amp; !15) as *mut u8;
        std::ptr::write(aligned.offset(-16) as *mut u64, nyan as u64);
        ctx.rsp = aligned.offset(-16) as u64;
        switch_stack_to_fn(&amp;mut ctx);
    }
}

unsafe fn switch_stack_to_fn(new: *const StackContext) {
    asm!(
        &quot;mov rsp, [{0} + 0x00]&quot;,
        &quot;ret&quot;,
        in(reg) new,
    )
}
<span class="boring">}</span></code></pre></pre>
<p>(<code>æ˜¯ä¹Ÿä¹</code>:</p>
<p>æ‰€ä»¥è¯´, æ— æ³•åµŒå…¥å†…è” æ±‡ç¼–ä»£ç  çš„è¯­è¨€, éƒ½ä¸ç®—ç³»ç»Ÿè¯­è¨€?</p>
<p>ç­‰ç­‰, Python å¥½è±¡ä¹Ÿå¯ä»¥å“ª...
)</p>
<h3 id="ä½¿ç”¨-criterion-å¯¹ä»£ç åŠå…¶ååé‡è¿›è¡ŒåŸºå‡†æµ‹è¯•"><a class="header" href="#ä½¿ç”¨-criterion-å¯¹ä»£ç åŠå…¶ååé‡è¿›è¡ŒåŸºå‡†æµ‹è¯•">ä½¿ç”¨ Criterion å¯¹ä»£ç åŠå…¶ååé‡è¿›è¡ŒåŸºå‡†æµ‹è¯•</a></h3>
<p>ç”¨æ¥å¯¹ Rust ä»£ç è¿›è¡ŒåŸºå‡†æµ‹è¯•çš„ Criterion æ˜¯ä¸€é¡¹äº†ä¸èµ·çš„å·¥ç¨‹ä½œå“;
èƒ½å¸®åŠ©ä½ ä½¿ç”¨å›¾å½¢/å›å½’åˆ†æå’Œå…¶å®ƒå¥‡æ€ªçš„å·¥å…·æ¥è®¿é—®ä»¤äººæ•¬ç•çš„åŸºå‡†æµ‹è¯•åŠŸèƒ½;
ç”šè‡³å¯ä»¥ç”¨æ¥è¡¡é‡å‡½æ•°çš„ä¸åŒç»´åº¦,ä¾‹å¦‚æ—¶é—´å’Œååé‡;
åˆæ¯”å¦‚, æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ä¸åŒçš„ç›´æ–¹å›¾ä¸­,ä½¿ç”¨æ ‡å‡†åº“çš„è¿­ä»£å™¨æ–¹æ³•æ„é€ /è·å–å’Œæ”¶é›†åŸå§‹å­—èŠ‚çš„é€Ÿåº¦æœ‰å¤šå¿«;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::iter;

use criterion::BenchmarkId;
use criterion::Criterion;
use criterion::Throughput;
use criterion::{criterion_group, criterion_main};

fn from_elem(c: &amp;mut Criterion) {
    static KB: usize = 1024;

    let mut group = c.benchmark_group(&quot;from_elem&quot;);
    for size in [KB, 2 * KB, 4 * KB, 8 * KB, 16 * KB].iter() {
        group.throughput(Throughput::Bytes(*size as u64));
        group.bench_with_input(BenchmarkId::from_parameter(size), size, |b, &amp;size| {
            b.iter(|| iter::repeat(0u8).take(size).collect::&lt;Vec&lt;_&gt;&gt;());
        });
    }
    group.finish();
}

criterion_group!(benches, from_elem);
criterion_main!(benches);
<span class="boring">}</span></code></pre></pre>
<p>å°†ä»¥ä¸‹æ¡ç›®è¿½åŠ åˆ°é¡¹ç›®çš„ Cargo,toml æ–‡ä»¶ä¸­,
å°±å¯ä»¥ç”¨ cargo bench è¿è¡Œäº†:</p>
<pre><code class="language-toml">[dev-dependencies]
criterion = &quot;0.3&quot;

[[bench]]
name = &quot;BENCH_NAME&quot;
harness = false
</code></pre>
<p>criterion ä¸ä»…å¯ä»¥å‘ä½ å±•ç¤ºéå¸¸æ£’çš„å›¾è¡¨å’Œæè¿°æ€§ä¿¡æ¯,
è€Œä¸”,è¿˜èƒ½è®°ä½åŸºå‡†æµ‹è¯•è¿è¡Œçš„å…ˆå‰ç»“æœ,
å‘Šè¯‰ä½ æ€§èƒ½å›å½’çŠ¶æ€;
åœ¨è¿™ç§æƒ…å†µä¸­,æˆ‘åœ¨è¿è¡ŒåŸºå‡†æµ‹è¯•çš„åŒæ—¶, è¿˜èƒ½ç”¨è®¡ç®—æœºä½œå¾ˆå¤šå…¶å®ƒäº‹å„¿,
æ‰€ä»¥, ä¹Ÿèƒ½è‡ªç„¶çš„é€šæŠ¥ä»ä¸Šæ¬¡æµ‹é‡åé€€åŒ–äº†å¤šå°‘;
æ€»ä¹‹,éå¸¸çš„COOL!</p>
<pre><code>    Found 11 outliers among 100 measurements (11.00%)
      2 (2.00%) low mild
      4 (4.00%) high mild
      5 (5.00%) high severe
    from_elem/8192          time:   [79.816 ns 79.866 ns 79.913 ns]
                            thrpt:  [95.471 GiB/s 95.528 GiB/s 95.587 GiB/s]
                     change:
                            time:   [+7.3168% +7.9223% +8.4362%] (p = 0.00 &lt; 0.05)
                            thrpt:  [-7.7799% -7.3407% -6.8180%]
                            Performance has regressed.
    Found 3 outliers among 100 measurements (3.00%)
      2 (2.00%) high mild
      1 (1.00%) high severe
    from_elem/16384         time:   [107.22 ns 107.28 ns 107.34 ns]
                            thrpt:  [142.15 GiB/s 142.23 GiB/s 142.31 GiB/s]
                     change:
                            time:   [+3.1408% +3.4311% +3.7094%] (p = 0.00 &lt; 0.05)
                            thrpt:  [-3.5767% -3.3173% -3.0451%]
                            Performance has regressed.
</code></pre>
<h3 id="é€šè¿‡é˜…è¯»æ ‡å‡†åº“æ¥ç†è§£å…³é”®æ¦‚å¿µ"><a class="header" href="#é€šè¿‡é˜…è¯»æ ‡å‡†åº“æ¥ç†è§£å…³é”®æ¦‚å¿µ">é€šè¿‡é˜…è¯»æ ‡å‡†åº“æ¥ç†è§£å…³é”®æ¦‚å¿µ!</a></h3>
<p>æˆ‘å–œæ¬¢å¾œå¾‰åœ¨æ ‡å‡†åº“ä¸­,å°¤å…¶æ˜¯ std::rc, std::iter, and std::collections;
ä»¥ä¸‹æ˜¯æˆ‘è‡ªå·±ä»ä¸­å­¦ä¹ åˆ°çš„ä¸€äº›å¾ˆèµçš„æŠ€å·§:</p>
<ul>
<li>vec æ˜¯å¦‚ä½•åˆ‡å®å®ç°çš„</li>
<li>é€šè¿‡ std::cell å’Œ std::rc ä¸­çš„ä¸åŒæ–¹æ³•, å®ç°å†…éƒ¨å¯å˜æ€§çš„æ–¹å¼</li>
<li>å¦‚ä½•åœ¨ std::sync ä¸­å®ç°é€šé“</li>
<li>std::sync::Arc çš„é­”åŠ›</li>
<li>äº†è§£ Rust ä½œè€…å¯¹å¼€å‘å¯¹åº”åº“æ—¶,å¦‚ä½•ä½œå‡ºè®¾è®¡å†³ç­–çš„è¯¦å°½è§£é‡Š</li>
</ul>
<p>æœ‰å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½ä¸ºè¿›å…¥ Rust å¹¶é‡åˆ°ä¸€äº›éšœç¢çš„äººä»¬æä¾›å¯ç”¨ä¿¡æ¯;
æœŸå¾…æ›´å¤š Rust å†…å®¹èƒ½æ¨å‡º,
å°¤å…¶æ˜¯å…³é”®æ›´é«˜çº§ä¸»é¢˜çš„...</p>
<h3 id="shoutout"><a class="header" href="#shoutout">Shoutout</a></h3>
<p>æ„Ÿè°¢ Offchain Labs åŒäº‹ Rachel å’Œ Lee Bousfield å¯¹è¿™é—¨è¯­è¨€çš„å¹¿æ³›äº†è§£;
ä»–ä»¬çš„ä¸€äº›æŠ€å·§å¯å‘äº†è¿™ç¯‡æ–‡ç« ;</p>
<h2 id="refer-12"><a class="header" href="#refer-12">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<ul>
<li><a href="http://blog.pnkfx.org/blog/2019/11/18/rust-bug-minimization-patterns/">Rust Bug Minimization Patterns - The {pnk}f(eli)x Blog</a></li>
<li><a href="https://www.thecodedmessage.com/posts/default-params/">Rust and Default Parameters :: The Coded Message</a></li>
<li><a href="https://github.com/sger/RustBooks#advanced-books">sger/RustBooks: List of Rust books</a>
<ul>
<li><a href="https://veykril.github.io/tlborm/decl-macros/macros2.html">Macros 2.0 - The Little Book of Rust Macros</a></li>
<li>...</li>
</ul>
</li>
</ul>
<h2 id="logging-11"><a class="header" href="#logging-11">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>230212 ZQ v1 done</li>
<li>230120 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="æŠ€å·§"><a class="header" href="#æŠ€å·§">æŠ€å·§</a></h1>
<blockquote>
<p>tips...é‡è¦ä¹Ÿä¸é‡è¦</p>
</blockquote>
<h2 id="background-11"><a class="header" href="#background-11">background</a></h2>
<blockquote>
<p>æ— å¥ˆèƒŒæ™¯</p>
</blockquote>
<p>åˆšåˆšå¼€å§‹æ„Ÿè§‰å“ªå„¿å“ªå„¿éƒ½è¦æœ‰æŠ€å·§, å…¶å®ä¸ä¸€å®š...</p>
<h2 id="goal-9"><a class="header" href="#goal-9">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<p>å°†ä¸€å¤´åˆæ ¼ Rustaceans å€¼å¾—è®°å¿†çš„åŸºæœ¬æŠ€å·§,
æ”¶é›†åˆ° 42% å·¦å³...</p>
<h2 id="trace-9"><a class="header" href="#trace-9">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<p>???</p>
<h2 id="refer-13"><a class="header" href="#refer-13">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h3 id="gpts"><a class="header" href="#gpts">GPTs</a></h3>
<blockquote>
<p>é€šç”¨ä»»åŠ¡</p>
</blockquote>
<ul>
<li>ChatGPT ç›¸å…³
<ul>
<li>ChatGPT for StackOverflow (https://stackoverflow.gg/) æŸ¥çœ‹ ChatGPT å¯¹ StackOverflow ä¸Šæ¯ä¸ªé—®é¢˜çš„å›å¤ï¼Œç”šè‡³æ˜¯æœªå›ç­”çš„é—®é¢˜</li>
<li>ChatGPT Detector (https://huggingface.co/spaces/Hello-SimpleAI/chatgpt-detector-single) åˆ¤æ–­æ–‡æœ¬æ˜¯å¦æ˜¯AIç”Ÿæˆ</li>
</ul>
</li>
<li>poe (https://quorablog.quora.com/Poe-1) quoraå‡ºå“çš„å¯¹è¯å¼AIå·¥å…·</li>
<li>tweetmonk (https://tweetmonk.com/) AIå¸®ä½ æ‰“ç†ç¤¾äº¤ç½‘ç»œ</li>
</ul>
<blockquote>
<p>å¼€å‘ä»»åŠ¡</p>
</blockquote>
<ul>
<li>README ç”Ÿæˆå™¨ (https://readme.rustc.cloud/zh) ç”¨AIç”Ÿæˆå®Œæ•´çš„GitHub readme</li>
</ul>
<blockquote>
<p>è®¾è®¡ä»»åŠ¡</p>
</blockquote>
<ul>
<li>å›¾åƒ:
<ul>
<li>Galileo AI (https://www.usegalileo.ai/) ç”¨AIè®¾è®¡ç”ŸæˆUIè®¾è®¡</li>
<li>animeai (https://animeai.app/) AIç”Ÿæˆæ¼«ç”»é£æ ¼å›¾ç‰‡</li>
<li>autodraw (https://www.autodraw.com/) AIè¾…åŠ©ç»˜ç”»</li>
<li>latentlabs (https://www.latentlabs.art/) æ ¹æ®æ–‡æœ¬ç”Ÿæˆ 360 åº¦å…¨æ™¯å›¾</li>
<li>playgroudai (https://playgroundai.com/) è·å–AIç»˜å›¾æç¤ºè¯ï¼Œå¸®åŠ©ä½ ç¼–è¾‘å›¾ç‰‡</li>
<li>stockimg (https://stockimg.ai/) AIè®¾è®¡å›¾æ ‡</li>
</ul>
</li>
<li>å£°éŸ³:
<ul>
<li>image-to-sound-fx (https://huggingface.co/spaces/fffiloni/image-to-sound-fx) å›¾ç‰‡è½¬æ¢ä¸ºç›¸å¯¹åº”çš„å£°éŸ³å†…å®¹</li>
<li>MetaVoice Studio (https://studio.themetavoice.xyz/) AIå£°éŸ³ç¼–è¾‘å¹³å°</li>
</ul>
</li>
<li>è§†é¢‘:
<ul>
<li>invideo (https://invideo.io/ai/) æ ¹æ®æ–‡æœ¬ç”Ÿæˆè§†é¢‘</li>
<li>murf (https://murf.ai/) AIç”ŸæˆçœŸäººæ¼”è®²è§†é¢‘</li>
<li>tosummary (https://tosummary.com/) åˆ©ç”¨AIæå–ä¹¦ç±ã€YouTubeè§†é¢‘æ‘˜è¦</li>
</ul>
</li>
</ul>
<blockquote>
<p>åŠå…¬ä»»åŠ¡</p>
</blockquote>
<ul>
<li>æ–‡æ¡£:
<ul>
<li>å‘¨æŠ¥ç”Ÿæˆå™¨ (https://weeklyreport.avemaria.fun/zh) ç®€å•æè¿°å·¥ä½œå†…å®¹ï¼Œå¸®ä½ ç”Ÿæˆå®Œæ•´å‘¨æŠ¥</li>
<li>email-helper (https://email-helper.vercel.app/) AIå¸®ä½ å†™é‚®ä»¶</li>
<li>campbell (https://review.gobudapest.io/) AIç”Ÿæˆè¯„è¯­</li>
<li>penlope (https://penelopeai.com/) AIè¾…åŠ©markdownç¼–è¾‘å™¨</li>
</ul>
</li>
<li>å¤§çº²:
<ul>
<li>bearly (https://bearly.ai/) AIå¸®åŠ©ä½ é˜…è¯»ã€åˆ›ä½œï¼Œæ’°å†™ï¼Œæé«˜ä½ çš„å·¥ä½œæ•ˆç‡</li>
<li>humata (https://app.humata.ai/signin) åˆ©ç”¨AIæ¥åˆ†æè®ºæ–‡å†…å®¹</li>
</ul>
</li>
<li>docuchat (https://www.docuchat.io/) ä¸Šä¼ æ–‡æ¡£ï¼ŒAIå›ç­”å¯¹åº”çš„é—®é¢˜</li>
</ul>
<h2 id="logging-12"><a class="header" href="#logging-12">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221023 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹"><a class="header" href="#rust-è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹">Rust è¿ç®—ç¬¦é‡è½½å…­ä»¶è¶£äº‹</a></h1>
<p>åŸæ–‡: <a href="https://wishawa.github.io/posts/fun-rust-operators/">Six fun things to do with Rust operator overloading | Wisha Wanichwecharungruang</a></p>
<p><img src="https://wishawa.github.io/posts/fun-rust-operators/dot-product-pooh.jpg" alt="dot-product-pooh" /></p>
<h2 id="å¿«è¯‘-1"><a class="header" href="#å¿«è¯‘-1">å¿«è¯‘</a></h2>
<h3 id="c-è¾“å…¥å‡º"><a class="header" href="#c-è¾“å…¥å‡º">C++ è¾“å…¥/å‡º</a></h3>
<p>æƒ³æ›¿ä»£:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>stdin().read_line(&amp;mut buffer).unwrap();
println!(&quot;Hello I am {name}!!!&quot;);
<span class="boring">}</span></code></pre></pre>
<p>å¯ä»¥é‡è½½ cin å’Œ count ä¸Šçš„ç§»ä½è¿ç®—ç¬¦æ¥è¾¾æˆ:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>cin &gt;&gt; &amp;mut buffer;
cout &lt;&lt; &quot;Hello I am &quot; &lt;&lt; name &lt;&lt; &quot;!!!&quot; &lt;&lt; endl;
<span class="boring">}</span></code></pre></pre>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>çœ‹èµ·æ¥æ„ä¹‰æ›´åŠ ä¸æ˜äº†äº†?
)</p>
<h3 id="å¯å˜å‡½æ•°"><a class="header" href="#å¯å˜å‡½æ•°">å¯å˜å‡½æ•°</a></h3>
<p>æƒ³æ›¿ä»£</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>std::cmp::max(x, y);
[w, x, y, z].into_iter().max();
<span class="boring">}</span></code></pre></pre>
<p>å¯ä»¥ææˆ:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// max+ is like std::cmp::max but better
// it supports &gt;2 arguments
max+(x, y);
max+(w, x, y, z);
<span class="boring">}</span></code></pre></pre>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>å†…ç½®æ ‡å‡†åº“å¤ªä¸°å¯Œäº†...ç®€ç›´å¿…é¡»è¦æœ‰ä¸€ä¸ªä¿¡ä»°è¿‡ç¨‹</p>
<p>)</p>
<h3 id="æ›´ç®€æ´çš„æ„å»ºå™¨"><a class="header" href="#æ›´ç®€æ´çš„æ„å»ºå™¨">æ›´ç®€æ´çš„æ„å»ºå™¨</a></h3>
<p>è¿™æ˜¯ä¸€ä¸ªæ›´ä¸¥é‡çš„é—®é¢˜;
æ„å»ºå™¨æ¨¡å¼æœ‰æ—¶æ¶‰åŠå¤§é‡é‡å¤çš„æ–¹æ³•è°ƒç”¨;
ä»¥ warp web æ¡†æ¶çš„è¿™ç§ç”¨æ³•ä¸ºä¾‹:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let hi = warp::path(&quot;hello&quot;)
    .and(warp::path::param())
    .and(warp::header(&quot;user-agent&quot;))
    .map(|param: String, agent: String| {
        format!(&quot;Hello {}, whose agent is {}&quot;, param, agent)
    });
<span class="boring">}</span></code></pre></pre>
<p>å¦‚æœ API çœ‹èµ·æ¥åƒè¿™æ ·å‘¢?</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let hi = warp::path(&quot;hello&quot;)
	+	warp::path::param()
	+	warp::header(&quot;user-agent&quot;)
	&gt;&gt;	|param: String, agent: String| {
			format!(&quot;Hello {}, whose agent is {}&quot;, param, agent)
		};
<span class="boring">}</span></code></pre></pre>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>ç­‰ç­‰, è¿™å°±æ˜¯è¯­æ³•ç³–äº†å§?
)</p>
<h3 id="ä¸­ç¼€å‡½æ•°"><a class="header" href="#ä¸­ç¼€å‡½æ•°">ä¸­ç¼€å‡½æ•°</a></h3>
<p>æƒ³æ›¿ä»£:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>x.pow(y);
dot_product(a, b);
a.cross(b.cross(c).cross(d))
<span class="boring">}</span></code></pre></pre>
<p>æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆæ¥:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>x ^pow^ y;
a *dot* b;
a *cross* (b *cross* c *cross* d);
<span class="boring">}</span></code></pre></pre>
<p>å¾ˆå¤šäººå°±æƒ³è¦è¿™ä¸ª!</p>
<p>(<code>æ˜¯ä¹Ÿä¹:</code></p>
<p>å—¯å“¼? çš„ç¡®æµç•…å¾ˆå¤šå“ª...
)</p>
<h3 id="doublefish"><a class="header" href="#doublefish">Doublefish</a></h3>
<p>std::mem æä¾›æœ‰è¿™äº›åŠŸèƒ½:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>size_of::&lt;T&gt;();
size_of_val(&amp;value);
<span class="boring">}</span></code></pre></pre>
<p>Turbofish çˆ±å¥½è€…ä¼šå–œæ¬¢ size_of,
ä½†æ˜¯å¯¹ size_of_val æ²¡ä»€ä¹ˆæ„Ÿè§‰;
æ‰€ä»¥, æˆ‘ä»¬å¯ä»¥è‡ªè¡Œæ”¹é€ å‡ºæ–°ç‰ˆæœ¬çš„ size_of_val ,
çœ‹èµ·æ¥æ›´è±¡ turbofishy:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>size_of::&lt;T&gt;();
size_of_val&lt;&lt;&amp;value&gt;&gt;();
<span class="boring">}</span></code></pre></pre>
<h3 id="join-å’Œ-race"><a class="header" href="#join-å’Œ-race">Join å’Œ Race</a></h3>
<p>ç‰¹æ€§ç»„åˆå™¨å¯èƒ½å…·æœ‰çŸ­è·¯è¡Œä¸ºèƒ½åŠ›;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// quit if any of the 3 errors
(fut1, fut2, fut3).try_join().await;

// quit if any of the 3 succeeds
(fut4, fut5, fut6).race_ok().await;
<span class="boring">}</span></code></pre></pre>
<p>å¯ä»¥é€šè¿‡ &amp; å’Œ | åœ¨å½¢å¼ä¸Šè¡¨è¾¾å‡ºè¿™ç‚¹:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>(TryJoin &gt;&gt; fut1 &amp; fut2 &amp; fut3).await;
(RaceOk &gt;&gt; fut4 | fut5 | fut6).await;
<span class="boring">}</span></code></pre></pre>
<p>(<code>æ˜¯ä¹Ÿä¹</code>:</p>
<p>è¿™æ˜¯ä»å½¢å¼ä¸Šå’Œè¯­ä¹‰åŒæ­¥äº†.
)</p>
<h2 id="useful-links"><a class="header" href="#useful-links">Useful Links</a></h2>
<ul>
<li><a href="https://www.reddit.com/r/rust/comments/10golkq">Discuss this on Reddit</a></li>
<li><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=71da59351b0988249a69014e6b191353">Playground</a> containing the implementations behind some of the code shown here</li>
<li><a href="https://doc.rust-lang.org/std/ops/index.html">std::ops docs</a></li>
<li><a href="https://doc.rust-lang.org/reference/expressions.html#expression-precedence">Rust operators precedence table</a></li>
</ul>
<h2 id="refer-14"><a class="header" href="#refer-14">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-13"><a class="header" href="#logging-13">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>230212 ZQ v1 done</li>
<li>230125 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-è¶…è¶Šé¢å‘å¯¹è±¡ç¬¬1éƒ¨åˆ†"><a class="header" href="#rust-è¶…è¶Šé¢å‘å¯¹è±¡ç¬¬1éƒ¨åˆ†">Rust è¶…è¶Šé¢å‘å¯¹è±¡,ç¬¬1éƒ¨åˆ†</a></h1>
<p>åŸæ–‡: <a href="https://www.thecodedmessage.com/posts/oop-1-encapsulation/">Rust Is Beyond Object-Oriented, Part 1: Intro and Encapsulation :: The Coded Message</a></p>
<h2 id="å¿«è¯‘-2"><a class="header" href="#å¿«è¯‘-2">å¿«è¯‘</a></h2>
<p>æ˜¯çš„, Rust ä¸æ˜¯ä¸€ç§ OOP ç¼–ç¨‹è¯­è¨€;</p>
<p>Rust å¯èƒ½çœ‹èµ·æ¥åƒä¸€ç§ OOP ç¼–ç¨‹è¯­è¨€:
ç±»å‹å¯ä»¥å’Œ &quot;â€œmethods&quot; å…³è”,
å¯ä»¥æ˜¯ &quot;intrinsic&quot; çš„æˆ–æ˜¯é€šè¿‡ &quot;traits&quot;;
é€šå¸¸å¯ä»¥ä½¿ç”¨ C++ æˆ–æ˜¯ Java é£æ ¼çš„ OOP è¯­æ³•è°ƒç”¨æ–¹å¼:
map.insert(key, value) æˆ– foo.clone();
å°±åƒåœ¨ OOP è¯­è¨€ä¸­ä¸€æ ·,
æ­¤è¯­æ³•æ¶‰åŠæ”¾ç½®åœ¨è°ƒç”¨è€…çš„ <code>.</code> ä¸­, è€Œåœ¨è¢«è°ƒç”¨è€…ä¸­ç§°ä¸º self;</p>
<p>ä½†è¯·ä¸è¦è¯¯ä¼š: å°½ç®¡ Rust å¯èƒ½å€Ÿç”¨äº†ä¸€äº›æŠ€å·§/æœ¯è¯­å’Œè¯­æ³•,
ä½†æ˜¯, Rust å¹¶ä¸æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€;
é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§æ”¯æŸ±ç†å¿µ: å°è£…/å¤šæ€/ç»§æ‰¿;
å…¶ä¸­, Rust å®Œå…¨å¦å†³äº† ç»§æ‰¿,
å› æ­¤, æ°¸è¿œä¸å¯èƒ½æˆä¸º&quot;çœŸæ­£çš„&quot; OOP è¯­è¨€;
ä¸è¿‡, å³ä¾¿å¯¹äºå°è£…å’Œå¤šæ€, Rust å®ç°çš„æ–¹å¼ä¹Ÿå’Œ OOP è¯­è¨€ä¸åŒ --- ç¨åå°†å¯¹æ­¤è¿›è¡Œæ›´åŠ è¯¦ç»†çš„ä»‹ç»;</p>
<p>è¿™ä¸€åˆ‡éƒ½è®©å¾ˆå¤šç¨‹åºå‘˜æ„Ÿåˆ°æƒŠè®¶ä»¥åŠæ— æª;
æˆ‘åœ¨ Reddit ä¸Šçœ‹åˆ° Rust æ–°æ‰‹è¯¢é—®å¦‚ä½•æŒ‰å­—é¢æ„æ€å®ç° OOP è®¾è®¡æ¨¡å¼,
è¯•å›¾è·å¾—åƒâ€œshapesâ€ æˆ–æ˜¯ â€œvehiclesâ€è¿™ç§&quot;ç±»å±‚æ¬¡ç»“æ„&quot;,
ä½¿ç”¨ä½œä¸º&quot;Rust ç‰ˆæœ¬ç»§æ‰¿&quot;çš„ traits --- æ¢å¥è¯è¯´, 
è¯•å›¾è§£å†³ä»–ä»¬æƒ³è±¡ä¸­çš„é—®é¢˜, 
å› ä¸º, ä»–ä»¬è‡´åŠ›äº OOP æ–¹æ³•, å¹¶é€šè¿‡æ„å»ºäººä¸ºçš„ OOP ç¤ºä¾‹æ¥å°è¯•äº†è§£ä»–ä»¬æœŸå¾…çš„åº”è¯¥å­˜åœ¨çš„å¦å¤–ä¸€ä¸ªç‰ˆæœ¬ Rust;</p>
<p>è¿™å¯¹å¾ˆå¤šäººæ¥è¯´æ˜¯ä¸€ä¸ªç»Šè„šçŸ³;
æˆ‘ç»å¸¸çœ‹åˆ° Rust æ–°æ‰‹å’Œæ€€ç–‘è®ºè€…åœ¨äº’è”ç½‘ä¸Šæåˆ°&quot;ç¼ºä¹OOP&quot;,
è¿™æ˜¯ Rust éš¾ä»¥é€‚åº”/ä¸åˆé€‚ä»–ä»¬çš„å…³é”®åŸå› ,
ç”šè‡³æ˜¯ Rust æ°¸è¿œä¸ä¼šæµè¡Œçš„åŸå› ;
å¯¹äºé‚£äº›åœ¨ OOP çš„é«˜åº¦æ¥å­¦ä¹ ç¼–ç¨‹çš„äººæ¥è¯´ --- å½“åƒ C å’Œ ML é‚£æ ·å®Œç¾çš„è¯­è¨€éƒ½å¿…é¡»å˜æˆ Object-C å’Œ OCaML è¿™ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ --- 
å¯¹é OOP è¯­è¨€çš„å¤§é‡ç‚’ä½œæ„Ÿè§‰å°±ä¸å¤ªé¦™äº†;</p>
<p>è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªå®¹æ˜“çš„è°ƒæ•´;
å¦‚æ­¤å¤šçš„ç¨‹åºçŒ¿ä»¥æ˜ç¡®çš„é¢å‘å¯¹è±¡çš„æ–¹å¼å­¦ä¹ è½¯ä»¶è®¾è®¡å’Œä½“ç³»ç»“æ„;
æˆ‘çœ‹åˆ°ä¸€ä¸ªåˆä¸€ä¸ªé—®é¢˜,
ä¸€ä¸ªåˆçº§æˆ–ä¸­çº§ Rust ç¨‹åºå‘˜æƒ³è¦ä½œä¸€ä¸ªé¢å‘å¯¹è±¡çš„äº‹å„¿,
å¹¶æƒ³è¦ä¸€ä¸ªå­—é¢ä¸Šçš„ Rust ç­‰ä»·ç‰©;
é€šå¸¸, è¿™äº›éƒ½æ˜¯ç»å…¸çš„ &quot;XY é—®é¢˜&quot; (åŸæ–‡:<a href="https://xyproblem.info/">XY problem</a>, é…·å£³æœ‰ç²¾é‡‡çš„ç¿»è¯‘:<a href="https://coolshell.cn/articles/10804.html">X-Y Problem | é…· å£³ - CoolShell</a>)æ¡ˆä¾‹, ä»–ä»¬å¾ˆéš¾è°ƒå¤´ç”¨æ›´ Rusty çš„æ–¹å¼è§£å†³é—®é¢˜;</p>
<p>è¿™å…¶å®éƒ½ä¸æ˜¯ Rust çš„é”™;
ç­”æ¡ˆè¿˜æ˜¯è¦æˆ‘ä»¬å»è°ƒæ•´,
è™½ç„¶ä¸å®¹æ˜“;
æˆ‘ä»¬è¦æˆä¸ºæ›´å¥½çš„ç¨‹åºå‘˜, ä¸ä»…ç²¾é€šå¤šç§è¯­è¨€,
è€Œä¸”è¦ç²¾é€šä¸åŒçš„ç¼–ç¨‹èŒƒå¼;</p>
<p>è€Œä¸”, ä½œä¸ºä¸€ç§èŒƒå¼, OOP å®é™…ä¸Šéå¸¸å¹³åº¸ --- ä»¥è‡³äºæˆ‘å†™äº†ä¸€æ•´ç¯‡æ–‡ç« æ¥è§£é‡Šä¸ºä»€ä¹ˆ,
ä»¥åŠä¸ºä»€ä¹ˆ Rust çš„æ–¹æ³•æ›´å¥½;</p>
<h3 id="é¢å‘å¯¹è±¡æ€æƒ³"><a class="header" href="#é¢å‘å¯¹è±¡æ€æƒ³">é¢å‘å¯¹è±¡æ€æƒ³</a></h3>
<blockquote>
<p>OOP Ideology</p>
</blockquote>
<p>å—¯å“¼,å¥½è±¡æ˜ç™½äº†;
æˆ‘æ›¾ç»æ˜¯è‡ªå·±ä¸»åŠ¨å˜æˆ OOP ä¿¡å¾’çš„;
è¿˜è®°å¾—å½“å¹´æ˜¯å¦‚ä½•å‘æˆ‘ä»¬æ”¶è´¹çš„:
ä¸ä»…ä»…æ˜¯ä¸€å¥—ä»£ç ç»„ç»‡å®è·µ,æ›´åŠ æ˜¯ç¼–ç¨‹æ–¹é¢çš„ä¸€åœºé©å‘½;
OOP æ–¹æ³•è¢«è®¤ä¸ºæ›´ç›´è§‚,å°¤å…¶å¯¹éç¨‹åºå‘˜è€Œè¨€, å› ä¸ºæ›´åŠ ç¬¦åˆæˆ‘ä»¬å¯¹è‡ªç„¶ä¸–ç•Œçš„çœ‹æ³•;</p>
<p>å¯¹äºè¿™ç§è¥é”€çš„å…¸å‹ç¤ºä¾‹, ä»¥ä¸‹æ˜¯æµè¡Œæ‚å¿—(Byte Magazine, 1981å¹´)ä¸­å…³äº OOP ç¬¬ä¸€ç¯‡å…¬å¼€æ–‡ç« çš„æ‘˜å½•:</p>
<hr />
<blockquote>
<p>è®¸å¤šä¸çŸ¥é“è®¡ç®—æœºå¦‚ä½•å·¥ä½œçš„äººå‘ç° OOP æƒ³æ³•å¾ˆè‡ªç„¶;
ç›¸æ¯”ä¹‹ä¸‹, åè€Œæ˜¯å¾ˆå¤šæœ‰è®¡ç®—æœºç»éªŒçš„äººæœ€åˆè®¤ä¸º OOP ç³»ç»Ÿæœ‰äº›å¥‡æ€ª...</p>
</blockquote>
<hr />
<p>ä¸º OOP ä¹°å¸å¾ˆå®¹æ˜“;
å½“ç„¶, æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæºæ²¡æœ‰ä»»ä½•å­ç¨‹åºæˆ–æ˜¯å˜é‡ä¹‹ç±»çš„ä¸œè¥¿ --- æˆ–è€…,
å³ä¾¿æœ‰, æˆ‘ä»¬ä¹Ÿæ²¡æœ‰æ˜ç¡®çš„è€ƒè™‘å®ƒä»¬!
ä½†æ˜¯, ç”Ÿæ´»ä¸­ç¡®å®æœ‰æˆ‘ä»¬å¯ä»¥ä¸ä¹‹äº¤äº’çš„å¯¹è±¡, æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½;
æ€ä¹ˆå¯èƒ½ä¸ç›´è§‚å‘¢?</p>
<p>è¿™æ˜¯éå¸¸å¼•äººæ³¨ç›®çš„ä¼ªè®¤çŸ¥ç§‘å­¦,è½»ç ”ç©¶,é‡è¯´æœåŠ›;
è¿™äº› object/å¯¹è±¡ å¯ä»¥è®¤ä¸ºæ˜¯ &quot;agents&quot;, å‡ ä¹è±¡äººä¸€æ ·,
æ‰€ä»¥, ä½ å¯ä»¥åˆ©ç”¨ä½ çš„ç¤¾äº¤æŠ€èƒ½æ¥å¤„ç†å®ƒ,
è€Œä¸ä»…ä»…æ˜¯åˆ†ææ€§æ€ç»´
(å«‘ä»‹æ„ object/å¯¹è±¡ çš„è¡Œä¸ºä¸€ç‚¹å„¿ä¹Ÿä¸åƒäºº,è€Œä¸”,å®é™…ä¸Šåœ¨æŸç§ç¨‹åºä¸Šæ›´åŠ ç¬¨,
è¿™æ—¶ä»ç„¶éœ€è¦åˆ†ææ€ç»´);
æˆ–æ˜¯, ä½ å¯ä»¥å°†å¯¹è±¡å’Œç±»è§†ä¸ºå½¢å¼ä¸–ç•Œæœ¬èº«çš„è¿‘ä¹æŸæ‹‰å›¾å¼çš„è¡¨è¾¾, ä½¿å…¶åœ¨å“²å­¦ä¸Šå¼•äººæ³¨ç›®;</p>
<p>å“¦, å½“å¹´æˆ‘æ˜¯å¦‚ä½•æ¥å—çš„? å°¤å…¶æ˜¯åœ¨è‚†æ„é²è½çš„é’å¹´æ—¶æœŸï¼›
æˆ‘ä¸ªäººå¸æ”¶äº† OOP å’ŒæŸæ‹‰å›¾ä¹‹é—´çš„è”ç³»;
æ·±å…¥ç ”ç©¶äº†å…ƒå¯¹è±¡åè®®, 
ä»¥åŠåœ¨ Smalltalk ä¸­æ¯ä¸ªç±»éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå…ƒç±»çš„äº‹å®;
Smalltalk ä»£ç å…ƒç±»çš„æ¦‚å¿µå¯¹æˆ‘æ¥è¯´å‡ ä¹æ˜¯ç¥ç§˜çš„,
å› ä¸º, ä»»ä½•å€¼éƒ½å¯ä»¥ç»„ç»‡åœ¨åŒä¸€å±‚æ¬¡ç»“æ„ä¸­,
å¯¹è±¡åè€Œä½äºå…¶æ ¹éƒ¨;</p>
<p>æˆ‘èµ¢å¾—åœ¨ä¸€æœ¬ä¹¦ä¸­è¯»åˆ° OOP é£æ ¼çš„å¤šæ€ä½¿å¾— if-else è¯­å¥å˜å¾—å¤šä½™,
å› æ­¤,æˆ‘ä»¬åº”è¯¥åŠªåŠ›æœ€ç»ˆåªä½¿ç”¨ OOP é£æ ¼çš„å¤šæ€;
ä¸çŸ¥ä½•æ•…, è¿™æ²¡è®©æˆ‘å¤±æœ›, è¿™è®©æˆ‘å½“æ—¶å¾ˆå…´å¥‹;
è€Œä¸”,å½“æˆ‘äº†è§£åˆ° Smalltalk å®é™…æ­£æ˜¯è¿™æ ·ä½œçš„,
å°±æ›´åŠ å…´å¥‹äº†
(å¦‚æœä½ å¿½ç•¥ä¼˜åŒ–æ‰æŸäº›æŠ½è±¡çš„å®ç°ç»†èŠ‚):
åœ¨ Smalltalk ä¸­, if-than-else çš„æ¦‚å¿µæ˜¯é€šè¿‡ ifTrue: å’Œ ifElse: ä»¥åŠ ifTrue:ifFalse: ç­‰æ–¹æ³•å®ç°çš„,
è¿˜å¾—é…å¥—å•å®ä¾‹çš„ True å’Œ False ç±»,ä»¥åŠå…¶å…¨å±€å¯¹è±¡ true å’Œ false;</p>
<p>(è¯‘æŒ‰: å…‰æ˜¯å¬èµ·æ¥å°±éå¸¸,å—¯å“¼? è¿™ä¸æ˜¯ä¸€æ ·çš„ä¸œè¥¿å˜›?)</p>
<p>ä½œä¸ºä¸€åæ›´æˆç†Ÿçš„ç¨‹åºå‘˜,æ¥è§¦åˆ°æ„è¯†å½¢æ€è¾ƒå°‘çš„ C++ OOP ä»¥åŠ Haskell ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹æ›¿ä»£æ–¹æ¡ˆå,
æˆ‘çš„ç«‹åœºå°±è½¯åŒ–äº†, ç„¶å, å‘ç”Ÿäº†å·¨å¤§è½¬å˜, ç°åœ¨æˆ‘å‡ ä¹ä¸å†æ˜¯ OOP çš„è„‘æ®‹ç²‰,
å°¤å…¶æ˜¯å½“å…¶æœ€ä½³æ€æƒ³å·²ç»åœ¨ Haskell å’Œ Rust ä¸­è¿›è¡Œäº†æ›´æ–°ç»¼åˆ;
æˆ‘å·²æ„è¯†åˆ°è¿™ç§å¯¹æ–°ç¨‹åºå‘˜çš„ç‚’ä½œå¯¹äºä»»ä½•èŒƒå¼éƒ½æ˜¯å…¸å‹çš„(FUD ~ Fear/Uncertainty/Doubt, æ„ä¸º:æ‡¼ã€æƒ‘ã€ç–‘, ç°åœ¨ç»Ÿç§°ä¸º PUA æŠ€æœ¯);
å¯¹äºæ–°æ‰‹æ¥è¯´, ä»»ä½•æ–°ç¼–ç¨‹èŒƒå¼éƒ½æ¥äº†ä½¿ç”¨ä¸åŒèŒƒå¼çš„èµ„æ·±ç¨‹åºå‘˜æ›´åŠ ç›´è§‚;
å‡½æ•°å¼ç¼–ç¨‹ä¹Ÿæ˜¯å¦‚æ­¤;
ç”šè‡³å¯¹äº Rust ä¹Ÿæœ‰åŒæ ·çš„è¯´æ³•;
å…¶å®å’ŒèŒƒå¼æ˜¯å¦æ›´å¥½å¹¶æ— å¤ªå¤§çš„å…³ç³»;</p>
<p>è‡³äº if-else è¯­å¥å®Œå…¨ç”¨å¤šæ€æ¥æ›¿æ¢,
å¥½å§, å¾ˆå®¹æ˜“æƒ³å‡ºä¸€ç»„å›¾çµå®Œå¤‡çš„å…ƒè¯­;
ä½ ä¸é‚•ä¸ºç”¨å¤šæ€æ¥æ¨¡æ‹Ÿ if è¯­å¥ä»¥åŠ true;
ä½ è¿˜å¯ä»¥æ¨¡æ‹Ÿå¸¦æœ‰é€’å½’çš„ shile å¾ªç¯,
åˆæˆ–æ˜¯å¸¦æœ‰ while å¾ªç¯å’Œå †æ ˆçš„é€’å½’ï¼›
ä½ å¯ä»¥ä½¿ç”¨ while å¾ªç¯æ¨¡æ‹Ÿ if è¯­å¥;</p>
<p>è¿™äº›äº‹å®éƒ½ä¸èƒ½ä½¿ç”¨è¿™ç§æ›¿ä»£æˆä¸ºä¸€ä¸ªå¥½ä¸»æ„;
å¯¹äºä¸åŒçš„æƒ…å†µ, ç¼–ç¨‹è¯­è¨€ä¸­å­˜åœ¨ä¸åŒçš„ç‰¹æ€§,
é€‚åº¦çš„å¯¹åº”ä½¿ç”¨, å®é™…ä¸ŠåŸæœ¬å°±æ˜¯ä¸€ä»¶å¥½äº‹æƒ…;</p>
<p>æ¯•ç«Ÿ,ç¼–ç¨‹çš„ç›®çš„æ˜¯ç¼–å†™ç¨‹åº, è€Œä¸æ˜¯è¯æ˜å›¾çµå®Œå¤‡æ€§/å“²å­¦ç ”ç©¶åˆæˆ–æ˜¯å†™æ¦‚å¿µè¯—;</p>
<p>(è¯‘æŒ‰: ä¸è¿‡, ç°å®ä¸­çš„ç¡®æœ‰è¿™ç±»ç ”ç©¶åƒ§, ä¸»è¦ç¤¾ä¼šè´¡çŒ®å°±æ˜¯åˆ¶é€ æ–°æ¦‚å¿µå“ª...)</p>
<h3 id="å®ç”¨æ€§"><a class="header" href="#å®ç”¨æ€§">å®ç”¨æ€§</a></h3>
<blockquote>
<p>Practicality</p>
</blockquote>
<p>å› æ­¤, åœ¨è¿™ä¸ªç³»åˆ—æ–‡ç« ä¸­, æˆ‘æ‰“ç®—ä»å®é™…è§’åº¦è¯„ä¼° OOP,
ä½œä¸ºä¸€åç¨‹åºçŒ¿, åœ¨ä½¿ç¼–ç¨‹è¯­è¨€åœ¨è®¤çŸ¥ä¸Šæ›´æ˜“äºç®¡ç†æˆ–æ˜¯æ›´å®¹æ˜“è¿›è¡ŒæŠ½è±¡æ–¹é¢å…·æœ‰ç»éªŒ;
æˆ‘å°†æ ¹æ®æˆ‘è§£å†³å®é™…ç¼–ç¨‹é—®é¢˜çš„ç»éªŒæ¥è¿›è¡Œè¯„ä¼° --- æˆ‘è®¤ä¸ºè¿™æ˜¯ç§ä¸å¥½çš„è¿¹è±¡,
å¾ˆå¤š OOP æŠ½è±¡å¦‚ä½•å·¥ä½œçš„æ¡ˆä¾‹åªæœ‰åœ¨çœŸæ­£é«˜çº§çš„ç¨‹åºä¸­æ‰æœ‰æ„ä¹‰,
æˆ–æ˜¯å…³äºåŠ¨ç‰©å›­ä¸­ä¸åŒç±»å‹çš„å½¢çŠ¶æˆ–æ˜¯åŠ¨ç‰©çš„äººä¸ºä¾‹å­æ‰æœ‰æ„ä¹‰;</p>
<p>å’Œå¤§å¤šæ•° OOP ä»‹ç»ä¸åŒ, æˆ‘ä¸ä¼šå…³æ³¨ OOP å’Œ OOPã€€ä¹‹å‰çš„ç¼–ç¨‹è¯­è¨€çš„æ¯”è¾ƒï¼›
ç›¸å, æˆ‘å°†ä¸»è¦å’Œ Rust è¿›è¡Œæ¯”è¾ƒ,
Rust ä» OOP ä¸­æ±²å–äº†å¾ˆå¤šå¥½æƒ³æ³•,
ä¹Ÿè®¸è¿˜ä¼šå’Œå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€(æ¯”å¦‚ Haskell)è¿›è¡Œæ¯”è¾ƒ;
è¿™äº›ç¼–ç¨‹è¯­è¨€é‡‡çº³äº† OOP çš„ä¸€äº›å¥½æƒ³æ³•,
ä½†æ˜¯, éƒ½ä»¥ä¸€ç§ä¿®å¤ç¼ºé™·å¹¶è¿›ä¸€æ­¥è¶…è¶Šçš„å§¿æ€, å¯¹åˆç†çš„ OOP è¿›è¡Œäº†æ”¹é€ ;</p>
<p>æˆ‘å°†æ ¹æ®é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰ä¸ªä¼ ç»Ÿæ”¯æŸ±: å°è£…/å¤šæ€å’Œç»§æ‰¿æ¥ç»„ç»‡è¿™ç§æ¯”è¾ƒ,
ç¬¬ä¸€ç¯‡å°†é‡ç‚¹æ”¾åœ¨å°è£…ä¸Š;
å¯¹äºæ¯ä¸ªæ”¯æŸ±, å°†è®¨è®º OOP å¦‚ä½•å®šä¹‰, ä»¥åŠåœ¨ OOP ä¸–ç•Œä¹‹å¤–å­˜åœ¨å“ªäº›ç­‰ä»·ç‰©æˆ–æ˜¯æ›¿ä»£å“,
ä»¥åŠè¿™äº›åœ¨å®é™…æ˜“ç”¨æ€§å’Œç¼–ç¨‹èƒ½åŠ›æ–¹é¢è¿›è¡Œå¯¹æ¯”;</p>
<p>ä¸è¿‡,åœ¨å¼€å§‹ä¹‹å‰,æƒ³å…ˆè°ˆè°ˆä¸€ä¸ªç”¨ä¾‹, è¿™ä¸ªç”¨ä¾‹æ›¾é¢ è¦†è¿‡å¤§éƒ¨åˆ†å†…å®¹: å›¾å½¢ç”¨æˆ·ç•Œé¢æˆ–æ˜¯è¯´ GUI;
å°¤å…¶æ˜¯åœ¨æµè§ˆå™¨æ—¶ä»£ä¹‹å‰,
ç¼–å†™ GUI ç¨‹åºä»¥ä¾¿ç›´æ¥åœ¨å°å¼æœº(æˆ–ç¬”è®°æœ¬ç”µè„‘)ä¸Šè¿è¡Œ,
æ˜¯ç¨‹åºå‘˜å·¥ä½œçš„ä¸»è¦éƒ¨åˆ†;
OOP çš„è®¸å¤šæ—©æœŸå¼€å‘æ˜¯å’Œ Xerox PARC çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ç ”ç©¶ä¸€èµ·å®Œæˆçš„,
OOP éå¸¸é€‚åˆè¯¥ç”¨ä¾‹;
å› æ­¤, å€¼å¾—ä¼˜å…ˆè€ƒè™‘ GUI;</p>
<p>ä¾‹å¦‚, äººä»¬é€šå¸¸ä¼šåœ¨å…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸­æ¨¡æ‹Ÿ OOP;
GTK+ å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­,
å°† OOP å®ç°ä¸º C ä¸­ä¸€ç³»åˆ—å®å’Œçº¦å®š;
è¿™æ ·ä½œçš„åŸå› æœ‰å¾ˆå¤š,åŒ…æ‹¬ç†Ÿæ‚‰ OOP è®¾è®¡å’Œå¸Œæœ›åˆ›å»ºæŸç§è¿è¡Œæ—¶çš„å¤šæ€;
ä½†æ˜¯,æ ¹æ®æˆ‘çš„ç»éªŒ, è¿™åœ¨å®ç° GUI æ¡†æ¶æ—¶æœ€ä¸ºå¸¸è§;</p>
<p>åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­, ä¸»è¦å…³æ³¨å°† OOP åº”ç”¨åœ¨å…¶å®ƒç”¨é€”çš„åœºæ™¯,
ä½†æ˜¯,ä¹Ÿä¼šé…Œæƒ…è®¨è®º GUI;
åœ¨è¿™ä¸ªä»‹ç»æ€§éƒ¨, æˆ‘ä»…æŒ‡å‡º GUI æ¡†æ¶åœ¨ä¼ ç»Ÿ OOP è®¾è®¡å’Œç¼–ç¨‹è¯­è¨€ä¹‹å¤–æ˜¾ç„¶æ˜¯å¯èƒ½çš„,
ç”šè‡³äºåœ¨ Rust ä¸­ä¹Ÿæ˜¯å¦‚æ­¤;
æœ‰æ—¶, GUI å¯ä»¥é€šè¿‡å®Œå…¨ä¸åŒçš„æœºåˆ¶å·¥ä½œ,
ä¾‹å¦‚ä¸»è¦åœ¨ Haskell ä¸­å¼€åˆ›æ€§çš„åŠŸèƒ½å“åº”å¼äº†æ¸”çš„å“ª, æˆ‘ä¸ªäººæ›´åŠ å–œæ¬¢ä¼ ç»Ÿçš„åŸºäº OOP çš„ç¼–ç¨‹,
è€Œä¼ ç»Ÿçš„ OOP åŠŸèƒ½å¯¹æ­¤å´å¹¶æ²¡æœ‰ä»€ä¹ˆå¸®åŠ©;</p>
<p>ç°åœ¨, äº‹ä¸å®œè¿Ÿ, è®©æˆ‘ä»¬ä»å®ç”¨è§’åº¦, é€ä¸€æ¯”è¾ƒ OOP å’Œ Rust ä»¥åŠå…¶åå„ç§ OOP ç¼–ç¨‹è¯­è¨€;
å¯¹äºé¦–ç¯‡æ–‡ç« , å…¶ä½™éƒ¨åˆ†å°†é‡ç‚¹å…³æ³¨å°è£…;</p>
<h3 id="ç¬¬ä¸€æ”¯æŸ±-å°è£…-encapsulation"><a class="header" href="#ç¬¬ä¸€æ”¯æŸ±-å°è£…-encapsulation">ç¬¬ä¸€æ”¯æŸ±: å°è£…/ Encapsulation</a></h3>
<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­, å°è£…å’Œç±»çš„æ¦‚å¿µå¯†åˆ‡ç›¸å…³,
ç±»æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„åŸºæœ¬æŠ½è±¡å±‚;
æ¯ä¸ªç±»éƒ½åŒ…å«ä¸€äº›è®°å½•æ•°æ®çš„æ ¼å¼/å¸ƒå±€,
å³, æ¯ä¸ªå®ä¾‹åŒ…å«ä¸€å®šæ•°é‡å­—æ®µçš„æ•°æ®ç»“æ„;
è®°å½•ç±»å‹çš„å•ä¸ªå®ä¾‹ç§°ä¸º&quot;å¯¹è±¡&quot;;
æ¯ä¸ªç±»è¿˜åŒ…å«å’Œè¯¥è®°å½•ç±»å‹ç´§å¯†é…å¯¹çš„ä»£ç ,
ç»„ç»‡æˆç§°ä¸ºæ–¹æ³•çš„è¿‡ç¨‹;
æ ¸å¿ƒæƒ³æ³•æ˜¯, æ‰€æœ‰å­—æ®µéƒ½åªèƒ½ä»æ–¹æ³•å†…éƒ¨è®¿é—®,
æ— è®ºæ˜¯é€šè¿‡ OOP æ„è¯†å½¢æ€çš„çº¦å®šè¿˜æ˜¯é€šè¿‡ç¼–ç¨‹è¯­è¨€çš„å¼ºåˆ¶è§„åˆ™;</p>
<p>è¿™é‡Œçš„åŸºæœ¬å¥½å¤„æ˜¯ æ¥å£/interface ,ä¹Ÿå°±æ˜¯ä»£ç å¦‚ä½•å’Œå…¶å®ƒä»£ç äº¤äº’,
æˆ–è€…è¯´ä½ å¿…é¡»çŸ¥é“ä»€ä¹ˆæ‰èƒ½ä½¿ç”¨ä»£ç ,
æ¯” å®ç°/implementation è¦ç®€å•çš„å¤š, å®ç°/implementation æ˜¯ä»£ç å¦‚ä½•å®é™…å®Œæˆ çš„æ›´åŠ æµç•…å˜åŒ–çš„ç»†èŠ‚, å…¶åŸæœ¬çš„å·¥ä½œ;</p>
<p>ä½†æ˜¯, è™½ç„¶è®¸å¤šç¼–ç¨‹è¯­è¨€éƒ½æœ‰è¿™æ ·çš„æŠ½è±¡;
ä»»ä½•è¶…è¿‡åå‡ è¡Œçš„ç¨‹åºå°±æœ‰å¤ªå¤šçš„éƒ¨åˆ†, æ— æ³•ä¸€æ¬¡å…¨éƒ¨åæ˜ åˆ°ä½ çš„å¤§è„‘ä¸­,
å› æ­¤,æ‰€æœ‰ç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½æœ‰å°†ç¨‹åºåˆ’åˆ†ä¸ºæ›´å°ç»„ä»¶çš„æ–¹æ³•,
ä½œä¸ºç®¡ç†å¤æ‚æ€§çš„ä¸€ç§æ–¹å¼,
æ¥å£/interface æ€»æ˜¯æ¯” å®ç°/implementation æ›´åŠ ç®€å•,
æ— è®ºæ˜¯ç”±ç¼–ç¨‹è¯­è¨€å¼ºåˆ¶æ‰§è¡Œ, è¿˜æ˜¯&quot;è£èª‰ç³»ç»Ÿ&quot;çš„é—®é¢˜;
å› æ­¤, ä»å¹¿ä¹‰ä¸Šç›, æ‰€æœ‰ç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½æœ‰æŸç§ç‰ˆæœ¬çš„å°è£…;</p>
<p>ä¸€ç§ç®€å•çš„å°è£…å½¢å¼ --- å¤ªå¤šæ•°é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€å°†å…¶ä½œä¸ºç±»ä¸­çš„ä¸€å±‚æ¥ç»´æŠ¤ --- å°±æ˜¯è¿‡ç¨‹,
ä¹Ÿç§°ä¸ºå‡½æ•°/å­ä¾‹ç¨‹æˆ–æ˜¯(OOP ä¸­çš„ç§°å‘¼)æ–¹æ³•;
ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸å…è®¸ä»»ä½•ä»£ç è¡Œç›´æ¥è·³è½¬åˆ°ä»»ä½•å…¶å®ƒä»£ç è¡Œ,
è€Œæ˜¯å€¾å‘å°†ä»£ç å—ç»„åˆä¸ºè¿‡ç¨‹,
ç„¶å, ä½ å¯ä»¥åœ¨ä¸å½±å“å¤–éƒ¨ä»£ç çš„æƒ…å†µä¸‹,
æ›´æ”¹è¿‡ç¨‹çš„å†…å®¹, å¹¶æ›´æ”¹å¤–éƒ¨ä»£ç , åŒæ ·åœ¨ä¸å½±å“ç¨‹åºçš„æƒ…å†µä¸‹,
å˜¦éƒ½éµå¾ªç›¸åŒçš„ æ¥å£/interface å’Œ å¥‘çº¦/contract;</p>
<p>å¥‘çº¦/contract é€šå¸¸è‡³å°‘éƒ¨åˆ†æ˜¯äººç±»å±‚é¢çš„çº¦å®š;
ä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆå¯ä»¥é˜»æ­¢ä½ é‡‡ç”¨ä¸€ä¸ªåº”è¯¥å¤„ç†ä¸€äº›æ•°æ®çš„è¿‡ç¨‹,
è€Œæ˜¯è®©å…¶æ— é™å¾ªç¯æˆ–æ˜¯ä»¤ç¨‹åºå´©æºƒ;
ä½†æ˜¯, å…¶ä¸­çš„ä¸€äº›, ä¾‹å¦‚è¿‡ç¨‹å’Œç¨‹åºå…¶ä½™éƒ¨åˆ†çš„åˆ†ç¦», 
ä»¥åŠåœ¨è®¸å¤šæƒ…å†µä¸­, å…è®¸åœ¨è°ƒç”¨ä¸­æ¥å—å’Œè¿”å›çš„å€¼çš„æ•°é‡å’Œç±»å‹,
å°†ç”±ç¼–ç¨‹è¯­è¨€å¼ºåˆ¶æ‰§è¡Œ;</p>
<p>ä¾‹å¦‚,åœ¨è¿‡ç¨‹å†…éƒ¨å£°æ˜çš„å˜é‡é€šå¸¸æ˜¯å±€éƒ¨çš„,
è€Œä¸”æ²¡æœ‰åŠæ³•åœ¨è¿‡ç¨‹å¤–éƒ¨å¼•ç”¨;
è¾“å…¥å’Œè¾“å‡ºé€šå¸¸å§´åœ¨è¿‡ç¨‹é¡¶éƒ¨çš„ç­¾åä¸­;
é€šå¸¸, å¤–éƒ¨ä»£ç åªèƒ½åœ¨ç¬¬ä¸€è¡Œè¿›å…¥è¿‡ç¨‹, è€Œä¸èƒ½åœ¨ä¸­é€”çš„ä»»æ„ä¸€è¡Œè¿›å…¥;
æŸäº›ç¼–ç¨‹è¯­è¨€(åŒ…æ‹¬ Rust)ä¸­, è¿‡ç¨‹ç”šè‡³äºå¯ä»¥åŒ…å«å…¶å®ƒè¿‡ç¨‹,
è¿™äº›è¿‡ç¨‹åªèƒ½åœ¨å¤–éƒ¨è¿‡ç¨‹ä¸­è°ƒç”¨;</p>
<p>ä½†æ˜¯,å½“ç„¶ç°ä»£ç¨‹åºé€šå¸¸æ¯”å°‘æ•°ç”¨é”¥ç¨‹åºæ›´å¤æ‚;
å› æ­¤,ç°ä»£ç¼–ç¨‹è¯­è¨€(å†æ¬¡å¼ºè°ƒ: <strong>&quot;ç°ä»£&quot;</strong> ä¸€è¯åœ¨è¿™é‡Œçš„ä½¿ç”¨éå¸¸å®½æ¾)å…·æœ‰å¦ä¸€å±‚å°è£…æŠ½è±¡:æ¨¡å—;</p>
<p>æ¨¡å—é€šå¸¸åŒ…å«ä¸€ç»„è¿‡ç¨‹,æœ‰äº›å¯ä»¥ä»å¤–éƒ¨è®¿é—®, æœ‰äº›åˆ™ä¸èƒ½;
åœ¨é duck ç±»å‹è¯­è¨€ä¸­, é€šå¸¸è¦å®šä¹‰å¾ˆå¤šèšåˆç±»å‹, åŒæ ·æ˜¯æœ‰äº›å¯ä»¥ä»å¤–éƒ¨è®¿é—®,æœ‰äº›ä¸è¡Œ;
é€šå¸¸ç”šè‡³äºå¯ä»¥æŠ½è±¡çš„å…¬å¼€è¿™äº›ç±»å‹,å› æ­¤,ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†å¯ä»¥è®¿é—®ç±»å‹çš„å®åœ¨,ä½†æ˜¯ä¸èƒ½è®¿é—®è®°å½•å­—æ®µ,
ç”šè‡³äºä¸èƒ½è®¿é—®æ˜¯è®°å½•ç±»å‹çš„äº‹å®;
ç”šè‡³äº C åœ¨å…¶æ¨¡å—ç³»ç»Ÿä¸­ä¹Ÿæœ‰è¿™ç§èƒ½åŠ› --- åè€Œæ˜¯ C++ æ²¡æœ‰å¼•å…¥è¿™ç‚¹, åªæ˜¯è¿½åŠ äº†ä¸€ä¸ªé¢å¤–çš„/æ­£äº¤çº§åˆ«çš„é€å­—æ®µè®¿é—®æ§åˆ¶;</p>
<p>ä»åŠ¡å®çš„è§’åº¦æ¥çœ‹,åŸºäºç±»çš„å°è£…å¹¶ä¸æ˜¯ OOP çš„æŸä¸ªç‰¹æ®Šè§è§£,
è€Œæ˜¯ä¸€ç§ä¸“é—¨çš„---æˆ–æ˜¯æ›´ç¡®åˆ‡çš„è¯´, ä¸¥æ ¼é™åˆ¶çš„---æ¨¡å—å½¢å¼;
åœ¨ OOP ç¼–ç¨‹è¯­è¨€ä¸­, æˆ‘ä»¬æœ‰ç±»çš„æ¦‚å¿µ, æ˜¯ä¸€ç§ç‰¹æ®Šå½¢å¼çš„æ¨¡å—
(æœ‰æ—¶æ˜¯å”¯ä¸€å—æ”¯æŒçš„å½¢å¼, æœ‰æ—¶ç”šè‡³äºåœ¨å®Œå…¨ä¸åŒçš„/æ›´åŠ ä¼ ç»Ÿçš„æ¨¡å—æ¦‚å¿µä¸‹åˆ†å±‚,ä»¥ä¾¿å¢åŠ æ¦‚å¿µä¸Šçš„æ··æ·†);
åªæ˜¯,å¯¹äºä¸€ä¸ª&quot;ç±»&quot;,é€šå¸¸åªèƒ½å®šä¹‰ä¸€ä¸ªä¸»è¦ç±»å‹, å’Œæ¨¡å—æœ¬èº«å…±äº«ä¸€ä¸ªåç§°,
è€Œä¸”,è¯¥ç±»å‹çš„å­—æ®µè¢«ç»™äºˆç‰¹æ®Šä¿æŠ¤, ä»¥ä¾¿é˜²æ­¢ç±»å¤–ä»£ç çš„è®¿é—®;</p>
<p>å½“ç„¶, ç±»å’Œæ¨¡å—ä¹‹é—´è¿˜æœ‰å…¶å®ƒåŒºåˆ«,ä½†æ˜¯,è¿™äº›å’Œå…¶æ”¯æŸ±æœ‰å…³, æˆ‘ä»¬ç¨åå°†è®ºåŠ;
ç°åœ¨æˆ‘ä»¬åªè®¨è®ºå’Œå°è£…ç›¸å…³çš„ &quot;ç±»&quot; æ¦‚å¿µ --- å…¶ä¸­, ç±»åªæ˜¯å…·æœ‰ä¸€ç§ç‰¹æƒæŠ½è±¡ç±»å‹çš„ç‰¹æ®Šæ¨¡å—;</p>
<p>è¿™æ˜¯ä¸€ç§ç¼–å†™æ¨¡å—çš„åˆç†æ–¹å¼,ä½†æ˜¯, å¹¶ä¸åƒé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³æ‰€è¡¨æ˜çš„é‚£æ ·ç‰¹åˆ«
(ç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬è®¨è®ºå…¶å®ƒæ”¯æŸ±çš„æ›¿ä»£æ–¹æ¡ˆæ—¶,ä½†æ˜¯,åŒæ ·ç¨åå†è®¨è®º);
åœ¨æŸäº›æƒ…å†µä¸­,æ¨¡å—æ²¡æœ‰å®šä¹‰ä»»ä½•è®°å½•ç±»å‹,è¿™åœ¨ Java ç­‰ç¼–ç¨‹è¯­è¨€ä¸­å¾ˆå°´å°¬,
æ— è®ºå¦‚ä½•ä½ éƒ½å¿…é¡»å®šä¹‰ä¸€ä¸ªç©ºè®°å½•ç±»å‹, å¹¶ä»ç„¶åˆ›å»ºä¸€ä¸ª &quot;ç±»&quot;;
åœ¨æŸäº›æƒ…å†µä¸­, ä¸€ä¸ªæ¨¡å—å®šä¹‰äº†å¤šä¸ªå¯ä»¥å…¬å¼€è®¿é—®çš„ç±»å‹,
è¿™äº›ç±»å‹ç´§å¯†çš„çº ç¼ åœ¨ä¸€èµ· --- å¹¶ä¸” OOP é£æ ¼é¼“åŠ±ä½ åœ¨è¿™äº›ç±»å‹ä¹‹é—´è¿›è¡Œå°è£…, è¿™æ ·ä¸€æ¥æ›´å¤šçš„é˜»ç¢è€Œä¸æ˜¯å¸®åŠ©;</p>
<p>ä»æ ¹æœ¬ä¸Šè¯´, èƒ½å¤Ÿå¯¹å…¶å®ƒæ¨¡å—éšè—è®°å½•çš„å­—æ®µå¾ˆé‡è¦, è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ C ä¹Ÿæ”¯æŒ;
ç”šè‡³å¯¹äºåœ¨ Rust ä¸­å®ç°å¯¹ä¸å®‰å…¨ç‰¹æ€§çš„å®‰å…¨æŠ½è±¡æ˜¯å¿…ä¸å¯å°‘çš„,
ä¾‹å¦‚é›†åˆ/collections, å…¶ä¸­åŸå§‹æŒ‡é’ˆå’Œä¸€åŒè®°å½•çš„å…¶å®ƒå­—æ®µç›¸ç»“åˆå…·æœ‰ä¸å˜é‡;
ä½†æ˜¯, è¿™å¯¹ OOP æ¥è¯´å¹¶ä¸é™Œç”Ÿ,è€Œä¸”, è¿™å¹¶ä¸æ˜¯æ¯ç§å¯èƒ½ç±»å‹çš„æœ€ä½³é€‰æ‹©;</p>
<p>ä½œä¸ºè¿™ç‚¹çš„è¯æ®,åœ¨ Java å’Œ Smalltalk ä¸­,
åœ¨è¾ƒå°ç¨‹åº¦ä¸Šç”šè‡³åœ¨ C++ æˆ–æ˜¯ Python ä¸­,
åšæŒæ¯ä¸€ç§ç±»å‹çš„å°è£…é£æ ¼æ„å‘³ç€ä½ å¯ä»¥è·å¾—è¿™äº›æ ·æ¿æ–¹æ³•,
æ¯”å¦‚è¯´ setFoo å’Œ getFoo;
è¿™äº›æ–¹æ³•ä»€ä¹ˆéƒ½ä¸ä½œ,åªæ˜¯å……å½“ä¸€äº›æœ¬è´¨ä¸Šæ˜¯å“‘è®°å½•ç±»å‹çš„å­—æ®µè®¿é—®å™¨;
ä»ç†è®ºä¸Šè¯´, å¦‚æœä½ æƒ³æ›´æ”¹è®¾ç½®æˆ–æ˜¯è¯»å–è¿™äº›å­—æ®µæ—¶å‘ç”Ÿçš„äº‹æƒ…,
è¿™ä¼šæœ‰æ‰€å¸®åŠ©,å¾—æ˜¯ä¸æ˜¯, å®é™…ä¸Š, è¿™åªæ˜¯åŸå§‹å­—æ®µè®¿é—®å™¨, æœ¬è´¨ä¸Šå°±æ˜¯ å¥‘çº¦/contract çš„ä¸€éƒ¨åˆ†;
ä¾‹å¦‚, å¦‚æœå¥¹ä»¬æ”¹ä¸ºè¿›è¡Œç½‘ç»œè°ƒç”¨è€Œä¸æ˜¯ä»…ä»…è¿”å›ä¸€ä¸ªå€¼,
é‚£ä¹ˆå¯¹äºè¿™ç§ç®€å•å‘½åçš„æ–¹æ³•, å°†å¼ºçƒˆè§¦å‘æƒŠå–œåŸåˆ™:</p>
<p>è¯´èµ·æ¥è¦ç®€å•çš„å¤š:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Point {
    pub x: f64,
    pub y: f64,
    pub z: f64,
}
<span class="boring">}</span></code></pre></pre>
<p>... ç›¸æ¯”ä¿ºè¿˜æ˜¯ Java ç¨‹åºå‘˜æ—¶æƒ¯ç”¨çš„ â€œJavaBeanâ€ ç­‰ä»·ç‰©
(Java ä»é‚£æ—¶èµ·æ˜¾ç„¶å‘ç”Ÿäº†å˜åŒ–,
ä½†æ˜¯, è¿™ä»£è¡¨äº†å¾ˆå¤š OOP ç¼–ç¨‹ç‚,åŒ…æ‹¬ Smalltalk å’Œè®¸å¤šå…³äºå¦‚ä½•ç¼–ç¨‹çš„ä¹¦ç±):</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>class Point {
    private double x;
    private double y;
    private double z;

    double getX() {
        return x;
    }

    double setX(double x) {
        this.x = x;
    }

    double getY() {
        return y;
    }

    double setY(double y) {
        this.y = y;
    }

    double getZ() {
        return z;
    }

    double setZ(double z) {
        this.z = z;
    }
}
<span class="boring">}</span></code></pre></pre>
<p>æ­¤ç±»æ•°æ®ç±»å‹é€šå¸¸ä¸ä½¿ç”¨ OOP ç±»è·å¾—çš„ä»»ä½•å…¶å®ƒåŠŸèƒ½,
ä¾‹å¦‚å¤šæ€æˆ–æ˜¯ç»§æ‰¿;
åœ¨æ­¤ç±» â€œJavaBeanâ€ ç±»ä¸­ä½¿ç”¨æ­¤ç±»åŠŸèƒ½ä¹Ÿå°†è¿åæœ€å°æ„å¤–åŸåˆ™;
&quot;ç±»&quot;æ¦‚å¿µå¯¹äºè¿™äº›è®°å½•ç±»å‹æ¥è¯´,æ ¹æœ¬å°±æ˜¯çŸ«æ‰è¿‡æ­£;</p>
<p>å½“ç„¶, Java å¼€å‘è€…(æˆ–æ˜¯ Smalltalk åˆæˆ– C#) ä¼šè¯´,
åº”è¯¥é€šè¿‡è¿™äº› getter å’Œ setter æ–¹æ³•é—´æ¥è®¿é—®å­—æ®µ, ä»–ä»¬æ˜¯é¢å‘æœªæ¥çš„ç±»,
ä»¥é˜²è®¾è®¡å‘ç”Ÿå˜åŒ–
(äº‹å®ä¸Šæˆ‘æ˜¯å½“ Reddit ä¸Šæœ‰äººæå‡ºè¿™ç‚¹æ—¶,æ‰è¢«æé†’åˆ°, è¿½åŠ äº†è¿™æ®µ);
ä½†æ˜¯,æˆ‘å‘ç°è¿™æ˜¯è™šä¼ªçš„,
æˆ–è€…è•›æ˜¯è¢«è¯¯å¯¼çš„ --- å®ƒé€šå¸¸ç”¨äºç¨‹åºå†…éƒ¨ç»“æ„çš„ä¸€éƒ¨åˆ†,
åœ¨è¿™ç§æƒ…å†µä¸­, æ›´åŠ åˆç†çš„ä½œæ³•æ˜¯å‘ç»“æ„æ‰€æœ‰ç”¨æˆ·å…¬å¼€æ›´æ”¹å­—æ®µ;
é™¤äº†å­—é¢æ„ä¹‰ä¸Šçš„è®¾ç½®æˆ–æ˜¯è·å–å­—æ®µä¹‹å¤–ï¼Œ
ä¹Ÿå¾ˆéš¾æƒ³åˆ°è¿™äº›æ–¹æ³•è¿˜å¯ä»¥ä½œä»€ä¹ˆä¸è¶³ä¸ºå¥‡çš„äº‹å„¿ï¼Œ
æ­£å¦‚æ–¹æ³•åç§°æ‰€æš—ç¤ºçš„é‚£æ · --- ä¾‹å¦‚,
è¿›è¡Œç½‘ç»œè°ƒç”¨å¯¹äºè·å–æˆ–æ˜¯è®¾ç½®æ–¹æ³•æ¥è¯´,
å°†æ˜¯ä¸€ä¸ªä»¤äººéœ‡æƒŠçš„æƒŠå–œ,
å¹¶ä¸”,å› æ­¤è‡³å°‘è¿åäº†éšå«çš„åçº¦;
åœ¨æˆ‘ç¼–å†™ OOP ä»£ç æ—¶,
æˆ‘ä»æ¥æ²¡è§è¿‡é€‚åˆ getter æˆ–æ˜¯ setter æ‰§è¡Œä»»ä½•æ“ä½œçš„æƒ…å†µ,
é™¤äº†å­—é¢ä¸Šçš„è·å–æˆ–æ˜¯è®¾ç½®å­—æ®µ;</p>
<p>å¦‚æœä»£ç ç¡®å®æ›´æ”¹ä¸ºè¦æ±‚ getter æˆ–æ˜¯ setter æ‰§è¡Œå…¶å®ƒæ“ä½œ,
æˆ‘å®æ„¿æ›´æ”¹æ–¹æ³•çš„åç§°ä»¥ä¾¿åæ˜ å…·ä½“è¿˜ä½œäº†ä»€ä¹ˆ,
è€Œä¸æ˜¯å‡è£…è¿™ä¸æ˜¯é‡å¤§å˜æ›´;
fetchZFromNetwork æˆ–æ˜¯ setAndValidateZ ä¼¼ä¹æ¯” getZ æˆ–æ˜¯ setZ æ›´åŠ åˆé€‚,
å®ƒä»¬æ‰€ä½œçš„äº‹å„¿, æ¯”æˆ‘ä»¬å‡è®¾ setter æˆ–æ˜¯ getter æ‰€ä½œçš„ç®€å•å­—æ®µè®¿é—®åˆ°çš„æ›´å¤š;
OOP åšæŒæ¯ä¸ªç±»å‹éƒ½åº”è¯¥æ˜¯å…¶è‡ªå·±çš„ä»£ç æŠ½è±¡è¾¹ç•Œ,
è¿™åœ¨åº”ç”¨è¿™äº›è½»é‡çº§èšåˆç±»å‹æ—¶, å¸¸å¸¸å°±å˜çš„è’è°¬äº†;
è¿™äº›ç±»å‹çš„ getter å’Œ setter ç”¨ä»¥ä¿æŠ¤ä¸åº”è¯¥å­˜åœ¨ä¸”å“ªå°å¾—å°å¦¨ç¢çš„æŠ½è±¡è¾¹ç•Œ,
å¹¶ä¸”,åœ¨æœªæ¥é˜²æ­¢åœ¨ä¸æ›´æ”¹æ¥å£çš„æƒ…å†µä¸­,
ä¸åº”è¯¥è¿›è¡Œçš„å®ç°å˜æ›´;</p>
<p>setter å’Œ setter ç®€è€Œè¨€ä¹‹,
æ˜¯ä¸€ç§åæ¨¡å¼;
å¦‚æœä½ æ‰“ç®—åˆ›å»ºé™¤ &quot;æ•°æ®ç»“æ„&quot; ä¹‹å¤–çš„æŠ½è±¡,
å…¶ä¸­éªŒè¯æˆ–æ˜¯ç½‘ç»œè°ƒç”¨åˆæˆ–åŸå§‹å­—æ®µè®¿é—®ä¹‹å¤–çš„ä»»ä½•å…¶å®ƒå†…å®¹åŠ ç­æ˜¯åˆé€‚çš„,
é‚£ä¹ˆè¿™äº› get å’Œ set åç§°å°±æ˜¯è¯¥æŠ½è±¡çš„é”™è¯¯åç§°;</p>
<p>2023-02-13 è¿½åŠ äº†æ­¤æ®µ:
æ˜ç¡®çš„è¯´, è¿™äº›å¼‚è®®ä¹Ÿé€‚ç”¨äºå±æ€§;
æˆ‘åå¯¹çš„ä¸æ˜¯è¯­æ³•ä¸Šçš„ä¸ä¾¿,
è€Œæ˜¯ä½¿ç”¨ä»£ç é€æ˜çš„æ›¿æ¢å­—æ®µè®¿é—®çš„æ•´ä¸ªæ¦‚å¿µæ˜¯ä¸€ä»¶å€¼å¾—åŠªåŠ›çš„å¥½äº‹,
æˆ–è€…æ˜¯ä¿æŒå¼€æ”¾çš„é‡è¦å¯èƒ½æ€§;
æœ‰å¸Œæœ› foo.bar = 3 æ°¸è¿œä¸ä¼šåœ¨ Rust ä¸­è§¦å‘è¿›è¡Œç½‘ç»œè°ƒç”¨!
å¦‚æœè¿™å¿…é¡»æ˜¯å¼‚æ­¥çš„å‘¢?
å¦‚æœæˆ‘åœ¨è°ƒç”¨å‡½æ•°,åº”è¯¥å¾ˆæ¸…æ¥š;
è€Œ Rust æ˜¯å…³äºæ˜ç¡®æ€§çš„æ€è€ƒæˆæœ;</p>
<p>å®é™…ä¸Š, get å’Œ set å‡½æ•°ä»…ç”¨ä½œåŒ…è£…å™¨ä»¥ä¾¿æ»¡è¶³ OOP æ€æƒ³çš„çº¦æŸ;
é¢†å¯¼ä½œç”¨ç§°æä¾›çš„é¢å‘æœªæ¥çš„è¯æ˜æ˜¯ä¸€ç§å¹»æƒ³;
å¦‚æœä½ åœ¨æŠ½è±¡è¾¹ç•Œä¸Šæä¾›â€œJavaBeanâ€æ ·å¼ç±»å‹æˆ–æ˜¯å…·æœ‰å±æ€§çš„ç±»å‹,
é‚£ä¹ˆä½ å®é™…ä¸Šå°±åƒæä¾›åŸå§‹å­—æ®µè®¿é—®ä¸€æ ·è¢«é”å®š --- ä½ æœ€æœ‰å¯èƒ½å¸Œæœ›å¯¹è¿™äº›ç»“æŸè¿›è¡Œçš„æ›´æ”¹ä¸å…è®¸ç§»åŠ¨ getter å’Œ setter ä»¥ä¿æŒå…¼å®¹æ€§;
å¯¹äºä½ æƒ³è¦è¿›è¡Œçš„æ›´æ”¹,
åˆ©ç”¨è¿™ç§é¢å‘æœªæ¥çš„æ–¹æ³•å¯èƒ½æ˜¯å®Œå…¨ä¸å¯èƒ½çš„,
å……å…¶é‡ä¼šæ¶‰åŠå¯æ€•çš„éª‡å®¢æ”»å‡»;</p>
<p>åœ¨æ‰€æœ‰è¿™äº›æ–¹é¢, Rust ä¼¼ä¹å’Œ OOP è¯­è¨€ç›¸åŒ;
ä»è¡¨é¢ä¸Šçœ‹, åˆå’Œç±»éå¸¸ç›¸ä¼¼;
ä½ å¯ä»¥å®šä¹‰å’Œç»™å®šç±»å‹å…³è”çš„å‡½æ•° --- å®ƒä»¬ç”šè‡³äºè¢«ç§°ä¸ºæ–¹æ³•!
å’Œ OOP æ–¹æ³•ä¸€æ ·,
åœ¨è¯­æ³•ä¸Šä¼˜å…ˆé‡‡ç”¨è¯¥ç±»å‹çš„å€¼
(æˆ–æ˜¯å¯¹è¿™äº›å€¼çš„å¼•ç”¨)ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°,
ç§°ä¸ºç‰¹æ®Šåç§° self;
ä½ ç”šè‡³äºå¯ä»¥å°†è®°å½•ç±»å‹(åœ¨ Rust ä¸­ç§°ä¸ºç»“æ„)çš„å­—æ®µæ ‡è®°ä¸ºå…¬å…±æˆ–
(é»˜è®¤æƒ…å†µä¸‹)ç§æœ‰,
å°±åƒåœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­ä¸€æ ·é¼“åŠ±ç§æœ‰å­—æ®µ;</p>
<p>æ ¹æ®è¿™ä¸ªæ”¯æŸ±, Rust ä¼¼ä¹éå¸¸æ¥è¿‘ OOP;
å¯¹äºè¿™ä¸ªæ”¯æŸ±æ¥è¯´, è¿™æ˜¯ä¸ªå…¬å¹³çš„è¯„ä¼°,
ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ„çš„é€‰æ‹©,ç›®çš„æ˜¯è®©ä¹ æƒ¯äº† C++
(æˆ–æ˜¯ Java åˆæˆ– JavaScript) OOP ç¼–ç¨‹æ—¥å¸¸è¯­æ³•çš„äººä»¬æ›´å®¹æ˜“ä½¿ç”¨
Rust ç¼–ç¨‹;</p>
<p>ä½†æ˜¯, ç›¸ä¼¼ä¹‹å¤„åªæ˜¯è‚¤æµ…çš„;
å°è£…å…¶å®æ˜¯ OOP ä¸­æœ€ä¸æ˜æ˜¾çš„æ”¯æŸ±
(æ¯•ç«Ÿ, æ‰€æœ‰ç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½æœ‰æŸç§å½¢å¼çš„å°è£…),
Rust ä¸­çš„å®ç°ä¸å—ç±»å‹çº¦æŸ;
å½“ä½ åœ¨ Rust ä¸­å£°æ˜ä¸€ä¸ªå­—æ®µç§æœ‰æ—¶(é€šè¿‡ä¸æŒ‡å®š pub),
è¿™å¹¶ä¸æ„å‘³ç€å¯¹å…¶æ–¹æ³•ç§æœ‰,
è¿™åªæ˜¯æ„å‘³ç€å¯¹æ¨¡å—ç§æœ‰;
ä¸€ä¸ªæ¨¡å—å¯ä»¥æä¾›å¤šç§ç±»å‹,
å¹¶ä¸”è¯¥æ¨¡å—ä¸­çš„ä»»ä½•å‡½æ•°, æ— è®ºæ˜¯å¦æ˜¯è¯¥ç±»å‹çš„&quot;æ–¹æ³•&quot;,
éƒ½å¯ä»¥è®¿é—®è¯¥ç±»å‹ä¸­å®šä¹‰çš„æ‰€æœ‰å­—æ®µ;
åœ¨é€‚å½“çš„æ—¶å€™é¼“åŠ±ä¼ é€’è®°å½•,
è€Œä¸æ˜¯é¼“åŠ±è®¿é—®è€…è¢«å¼ºåˆ¶è®¿é—®,
å³ä¾¿åœ¨ç´§å¯†ç»‘å®šçš„ç›¸å…³ä»£ç ä¸­ä¹Ÿæ˜¯å¦‚æ­¤;</p>
<p>è¿™æ˜¯æˆ‘ä»¬çœ‹åˆ° Rust çš„ç¬¬ä¸€ä¸ªè¿¹è±¡,
å°½ç®¡è¯­æ³•å¾ˆç®€æ´, ä½†æ˜¯, å¹¶ä¸æ˜¯ä¸€ç§ OOP ç¼–ç¨‹è¯­è¨€;</p>
<p>This is the first sign we see that Rust, in spite of its superficial syntax, is not an OOP programming language.</p>
<h3 id="æ¥ä¸‹æ¥"><a class="header" href="#æ¥ä¸‹æ¥">æ¥ä¸‹æ¥</a></h3>
<p>åœ¨è¿™ç‚¹ä¸Š, ä»Šå¤©ä¸å¾—ä¸æš‚åœä¸€ä¸‹;</p>
<p>å½“ç„¶, å°è£…å¹¶ä¸æ˜¯ OOP é£æ ¼ç±»æ‰€èƒ½ä½œçš„å”¯ä¸€å¥‡ç‰¹çš„äº‹å„¿;
å¦‚æœæ˜¯è¿™æ ·, é‚£ä¹ˆç±»å°±ä¸ä¼šè¿·æƒ‘è¿™ä¹ˆå¤šäººè¿™ä¹ˆå¤šå¹´äº†:
æ¯ä¸ªäººéƒ½ä¼šæ˜ç™½,ç±»ä¸è¿‡æ˜¯ç¾åŒ–çš„æ¨¡å—,
è€Œæ–¹æ³•ä¸è¿‡æ˜¯ç¾åŒ–çš„è¿‡ç¨‹;</p>
<p>åœ¨æœ¬ç³»åˆ—ä¸‹ç¯‡æ–‡ç« ä¸­,
æˆ‘ä»¬å°†è®¨è®ºå’Œ OOP ç›¸å…³çš„å…¶å®ƒç‰¹æ€§,
OOP å‰©ä¸‹çš„ä¸¤å¤§ä¼ ç»Ÿæ”¯æŒ,
å¤šæ€å’Œç»§æ‰¿,
ä»å®è·µçš„è§’åº¦åˆ†æ,
å¹¶äº†è§£ Rust å’Œ OOP åœ¨æ€§èƒ½æ–¹é¢çš„æ¯”è¾ƒ, é’ˆå¯¹é‚£äº›æ”¯æŸ±æ¦‚å¿µ;</p>
<p>æ¥ä¸‹æ¥å°†æ˜¯ å¤šæ€!</p>
<h2 id="logging-14"><a class="header" href="#logging-14">logging</a></h2>
<ul>
<li>230225 ZQ v1 done</li>
<li>230220 ZQ re-start</li>
<li>230215 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-è¶…è¶Šé¢å‘å¯¹è±¡ç¬¬2éƒ¨åˆ†"><a class="header" href="#rust-è¶…è¶Šé¢å‘å¯¹è±¡ç¬¬2éƒ¨åˆ†">Rust è¶…è¶Šé¢å‘å¯¹è±¡,ç¬¬2éƒ¨åˆ†</a></h1>
<p>åŸæ–‡:<a href="https://www.thecodedmessage.com/posts/oop-2-polymorphism/">Rust Is Beyond Object-Oriented, Part 2: Polymorphism :: The Coded Message</a></p>
<h2 id="å¿«è¯‘-3"><a class="header" href="#å¿«è¯‘-3">å¿«è¯‘</a></h2>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­, é€šè¿‡è®¨è®º OOP ä¸‰å¤§ä¼ ç»Ÿæ”¯æŸ±ä¸­çš„ç¬¬äºŒä¸ª: å¤šæ€,
ç»§ç»­ç³»åˆ—æ–‡ç« :å…³äº Rust å’Œä¼ ç»Ÿ OOP èŒƒå¼çš„ä¸åŒ;</p>
<p>å¤šæ€æ€§æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„è¯é¢˜ï¼Œ
ä¹Ÿè®¸æ˜¯å…¶ä¸‰å¤§æ”¯æŸ±ä¸­æœ€é‡è¦çš„ä¸€ä¸ª;
å…³äºå¤šæ€æ€§æ˜¯ä»€ä¹ˆ, å„ç§ç¼–ç¨‹è¯­è¨€å¦‚ä½•å®ç°(åœ¨ OOP ä¸–ç•Œå†…å¤–---æ˜¯çš„,å¤šæ€æ€§ä¹Ÿå­˜åœ¨äº OOP å®‡å®™ä¹‹å¤–),
å¦‚ä½•æœ‰æ•ˆçš„ä½¿ç”¨, ä»¥åŠæ›´åŠ å…³é”®çš„ä½•æ—¶å«‘ä½¿ç”¨;
å¯ä»¥å†™ä¸€äº›å…³äºå¦‚ä½•å•ç‹¬ä½¿ç”¨å¤šæ€çš„ Rust ç‰ˆæœ¬çš„ä¹¦äº†;</p>
<p>ä¸å¹¸çš„æ˜¯, è¿™åªæ˜¯ä¸€ç¯‡ blog,æ‰€ä»¥,
æˆ‘æ— æ³•åƒæˆ‘æƒ³çš„é‚£æ ·è¯¦ç»†æˆ–æ˜¯å¤šæ ·æ€§çš„ä»‹ç»å¤šæ€;
ç›¸å,æˆ‘å°†ç‰¹åˆ«å…³æ³¨ Rust å’Œ OOP æ¦‚å¿µçš„ä¸åŒä¹‹å¤„;
æˆ‘å°†ä»æè¿°å…¶åœ¨ OOP ä¸­çš„å·¥ä½œæ–¹å¼å¼€å§‹,
ç„¶å, è®¨è®ºå¦‚ä½•åœ¨ Rust ä¸­å®ç°ç›¸åŒçš„ç›®æ ‡;</p>
<p>åœ¨ OOP ä¸­,å¤šæ€æ€§å°±æ˜¯ä¸€åˆ‡;
è¯•å›¾é‡‡å–æ‰€æœ‰å†³ç­–(æˆ–æ˜¯å°½å¯èƒ½å¤šçš„å†³ç­–)å¹¶å°†å…¶ç»Ÿä¸€åœ¨ä¸€ä¸ªé€šç”¨çš„ç‹­ä¹‰æœºåˆ¶ä¸­:
è¿è¡Œæ—¶å¤šæ€;
ä½†æ˜¯, ä¸å¹¸çš„æ˜¯, å¹¶ä¸æ˜¯ä»»æ„è¿è¡Œæ—¶å¤šæ€, è€Œæ˜¯ä¸€ç§ç‰¹å®šçš„/ç‹­ä¹‰çš„è¿è¡Œæ—¶å¤šæ€å½¢å¼,
å—åˆ° OOP å“²å­¦å’Œå®ç°å¦‚ä½•å·¥ä½œç»†èŠ‚çš„é™åˆ¶:</p>
<ul>
<li>é—´æ¥éœ€æ±‚: æ¯ä¸ªå¯¹è±¡é€šå¸¸éƒ½å¿…é¡»å­˜å‚¨åœ¨å †ä¸Š,æ‰èƒ½ä½¿è¿è¡Œæ—¶å¤šæ€ç”Ÿæ•ˆ, å› ä¸º,ä¸åŒçš„&quot;è¿è¡Œæ—¶ç±»å‹&quot;å…·æœ‰ä¸åŒçš„å°ºå¯¸; è¿™é¼“åŠ±äº†å¯å˜å¯¹è±¡çš„åˆ«åä½¿ç”¨;ä¸ä»…å¦‚æ­¤,è¦çœŸæ­£è°ƒç”¨ä¸€ä¸ªæ–¹æ³•,å¿…é¡»ç©¿è¿‡ä¸‰å±‚é—´æ¥:
<ul>
<li>è§£å¼•ç”¨å¯¹è±¡å¼•ç”¨</li>
<li>è§£å¼•ç”¨ç±»æŒ‡é’ˆæˆ–æ˜¯ â€œvtableâ€ æŒ‡é’ˆ</li>
<li>æœ€åå®Œæˆé—´æ¥å‡½æ•°è°ƒç”¨</li>
</ul>
</li>
<li>æ’æ–¥ä¼˜åŒ–: é™¤äº†é—´æ¥å‡½æ•°è°ƒç”¨çš„å†…åœ¨æˆæœ¬ä¹‹å¤–, è°ƒç”¨æ˜¯é—´æ¥çš„è¿™ä¸€äº‹å®, æ„å‘³ç€å†…è”æ˜¯ä¸å¯èƒ½çš„ï¼›é€šå¸¸,å¤šæ€æ–¹æ³•å¾ˆå°,ç”šè‡³äºå¾®ä¸è¶³é“,ä¾‹å¦‚è¿”å›å¸¸é‡/è®¾ç½®å­—æ®µæˆ–æ˜¯é‡æ–°æ’åˆ—å‚æ•°å¹¶è°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•, å› æ­¤, å†…è”ä¼šå¾ˆæœ‰ç”¨; å†…è”å¯¹äºå…è®¸ä¼˜åŒ–è·¨å†…è”è¾¹ç•Œä¹Ÿå¾ˆé‡è¦;</li>
<li>ä»…èƒ½åœ¨å•ä¸€å‚æ•°ä¸Šå¤šæ€: ç‰¹æ®Šçš„æ¥æ”¶è€…å‚æ•°,ç§°ä¸º self æˆ–æ˜¯ this, æ˜¯è¿è¡Œæ—¶å¤šæ€ä¹Ÿçš„å¹¶ä¸Šé€šå¸¸å¯èƒ½é€šè¿‡çš„å”¯ä¸€å‚æ•°; å…¶å®ƒå‚æ•°çš„å¤šæ€å¯ä»¥ç”¨é‚£äº›ç±»å‹ä¸­çš„è¾…åŠ©æ–¹å¼æ¥æ¨¡æ‹Ÿ, è¿™å°±å¾ˆå°´å°¬, è€Œä¸”, è¿”å›ç±»å‹çš„å¤šæ€ä¹Ÿæ˜¯ä¸å¯èƒ½çš„;</li>
<li>æ¯ä¸ªå€¼éƒ½æ˜¯ç‹¬ç«‹å¤šæ€çš„: åœ¨è¿è¡Œæ—¶å¤šæ€ä¸­, é€šå¸¸æ²¡æœ‰åŠæ³•è¯´é›†åˆçš„æ‰€æœ‰å…ƒç´ éƒ½å±äºå®ç°ç›¸åŒæ¥å£/interface çš„æŸç§ç±»å‹ T,ä½†æ˜¯, è¯¥ç±»å‹æ˜¯ä»€ä¹ˆåˆåº”è¯¥åœ¨è¿è¡Œæ—¶èƒ½ç¡®å®š;</li>
<li>å’Œå…¶å®ƒ OOP ç‰¹æ€§çº ç¼ åœ¨ä¸€èµ·: åœ¨ C++ ä¸­,è¿è¡Œæ—¶å¤šæ€å’Œç»§æ‰¿ç´§å¯†è€¦åˆï¼›ã€€åœ¨å¾ˆå¤š OOP è¯­è¨€ä¸­, å¤šæ€ä»…é€‚ç”¨äºç±»çš„ç±»å‹, æ­£å¦‚æˆ‘åœ¨ä¸Šç¯‡ blog ä¸­è®¨è®ºçš„é‚£æ ·, ç±»ç±»å‹æ˜¯ä¸€ç§å—çº¦æŸçš„æ¨¡å—å½¢å¼;</li>
</ul>
<p>å…¶å®æˆ‘å®Œå…¨å¯ä»¥é’ˆå¯¹ä»¥ä¸Šæ¯æ¡åç³Ÿå•ç‹¬å†™ä¸€å¤§ç¯‡æ–‡ç«  --- ä¹Ÿè®¸æœ‰ä¸€å¤©çœŸçš„ä¼š;</p>
<p>ä¸è¿‡,å°½ç®¡æœ‰è¿™ä¹ˆå¤šé™åˆ¶, å¤šæ€ä»ç„¶è¢«è§†ä¸ºä½¿ç”¨ OOP è¯­è¨€è¿›è¡Œå†³ç­–çš„é¦–é€‰æ–¹å¼,
å¹¶ä¸”, ç‰¹åˆ«ç›´è§‚ä¸”æ˜“äºè®¿é—®;
å—è¿‡è®­ç»ƒçš„ç¨‹åºå‘˜, å˜¦å¯èƒ½å°±ä¸€å®šä½¿ç”¨æ­¤å·¥å…·,
æ— è®ºæ˜¯å¦æ˜¯æ‰‹ä¸Šå†³ç­–æ˜¯æœ€ä½³å·¥å…·, å³ä¾¿å½“å‰ä¸éœ€è¦ç”¨å¤šæ€è¿›è¡Œè¿è¡Œæ—¶å†³ç­–;
æœ‰äº›ç¼–ç¨‹è¯­è¨€,ä¾‹å¦‚ Smalltalk ç”šè‡³æŠ˜å äº† &quot;if-then&quot; é€»è¾‘,
å¹¶å¾ªç¯åˆ° this è¿™ä¸ªå¥‡æ€ªçš„ç‰¹å®šå†³ç­–ç»“æ„ä¸­,
é€šè¿‡å¤šæ€æ–¹æ³•(å¦‚: ifTrue:idFalse)æœ€ç»ˆå®ç°,
è¿™äº›æ–¹æ³•å°†åœ¨ True å’Œ False ç±»ä¸­ä»¥ä¸åŒæ–¹å¼å†å®ç°
(å’Œ therefore åœ¨ true ä»¥åŠ false å¯¹è±¡ä¸Šé…å¥—);</p>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯, æ‹¥æœ‰åŸºäº vtable çš„è¿è¡Œæ—¶å¤šæ€æ€§æœºåˆ¶æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä»¶åäº‹å„¿ --- Rust ç”šè‡³æœ‰ä¹Ÿä¸€ä¸ª
(å’Œä¸Šè¿° OOP ç‰ˆæœ¬ç›¸ä¼¼,ä½†æ˜¯,å¹¶ä¸å®Œå…¨å¯¹ç­‰);
ä½†æ˜¯, Rust ç‰ˆæœ¬åªç”¨ä»¥ç›¸å¯¹ç½•è§çš„æƒ…å†µ, åœ¨è¿™ç§æƒ…å†µä¸­,
è¯¥æœºåˆ¶æœ€é€‚åˆæ•´ä¸ªå„¿ palette æœºåˆ¶;
åœ¨ OOP ä¸­, å°†è¿™ç§ä¸¥æ ¼çº¦æŸä¸”å¿¾å’Œç”¨ä½ä¸‹çš„å†³ç­–åˆ¶å®šå½¢å¼æå‡åˆ°æ‰€æœ‰å…¶å®ƒå½¢å¼ä¹‹ä¸Š,
ä»¥åŠä½¿ç”¨å¤šæ€æ˜¯è¡¨è¾¾ç¨‹åºæ³¨é‡Šå’Œä¸šåŠ¡ç¼–è¾‘çš„æœ€ä½³æ–¹å¼ä»¥åŠæœ€ç›´è§‚æ–¹å¼çš„å“²å­¦æ–­è¨€,
æœ¬èº«å°±æ˜¯ä¸ªé—®é¢˜;</p>
<p>äº‹å®è¯æ˜,å½“ä½ é€‰æ‹©æœ€é€‚åˆæ‰‹å¤´æƒ…å†µçš„å·¥å…·æ—¶, ç¼–ç¨‹æ›´åŠ å»åˆäººä½“å·¥ç¨‹å­¦ --- è€Œ OOP è¿è¡Œæ—¶å¤šæ€æ€§,
åªæ˜¯å¶å°”æ‰æ˜¯æœ€åˆé€‚å®Œæˆå½“å‰å·¥ä½œçš„å®æ•ˆå·¥å…·;</p>
<p>å› æ­¤, è®©æˆ‘ä»¬çœ‹çœ‹åœ¨ OOP ä½¿ç”¨è¿è¡Œæ—¶å¤šæ€æ€§æ—¶, å¯ä»¥ä½¿ç”¨çš„ Rust ç‰ˆå››ç§æ›¿ä»£æ–¹æ¡ˆ;</p>
<h3 id="å¤‡é€‰æ–¹æ¡ˆ0æšä¸¾"><a class="header" href="#å¤‡é€‰æ–¹æ¡ˆ0æšä¸¾">å¤‡é€‰æ–¹æ¡ˆ#0ï¼šæšä¸¾</a></h3>
<p>ä¸ä»…æœ‰å…¶å®ƒå½¢å¼çš„å¤šæ€æ€§, è€Œä¸”å…·æœ‰æ›´å°‘çš„ä¸¥æ ¼çº¦æŸ
(ä¾‹å¦‚ Haskell çš„ç±»å‹ç±»)æˆ–ä¸€ç»„ä¸åŒçš„æƒè¡¡
(ä¾‹å¦‚ Rust çš„ trait,ä¸»è¦åŸºäº Haskell ç±»å‹ç±»),
Rust ä¸­è¿˜æœ‰å¦å¤–ä¸€ä¸ªå†³ç­–ç³»ç»Ÿ, å³:ä»£æ•°æ•°æ®ç±»å‹(ADTs, algebraic data types)
æˆ–æ›°æ±‚åˆ/sum ç±»å‹,
ä¹Ÿèƒ½æ¥ç®¡ OOP æ ·å¼å¤šæ€çš„å¾ˆå¤šåº”ç”¨ç¨‹åº;</p>
<p>åœ¨ Rust ä¸­, è¿™äº›è¢«ç§°ä¸º æšä¸¾/enums;
å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­çš„æšä¸¾æ˜¯å­˜å‚¨åœ¨æ•´æ•°å°ºå¯¸ç±»å‹ä¸­çš„å¸¸é‡åˆ—è¡¨,
æœ‰æ—¶ä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼å®ç°(æ¯”å¦‚åœ¨ Java ä¸­),
æœ‰æ—¶ä¸æ˜¯(æ¯”å¦‚åœ¨ C ä¸­),
æœ‰æ—¶å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§é€‰é¡¹(æ¯”å¦‚,åœ¨ C++ ä¸­æšä¸¾å’Œæšä¸¾ç±»ä¹‹é—´å°±æœ‰åŒºåˆ«);</p>
<p>Rust æšä¸¾æ”¯æŒè¿™ç§ç†Ÿæ‚‰çš„ç”¨ä¾‹, è€Œä¸”å…·æœ‰ç±»å‹å®‰å…¨:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum Visibility {
    Visible,
    Invisible,
}
<span class="boring">}</span></code></pre></pre>
<p>ä½†æ˜¯, è¿˜æ”¯æŒå’Œæ¯ä¸ªé€‰é¡¹å…³è”çš„é™„åŠ å­—æ®µ,
åˆ›å»ºç±»å‹ç†è®ºä¸­ç§°ä¸º&quot;æ€»å’Œç±»å‹&quot;(sum type)çš„ä¸œè¥¿,
ä½†åœ¨ C æˆ–æ˜¯ C++ ç¨‹åºå‘˜ä¸­æ›´åŠ å¹¿ä¸ºäººçŸ¥è¯†çš„å«&quot;è”åˆæ ‡è®°&quot;(tagged union)
--- ä¸åŒä¹‹å¤„åœ¨äº, Rust ä¸­, ç¼–è¯‘å™¨çŸ¥é“å¹¶èƒ½å¼ºåˆ¶æ‰§è¡Œæ ‡è®°;</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›æšä¸¾å£°æ˜çš„ç¤ºä¾‹:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub enum UserId {
    Username(String),
    Anonymous(IpAddress),
    // ^^ This isn't supposed to be a real network type,
    // just an example.
}

let user1 = User::Username(&quot;foo&quot;.to_string());
let user2 = User::Anonymous(parse_ip(&quot;127.0.0.1&quot;)?);

pub enum HostIdentifier {
    Dns(DomainName),
    Ipv4Addr(Ipv4Addr),
    Ipv6Addr(Ipv6Addr),
}

pub enum Location {
    Nowhere,
    Address(Address),
    Coordinates {
        lat: f64,
        long: f64,
    }
}

let loc1 = Location::Nowhere;
let loc2 = Location::Coordinates {
    lat: 80.0,
    long: 40.0,
};
<span class="boring">}</span></code></pre></pre>
<p>ä½ å¯èƒ½ä¼šé—®,è¿™äº›<code>è”åˆæ ‡è®°</code>å’Œå¤šæ€æœ‰ä»€ä¹ˆå…³ç³»?
å¥½å§, å¤§å¤šæ•° OOP è¯­è¨€å¯¹äºè¿™äº› æ±‚åˆç±»å‹/sum type æ²¡ä»€ä¹ˆå¥½åŠæ³•,
ä½†æ˜¯, å¥¹ä»¬ç¡®å®æœ‰å¼ºå¤§çš„è¿è¡Œæ—¶å¤šæ€æœºåˆ¶,
æ‰€ä»¥, ä½ ä¼šçœ‹åˆ°è¿è¡Œæ—¶å¤šæ€ç”¨ Rust æšä¸¾å®ç°ä¹Ÿæ˜¯ä¸€æ ·çš„é€‚åˆ
(æˆ‘å¯èƒ½è¿›ä¸€æ­¥äº‰è¾©: æ›´åŠ åˆé€‚):
æ¯å½“æœ‰ä¸€äº›å°å…³äºå¦‚ä½•åå•†ä¼šè®®å€¼çš„é€‰é¡¹, ä½†æ˜¯,è¿™äº›é€‰é¡¹åˆåŒ…å«ä¸åŒç»†èŠ‚æ—¶;</p>
<p>æ¯”å¦‚, è¿™æ˜¯ä¸€ç§ä½¿ç”¨ç»§æ‰¿å’Œè¿è¡Œæ—¶å¤šæ€åœ¨ Java ä¸­è¡¨ç¤º UserId ç±»å‹çš„æ–¹æ³• --- å½“æˆ‘è¿˜æ˜¯å­¦ç”Ÿæ—¶, 
è‚¯å®šä¼šè¿™ä¹ˆæ¥(å°†æ¯ä¸ªç±»æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­):</p>
<pre><code class="language-java">class UserId {
}

class Username extends UserId {
    private String username;
    public Username(String username) {
        this.username = username;
    }

    // ... getters, setters, etc.
}

class AnonymousUser extends UserId {
    private Ipv4Address ipAddress;
    
    // ... constructor, getters, setters, etc.
}

UserId user1 = new Username(&quot;foo&quot;);
UserId user2 = new AnonymousUser(new Ipv4Address(&quot;127.0.0.1&quot;));
</code></pre>
<p>é‡è¦çš„æ˜¯, å°±åƒåœ¨æšä¸¾ç¤ºä¾‹ä¸­ä¸€æ ·,
æˆ‘ä»¬å¯ä»¥å°† user1 å’Œ user2 ç»™å®šç›¸åŒç±»å‹çš„å˜é‡,
å¹¶å°†å¥¹ä»¬å¾—ç‹®ç»™ç›¸åŒç±»å‹çš„å‡½æ•°, å¹¶é€šå¸¸å¯¹å¥¹ä»¬æ‰§è¡Œç›¸åŒçš„æ“ä½œ;</p>
<p>ç°åœ¨è¿™äº› OOP é£æ ¼çš„ç±»çœ‹èµ·æ¥è½»é£˜åˆ°é£æº…çš„ç¨‹åº¦,
ä½†æ˜¯, è¿™ä¸»è¦æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¸ºè¿™ç§æƒ…å†µæ·»åŠ ä»»ä½•çœŸæ­£çš„æ“ä½œä»£ç  --- åªæœ‰æ•°æ®å’Œç»“æ„, 
ä»¥åŠä¸€äº›å˜é‡å®šä¹‰å’Œæ¨¡æ¿;
è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹, å¦‚æœæˆ‘ä»¬çœŸçš„å¯¹ç”¨æˆ· ID å°è¯•è¿›è¡Œä»»ä½•æ“ä½œæ—¶ä¼šæ€ä¹ˆæ ·?</p>
<p>ä¾‹å¦‚,æˆ‘ä»¬å¯èƒ½æƒ³ç¡®è®¤å¥¹ä»¬æ˜¯å¦ä¸ºç®¡ç†å‘˜;
åœ¨æˆ‘ä»¬çš„å‡è®¾ä¸­, å‡è®¾åŒ¿åç”¨æˆ·æ°¸è¿œä¸æ˜¯ç®¡ç†å‘˜,
è€Œæ‹¥æœ‰ç”¨æˆ·åçš„ç”¨æˆ·åªæœ‰åœ¨ç”¨æˆ·åä»¥å­—ç¬¦ä¸² admin_ å¼€å¤´æ—¶,æ‰æ˜¯ä½ç®¡ç†å‘˜;</p>
<p>ç†è®ºä¸Šè®¤å¯çš„ OOP æ–¹æ³•æ˜¯æ·»åŠ ä¸€ä¸ªæ–¹æ³•,
æ¯”å¦‚: administrator;
ä¸ºäº†è®©è¿™ä¸ªæ–¹æ³•èµ·ä½œç”¨, æˆ‘ä»¬å¿…é¡»å°†å…¶è¿½åŠ åˆ°æ‰€æœ‰ä¸‰ä¸ªç±»: åŸºæ•°ä»¥åŠä¸¤ä¸ªå­ç±»:</p>
<pre><code class="language-java">class UserId {
    // ...
    public abstract bool isAdministrator();
}

class Username extends UserId {
    // ...
    public bool isAdministrator() {
        return username.startsWith(&quot;admin_&quot;);
    }
}

class AnonymousUser extends UserId {
    // ...
    public bool isAdminstrator() {
        return false;
    }
}
</code></pre>
<p>å› æ­¤, ä¸ºäº†åœ¨ Java ä¸­ä¸ºè¿™ç§ç±»å‹æ·»åŠ è¿™ç§ç®€å•çš„æ“ä½œ,å¦‚æ­¤ç®€å•çš„èƒ½åŠ›,
æˆ‘ä»¬å´å¿…é¡»ä½¿ç”¨ä¸‰ä¸ªç±»,
è€Œä¸”å¿…é¡»å­˜å‚¨åœ¨ä¸‰ä¸ªæ–‡ä»¶ä¸­;
ä¸«ä»¬æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªæ–¹æ³•æ¥ä½œä¸€äº›ç®€å•çš„äº‹å„¿,
ä½†æ˜¯, åœ¨ä»»ä½•ç¾Œæ—éƒ½çœ‹ä¸åˆ°è°æ˜¯ç®¡ç†å‘˜, åˆæˆ–è€…ä¸æ˜¯ç®¡ç†å‘˜çš„å®Œæ•´é€»è¾‘ --- æœ‰äººå¯èƒ½ä¼šå¾ˆä¸åˆæ—¶å®œçš„é—®å‡ºè¿™ä¸ªé—®é¢˜;</p>
<p>Rust åˆ™ä¸ºè¿™ç§æ“ä½œä½¿ç”¨ match,
å°†æœ‰å…³æ‰€æœ‰ä¿¡æ¯æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹å®Œæˆåˆ¤å®š:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn is_administrator(user: &amp;UserId) -&gt; bool {
    match user {
        UserId::Username(name) =&gt; name.starts_with(&quot;admin_&quot;),
        UserId::AnonymousUser(_) =&gt; false,
    }
}
<span class="boring">}</span></code></pre></pre>
<p>è¯šç„¶, è¿™å°†äº§ç”Ÿæ›´åŠ å¤æ‚çš„å•ä¸ªå‡½æ•°,
ä½†æ˜¯,å…·æœ‰æ˜ç¡®çš„æ‰€æœ‰é€»è¾‘;
è®©ç¼–è¾‘æ˜æ˜¾è€Œä¸æ˜¯éšå«åœ¨ç»§æ‰¿å±¡æ¬¡ç»“æ„ä¸­, 
è¿™å°±è¿åäº† OOP åŸåˆ™, 
åœ¨ OOP å®‡å®™ä¸­, æ–¹æ³•åº”è¯¥ç®€å•, å¤šæ€æ€§ç”¨äºéšå«çš„è¡¨è¾¾é€»è¾‘;
ä½†æ˜¯,è¿™å¹¶ä¸èƒ½ä¿è¯ä»»ä½•äº‹å„¿, åªæ˜¯å°†å…¶æ‰«åˆ°åœ°æ¯¯ä¸‹è€Œå·²:
äº‹å®è¯æ˜, éšè—å¤æ‚æ€§ä¼šä»¤å…¶æ›´éš¾åº”å¯¹, è€Œä¸æ˜¯ç›¸å;</p>
<p>è®©çš„æˆ‘ä»¬æ¥çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­;
æˆ‘ä»¬å·²ç»ç”¨äº†ä¸€æ®µæ—¶é—´çš„ UserId ä»£ç ,
ä½ çš„ä»»åŠ¡æ˜¯ä¸ºè¿™ä¸ªç³»ç»Ÿç¼–å†™ä¸€ä¸ªæ–°çš„ Web å‰ç«¯;
ä½ éœ€è¦æŸç§æ–¹å¼, ä»¥ HTML æ ¼å¼æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯,
è¦ä¹ˆæ˜¯æŒ‡å‘ç”¨æˆ·é…ç½®æ–‡ä»¶çš„é“¾æ¥(å¯¹äºæŒ‡å®šç”¨æˆ·),
è¦ä¹ˆæ˜¯å°† IP åœ°å€å­—ç¬¦ä¸²åŒ–ä¸ºçº¢è‰²(å¯¹äºåŒ¿åç”¨æˆ·);
å› æ­¤, ä½ å†³å®šä¸ºè¿™ä¸ªå°å‹ç±»å‹è¿½åŠ ä¸€ä¸ªæ–°æ“ä½œ toHTML,
å°†è¾“å‡ºæ–°å‰ç«¯çš„ä¸“ç”¨ DOM ç±»å‹;
(ä¹Ÿè®¸ Java è¢«ç¼–è¯‘ä¸º WebAssembly å‘¢? æˆ‘ä¹Ÿä¸ç¡®å®š,ä¸è¿‡ç»†èŠ‚ä¸é‡è¦;-)</p>
<p>ä½ é€ˆåç«¯æ ¸å¿ƒåº“æ·±å…¥çš„ UserId ç±»å±¡æ¬¡ç»“æ„çš„ç»´æŠ¤è€…æäº¤äº† pull request;
ç„¶å, ä»–ä»¬æ‹’ç»äº†;</p>
<p>äº‹å®ä¸Š, ä»–ä»¬æœ‰å¾ˆå¥½çš„ç†ç”±, ä½ å¿…é¡»å‹‰å¼ºæ‰¿è®¤;
ä»–ä»¬è¯´:&quot;è¿™æ˜¯ä¸€ç§è’è°¬çš„å…³æ³¨ç‚¹åˆ†ç¦»&quot;;
æ­¤å¤–, å…¬å¸ä¹Ÿæ— æ³•ä»ä½ çš„å‰ç«¯è·å¾—æ­¤æ ¸å¿ƒåº“å¤„ç†ç±»å‹;</p>
<p>æ‰€ä»¥, ä½ å¹äº†å£æ°”, å†™äº†ä¸ª Rust åŒ¹é…è¡¨è¾¾å¼çš„ç­‰ä»·ç‰©, ä½†æ˜¯ç”¨çš„æ˜¯ Java
(è¯·åŸè°…æˆ‘è’è°¬çš„å‡è®¾æœ‰ä¸ª HTML åº“):</p>
<pre><code class="language-java">Html userIdToHtml(UserId userId) {
    if (userId instanceof Username) {
        Username username = (Username)userId;
        String usernameString = username.getUsername();
        Url url = ProfileHandler.getProfileForUsername(usernameString);
        return Link.createTextLink(url, username.getUsername());
    } else if (userId instanceof AnonymousUser) {
        AnonymousUser anonymousUser = (AnonymousUser)userId;
        return Span.createColoredText(anonymousUser.getIp().formatString(), &quot;red&quot;);
    } else {
        throw new RuntimeException(&quot;IDK, man&quot;);
    }
}
</code></pre>
<p>ä½ çš„è€æ¿ä»¬åœ¨ä»£ç å®¡æŸ¥æ—¶æ‹’ç»äº†è¿™æ®µä»£ç ,
ä½ ä½ ä½¿ç”¨äº† instanceof åæ¨¡å¼,
ä½†æ˜¯, åæ¥åœ¨ä½ è®©ä»–ä»¬å’Œä¸æ¥å—ä½ çš„å…¶å®ƒè¡¥ä¸çš„æ ¸å¿ƒåº“ç»´æŠ¤è€…äº‰è®ºä¹‹å,
ä¸«ä»¬å‹‰å¼ºæ¥å—äº†è¿™æ®µä»£ç ;</p>
<p>ä½†æ˜¯, çœ‹çœ‹é‚£å¨ instanceof ä»£ç æœ‰å¤šéš¾çœ‹!
éš¾æ€ª Java ç¨‹åºå‘˜è®¤ä¸ºè¿™æ˜¯ä¸€ç§åæ¨¡å¼!
ä½†æ˜¯, åœ¨è¿™ç§æƒ…å†µä¸­, å·²ç»æ˜¯æœ€åˆç†çš„äº‹å„¿äº†,
å®é™…ä¸Š, æ˜¯é™¤äº†å®æ–½è§‚å¯Ÿè€…ä¸œè¥¿æ–¹æˆ–æ˜¯è®¿é—®è€…æ¨¡å¼åˆæˆ–æ˜¯å…¶å®ƒç›¸å½“äºåŸºç¡€è®¾æ–½çš„ä¸œè¥¿ä¹‹å¤–,
å”¯ä¸€å¯èƒ½çš„å®ç°, åªæ˜¯ç”¨æ¥åˆ›é€ å…·æœ‰æ§åˆ¶åè½¬çš„å®ä¾‹è€Œå·²;</p>
<p>å½“æ“ä½œé›†æœ‰ç•Œ(æˆ–æ˜¯æ¥è¿‘æœ‰é™)å¹¶ä¸”è¯¥ç±»çš„å­ç±»æ•°é‡å¯èƒ½ä»¥æ„æƒ³ä¸åˆ°çš„æ–¹å¼å¢é•¿æ—¶,
é€šè¿‡å‘æ¯ä¸ªå­ç±»è¿½åŠ ä¸€ä¸ªæ–¹æ³•æ¥å®ç°æ“ä½œæ˜¯æœ‰æ„ä¹‰çš„;
å¯æ˜¯,é€šå¸¸æƒ…å†µä¸­, æ“ä½œçš„æ•°é‡åˆä¼šä»¥æ„æƒ³ä¸åˆ°çš„æ–¹å¼å¢é•¿,
è€Œå­ç±»çš„æ•°é‡æ€»æ˜¯æœ‰é™çš„(åˆæˆ–æ˜¯æ¥è¿‘æœ‰é™);</p>
<p>å¯¹äºåä¸€ç§æƒ…å†µ, è¿™ç§æƒ…å†µæ¯” OOP æ‹¥æŠ¤è€…æƒ³è±¡çš„æ›´åŠ å¸¸è§,
Rust æšä¸¾ --- ä»¥åŠä¸€èˆ¬çš„ æ±‚å’Œç±»å‹ --- æ˜¯å®Œç¾çš„;
ä¸€ä½†ä½ ä¹ æƒ¯äº†å¥¹ä»¬, ä½ å°±ä¼šå‘ç°è‡ªå·±ä¸€ç›´åœ¨ä½¿ç”¨;</p>
<p>æˆ‘è¦éƒ‘é‡å£°æ˜,
åœ¨æ‰€æœ‰é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­,éƒ½æ²¡æœ‰è¿™ä¹ˆç³Ÿç³•;
åœ¨æŸäº›æƒ…å†µä¸­, ä½ å¯ä»¥æŒ‰ä»»ä½•é¡ºåºç¼–å†™ä»»æ„ç±»æ–¹æ³•ç»„åˆ,
å› æ­¤,å¦‚æœä½ æ„¿æ„, å¯ä»¥å°†æ‰€æœ‰ä¸‰ä¸ªå®ç°å†™åœ¨ä¸€ä¸ªåœ°æ–¹;
Smalltalk ä¼ ç»Ÿä¸Šå…è®¸ä½ åœ¨ä¸€ä¸ªç‰¹æ®Šçš„æµè§ˆå™¨ä¸­æ¸¸è§ˆä»£ç åº“,
ä½ å¯ä»¥åœ¨å…¶ä¸­çœ‹åˆ°ä¸€ä¸ªç±»å®ç°çš„æ–¹æ³•åˆ—è¡¨,
æˆ–è€…ä¸€ä¸ªæ¥å—ç»™å®š&quot;æ¶ˆæ¯&quot;çš„ç±»åˆ—è¡¨,
æ­£å¦‚ Smalltalk æ‰€è¯´çš„é‚£æ ·,
è¿™æ ·ä½ å°±å¯ä»¥éšå¿ƒæ‰€æ¬²çš„æ“å¼„å¯¹è±¡äº†;</p>
<p>(è¯‘æŒ‰: å½“ç„¶, ä½ å¿…é¡»åœ¨ Salltalk å¯¹åº”è§£é‡Šå™¨çš„ IDE ç¯å¢ƒä¸­, ä¸€ä½†å‡ºäº†è¿™ä¸ªå¯¹è±¡é•œåƒ, å°†å¤±å»ä¸€åˆ‡è§‚å¯Ÿèƒ½åŠ›, è¿™å¯¼è‡´ Smalltalk æ²¡åŠæ³•ä½¿ç”¨å…¶å®ƒä¼ ç»Ÿ IDE)</p>
<h3 id="å¤‡é€‰æ–¹æ¡ˆ-1-é—­åŒ…"><a class="header" href="#å¤‡é€‰æ–¹æ¡ˆ-1-é—­åŒ…">å¤‡é€‰æ–¹æ¡ˆ #1: é—­åŒ…</a></h3>
<blockquote>
<p>Alternative #1: Closures</p>
</blockquote>
<p>æœ‰æ—¶, ä¸€ä¸ª OOP æ¥å£æˆ–æ˜¯å¤šæ€å†³ç­–åªæ¶‰åŠä¸€ä¸ªå®é™…æ“ä½œ;
åœ¨è¿™ç§æƒ…å†µä¸­,åªèƒ½ä½¿ç”¨é—­åŒ…;</p>
<p>æˆ‘ä¸æƒ³åœ¨è¿™æ–¹é¢èŠ±å¤ªå¤šæ—¶é—´,
å› ä¸º, å¤§å¤šæ•° OOP ç¨‹åºå‘˜å·²ç»æ„è¯†åˆ°è¿™ç‚¹,
å¹¶ä¸”, è‡ªä»ä»–ä»¬çš„ OOP è¯­è¨€å·²ç»èµ¶ä¸Šäº†å‡½æ•°å¼è¯­è¨€,
å¹¶è·å¾—äº† lambda è¯­æ³• --- Java ä¸­çš„ Java 8 ,
C++ ä¸­çš„, C++11;
å› æ­¤, åƒ Java çš„ Comparator è¿™ç§æ„šè ¢çš„å•ä¸€æ–¹æ³•æ¥å£ ---
å¹¸è¿çš„æ˜¯ --- åŸºæœ¬ä¸Šå·²ç»éƒ½æ„ŸæŸ“è¿‡å»å¼äº†;</p>
<p>æ­¤å¤–, Rust ä¸­çš„é—­åŒ…åœ¨æŠ€æœ¯ä¸Šæ¶‰åŠ traits,
å› æ­¤,ä½¿ç”¨å’Œæ¥ä¸‹æ¥çš„ä¸¤ä¸ªæ›¿ä»£æ–¹æ¡ˆç›¸åŒçš„æœºåˆ¶æ¥ç«€,
æ‰€ä»¥,ä¹Ÿæœ‰äººå¯èƒ½ä¼šäº‰è¾©è¯´è¿™åœ¨ Rust ä¸­å¹¶ä¸æ˜¯çœŸæ­£çš„ç‹¬ç«‹é€‰é¡¹;
ç„¶è€Œ,åœ¨æˆ‘çœ‹æ¥ lambda/é—­åŒ…å’Œ
FnMut/FnOnce/Fn ç­‰ trait ä»¬åœ¨ç¾å­¦ä¸Šå’Œæƒ…å¢ƒä¸Šéƒ½éå¸¸ç‰¹åˆ«,
å€¼å¾—èŠ±ç‚¹æ—¶é—´æŒæ¡;</p>
<p>å› æ­¤, æˆ‘å°†èŠ±äº›æ—¶æ—¶é—´æ¥è¯´æ˜è¿™ç‚¹:
å¦‚æœä½ å‘ç°è‡ªå·±åªä½¿ç”¨ä¸€ç§æ–¹æ³•ç¼–å†™ trait 
(Java æ¥å£æˆ–æ˜¯ C++ ç±»),
è¯·è€ƒè™‘ä½ æ˜¯å¦åº”è¯¥æ”¹ç”¨æŸç§é—­åŒ…æˆ–æ˜¯ lambda ç±»å‹;
æ¯•ç«Ÿåªæœ‰ä½ è‡ªå·±æ‰èƒ½é˜²æ­¢è¿‡åº¦è®¾è®¡;</p>
<h3 id="alternative-2-polymorphism-with-traits"><a class="header" href="#alternative-2-polymorphism-with-traits">Alternative #2: Polymorphism with Traits</a></h3>
<p>Just like Rust has a version of encapsulation more flexible and more powerful than the OOP notion of classes, as I discuss in the previous post, Rust has a more powerful version of polymorphism than OOP posits: traits.</p>
<p>Traits are like interfaces from Java (or an all-abstract superclass in C++), but without most of the constraints that I discuss at the beginning of the blog post. They have neither the semantic constraints or the performance constraints. Traits are heavily inspired in semantics and principle by Haskellâ€™s typeclasses, and in syntax and implementation by C++â€™s templates. C++ programmers can think of them as templates with concepts (except done right, baked into the programming language from the get-go, and without having to deal with all the code that doesnâ€™t use it).</p>
<p>Letâ€™s start with the semantics: What can you do with traits that you canâ€™t do with pure OOP, even if you throw all the indirection in the world at it? Well, in pure OOP terms, thereâ€™s no way you can write an interface like Rust Eq and Ord, given greatly oversimplified definitions here (the real definitions of Eq and Ord extend other classes that allow partial equivalence and orderings between different types, but like these simplified definitions, the Rust standard library version of non-partial Eq and Ord do cover equivalence and ordering between values of the same type):</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Eq {
    fn eq(self, other: &amp;Self) -&gt; bool;
}

pub enum Ordering {
    Less,
    Equal,
    Greater,
}

trait Ord: Eq {
    fn cmp(&amp;self, other: &amp;Self) -&gt; Ordering;
}
<span class="boring">}</span></code></pre></pre>
<p>See whatâ€™s happening? Like in an OOP-style interface, the methods take a â€œreceiverâ€ type, a self parameter, of the Self type â€“ that is, of whatever concrete type implements the trait (technically here a reference to Self or &amp;Self). But unlike in an OOP-style interface, they also take another argument of &amp;Self type. In order to implement Eq and Ord, a type T provides a function that takes two references to T. Thatâ€™s meant literally: two references to T, not one reference to T and one reference to T or any subclass (such a thing doesnâ€™t exist in Rust), not one reference to T and one reference to any other value that implements Eq, but two bona-fide non-heterogeneous references to the same concrete type, that the function can then compare for equality (or ordering).</p>
<p>This is important, because we want to use this to implement methods like sort:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Vec&lt;T&gt; {
    pub fn sort(&amp;mut self) where T: Ord {
        // ...
    }
}
<span class="boring">}</span></code></pre></pre>
<p>OOP-style polymorphism is ideal for heterogeneous containers, where each element has its own runtime type and its own implementation of the interfaces. But sort doesnâ€™t work like that. You canâ€™t sort a collection like [3, &quot;Hello&quot;, true]; thereâ€™s no reasonable ordering across all types.</p>
<p>Instead, sort operates on homogeneous containers. All the elements have to match in type, so that they can be mutually compared. They donâ€™t each need to have different implementations of the operations.</p>
<p>Nevertheless, sort is still polymorphic. A sorting algorithm is the same for integers or strings, but comparing integers is a completely different operation than comparing strings. The sorting algorithm needs a way of invoking an operation on its items â€“ the comparison operation â€“ differently for different types, while still having the same overall structure of code.</p>
<p>This can be done by injecting a comparison function, but many types have an intrinsic, default ordering, and sort should default to it. Thus, polymorphism â€“ but not an OOP-friendly variety.</p>
<p>See the contrivance Java goes through to define sort:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>static &lt;T extends Comparable&lt;? super T&gt;&gt; 
void sort(List&lt;T&gt; list)
<span class="boring">}</span></code></pre></pre>
<p>There is no simple trait that can require T to be comparable to other Ts, for T to be ordered. Instead, as far as the programming language is concerned, the idea that T is comparable to itself, rather than to any other random type, is only articulated as an accident to this method. Nothing is stopping someone from implementing the Comparable interface in an inconsistent way, like having Integer implement Comparable<String>.</p>
<p>Additionally, when it actually looks up the implementation of Comparable, it decides what implementation to use based on the first argument of any comparison, not based on the type. Normally, they will all be the same type, but theoretically, this list could be heterogeneous, as long as all the objects â€œextendâ€ T, and they could implement Comparable differently. The computer has to do extra work to indulge this possibility, even though it would certainly be a mistake.</p>
<p>As weâ€™re now drifting outside of the realm of semantics, and into the realm of performance, letâ€™s discuss the performance implementations of this fully.</p>
<p>The Java sort method, as we mentioned, requires every item in the collection to be a full object type, which means that instead of storing the values directly in the array, the values are stored in the heap, and references are stored in the array. This is unnecessary with a traits-based approach â€“ the values can live directly in the array.</p>
<p>This means that different arrays will have different element sizes, so this has to be handled by a trait as well. And it is: The size of the values is also parameterized via the Sized trait. The size does have to be consistent among all the items of the array, but this is enforceable because we can express that all the elements are actually the exact same type â€“ unlike Javaâ€™s List<T> which only expresses that theyâ€™re of type T or some subtype of T.</p>
<p>Rustâ€™s sort method could have been implemented by passing the size information (from the Sized trait) and the ordering function (from the Ord trait) at runtime as an integer value and a function pointer. This is how typeclasses work in Haskell, which was the inspiration for Rust traits. This would still be more efficient than the Java, as there would be a single ordering function, rather than a different indirect lookup for every left side of the comparison, allowing indirect branch prediction to work in the processor.</p>
<p>But Rust goes even further than that, and implements its traits instead via monomorphization. This is similar to C++ template instantiation, but semantically better constrained. The premise is that while sort is only one method semantically, in the outputted, compiled code, a different version of sort is outputted for every type T that it is called with.</p>
<p>C++ templates create infamously bad error messages and are difficult to reason about, because they are essentially macros, and awkward ones. Even Rust cannot create great error messages with its macro system. But also, writing them requires expertise, and means that the programmer is forgoing many of the benefits of the type system â€“ templates are often called, in my opinion rightly so, a form of compile time duck-typing. For these reasons, template programming in C++ is often considered more advanced (read as harder and less convenient rather than more powerful) than OOP-style polymorphism.</p>
<p>In Rust, however, traits provide an organized and more coherent way of accessing similar technology, getting the performance benefits of templates while still giving the structure of a solid type system.</p>
<h3 id="alternative-3-dynamic-trait-objects"><a class="header" href="#alternative-3-dynamic-trait-objects">Alternative #3: Dynamic Trait Objects</a></h3>
<p>Sometimes, however, you do need full run-time polymorphism. You have the opposite of the scenario with the enum: You have a closed set of operations that can be performed on a value, but what those operations actually do will change dynamically in a way that cannot be bounded ahead of time.</p>
<p>In such situations, Rust has you covered with the dyn keyword. Please donâ€™t overuse it, though. In almost all situations where Iâ€™ve thought it might be appropriate, static polymorphism combined with other design elements have worked out better.</p>
<p>Legitimate use cases for dyn tend to come up in situations involving inversion of control, where a framework library takes on a main loop, and the client code says how to handle various events. In network programming, the framework library says how to juggle all the sockets and register them with the operating system, but the application needs to say what to actually do with the data. In GUI programming, the framework code can say what widget was being clicked on, but very different things happen if that widget is a button versus a text box versus a custom widget you invented for this particular app.</p>
<p>Now, you donâ€™t strictly need run-time polymorphism for this. You could use closures (or even raw function pointers) instead, creating struct of closures (or function pointers) if multiple operations are called for â€“ which amounts to basically doing what dyn does the hard way by hand. For example, I fully expected tokio to use Rustâ€™s run-time polymorphism feature internally to handle this inversion of control in task scheduling. Instead, for what I imagine are performance reasons, tokio implements dyn by hand, even calling its struct of function pointers Vtable.</p>
<p>But dyn does all of this work for you, for your trait. The only requirement is that your trait be object-safe, and the list of requirements may seem familiar, especially when it comes to the requirements for an associated function (e.g. a method) to be â€œdispatchableâ€:</p>
<hr />
<ul>
<li>Not have any type parameters (although lifetime parameters are allowed),</li>
<li>Be a method that does not use Self except in the type of the receiver.</li>
<li>Have a receiver with one of the following types:
<ul>
<li>&amp;Self (i.e. &amp;self)</li>
<li>&amp;mut Self (i.e &amp;mut self)</li>
<li>Box<Self></li>
<li>Rc<Self></li>
<li>Arc<Self></li>
<li>Pin<P> where P is one of the types above</li>
</ul>
</li>
<li>Does not have a where Self: Sized bound (receiver type of Self (i.e. self) implies this).</li>
</ul>
<hr />
<p>That is to say, it can be polymorphic in exactly one parameter, and that parameter must be by reference â€“ more or less the exact requirements for methods to support run-time polymorphism in OOP.</p>
<p>This is of course because dyn uses almost exactly the same mechanism as OOP to implement run-time polymorphism: the â€œvtable.â€ Box<dyn Foo> really contains two pointers rather than one, one to the object in question, and the pointer to the â€œvtable,â€ the automatically-generated structure of function pointers for that type. The one-parameter requirement is because that is the parameter whose vtable is used to look up which concrete implementation of a method to call, and the indirection requirement is because the concrete type might be different sizes, with the size only known at run-time.</p>
<p>To be clear, these are limitations on one particular implementation strategy for run-time polymorphism. Alternative strategies exist that fully decouple the vtable from individual values of the type, as in Haskell.</p>
<p>There are still a few advantages of Rustâ€™s version of run-time polymorphism with traits as opposed to OOP-style interfaces.</p>
<p>Performance-wise, itâ€™s something done alongside a type, rather than intrinsic to the type. Normal values donâ€™t store a vtable, spreading the cost of this throughout the program, but rather, the vtables are only referenced when a dyn pointer is created. If you never create a dyn pointer to a value of a given type, that typeâ€™s vtable doesnâ€™t even have to be created. Certainly, you donâ€™t have 8 bytes of extra gunk in every allocation for all the vtable pointers! This also means thereâ€™s one fewer level of indirection.</p>
<p>Semantically, itâ€™s also a good thing that itâ€™s just one option among many, and that itâ€™s not the strongly preferred option that the entire programming language is trying to push you towards. Often, even usually, static polymorphism, enums, or even just good old-fashioned closures more accurately represent the problem at hand, and should be used instead.</p>
<p>Finally, the fact that run-time and static polymorphism in Rust both use traits makes it easier to transition from one system to another. If you find yourself using dyn for a trait, you donâ€™t have to use it everywhere that trait is used. You can use the mechanisms of static polymorphism (like type parameters and impl Trait) instead, freely mixing and matching with the same traits.</p>
<p>Unlike in C++, you donâ€™t have to learn two completely different sets of syntax for concepts vs parent classes, and vastly different semantics. Really, in Rust, dynamic polymorphism is just a special case of static polymorphism, and the only differences are the things that actually are different.</p>
<h2 id="logging-15"><a class="header" href="#logging-15">logging</a></h2>
<ul>
<li>230215 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-å’Œé»˜è®¤å‚æ•°"><a class="header" href="#rust-å’Œé»˜è®¤å‚æ•°">Rust å’Œé»˜è®¤å‚æ•°</a></h1>
<p>åŸæ–‡: <a href="https://www.thecodedmessage.com/posts/default-params/">Rust and Default Parameters :: The Coded Message</a></p>
<blockquote>
<p>å¿«è¯‘</p>
</blockquote>
<p>Rust ä¸æ”¯æŒå‡½æ•°å£°æ˜ä¸­çš„é»˜è®¤å‚æ•°;
è€Œä¸”å’Œå¾ˆå¤šè¯­è¨€ä¸åŒ, æ— æ³•é€šè¿‡å‡½æ•°é‡è½½æ¥æ¨¡æ‹Ÿ;
è¿™è®©å¾ˆå¤šæ¥è‡ªå…¶å®ƒç¼–ç¨‹è¯­è¨€çš„ Rustacean æ–°äººæ„Ÿåˆ°æ²®ä¸§,
æ‰€ä»¥, å°±æƒ³è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆè¿™å…¶å®æ˜¯ä»¶å¥½äº‹å„¿,
ä»¥åŠ,å¦‚æœä½¿ç”¨é»˜è®¤ trait å’Œç»“æ„æ›´æ–°è¯­æ³•æ¥å®ç°ç±»ä¼¼çš„æ•ˆæœ;</p>
<p>é»˜è®¤å‚æ•°(å’Œå‡½æ•°é‡è½½)ä¸æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€éƒ¨åˆ†,
ä½†æ˜¯,åˆæ˜¯è®¸å¤š Rustaceans æ–°äººåŸå…ˆç¼–ç¨‹è¯­è¨€çš„å…±åŒç‰¹å¾;
å› æ­¤, è¿™ç¯‡æ–‡ç« åœ¨æŸäº›æ–¹é¢å’Œæˆ‘æ­£åœ¨è¿›è¡Œçš„å…³äº Rust å¦‚ä½•ä¸æ˜¯é¢å‘å¯¹è±¡çš„ç³»åˆ—æ–‡ç« ç›¸å»åˆ,
æ•…è€Œ, è¢«æ ‡å‡†ä¸ºè¿™ä¸ªç³»åˆ—çš„æ–‡ç« ;
è¿˜å—åˆ° Reddit ä¸­å¯¹æˆ‘ç¬¬ä¸€ç¯‡ OOP ç›¸å…³è´´å­å›å¤çš„å¯å‘;</p>
<h2 id="é»˜è®¤ç§‹ç²®æ˜¯å¦‚ä½•å·¥ä½œå’¯æ¯”å¦‚-c"><a class="header" href="#é»˜è®¤ç§‹ç²®æ˜¯å¦‚ä½•å·¥ä½œå’¯æ¯”å¦‚-c">é»˜è®¤ç§‹ç²®æ˜¯å¦‚ä½•å·¥ä½œå’¯(æ¯”å¦‚ C++)</a></h2>
<p>åœ¨å¼€å§‹è®¨è®ºä¸ºä»€ä¹ˆ Rust æ²¡æœ‰é»˜è®¤å‚æ•°ä»¥åŠæˆ‘ä»¬å¯ä»¥æŠ˜è…¾ä»€ä¹ˆä¹‹å‰,
å¾—å…ˆèŠæ˜ç™½ä»€ä¹ˆæ˜¯é»˜è®¤å‚æ•°ä»¥åŠåœ¨å“ªäº›æƒ…å†µä¸‹æœ‰ç”¨;</p>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå¸¦æœ‰å¾ˆå¤šå‚æ•°çš„å‡½æ•°,
æ¯”å¦‚(ä»¥ Reddit å›å¤ä¸­çš„ç¤ºä¾‹)åœ¨ GUI ä¸­åˆ›å»ºä¸€ä¸ªçª—å£:</p>
<pre><code class="language-C++">WindowHandle createWindow(int width, int height, bool visible)

auto handle = createWindow(10, 30, false); // Create invisible window
auto handle2 = createWindow(100, 500, true); // Create visible window
</code></pre>
<p>ç°åœ¨, å‡è®¾ä½ å‡†å¤‡åˆ›å»ºçš„å¤§å¤šæ•°çª—å£éƒ½æ˜¯å¯è§çš„,
å¹¶ä¸”,ä½ ä¸æƒ³è®©ç¨‹åºå‘˜è´Ÿæ‹…å¿…é¡»æŒ‡å®šçª—å£æ˜¯å¦å¯è§çš„æ‹…å¿ƒ --- ç”šè‡³äºä¸æƒ³æ˜ç¡®çš„è€ƒè™‘è¿™äº‹å„¿ --- åœ¨æ­£å¸¸æƒ…å†µä¸‹,
åœ¨æ”¯æŒé»˜è®¤å‚æ•°çš„ç¼–ç¨‹è¯­è¨€ä¸­,ä½ å¯ä»¥ä¸ºå¯è§æ€§æä¾›é»˜è®¤å€¼:</p>
<pre><code class="language-C++">WindowHandle createWindow(int width, int height, bool visible = true)

auto handle = createWindow(10, 30, false); // Create invisible window!

auto handle2 = createWindow(100, 500, true); // Create visible window!

auto handle3 = createWindow(100, 500); // Also create visible window!
auto handle4 = createWindow(100, 500); // Most of the time, that's what
auto handle5 = createWindow(100, 500); // you want, so why have to say it?
Default parameters can also be simulated with function overloading for programming languages where function overloading is available but default parameters are not:

WindowHandle createWindow(int width, int height, bool visible);

WindowHandle createWindow(int width, int height) {
    return createWindow(width, height, true);
}
</code></pre>
<p>Rust ä¹Ÿæ²¡æœ‰å‡½æ•°é‡è½½,è¿™æ˜¯ä¸ªå¤æ‚çš„å¤šçš„é—®é¢˜,
ä½†æ˜¯, å¾ˆå¤šç›¸åŒçš„è®ºç‚¹éƒ½é€‚ç”¨è¿™ä¸ªä¹ æƒ¯ç”¨æ³•çš„ç†è§£;</p>
<h2 id="é»˜è®¤å‚æ•°çš„å¥½å¤„å’Œåå¤„"><a class="header" href="#é»˜è®¤å‚æ•°çš„å¥½å¤„å’Œåå¤„">é»˜è®¤å‚æ•°çš„å¥½å¤„(å’Œåå¤„)</a></h2>
<p>é»˜è®¤å€¼å¾ˆå¥½,è¿™ç§é£æ ¼çš„é»˜è®¤å‚æ•°æ˜¯å®ç°å¹¶ä»ä¸­è·ç›Šçš„ä¸€ç§æ–¹å¼;</p>
<p>é»˜è®¤å€¼æ˜¯å¥½çš„,å› ä¸º,å¥¹ä»¬åšæŒ DRY åŸåˆ™ --- ä¸è¦é‡å¤è‡ªå·±(Donâ€™t Repeat Yourself);
å¦‚æœæˆ‘ä»¬æ²¡æœ‰é»˜è®¤å€¼, å°±ä¸å¾—ä¸é‡å¤é‚£äº›å®é™…ä¸Šå¯¹ç†è§£ä»£ç æ²¡æœ‰å¸®åŠ©çš„å‚æ•°;
å¦‚æœæœ€ä½³é»˜è®¤ç§‹ç²®çš„æ›´æ”¹æ–¹å¼æ¥¼ä¸»æ›´æ–°ä»£ç çš„æœ€ä½³æ–¹æ³•æ˜¯ç»§ç»­ä½¿ç”¨é»˜è®¤å€¼--- ä¹Ÿè®¸å› ä¸ºæœ€ä½³å®è·µå‘ç”Ÿäº†å˜åŒ– ---
æˆ‘ä»¬å°†ä¸å¾—ä¸æ›´æ–°æ¯ä¸ªè°ƒç”¨, è€Œä¸æ˜¯åªè¦æ›´æ”¹ä¸€å¤„, å®šä¹‰äº†é»˜è®¤å‚æ•°é‚£é‡Œ;</p>
<p>é»˜è®¤å¾å¾ˆå¥½,å› ä¸º,å¥¹ä»¬å‡å°‘äº†ç¨‹åºå‘˜çš„è®¤çŸ¥è´Ÿæ‹…;
ç¨‹åºå‘˜å¿…é¡»ä¸€æ¬¡æ€§åœ¨å¤§è„‘ä¸­ä¿ç•™å¤§é‡ä¿¡æ¯,
è€Œé»˜è®¤è®¾ç½®é€šè¿‡ä¸å¼ºè¿«åœ¨æ— å…³åœºæ™¯æ—¶è¦è€ƒè™‘é¢å¤–çš„ç»†èŠ‚æ¥å¸®åŠ©ç¨‹åºå‘˜---è¿™æ˜¯å¤ªå¤šæ•°é»˜è®¤è®¾ç½®çš„å¸¸è§ä½œç”¨åœºæ™¯;</p>
<p>é»˜è®¤ç§‹ç²®ä¹Ÿä½¿ä»£ç æ›´åŠ ç®€æ´,
å› æ­¤, å¾ˆå—æ¬¢è¿;
ä½†æ˜¯,è¿™ä¸æ˜¯ä¸“æœ‰çš„ç‰¹æ®Šä»·å€¼;
æˆ‘ç›¸ä¿¡ DRY åŸåˆ™å¾ˆé‡è¦, è¿™é€šå¸¸æ„å‘³ç€æ›´åŠ ç®€æ´çš„ä»£ç ,
ä½†æ˜¯,è€ƒè™‘åˆ°ç°ä»£ç¼–è¾‘å™¨å’Œ IDE, ä»¥åŠç°ä»£äººåŠä¸ºæŠŠä¸ç”¨åˆå’Œé˜…è¯»é€Ÿåº¦çš„æœŸå¾…,
é€‚åº¦çš„å†—é•¿ä»¥èƒ½æ¢å–å…¶å®ƒå¥½å¤„(æ¯”å¦‚, æ¸…æ™°åº¦å’Œæ˜ç¡®æ€§),
æˆ‘è¿˜æ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„;
ç›¸ä¿¡é»˜è®¤å‚æ•°,å› ä¸ºè¿™æ˜¯åœ¨ C++ å’Œ Python ä¸­å®ç°çš„,
åœ¨æ¸…æ™°åº¦å’Œæ˜ç¡®æ€§æ–¹é¢ä»˜å‡ºäº†å·¨å¤§çš„ä»£ä»·,
å› æ­¤,ç®€æ´æ€§å¹¶ä¸æ˜¯è¯æ˜å¥¹ä»¬åˆç†çš„å……åˆ†ç†ç”±;</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸­, è®©æˆ‘ç‰¹åˆ«å›°æ‰°çš„æ˜¯ä»£ç ä¸­çš„ä¸æ¸…æ™°ä¹‹å¤„,
åœ¨äºä»£ç çš„è¯»è€…ä¸çŸ¥é“å¯èƒ½è¿˜æœ‰æ›´å¤šçš„å‚æ•°;
æ²¡æœ‰æš—ç¤ºå¯èƒ½è¿˜æœ‰å…¶å®ƒç§‹ç²®;
å¦‚æœç»´æŠ¤è€…æƒ³æ›´æ”¹å…¶ä¸­ä¸€ä¸ªè°ƒç”¨ä»¥ä¾¿åˆ›å»ºä¸å¯è§çš„çª—å£,
é¢†å¯¼ä½œç”¨å¯èƒ½æ²¡æœ‰æ„è¯†åˆ°åº”è¯¥å…ˆæ£€éªŒ create_window çš„æ–‡æ¡£:
æ¯•ç«Ÿ, ä¼¼ä¹åªæ¥å—ä¸¤ä¸ªå‚æ•°,
è€Œä¸”ä¹Ÿæ²¡æœ‰ä»»ä½•è¿œç¨‹ååº”é’ˆå¯¹ä¸å¯è§çª—å£;</p>
<p>å¹¸è¿çš„æ˜¯, Rust å…·æœ‰æ›¿ä»£ç‰¹æ€§,
ä½¿æˆ‘ä»¬èƒ½åœ¨ä¸ç‰ºç‰²æ˜ç¡®æ€§å’Œæ¸…æ™°æ€§çš„æƒ…å†µä¸‹,
ä¹Ÿè·å¾—è®¤çŸ¥è´Ÿè·å’Œ DRy çš„å¥½å¤„;</p>
<h2 id="rust-ä¸­çš„é»˜è®¤å€¼-é»˜è®¤-trait"><a class="header" href="#rust-ä¸­çš„é»˜è®¤å€¼-é»˜è®¤-trait">Rust ä¸­çš„é»˜è®¤å€¼: é»˜è®¤ trait</a></h2>
<p>Rust ä¸å…è®¸ä½¿ç”¨é»˜è®¤å‚æ•°,
è€Œæ˜¯å…è®¸ä½ ä½¿ç”¨ Default trait æœ‰é€‰æ‹©çš„ä¸ºä½ çš„ç±»å‹æŒ‡å®šé»˜è®¤å€¼;</p>
<p>æ˜¯è¿™æ ·å·¥ä½œçš„:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Foo {
    Bar,
    Baz,
}

impl Default for Foo {
    fn default() -&gt; Self {
        Foo::Bar
    }
}
<span class="boring">}</span></code></pre></pre>
<p>æˆ–æ˜¯, ä½¿ç”¨æ›´åŠ ç®€æ´çš„ æ´¾ç”Ÿ/derive è¯­æ³•ç¼–å†™:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Default)]
enum Foo {
    #[default]
    Bar,

    Baz,
}
<span class="boring">}</span></code></pre></pre>
<p>ä¸€æ—¦å®šä¹‰äº†è¿™ä¸ªé»˜è®¤å€¼,
Foo::default() æˆ–æ˜¯(åœ¨ç±»å‹æ˜ç¡®çš„ä¸Šä¸‹æ–‡ä¸­) Default::default() å°±å¯ä»¥ä»£è¡¨ Foo::Bar ;</p>
<p>å¦‚æœä½ ä¹ æƒ¯ä¸ºä½ çš„å‡½æ•°å‚æ•°é‡ç”¨ç°æœ‰ç±»å‹,
è¿™å¯èƒ½çœ‹èµ·æ¥æ¯”ä¸ç”¨æ›´åŠ ç³Ÿç³•;
æ¯•ç«Ÿ, æˆ‘ä»¬é»˜è®¤çš„å‚æ•°æ˜¯ bool ç±»å‹çš„,
å­¤å„¿è§„åˆ™(åœ¨ Rust çš„ trait ç›¸å…³ç« èŠ‚æœ‰è§£é‡Š) ç¦æ­¢æˆ‘ä»¬åœ¨ bool ä¸Šå®šä¹‰é»˜è®¤ trait ---
æ­£å¦‚æˆ‘åœ¨ä¸Šé¢æåŠçš„, Default å…è®¸ä½ å¯¹ç±»å‹å®šä¹‰é»˜è®¤å€¼;
å³ä¾¿,æˆ‘ä»¬å¯ä»¥ä¸º bool è®¾ç½®é»˜è®¤å€¼ä¹Ÿæ˜¯ä¸€ä»¶è¿‡äºå¼ºå¤§çš„äº‹å„¿,
æ— æ³•ä»…ä»…ä¸ºè¿™ä¸ªå‡½æ•°å‚æ•°æä¾›é»˜è®¤å€¼!
æ¯•ç«Ÿ, å…¶å®ƒä¸€äº›å‡½æ•°ä¹Ÿå¯èƒ½æœ‰ä¸€ä¸ªå…·æœ‰ä¸åŒé»˜è®¤å€¼çš„ bool ç±»å‹å‚æ•°;</p>
<p>ä½†æ˜¯,å¦‚æœåœ¨ Rust ä¸­è€ƒè™‘, è¿™æ›´åŠ æœ‰æ„ä¹‰ --- ç”šè‡³æ˜¯æƒ¯ç”¨çš„å’Œé¦–é€‰çš„ --- ä¸ºé…ç½®å’Œå‡½æ•°å‚æ•°ç­‰ç­‰åˆ›å»ºè‡ªå®šä¹‰ç±»å‹;
æ¯•ç«Ÿ, å¦‚æœä½ ä¸æŸ¥å®æ–‡æ¡£, å¯èƒ½ä¸æ¸…æ¥š true çš„å«ä¹‰;
ç”šè‡³äºä¸æ¸…æ¥šå’Œå¯è§æ€§æœ‰ä»€ä¹ˆå…³ç³»,
æ›´ä¸ç”¨è¯´å¾ˆå®¹æ˜“å°† true å½“å‚æ•°æ—¶æ„å‘³ç€ä¸å¯è§çª—å£æ˜¯å¯è§çš„;</p>
<p>åœ¨ Rust ä¸­,æˆ‘ä»¬æ›´åŠ æ„¿æ„ä¸ºè¿™ä¸€æƒ…å†µå®šä¹‰ä¸€ä¸ªæ–°ç±»å‹, ä¸€ä¸ªåˆ—å‡ºå¯è§æ€§é€‰é¡¹çš„æšä¸¾---å¦‚æœåˆ›å»ºä¸€ä¸ªæ–°çš„å¯è§æ€§é€‰é¡¹,
è¿™æ‰æœ‰æ‰€å¸®åŠ©;
åœ¨è¿™ä¸ªæšä¸¾ä¸Š, å£°æ˜ä¸€ä¸ªé»˜è®¤å€¼æ‰æ˜¯åˆç†çš„:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Default)]
enum WindowVisibility {
    #[default]
    Visible,

    Invisible,
}
<span class="boring">}</span></code></pre></pre>
<p>æ˜¯çš„, è¿™æ¯”æˆ‘ä»¬çš„åŸå§‹ä»£ç æœ‰äº›å†—é•¿, ä½†æ›´æ¸…æ™°,
è€Œä¸”ä¸ä¹ DRY ;
ç®€æ´æœ¬èº«å¹¶ä¸æ˜¯ä¸€ç§ä»·å€¼;
æ˜ç¡®çš„åˆ—å‡ºé€‰é¡¹æ¯”éšå¼é€‰é¡¹æ›´å¯å–;</p>
<p>ç„¶å, å½“æˆ‘ä»¬è°ƒç”¨è¯¥å‡½æ•°æ—¶, å¯ä»¥è¿™ä¹ˆä½¿ç”¨é»˜è®¤å€¼:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn create_window(width: u32, height: u32, visibility: WindowVisibility) -&gt; WindowHandle;

let handle = create_window(10, 30, WindowVisibility::Invisible);
let handle2 = create_window(100, 500, WindowVisibility::Visible);

let handle3 = create_window(100, 500, WindowVisibility::default());
let handle4 = create_window(100, 500, WindowVisibility::default());
let handle5 = create_window(100, 500, Default::default()); // ä¹Ÿå…è®¸
<span class="boring">}</span></code></pre></pre>
<p>æ­£å¦‚æ‰¿è¯ºçš„é‚£æ ·, è¿™æ ·å†—é•¿äº›, åŒæ · DRY,
ä½†æ˜¯, æ›´åŠ æ˜ç¡®å’Œæ¸…æ™°; (æ— æ­§ä¹‰)</p>
<p>æ³¨æ„: æˆ‘ä½¿ç”¨ç‹¬ç«‹å‡½æ•°åªæ˜¯ä¸ºäº†ä¸¾ä¾‹;
å®é™…ä¸Š, è¿™ä¸ªç‰¹å®šå‡½æ•°å¾ˆå¯èƒ½æ˜¯ç±»å‹å†…éƒ¨æ–¹æ³•çš„ä¸€éƒ¨åˆ†,
ä¾‹å¦‚ WindowHandle::new æˆ–æ˜¯ WindowHandle::create_window;</p>
<h3 id="rust-ä¸­é»˜è®¤å€¼ç¼©æ”¾-ç»“æ„æ›´æ–°è¯­æ³•"><a class="header" href="#rust-ä¸­é»˜è®¤å€¼ç¼©æ”¾-ç»“æ„æ›´æ–°è¯­æ³•">Rust ä¸­é»˜è®¤å€¼ç¼©æ”¾: ç»“æ„æ›´æ–°è¯­æ³•</a></h3>
<p>æ‰€ä»¥, è¿™å¯¹äºä¸€ä¸ªé»˜è®¤å€¼æ¥è¯´å½¢å¼ä¸Šæ›´å¥½;
ä½†æ˜¯,æ‹“å±•æ€§å¹¶ä¸å¥½;
å¦‚æœæˆ‘ä»¬æƒ³åœ¨æˆ‘ä»¬çš„çª—å£åˆ›å»ºå‡½æ•°ä¸­è¿½åŠ å¦å¤–3ä¸ªå‚æ•°æ€ä¹ˆåŠ?
åœ¨ C++ ä¸­, å¯ä»¥å¯ä»¥ä¸ºå¥¹ä»¬æä¾›é»˜è®¤å€¼,
è°ƒç”¨è€…ç”šè‡³ä¸éœ€è¦æ›´æ–°(å‚æ•°ä»…ç”¨æ¥ç¤ºä¾‹, å¹¶ä¸ä»£è¡¨åœ¨åˆ›å»ºçª—å£):</p>
<pre><code class="language-C++">WindowHandle createWindow(int width, int height, bool visible = true,
                          WindowStyle windowStyle = WindowStyle::Standard,
                          int z_position = -1,
                          bool autoclose = false);

createWindow(100, 500); // Still works identically
createWindow(100, 500, false); // Also still works
createWindow(100, 500, false, WindowStyle::Standard, 2, true); // Specify everything
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„åŠŸèƒ½;
åœ¨ Rust ä¸­,ä½¿ç”¨ç›®å‰è®¨è®ºçš„æŠ€æœ¯,
æ— è®ºå‚æ•°æœ‰å¤šå°‘,æˆ‘ä»¬éƒ½å¿…é¡»é‡å¤ç¼–å†™ Default::default() ;
è¿™æ˜¯ DRY è¿è§„è¡Œä¸º, ä¼šå¹²æŒ è¿½åŠ æ–°å‚æ•°çš„èƒ½åŠ›;</p>
<p>ä½†æ˜¯, æ­¤åŠŸèƒ½ä¹Ÿå­˜åœ¨ç¼ºé™·;
ä½ ç°åœ¨å·²ç»é™åˆ¶è‡ªå·±åœ¨å·¦ä¾§æŒ‡å®šå‚æ•°,
ä»¥ä¾¿åœ¨å³ä¾§è¿½åŠ å‚æ•°;
åœ¨è°ƒç”¨ createWindow æœ€åä¸€ä¸ªç¤ºä¾‹ä¸­, æˆ‘ä»¬é€šè¿‡æ˜¾å¼æŒ‡å®šä¸€ä¸ªå€¼æ¥è¿å DRY,
å½“æ—¶æˆ‘ä»¬å¯èƒ½æƒ³ä½¿ç”¨é»˜è®¤å€¼,ä½†æ˜¯,è¯¥å€¼ä¸å¯ç”¨, å› ä¸º,æˆ‘ä»¬æƒ³ä¸ºä»¥åçš„å‚æ•°è¦†ç›–é»˜è®¤å€¼;</p>
<p>å¹¸è¿çš„æ˜¯, Rust ä¹Ÿæœ‰è¿™ç§ç‰ˆæœ¬;
æ­£å¦‚æˆ‘ä»¬åªæ˜¯ä¸ºäº†è¿™ä¸ªå‡½æ•°è°ƒç”¨è€Œåˆ›å»ºäº†ä¸€ä¸ªæšä¸¾ä¸€æ ·,
åœ¨ Rust ä¸­ä¸ºè¿™ç§é…ç½®å‚æ•°åˆ›å»ºç»“æ„ä¹Ÿæ˜¯æƒ¯ç”¨çš„;
è¯¥ç»“æ„çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct WindowConfig {
    pub width: u32,
    pub height: u32,
    pub visibility: WindowVisibility,
    pub window_style: WindowStyle,
    pub z_position: i32,
    pub autoclose: AutoclosePolicy,
}
<span class="boring">}</span></code></pre></pre>
<p>ç„¶å, æˆ‘ä»¬å°±å¯ä»¥ä¸ºæ•´ä¸ªç»“æ„æŒ‡å®š Default:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Default for WindowConfig {
    fn default() -&gt; Self {
        Self {
            width: 100,
            height: 100,
            visibility: WindowVisibility::Visible,
            window_style: WindowStyle::Standard,
            z_position: -1,
            autoclose: AutoclosePolicy::Disable,
        }
    }
}
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨, ä¼¼ä¹ä½¿ç”¨èµ·æ¥å¾ˆä¹å‘³;
ä½ å¯èƒ½æƒ³è±¡å¾—è¿™ä¹ˆä½¿ç”¨:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut config = WindowConfig::default();
config.width = 500;
config.z_position = 2;
config.autoclose = AutoclosePolicy::Enable;
let handle = create_window(config);
<span class="boring">}</span></code></pre></pre>
<p>æˆ‘è®¤ä¸ºå³ä¾¿æ˜¯è¿™æ ·ä¹Ÿæ¯”é»˜è®¤ç§‹ç²®å¯å–,
å› ä¸º,è¿™æ ·æ˜¯æ˜ç¡®çš„;
ç„¶è€Œ, Rust æœ‰ä¸€ä¸ªä¸“é—¨ä¸ºè¿™ç§æƒ…å†µè®¾è®¡çš„è¯­æ³•ç»“æ„:
struct update syntax ;
æœ‰äº†è¿™,æˆ‘ä»¬è·å¾—çš„ä¸œè¥¿å’Œé»˜è®¤å‚æ•°éå¸¸ç›¸ä¼¼,
ä½†æ˜¯,æ›´å†—é•¿/æ˜ç¡®/çµæ´»:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let handle = create_window(WindowConfig {
    width: 500,
    z_position: 2,
    autoclose: AutoclosePolicy::Enable,
    ..Default::default()
});
<span class="boring">}</span></code></pre></pre>
<p>ä¸åƒ C++ é£æ ¼çš„è¨€è®ºå‚æ•°,
æˆ‘ä»¬å¯ä»¥å®Œå…¨è¦†ç›–æˆ‘ä»¬æƒ³è¦çš„é»˜è®¤å€¼;
åŒæ ·æ˜ç¡®çš„æ˜¯,
å¦‚æœæˆ‘ä»¬æ„¿æ„, ç”šè‡³å¯ä»¥ä¿®æ”¹å…¶å®ƒå‚æ•°,
è€Œä¸éœ€å¼ºåˆ¶ç»´æŠ¤å¼€å‘è€…æ£€æŸ¥æ–‡æ¡£;</p>
<p>é™¤æ­¤ä¹‹å¤–, è¿™æ ·å…è®¸å®šä¹‰å…¶å®ƒé»˜è®¤å€¼é›†;
é™¤äº† WindowConfig::default ä¹‹æ¸‘, å¯èƒ½è¿˜æœ‰å¦å¤–ä¸€ç»„ç”¨æ¥åˆ›å»ºå¯¹è¯æ¡†çš„é…ç½®å‚æ•°,
ä¾‹å¦‚: like WindowConfig::dialog() æˆ–æ˜¯ WindowConfig::default_dialog ;
ç¨‹åºå‘˜é€šå¸¸åœ¨åˆ›å»ºä¸å¯è§çª—å£, æˆ–æ˜¯é«˜åº¦ç›¸åŒçš„çª—å£åº”ç”¨,
å¯èƒ½ä¼šå®šä¹‰è‡ªå·±çš„é»˜è®¤è®¾ç½®, config::app_local_default_window_config();
è¿™äº›ä¸ä¼šé€šè¿‡ Default ç‰¹æ€§æ¥è°ƒè§£,
ä½†æ˜¯, Default åªæ˜¯ä¸€ä¸ª trait ,
è€Œ Default::default() æ˜¯ä¸€ä¸ªæ–¹æ³•è°ƒç”¨;
ä½ å¯ä»¥æ”¹ä¸ºè°ƒç”¨è‡ªå·±çš„æ–¹æ³•,
å¹¶ä»ç„¶ä½¿ç”¨æ­¤<code>ç»“æ„æ›´æ–°è¯­æ³•</code>;</p>
<p>æ‰€ä»¥,ç°åœ¨æˆ‘ä»¬åœ¨ Rust ä¸­æœ‰ä¸€ä¸ªä¹ æƒ¯ç”¨è¯­ç³»ç»Ÿæ¥æ›¿æ¢é»˜è®¤å‚æ•°;
è¿™å’Œ DRY ä¸€æ ·,
å¹¶ä¸”åŒæ ·å‡å°‘äº†è®¤çŸ¥è´Ÿè·;
æ›´åŠ é‡è¦çš„æ˜¯, è¿™æ ·ä½œå¹¶æ²¡æœ‰ç‰ºç‰²å¯¹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆçš„æ˜ç¡®æ€§ä¸æ¸…æ™°æ€§ --- ä¸€ä¸ªç»™å®šçš„å‡½æ•°æ€»æ˜¯é‡‡ç”¨ç›¸åŒæ•°é‡çš„å‚æ•°,
è¿™æ˜¯ Rust ç»´æŠ¤å¼€å‘è€…å¯ä»¥(å¹¶ä¸”æ­£åœ¨)ä¾èµ–çš„ä¸å˜é‡;</p>
<h3 id="æ„å»ºå™¨æ¨¡å¼"><a class="header" href="#æ„å»ºå™¨æ¨¡å¼">æ„å»ºå™¨æ¨¡å¼</a></h3>
<p>åœ¨è¿™ç‚¹ä¸Š, Rustacean è€æ‰‹ä»¬åº”è¯¥èƒ½æ³¨æ„åˆ°è¿˜æ²¡è®¨è®ºä¸€ç§é€šç”¨çš„ Rust æ–¹æ³•æ¥è®¾è®¡è¿™äº›é…ç½®ç»“æ„,
å³:  <code>æ„å»ºå™¨æ¨¡å¼</code> (Builder Pattern);</p>
<p>è¿™æ˜¯æœ‰åŸå› çš„: æˆ‘ä¸å–œæ¬¢ä¸«çš„;
(è¯‘æŒ‰: åƒé‡‘å©ä¹°æˆ‘æ„¿æ„, æ²¡é”™...)
æˆ‘ä¸ªäººæ›´åŠ å–œæ¬¢ä½¿ç”¨ Default å’Œ struct update è¯­æ³•,
å…¶å®ƒäººå¯èƒ½ä¼šä½¿ç”¨  <code>æ„å»ºå™¨æ¨¡å¼</code>  ;
æˆ‘è®¤ä¸ºè¿™ç§æ¨¡å‹ä¸å¤Ÿæ˜ç¡®, è€Œä¸”ç”±äºåœ¨é OOP ç¼–ç¨‹è¯­è¨€æ–¹é¢æœ‰å¾ˆå¤šç»éªŒ,
æ‰€ä»¥,æˆ‘è§‰å¾—è¿™æ˜¯ä¸€ç§æ²¡æœ‰é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ, ä¸»è¦æˆæœåªæ˜¯ä»¤ä»£ç çœ‹èµ·æ¥æ›´åŠ  OOP è€Œå·²;</p>
<p>ä¸è¿‡, è¿™ä¹Ÿæ˜¯ Rust ä¸­å¸¸ç”¨çš„æ¨¡å¼, ä¸€èˆ¬ä½¿ç”¨ <code>æ„å»ºå™¨æ¨¡å¼</code> çš„ crate,
å› è€Œå€¼å¾—ç†Ÿæ‚‰ä¹‹;
è¿™å’Œä»¥å¾€çš„æ¦‚å¿µç›¸åŒ:
ä½¿ç”¨å……æ»¡å‚æ•°çš„ç»“æ„, å°†é…ç½®å‘é€åˆ° æ„å»ºå‡½æ•°æˆ–æ˜¯å‡½æ•°è°ƒç”¨;
æœ‰æ—¶è¿™ç§ä¼šè¢«ç§°ä¸º WindowBuilder è€Œä¸æ˜¯ WindowConfig;</p>
<p>ä½†æ˜¯, ä¸ç›´æ¥ä½¿ç”¨ç»“æ„æ›´æ–°è¯­æ³•, è€Œæ˜¯æ·»åŠ äº†ä¸€å †è¾…åŠ©æ–¹æ³•æ¥æ‰§è¡Œç»“æ„æ›´æ–°:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl WindowBuilder {
    fn height(mut self, height: u32) -&gt; Self {
        self.height = height;
        self
    }

    // ...
}
<span class="boring">}</span></code></pre></pre>
<p>æˆ–è€…, æ­£å¦‚æƒ³æŒ‡å‡ºçš„é‚£æ ·:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl WindowBuilder {
    fn height(self, height: u32) -&gt; Self {
        Self {
            height,
            ..self
        }
    }

    // ...
}
<span class="boring">}</span></code></pre></pre>
<p>æœ‰æ—¶, æšä¸¾è¢«æ‹†åˆ†ä¸ºå¤šä¸ªæ›´æ–°æ–¹æ³•:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl WindowBuilder {
    fn autoclose_enable(mut self) -&gt; Self {
        self
        self.autoclose = AutoclosePolicy::Enable;
    }

    fn autoclose_disable(mut self) -&gt; Self {
        self.autoclose = AutoclosePolicy::Disable;
        self
    }
}
<span class="boring">}</span></code></pre></pre>
<p>ç„¶å, é€šå¸¸å¹¶ä¸æ˜¯è°ƒç”¨ä¾‹å¦‚: window constructor,
ä½ è°ƒç”¨åœ¨æ„å»ºå™¨ä¸Šå®šä¹‰çš„æ„å»ºæ–¹æ³•
(æ­¤æ—¶,å·²ç»å¯¹å½±å“è®¾è®¡çš„æ— å¿ OOP å“²å­¦æ„Ÿåˆ°ç•ç¼©)</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl WindowBuilder {
    fn build(self) {
        window_create(self)
    }
}
<span class="boring">}</span></code></pre></pre>
<p>å…¶å®,ä¸ç”¨ struct update è¯­æ³•,
è€Œæ˜¯å°†å¯¹è¿™äº›æ–¹æ³•è°ƒç”¨é“¾æ¥åœ¨ä¸€èµ·:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let handle = WindowBuilder::new()
    .width(500)
    .z_position(2)
    .autoclose_enable()
    .build();
<span class="boring">}</span></code></pre></pre>
<p>æˆ‘ä»ç„¶æ›´åŠ å–œæ¬¢è¿™ä¸ª, è€Œä¸æ˜¯é»˜è®¤å‚æ•°,
ä½†æ˜¯, åŒæ—¶ä¹Ÿæ„Ÿè§‰æœ‰ç‚¹ä¿—æ°”;
æˆ‘ä¸å–œæ¬¢è¢«è¿«ä½¿ç”¨åƒ æ„å»ºå™¨ è¿™æ ·çš„æŠ½è±¡&quot;å¯¹è±¡&quot;æ¥æ€è€ƒ,
ä¹Ÿä¸å–œæ¬¢è¿™ç§é£æ ¼ä¸­æ›´ç›´è§‚çš„å‡è®¾;
ä¸ºä»€ä¹ˆ &quot;æ„å»ºå™¨&quot; æ˜¯ä½œæŸä»¶äº‹å„¿çš„å¯¹è±¡?
ä¸ºä»€ä¹ˆå®ƒæ¯”&quot;é…ç½®&quot;ç»“æ„æ›´å—æ¬¢è¿?
OOP ç¨‹åºå‘˜æ˜¯å¦æ„è¯†åˆ°åœ¨ç°å®ç”Ÿæ´»ä¸­, ç»å¤§å¤šæ•°å¯¹è±¡æ ¹æœ¬ä¸ä½œä»»ä½•äº‹å„¿,
å½“ç„¶, ä¹Ÿä¸ä¼šæ„å»ºå…¶å®ƒå¯¹è±¡?</p>
<p>ä½†æ˜¯, å¯¹äºç†Ÿæ‚‰ OOP ä¹ æƒ¯ç”¨æ³•çš„äººæ¥è¯´,
è¿™å¯èƒ½æ›´å¯å–;
è¿™æ˜¯ä¸€ä¸ªæ™®é€šé€‰æ‹©çš„é€‰é¡¹, å› æ­¤, è‡³å°‘è¯†åˆ«è¿™ç§æ¨¡å¼å¾ˆé‡è¦;</p>
<h2 id="ç»“è®ºå’Œåº”ç”¨"><a class="header" href="#ç»“è®ºå’Œåº”ç”¨">ç»“è®ºå’Œåº”ç”¨</a></h2>
<p>Rust æœ‰å¾ˆå¤šä¸åŒäºå…¶å®ƒè¯­è¨€çš„ä¹ æƒ¯;
æˆ‘ç»å¸¸çœ‹åˆ°æ–°çš„ Rustacean æè®®ä¸º Rust æ·»åŠ é»˜è®¤å‚æ•°å’Œå…¶å®ƒç±»ä¼¼çš„åŠŸèƒ½,
è€Œè¿™äº›æ–° Rustacean æ„Ÿåˆ°å›°æƒ‘çš„æ˜¯, 
é¢†å¯¼ä½œç”¨æ„Ÿå—åˆ°çš„å¼ºçƒˆè¦æ±‚åœ¨æ›´å¤§çš„ Rust ç¤¾åŒºä¸­å¹¶æ²¡æœ‰è¢«å¹¿æ³›æ„Ÿå—åˆ°;</p>
<p>é€šå¸¸, è¿™å’Œé»˜è®¤å‚æ•°ç±»ä¼¼;
æœ‰å®ç°ç›¸åŒç›®æ ‡çš„æ›¿ä»£ä¹ è¯­, å˜¦è¿™äº›ç›®æ ‡ç¬¦åˆ Rust çš„ä»·å€¼è§‚:
åœ¨æ­¤åœºæ™¯ä¸­, DRYness å¹¶å‡å°‘å¼€å‘è€…è®¤çŸ¥è´Ÿæ‹…;
æ ¹æ® Rusty çš„ä»·å€¼è§‚, å¥¹ä»¬åœ¨å…¶å®ƒæ–¹é¢ä¹Ÿæ˜¯æ›´å¥½çš„è§£å†³æ–¹æ¡ˆ: é¢å¤–çš„æ˜ç¡®æ€§å€¼å¾—å¤šç‚¹å†—é•¿ä»£ç ;</p>
<p>æ‰€ä»¥, æˆ‘å¸Œæœ›è¿™å¯ä»¥ä½œä¸ºä¸€ä¸ªæ¡ˆä¾‹ç ”ç©¶æ¥æŠ¥æ—¶å¤§å®¶ç†è§£,
é€šå¸¸æ€»æ˜¯æœ‰ Rusty çš„æ–¹æ³•æ¥å®ç° OOP é¢†åŸŸæµè¡ŒåŠŸèƒ½ç›®æ ‡,
ä»¥åŠ, ä¸ºä»€ä¹ˆ Rustacean æ›´åŠ å–œæ¬¢è¿™äº›æ–¹æ¡ˆè€Œä¸æ˜¯ç›²ç›®çš„ç§¯ç´¯æ–°åŠŸèƒ½;</p>
<h2 id="logging-16"><a class="header" href="#logging-16">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230220 ZQ v0 DONE</li>
<li>230212 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ç¬”è®°"><a class="header" href="#ç¬”è®°">ç¬”è®°</a></h1>
<blockquote>
<p>logging</p>
</blockquote>
<h2 id="background-12"><a class="header" href="#background-12">background</a></h2>
<blockquote>
<p>æ— å¥ˆèƒŒæ™¯</p>
</blockquote>
<p>ä»»ä½•è‡ªå­¦éƒ½éœ€è¦æ¢ç´¢+å†…çœ, åŒæ—¶æ¥, å¦åˆ™, å¾ˆå®¹æ˜“ä¸çŸ¥é“åœ¨æŠ˜è…¾ä»€ä¹ˆ...</p>
<h2 id="goal-10"><a class="header" href="#goal-10">goal</a></h2>
<blockquote>
<p>å¿…è¦ç›®æ ‡</p>
</blockquote>
<ul>
<li>æ˜¯è°?</li>
<li>åœ¨å“ª?</li>
<li>å»å“ª?</li>
</ul>
<p>éšæ—¶å—¯å“¼æ˜ç™½...</p>
<h2 id="trace-10"><a class="header" href="#trace-10">trace</a></h2>
<blockquote>
<p>å…·ä½“æ¨è¿›</p>
</blockquote>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
åŸºæœ¬ç¯å¢ƒ</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬è¯­æ³•</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬ std</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬é¡¹ç›®ç»“æ„</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬ç»å…¸å·¥ç¨‹</li>
<li><input disabled="" type="checkbox"/>
åŸºæœ¬...ä¹ æƒ¯ä»¬?</li>
</ul>
<h2 id="refer-15"><a class="header" href="#refer-15">refer.</a></h2>
<blockquote>
<p>å…³é”®å‚è€ƒ</p>
</blockquote>
<h2 id="logging-17"><a class="header" href="#logging-17">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>221023 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-ä¸‘å¥æ³•"><a class="header" href="#rust-ä¸‘å¥æ³•">Rust ä¸‘å¥æ³•</a></h1>
<p>åŸæ–‡: <a href="https://matklad.github.io/2023/01/26/rusts-ugly-syntax.html#Rust-s-Ugly-Syntax">Rust's Ugly Syntax</a></p>
<h2 id="å¿«è¯‘-4"><a class="header" href="#å¿«è¯‘-4">å¿«è¯‘</a></h2>
<p>å¤§å®¶æŠ±æ€¨ Rust çš„è¯­æ³•;
ä¸è¿‡,ä¿ºæƒ³å¤§å¤šæ•°æ—¶å€™,
å½“äººä»¬è®¤ä¸ºåœ¨å¯¹ Rust è¯­æ³•æœ‰ç–‘é—®æ—¶,
å®é™…ä¸Šåœ¨åæŠ—å¯¹åº”è¯­ä¹‰;
åœ¨è¿™ç¯‡æœ‰ç‚¹å„¿å¼‚æƒ³å¤©å¼€çš„æ–‡ç« ä¸­,
ä¿ºå°†å°è¯•ç†æ¸…è¿™ä¸¤ç‚¹;</p>
<p>å…ˆä»ä¸€ä¸ªä¸‘é™‹çš„è¯­æ³•ç¤ºä¾‹å¼€å§‹:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read&lt;P: AsRef&lt;Path&gt;&gt;(path: P) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
  fn inner(path: &amp;Path) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
    let mut file = File::open(path)?;
    let mut bytes = Vec::new();
    file.read_to_end(&amp;mut bytes)?;
    Ok(bytes)
  }
  inner(path.as_ref())
}
<span class="boring">}</span></code></pre></pre>
<p>æ­¤å‡½æ•°è¯»å–ç»™å®šäºŒè¿›åˆ¶æ–‡ä»¶å†…å®¹;
è¿™æ˜¯ç›´æ¥ä»æ ‡å‡†åº“ä¸­æå–çš„, æ‰€ä»¥, ä¸ç®—æ˜¯ç¨»è‰äººå¼æ— ç”¨ç¤ºä¾‹;
è€Œä¸”,è‡³å°‘å¯¹ä¿ºæ¥è¯´, è¿™ç»å¯¹ä¸ç®—æ¼‚äº®;</p>
<p>è®©æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹,å¦‚æœ Rust æœ‰æ›´å¥½çš„è¯­æ³•, è¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å„¿;
å¦‚æœå’ŒçœŸæ­£çš„ç¼–ç¨‹è¯­è¨€æœ‰ä»»ä½•ç›¸ä¼¼ä¹‹å¤„, æ— è®ºçœŸå‡, çº¯å±è¯•åˆ!</p>
<p>ä» Rs++ å¼€å§‹:</p>
<pre><code class="language-c++">template&lt;std::HasConstReference&lt;std::Path&gt; P&gt;
std::io::outcome&lt;std::vector&lt;uint8_t&gt;&gt;
std::read(P path) {
    return read_(path.as_reference());
}

static
std::io::outcome&lt;std::vector&lt;uint8_t&gt;&gt;
read_(&amp;auto const std::Path path) {
    auto file = try std::File::open(path);
    std::vector bytes;
    try file.read_to_end(&amp;bytes);
    return okey(bytes);
}
</code></pre>
<p>Rhodes å˜ä½“:</p>
<pre><code class="language-ruby">public io.Result&lt;ArrayList&lt;Byte&gt;&gt; read&lt;P extends ReferencingFinal&lt;Path&gt;&gt;(
        P path) {
    return myRead(path.get_final_reference());
}

private io.Result&lt;ArrayList&lt;Byte&gt;&gt; myRead(
        final reference lifetime var Path path) {
    var file = try File.open(path);
    ArrayList&lt;Byte&gt; bytes = ArrayList.new();
    try file.readToEnd(borrow bytes);
    return Success(bytes);
}
</code></pre>
<p>ç»å…¸ RhodesScript:</p>
<pre><code class="language-js">public function read&lt;P extends IncludingRef&lt;Path&gt;&gt;(
    path: P,
): io.Result&lt;Array&lt;byte&gt;&gt; {
    return myRead(path.included_ref());
}

private function myRead(
    path: &amp;const Path,
): io.Result&lt;Array&lt;byte&gt;&gt; {
    let file = try File.open(path);
    Array&lt;byte&gt; bytes = Array.new()
    try file.readToEnd(&amp;bytes)
    return Ok(bytes);
}
</code></pre>
<p>å“å°¾è›‡/Rattlesnake:</p>
<pre><code class="language-python">def read[P: Refing[Path]](path: P): io.Result[List[byte]]:
    def inner(path: @Path): io.Result[List[byte]]:
        file := try File.open(path)
        bytes := List.new()
        try file.read_to_end(@: bytes)
        return Ok(bytes)
    return inner(path.ref)
</code></pre>
<p>ä»¥åŠ, CrabML:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>read :: 'p  ref_of =&gt; 'p -&gt; u8 vec io.either.t
let read p =
  let
    inner :: &amp;path -&gt; u8 vec.t io.either.t
    inner p =
      let mut file = try (File.open p) in
      let mut bytes = vec.new () in
      try (file.read_to_end (&amp;mut bytes)); Right bytes
  in
    ref_op p |&gt; inner
;;
<span class="boring">}</span></code></pre></pre>
<p>ä½œä¸ºä¸€ä¸ªç¨å¾®ä¸¥è‚ƒå’Œæœ‰ç”¨çš„ç»ƒä¹ ,
è®©æˆ‘ä»¬ä½œç›¸åçš„å°è¯•--ä¿ç•™ Rust è¯­æ³•,
ä½†æ˜¯, å°è¯•ç®€åŒ–è¯­ä¹‰ç›´åˆ°æœ€ç»ˆç»“æœ, çœ‹ä¼šæ˜¯ä»€ä¹ˆæ ·å„¿;</p>
<p>è¿™æ˜¯æˆ‘ä»¬çš„èµ·ç‚¹:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read&lt;P: AsRef&lt;Path&gt;&gt;(path: P) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
  fn inner(path: &amp;Path) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
    let mut file = File::open(path)?;
    let mut bytes = Vec::new();
    file.read_to_end(&amp;mut bytes)?;
    Ok(bytes)
  }
  inner(path.as_ref())
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™æ—¶, æœ€å¤§çš„å™ªéŸ³æºæ˜¯åµŒå¥—å‡½æ•°;
åŠ¨æœºæœ‰ç‚¹å„¿æ·±å¥¥;
å¤–éƒ¨å‡½æ•°æ˜¯é€šç”¨çš„,è€Œå†…éƒ¨ä¸æ˜¯;
ä½¿ç”¨ç¼–è¯‘æ¨¡å¼,è¿™æ„å‘³ç€å¤–éƒ¨å‡½æ•°å’Œç”¨æˆ·ä»£ç ä¸€èµ·ç¼–è¯‘,
è€ŒåµŒçš„å°†ä¼˜åŒ–;
ç›¸æ¯”ä¹‹ä¸‹, å†…éƒ¨å‡½æ•°æ˜¯åœ¨ç¼–è¯‘ std æœ¬èº«æ—¶ç¼–è¯‘çš„,
ä»è€ŒèŠ‚çœäº†ç¼–è¯‘ç”¨æˆ·ä»£ç çš„æ—¶é—´;
ç®€åŒ–è¿™ä¸€ç‚¹(æŸå¤±ä¸€äº›æ€§èƒ½)çš„ä¸€ç§æ–¹æ³•,
è¯´æ˜¯æ³›å‹å‡½æ•°æ€»æ˜¯å•ç‹¬ç¼–è¯‘,
ä½†æ˜¯,èƒ½åœ¨å¹•åæ¥å—ä¸€ä¸ªé¢å¤–çš„è¿è¡Œæ—¶ç§‹ç²®, å¯ä»¥æè¿°ç‰©ç†ç»´åº¦ä¸Šçš„è¾“å…¥å‚æ•°;</p>
<p>è¿™æ ·æˆ‘ä»¬è·å¾—:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read&lt;P: AsRef&lt;Path&gt;&gt;(path: P) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
  let mut file = File::open(path.as_ref())?;
  let mut bytes = Vec::new();
  file.read_to_end(&amp;mut bytes)?;
  Ok(bytes)
}
<span class="boring">}</span></code></pre></pre>
<p>ä¸‹ä¸ªå™ªéŸ³å…ƒç´ æ˜¯ <code>&lt;P: AsRef&lt;Path&gt;&gt;</code> çº¦æŸ;
è¿™æ˜¯å¿…éœ€çš„,å› ä¸º Rust å–œæ¬¢å°†å†…å­˜ä¸­å­—èŠ‚çš„ç‰©ç†å¸ƒå±€ä½œä¸ºæ¥å£å…¬å¼€,
ç‰¹åˆ«æ˜¯å¯¹å¯ä»¥å¸¦æ¥æ€§èƒ½çš„æƒ…å†µ;
ç‰¹æ®Šçš„, Path çš„å«ä¹‰å¹¶ä¸æ˜¯æ–‡ä»¶è·¯å¾„çš„æŸç§æŠ½è±¡,
è¿™é‡Œåªæ˜¯å­—é¢æ„ä¹‰ä¸Šå†…å­˜ä¸­çš„ä¸€å †è¿ç»­å­—èŠ‚;
æ‰€ä»¥, æˆ‘ä»¬éœ€è¦ AsRef æ¥å°†å…¶å’Œä»»ä½•èƒ½å¤Ÿè¡¨ç¤ºè¿™ç§å­—èŠ‚ç‰‡çš„æŠ½è±¡ä¸€èµ·å·¥ä½œ;
ä½†æ˜¯, å¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒæ€§èƒ½,
å°±å¯ä»¥è¦æ±‚æ‰€æœ‰æ¥å£éƒ½ç›¸å½“æŠ½è±¡,å¹¶é€šè¿‡è™šå‡½æ•°è°ƒç”¨è¿›è¡Œè°ƒè§£,
è€Œä¸æ˜¯ç›´æ¥è®¿é—®å†…å­˜;
é‚£ä¹ˆ, æˆ‘ä»¬å°±ä¸éœ€è¦ AsRef è¿™å †ä¸œè¥¿äº†:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read(path: &amp;Path) -&gt; io::Result&lt;Vec&lt;u8&gt;&gt; {
  let mut file = File::open(path)?;
  let mut bytes = Vec::new();
  file.read_to_end(&amp;mut bytes)?;
  Ok(bytes)
}
<span class="boring">}</span></code></pre></pre>
<p>è¿™æ ·ç®€åŒ–å,æˆ‘ä»¬å®é™…ä¸Šä¹Ÿå¯ä»¥æ‘†è„± <code>Vec&lt;u8&gt;</code> -- å¦‚æœæˆ‘ä»¬ä¸å†ä½¿ç”¨æ³›å‹æ¥è¡¨è¾¾è¯­è¨€æœ¬èº«çš„é«˜æ•ˆå¯å¢é•¿å­—èŠ‚æ•°ç»„;
æˆ‘ä»¬å¿…é¡»ä½¿ç”¨è¿è¡Œæ—¶æä¾›çš„ä¸€äº›ä¸é€æ˜å­—èŠ‚ç±»å‹:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read(path: &amp;Path) -&gt; io::Result&lt;Bytes&gt; {
  let mut file = File::open(path)?;
  let mut bytes = Bytes::new();
  file.read_to_end(&amp;mut bytes)?;
  Ok(bytes)
}
<span class="boring">}</span></code></pre></pre>
<p>ä»æŠ€æœ¯ä¸Šè®²,æˆ‘ä»¬ä»ç„¶éšèº«æºå¸¦æ‰€æœ‰æƒå’Œå¤‡ç”¨ç³»ç»Ÿ,
ä½†æ˜¯,ç”±äºæ— æ³•ç›´æ¥æ§åˆ¶ç±»å‹çš„å†…å­˜å¸ƒå±€,
å°±æ— æ³•å¸¦æ¥å·¨å¤§çš„æ€§èƒ½ä¼˜åŠ¿;
ä»ç„¶æœ‰åŠ©äºé¿å… GC,é˜²æ­¢è¿­ä»£å™¨å¤±æ•ˆ,
å¹¶é™æ€æ£€éªŒéçº¿ç¨‹å®‰å…¨ä»£ç æ˜¯å¦å®é™…ä¸Šæ²¡æœ‰è·¨çº¿ç¨‹ä½¿ç”¨;
ä¸è¿‡, å¦‚æœæˆ‘ä»¬åªåˆ‡æ¢åˆ° GC, æˆ‘ä»¬å¯ä»¥è½»æ¾æ‘†è„±é‚£äº› &amp;æŒ‡é’ˆ;
æˆ‘ä»¬ç”šè‡³äºä¸éœ€è¦å¤ªæ‹…å¿ƒå¹¶å‘æ€§--å› ä¸º,æˆ‘ä»¬çš„å¯¹è±¡æ˜¯å•ç‹¬åˆ†é…çš„,è€Œä¸”æ€»æ˜¯åœ¨æŒ‡é’ˆåé¢,
æˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨æ„åˆ°æŒ‡é’ˆå¤§å°,
æ— è®ºæ˜¯å¦åœ¨ x86 ç³»ç»Ÿä¸Šéƒ½æ˜¯åŸå­æ“ä½œæ¥æ¶ˆé™¤æ•°æ®ç«äº‰;</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read(path: Path) -&gt; io::Result&lt;Bytes&gt; {
  let file = File::open(path)?;
  let bytes = Bytes::new();
  file.read_to_end(bytes)?;
  Ok(bytes)
}
<span class="boring">}</span></code></pre></pre>
<p>æœ€å,æˆ‘ä»¬åœ¨è¿™å¯¹é”™è¯¯çš„å¤„ç†è¿‡äºè¿‚è… -- æˆ‘ä»¬å¹¶ä»…è¦å…³æ³¨è¿”å›ç±»å‹å¤±è´¥çš„å¯èƒ½,
ç”šè‡³äºè¦ç”¨ ? æ¥çªå‡ºæŒ‡ç¤ºä»»ä½•å¯èƒ½å¤±è´¥çš„ç‰¹å®šè¡¨è¾¾å¼;
å®Œå…¨ä¸è€ƒè™‘é”™è¯¯å¤„ç†,
è®©ä¸€äº›é¡¶å±‚å¤„ç†ç¨‹åºæ¥å¤„ç†:
(æ¯”å¦‚: try { } catch (...) { /* intentionally empty */ })</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read(path: Path) -&gt; Bytes {
  let file = File::open(path);
  let bytes = Bytes::new();
  file.read_to_end(bytes);
  bytes
}
<span class="boring">}</span></code></pre></pre>
<p>ç°åœ¨æ˜¯å¦å¥½å¤šäº†?</p>
<h2 id="ps"><a class="header" href="#ps">PS:</a></h2>
<p>çš„ç¡®æ˜¯ç¯‡å¥‡æƒ³, è¿™æ ·ç®€åŒ–å, å‡ ä¹å°±æ˜¯ å¤šäº†ä¸€äº›æ§åˆ¶ç¬¦å·çš„ Python äº†,
åˆæˆ–æ˜¯æ ¹æœ¬å¯ä»¥è§†ä¸º TypeScript äº†;
å½“ç„¶, å¦‚æœæœ‰è¿™ç§ä½æ•ˆç‰ˆ Rust å¤šæ•°ç¨‹åºå‘˜è¿˜æ˜¯æ„¿æ„ä½¿ç”¨çš„;
å°±è±¡å½“å¹´ CoffeeScript çš„å°è¯•;</p>
<h2 id="logging-18"><a class="header" href="#logging-18">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230206 ZQ init.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-è¯¾ç¨‹ç¬”è®°"><a class="header" href="#rust-è¯¾ç¨‹ç¬”è®°">Rust è¯¾ç¨‹ç¬”è®°</a></h1>
<h2 id="background-13"><a class="header" href="#background-13">background</a></h2>
<p>Rust ç¤¾åŒºå¾ˆç»™åŠ›å„ç§æ¸ é“ä¸­,æœ‰å„ç§æ•™ç¨‹,
åªæ˜¯, æ¯ä¸ªæ•™ç¨‹éƒ½æœ‰è‡ªå·±çš„ç‰¹ç‚¹å’Œç›²åŒº...</p>
<h2 id="goal-11"><a class="header" href="#goal-11">goal</a></h2>
<p>é«˜é€Ÿåˆ·è¿‡æ—¶, è§åˆ°æœ‰è¶£/æœ‰ç”¨/æœ‰ç§çš„ç‰‡æ®µ, æ”¶é›†æ‘˜å½•åœ¨ä¸€èµ·, å½¢æˆè‡ªå·±çš„å°æŠ„...</p>
<h2 id="trace-11"><a class="header" href="#trace-11">trace</a></h2>
<h3 id="init"><a class="header" href="#init">init.</a></h3>
<p>Recommended tools:</p>
<ul>
<li><input disabled="" type="checkbox"/>
cargo readme - to regenerate README.md based on template and lib.rs comments</li>
<li><input disabled="" type="checkbox"/>
cargo insta - to review test snapshots</li>
<li><input disabled="" type="checkbox"/>
cargo edit - to add/remove dependencies</li>
<li><input disabled="" type="checkbox"/>
cargo fmt - to format code</li>
<li><input disabled="" type="checkbox"/>
cargo clippy - for all insights and tips
<ul>
<li>å®‰è£…ï¼šrustup component add clippy</li>
<li>å‚è€ƒ: <a href="https://skyao.io/learning-rust/docs/build/rustup/rustup-book.html">Rustup Bookå­¦ä¹ ç¬”è®° | Rustå­¦ä¹ ç¬”è®°</a></li>
<li>å¦‚æœå‡ºé—®é¢˜:
<ul>
<li><a href="https://github.com/rust-lang/rustup/issues/1558">Fresh install on macos can't install rustfmt and clippy using rustup Â· Issue #1558 Â· rust-lang/rustup</a></li>
<li>rustup toolchain remove stable &amp;&amp; rustup toolchain install stable</li>
<li>...</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>info: syncing channel updates for 'stable-x86_64-apple-darwin'
info: latest update on 2023-02-09, rust version 1.67.1 (d5a82bbd2 2023-02-07)
info: downloading component 'cargo'
info: downloading component 'clippy'
info: downloading component 'rust-docs'
info: downloading component 'rust-std'

...

  stable-x86_64-apple-darwin installed - rustc 1.67.1 (d5a82bbd2 2023-02-07)

info: checking for self-updates
</code></pre>
<ul>
<li><input disabled="" type="checkbox"/>
cargo fix - for fixing warnings</li>
</ul>
<h4 id="æ£€éªŒå’Œåˆ‡æ¢å·¥å…·é“¾"><a class="header" href="#æ£€éªŒå’Œåˆ‡æ¢å·¥å…·é“¾">æ£€éªŒå’Œåˆ‡æ¢å·¥å…·é“¾</a></h4>
<p>~ <a href="https://github.com/gavadinov/Learn-Rust-by-Building-Real-Applications/tree/master/memory_management">Learn-Rust-by-Building-Real-Applications/memory_management at master Â· gavadinov/Learn-Rust-by-Building-Real-Applications</a></p>
<p>æŸ¥å®å½“å‰ä½¿ç”¨çš„å·¥å…·é“¾:</p>
<blockquote>
<p>rustup toolchain list</p>
</blockquote>
<p>å®‰è£…æŒ‡å®šå·¥å…·é“¾:</p>
<blockquote>
<p>rustup toolchain install nightly-x86_64-unknown-linux-gnu</p>
</blockquote>
<h4 id="å®æŸ¥é˜…"><a class="header" href="#å®æŸ¥é˜…">å®æŸ¥é˜…</a></h4>
<p>~ <a href="https://github.com/dtolnay/cargo-expand">dtolnay/cargo-expand: Subcommand to show result of macro expansion</a></p>
<p>ä½¿ç”¨:</p>
<blockquote>
<p>crago expand</p>
</blockquote>
<p>åœ¨ç»ˆç«¯ä¸­å±•å¼€å®å¹¶æ‰“å°...å¦‚æœå·¥ç¨‹å¤§ç‚¹å„¿, å°±ä¸å¯çœ‹äº†...</p>
<h3 id="project"><a class="header" href="#project">project</a></h3>
<h4 id="cli"><a class="header" href="#cli">CLI</a></h4>
<p>~ <a href="https://rust-cli.github.io/book/tutorial/index.html">A command line app in 15 minutes - Command Line Applications in Rust</a></p>
<p>è¿˜æ˜¯è€ä¹ æƒ¯, CLI-&gt;RESTful-&gt;GUI-&gt; ...</p>
<h3 id="debug"><a class="header" href="#debug">debug</a></h3>
<h4 id="dbg"><a class="header" href="#dbg">dbg!()</a></h4>
<p>ç±»ä¼¼ ic çš„å·¥å…·, å¯ä»¥éšæ—¶æ’å…¥ä»£ç , å¹¶åœ¨è¿è¡Œæ—¶æ‰“å°å¯¹åº”å˜é‡åå’Œå€¼...</p>
<h3 id="testting"><a class="header" href="#testting">testting</a></h3>
<h3 id="coding"><a class="header" href="#coding">coding</a></h3>
<h2 id="refer-16"><a class="header" href="#refer-16">refer:</a></h2>
<blockquote>
<p>Udemy</p>
</blockquote>
<ul>
<li><a href="https://www.udemy.com/course/rust-programming-the-complete-guide/">The Complete Rust Programming Course | Udemy</a></li>
<li><a href="https://www.udemy.com/course/rust-fundamentals/">Learn Rust by Building Real Applications | Udemy</a>
<ul>
<li>ç”¨äº†ä¸€åŠç¯‡å¹…æ¥ä»‹ç»å†…å­˜ç®¡ç†æ¨¡å‹,ä»¥åŠ GDB è§‚å¯Ÿè¿‡ç¨‹...</li>
</ul>
</li>
</ul>
<blockquote>
<p>Youtube</p>
</blockquote>
<ul>
<li>110+<a href="https://www.youtube.com/playlist?list=PL3azK8C0kje1DUJbaOqce19j3R_-tIc4_">Rust ç¼–ç¨‹è¯­è¨€å…¥é—¨æ•™ç¨‹ [2021] - YouTube</a>
<ul>
<li>42+<a href="https://www.youtube.com/playlist?list=PLVvjrrRCBy2JSHf9tGxGKJ-bYAN_uDCUL">RUST PROGRAMMING TUTORIALS - YouTube</a></li>
<li>44+<a href="https://www.youtube.com/playlist?list=PLJbE2Yu2zumDF6BX6_RdPisRVHgzV02NW">Intro to Rust - YouTube</a></li>
<li>14+<a href="https://www.youtube.com/playlist?list=PLKkEWK6xRmes17LQUEA5bNjYISuCEOTXx">Rust For Starters - YouTube</a></li>
</ul>
</li>
<li>44+<a href="https://www.youtube.com/playlist?list=PLai5B987bZ9CoVR-QEIN9foz4QCJ0H2Y8">The Rust Lang Book - YouTube</a></li>
<li>25+<a href="https://www.youtube.com/playlist?list=PLJbE2Yu2zumDD5vy2BuSHvFZU0a6RDmgb">Rust Projects - YouTube</a>
<ul>
<li>24+<a href="https://www.youtube.com/playlist?list=PL5dTjWUk_cPYuhHm9_QImW7_u4lr5d6zO">50 RUST Projects - YouTube</a></li>
</ul>
</li>
<li><a href="https://www.youtube.com/@jonhoo">Jon Gjengset - YouTube</a>
<ul>
<li><a href="https://www.youtube.com/playlist?list=PLqbS7AVVErFgY2faCIYjJZv_RluGkTlKt">Rust live-coding - YouTube</a>
<ul>
<li>éƒ½æ˜¯å‡ ä¸ªå°æ—¶çš„è¿ç»­è°ƒè¯•è¿‡ç¨‹</li>
</ul>
</li>
<li><a href="https://www.youtube.com/playlist?list=PLqbS7AVVErFiWDOAVrPt7aYmnuuOLYvOa">Crust of Rust - YouTube</a></li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="å›¾å½¢æè¿°-rust-ä¸­æ‰€æœ‰æƒå’Œå€Ÿç”¨"><a class="header" href="#å›¾å½¢æè¿°-rust-ä¸­æ‰€æœ‰æƒå’Œå€Ÿç”¨">å›¾å½¢æè¿° Rust ä¸­æ‰€æœ‰æƒå’Œå€Ÿç”¨</a></h1>
<p>åŸæ–‡: <a href="https://rufflewind.com/2017-02-15/rust-move-copy-borrow">Graphical depiction of ownership and borrowing in Rust - Rufflewind's Scratchpad</a></p>
<h2 id="å¿«è¯‘-5"><a class="header" href="#å¿«è¯‘-5">å¿«è¯‘:</a></h2>
<p>ä»¥ä¸‹æ˜¯ Rust è¯­è¨€ä¸­ moving, copying, å’Œ borrowing çš„å›¾å½¢æè¿°;
è¿™äº›æ¦‚å¿µä¸­çš„å¤§å¤šæ•°æ˜¯ Rust æŒæœ‰çš„,
å› æ­¤, ä¹Ÿæ˜¯å¾ˆå¤šå­¦ä¹ è€…å¸¸è§ç»Šè„šçŸ³;</p>
<p>ä¸ºäº†é¿å…å›¾å½¢æ··ä¹±, å°½é‡å‡å°‘äº†æ–‡å­—;
å¹¶ä¸æ˜¯è¦å–ä»£ç°æœ‰å„ç§æ•™ç¨‹, è€Œæ˜¯ä¸ºå–œæ¬¢ç›´è§‚ç†è§£æ¦‚å¿µçš„ç¨‹åºå‘˜æä¾›ä¸åŒçš„è§†è§’;
å¦‚æœä½ æ­£åœ¨å­¦ä¹  Rust å¹¶å‘ç°è¿™äº›å›¾å½¢æœ‰æŠ¥æ—¶,
å»ºè®®ä½ ä½¿ç”¨è¿™ç±»å›¾è¡¨æ³¨é‡Šè‡ªå·±çš„ä»£ç ä»¥ä¾¿å¸®åŠ©å·©å›ºæ¦‚å¿µ ;-)</p>
<h2 id="rust-ä¸­æ‰€æœ‰æƒå’Œå€Ÿç”¨"><a class="header" href="#rust-ä¸­æ‰€æœ‰æƒå’Œå€Ÿç”¨">Rust ä¸­æ‰€æœ‰æƒå’Œå€Ÿç”¨</a></h2>
<p><img src="https://rufflewind.com/img/rust-move-copy-borrow.png" alt="" /></p>
<p>å¯ä»¥é€šè¿‡ç‚¹å‡»å›¾åƒæ¥æ”¾å¤§, ä¹Ÿå¯ä»¥ä¸‹è½½ <a href="https://rufflewind.com/img/rust-move-copy-borrow.svg">SVG</a>
å’Œ <a href="https://rufflewind.com/img/rust-move-copy-borrow.pdf">PDF</a> ç‰ˆæœ¬åœ¨æœ¬åœ°æ”¾å¤§;</p>
<p>ä¸Šé¢çš„å›¾å½¢æè¿°äº†ä½ æ‹¥æœ‰æ•°æ®çš„ä¸¤ç§ä¸»è¦è¯­ä¹‰: ç§»åŠ¨æˆ–æ˜¯å¤åˆ¶;</p>
<p>å…³äºç§»åŠ¨çš„è§£é‡Š(~&gt;)çœ‹èµ·æ¥å¤ªç®€å•äº†;
è¿™é‡Œæ²¡æœ‰æŠŠæˆ: ç§»åŠ¨è¯­ä¹‰æœ¬èº«å°±å¾ˆå¥‡æ€ª,å› ä¸º,å¤§å¤šæ•°è¯­è¨€å…è®¸å˜é‡è¢«ç¨‹åºå‘˜éšæ„ä½¿ç”¨å¤šæ¬¡;
è¿™å’Œç°å®ä¸–ç•Œçš„å¤§éƒ¨åˆ†æƒ…å†µå½¢æˆé²œæ˜å¯¹æ¯”:
æˆ‘ä¸èƒ½æŠŠæˆ‘çš„ç¬”ç»™åˆ«äºº,ç„¶å,ä»ç„¶ç”¨å®ƒç»§ç»­å†™å­—!
åœ¨ Rust ä¸­,ä»»ä½•ç±»å‹æœªå®ç° Copy trait çš„å˜é‡éƒ½å…·æœ‰ç§»åŠ¨è¯­ä¹‰,
å¹¶ä¸”ä¼šåƒæ‰€ç¤ºé‚£æ ·è¿è¡Œ;</p>
<p>å¤åˆ¶è¯­ä¹‰(â˜)æ˜¯ä¸ºå®ç° Copy trait çš„ç±»å‹ä¿ç•™çš„;
åœ¨è¿™ç§æƒ…å†µä¸­, å¯¹è±¡çš„æ¯æ¬¡ä½¿ç”¨éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬, æ­£å¦‚æ‰€ç¤ºåˆ†å‰; ä¸­é—´çš„ä¸¤ä¸ªæ•°å­—æç»˜äº†ä½ å¯ä»¥å€Ÿç”¨ä½ æ‹¥æœ‰ç‰©å“çš„ä¸¤ç§æ–¹å¼,
ä»¥åŠæ¯ç§æ–¹å¼æä¾›çš„æ“ä½œ;</p>
<p>å¯¹äºå¯å˜å€Ÿç”¨, æˆ‘ä½¿ç”¨äº†é”ç¬¦å·(ğŸ”’)æ¥è¡¨ç¤ºåŸå§‹å¯¹è±¡åœ¨å€Ÿç”¨æœŸé—´è¢«æœ‰æ•ˆé”å®š,
ä»¤å…¶æ— æ³•ä½¿ç”¨;</p>
<p>ç›¸å,å¯¹äºéå¯å˜å¤‡ç”¨, æˆ‘ä½¿ç”¨äº†é›ªèŠ±ç¬¦å·(â„)æ¥è¡¨ç¤ºåŸå§‹å¯¹è±¡åªæ˜¯è¢«å†»ç»“äº†:
ä½ ä»ç„¶å¯ä»¥è·å–æ›´å¤šéå¯å˜å¼•ç”¨, ä½†æ˜¯, ä½ ä¸èƒ½ç§»åŠ¨æˆ–æ˜¯è·å–å…¶å¯å˜å¼•ç”¨;</p>
<p>åœ¨è¿™ä¸¤ä¸ªå›¾ä¸­, <code>'Ï</code> æ˜¯æˆ‘ä¸ºå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸé€‰æ‹©çš„åç§°;
æˆ‘æ•…æ„ä½¿ç”¨å¸Œè…Šå­—æ¯æ˜¯å› ä¸ºç›®å‰ Rust ä¸­è¿˜æ²¡æœ‰å…·ä½“ç”Ÿå‘½å‘¨æœŸçš„è¯­æ³•;</p>
<p>æœ€åä¸¤ä¸ªå›¾ä»¥å›¾å½¢å’Œæ–‡æœ¬å½¢å¼æ€»ç»“äº†ä¸¤ç§å¼•ç”¨ä¹‹é—´çš„ä¸»è¦åŒºåˆ«å’Œç›¸ä¼¼ä¹‹å¤„;
åœ¨è¿™ç§åœºæ™¯ä¸­&quot;å¤–éƒ¨(<a href="https://doc.rust-lang.org/beta/book/mutability.html#interior-vs-exterior-mutability">exteriorly</a>)&quot;é™å®šè¯å¾ˆé‡è¦,
å› ä¸º, ä½ ä»ç„¶å¯ä»¥é€šè¿‡ç±»ä¼¼ <a href="https://doc.rust-lang.org/std/cell/">Cell</a> çš„ä¸œè¥¿æ‹¥æœ‰å†…éƒ¨å¯å˜æ€§;</p>
<h2 id="logging-19"><a class="header" href="#logging-19">logging</a></h2>
<blockquote>
<p>ç‰ˆæœ¬è®°è¦</p>
</blockquote>
<ul>
<li>..</li>
<li>230220 ZQ init.</li>
</ul>

                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->


                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">

        </nav>

    </div>




    <script>
        window.playground_copyable = true;
    </script>


    <script src="elasticlunr.min.js" charset="utf-8"></script>
    <script src="mark.min.js" charset="utf-8"></script>
    <script src="searcher.js" charset="utf-8"></script>

    <script src="clipboard.min.js" charset="utf-8"></script>
    <script src="highlight.js" charset="utf-8"></script>
    <script src="book.js" charset="utf-8"></script>

    <!-- Custom JS scripts -->

    <script>
        window.addEventListener('load', function () {
            window.setTimeout(window.print, 100);
        });
    </script>

    <hr />

    <p style="text-align:center">

        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="çŸ¥è¯†å…±äº«è®¸å¯åè®®"
                style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
        æœ¬ä½œå“é‡‡ç”¨<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">çŸ¥è¯†å…±äº«ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a>è¿›è¡Œè®¸å¯;-)

    </p>
    <hr />

    <script src="https://utteranc.es/client.js" repo="zhrust/comments" issue-term="pathname" label="âœ¨ğŸ’¬âœ¨"
        theme="github-light" crossorigin="anonymous" async>
        </script>

</body>

</html>