<?xml version="1.0" encoding="utf-8"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>be Rustaceans ~ æˆé”ˆçºª</title><link>https://rs.101.so</link><description>~ æ±‡é›† å¤§å¦ˆ/Zoom.Quiet å­¦ä¹ /å®è·µ/æ¢ç´¢/... Rust ä¸–ç•Œé”ˆè¿¹, ä¸€èµ·æˆä¸º Rustacean å§...</description><generator>my_rss_generator</generator><item><title>two_kinds_assert_make_better_code.md</title><link>https://rs.101.so//tip/two_kinds_assert_make_better_code</link><pubDate>Mon, 03 Apr 2023 21:41:29 +0800</pubDate><content:encoded><![CDATA[# ä¸¤ç§'Assert'æ„å»ºæ¸…æ™°ä»£ç 
> tips...é‡è¦ä¹Ÿä¸é‡è¦

åŸæ–‡: [Laurence Tratt: Rust's Two Kinds of 'Assert' Make for Better Code](https://tratt.net/laurie/blog/2023/rusts_two_kinds_of_assert_make_for_better_code.html)


## å¿«è¯‘

Daniel Lemire æœ€æ–°è¿‘æ–‡ç« :
"[runtime asserts are not free](https://lemire.me/blog/2023/03/15/runtime-asserts-are-not-free/)" ç ”ç©¶äº† C è¯­è¨€ä¸­ assert è¯­å¥çš„è¿è¡Œæ—¶æˆæœ¬,
å¹¶ä¸ŠèŒé¢‘ç¹æ‰§è¡Œçš„å¾ªç¯ä¸­å†ç®€å•çš„ assert ä¹Ÿèƒ½å¯¼è‡´å¤§é‡çš„å¼€é”€;

å¤šå¹´æ¥, è‡ªå·±ä¹Ÿå¯¹æ–­è¨€çš„çœ‹æ³•å‘ç”Ÿäº†å˜åŒ–,
ä» "æˆ‘ä¸æ˜ç™½è¿™ç‚¹" åˆ° "è°¨æ…ä½¿ç”¨ä¸«ä»¬" å†åˆ° "å°½å¯èƒ½å¤šçš„ä½¿ç”¨";
æœ€åä¸€ä¸ªè½¬å˜ä¸»è¦æ˜¯å› ä¸º Rust æœ‰ä¸¤ç§ "æ–­è¨€" è¯­å¥
--- assert å’Œ debug_assert --- è¿™è®©æˆ‘å¯ä»¥å‡†ç¡®çš„è¡¨è¾¾ä¸¤ç§ä¸åŒç±»å‹çš„æ–­è¨€,
è¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä»¤æˆ‘æ‘†è„±äº†å¯¹æ€§èƒ½çš„æ‹…å¿§;


### èƒŒæ™¯
> Background

å…ˆæ¥å¿«é€Ÿå®šä¹‰ä¸€ä¸‹ "æ–­è¨€" çš„å«ä¹‰:
è¿™æ˜¯ä¸€ä¸ªç¼–ç¨‹è¯­è¨€çš„è¯­å¥,
ç”¨ä»¥æ£€æŸ¥å±æ€§å¹¶åœ¨è¯¥å±æ€§ä¸æˆç«‹æ—¶å¼•å‘å´©æºƒ(é€šå¸¸ç§°ä¸º"å¤±è´¥æ–­è¨€");

ä¾‹å¦‚, å¦‚æœæˆ‘æœ‰ä¸€ä¸ª Python ç¨‹åº,å…¶ä¸­åŒ…å«äººä»¬çš„å¹´é¾„åˆ—è¡¨,
å¹¶è®¡ç®—æœ€å°å¹´é¾„,æˆ‘å¯èƒ½éœ€è¦æ£€æŸ¥æœ€å¹´è½»çš„äººå¹´é¾„æ˜¯å¦ä¸ºè´Ÿ:

```python
ages = [...]
youngest = min(ages)
assert(youngest >= 0)
```

å¦‚æœ ages åŒ…å«è´Ÿå€¼---åˆæˆ–æ˜¯ min æ— æ³•æ­£å¸¸å·¥ä½œ --- assert å°†å¤±è´¥,
å¹¶å¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸:

```shell
Traceback (most recent call last):
  File "/tmp/t.py", line 3, in 
    assert(youngest >= 0)
AssertionError
```

æ¢è€Œè¨€ä¹‹, assert å¤§çº¦ç›¸å½“äº:
```python
ages = [...]
youngest = min(ages)
if not (youngest >= 0):
    raise AssertionError
```

åœ¨å®è·µä¸­, æ–­è¨€ä¸»è¦ç”¨æ¥æ£€æŸ¥æœ‰å…³ç¨‹åºçŠ¶æ€çš„å‡è®¾ --- åœ¨è¿™ç§æƒ…å†µä¸­,
ä¸åº”è¯¥å°†è´Ÿæ•°è¾“å…¥ç³»ç»Ÿ;

æˆ‘æƒ³è¦æ£€æŸ¥è¿™ä¸ªç‰¹å®šå‡è®¾æœ‰ä¸¤ä¸ªä¸»è¦åŸå› ;
é¦–å…ˆ,å¯èƒ½å·²ç»ç¼–å†™äº†åç»­ä»£ç , è€Œè¿™äº›ä»£ç åªèƒ½åœ¨ youngest å€¼éè´Ÿçš„æƒ…å†µä¸­å·¥ä½œ;
æˆ‘æƒ³é˜²æ­¢åœ¨è¿åè¯¥å±æ€§æ—¶æ‰§è¡Œåç»­ä»£ç (è¯‘æŒ‰:å› ä¸º, æ­¤æ—¶, å¿…å®šå¤±è´¥);
å…¶æ¬¡, assert è®°å½•å¹¶æ£€éªŒå±æ€§;
æ¢å¥è¯è¯´, æˆ‘å¯ä»¥å†™ä¸€æ¡æ³¨è§£:

```python
ages = [...]
youngest = min(ages)
# youngest must be non-negative or bad things will happen below
...
```

è¯¥æ³¨é‡Šå‡†ç¡®çš„æè¿°äº†ç¨‹åºçš„å‡è®¾,
ä½†æ˜¯,å¦‚æœå‡è®¾ä¸æ­£ç¡® --- ä¹Ÿè®¸æ˜¯å› ä¸ºç¨‹åºçš„å¦ä¸€éƒ¨åˆ†ä½¿ç”¨ -1 æ¥è¡¨ç¤º"æœªçŸ¥å¤§å°"
--- é‚£ä¹ˆ"åäº‹"å°±ä¼šå‘ç”Ÿ;

å¦‚æœå¹¸è¿çš„è¯, æ•ˆæœä¼šç›¸å¯¹è‰¯æ€§, ç”šè‡³å¯èƒ½æ˜¯ä¸å¯è§çš„;
ä½†æ˜¯, å¦‚æœè¿æ°”ä¸å¥½, å°±ä¼šè§¦å‘çœŸæ­£ç³Ÿç³•çš„äº‹å„¿,
ä»å¥‡æ€ªçš„è¾“å‡ºåˆ°å®‰å…¨æ¼æ´;

è°ƒè¯•æ­¤ç±»ä¸æ­£ç¡®çš„å‡è®¾å¾ˆå›°éš¾,å› ä¸º,å‡è®¾è¿è§„çš„å½±å“é€šå¸¸åªæœ‰åœ¨è¿è§„å‘ç”Ÿå¾ˆä¹…ä¹‹å,
æ‰ä¼šè¢«æ³¨æ„åˆ°;
å¯¹äºä¸€äº›å¯æ€œçš„ç¨‹åºå‘˜æ¥è¯´, èŠ±ä¸€å¤©æˆ–æ›´é•¿æ—¶é—´å¯»æ‰¾ä¸€ä¸ªé—®é¢˜,
å´å‘ç°åªæ˜¯ç”±è¿åç®€å•å‡è®¾å¼•å‘çš„,è¿™ç§äº‹å„¿å¹¶ä¸ç½•è§;

ç›¸æ¯”ä¹‹ä¸‹, assert ä¼šå¯¼è‡´æˆ‘çš„ç¨‹åºä»¥å¯é¢„æµ‹çš„æ–¹å¼å´©æºƒ,
å¹¶æœ‰æ¸…æ™°çš„æŠ¥å‘Š,å¹¶å°½æ—©å´©æºƒ;
é€šå¸¸,ä¿®å¤æ–­è¨€å¤±è´¥çš„åŸå› å¾€å¾€ç›¸å¯¹ç®€å•;

(è¯‘æŒ‰: æ¯•ç«Ÿæ–­è¨€å·²ç»æ ‡å®šå‡ºäº†é—®é¢˜èŒƒç•´)

### ä¸ºä»€ä¹ˆæ–­è¨€çš„ä½¿ç”¨é¢‘ç‡æ¯”äººä»¬æƒ³è±¡çš„è¦å°‘
> Why asserts are used less often than one might think

æ­£å¦‚å‰è¿°, æ–­è¨€çœ‹èµ·æ¥åƒæ˜¯ä¸ªæ˜æ˜¾çš„èƒœåˆ© --- ä½†æ˜¯, å¤§å¤šæ•°ç¨‹åºä½¿ç”¨çš„æ–­è¨€æ¯”äººä»¬å¸Œæœ›çš„è¦å°‘å¾—å¤š;

æœ€æ˜æ˜¾çš„åŸå› æ˜¯, ç¨‹åºå‘˜é€šå¸¸æ²¡æœ‰æ„è¯†åˆ°ä»–ä»¬åµŒå…¥åˆ°ç¨‹åºä¸­çš„å‡è®¾,
æˆ–è€…æ²¡æœ‰è€ƒè™‘ä»–ä»¬å‡è®¾çš„åæœ;

å¯¹äºåˆçº§ç¨‹åºå‘˜æ¥è¯´å°¤å…¶å¦‚æ­¤,ä»–ä»¬è¿˜æ²¡èƒ½ä»è¿ç»­çš„è°ƒè¯•ä¸­å»ºç«‹åˆ›ä¼¤ååº”,
ä¹Ÿå°±æ˜¯å¹¶æ²¡æƒ³åˆ°ä½¿ç”¨æ–­è¨€;

æˆ‘åœ¨å¤šå¹´ç¼–ç¨‹ä¹‹å, æ‰æ„è¯†åˆ°æˆ‘æ²¡æœ‰è€ƒè™‘å¹¶æ£€æŸ¥å¯¹ç¨‹åºå±æ€§çš„å‡è®¾,
æµªè´¹äº†å¤ªå¤šæ—¶é—´;

æœ‰æ—¶, ç‹æ¸…æ¥šå¦‚ä½•ç»´æŠ¤è‡ªå·±å…³å¿ƒçš„å±æ€§ä¹Ÿéå¸¸å›°éš¾;
åœ¨åƒ C è¿™æ ·çš„è¯­è¨€ä¸­å°¤å…¶å¦‚æ­¤,
å› ä¸º, æ²¡æœ‰å†…ç½®çš„å¸®åŠ©æ¥è¡¨è¾¾è¯¸å¦‚"åˆ—è¡¨ä¸­çš„ä»»ä½•å…ƒç´ éƒ½ä¸èƒ½ä¸ºè´Ÿ"ä¹‹ç±»çš„å±æ€§;
assert éœ€è¦è¶Šé•¿è¶Šå›°éš¾---å°¤å…¶æ˜¯å½“éœ€è¦ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ—¶---æœ¬èº«è¢«å†™ä¸‹æ¥çš„å¯èƒ½æ€§å°±è¶Šå°;

ä¸å¯é¿å…çš„, ä¸€äº›æ–­è¨€ä¹Ÿæ˜¯å®Œå…¨é”™è¯¯çš„,
è¦ä¹ˆè¡¨è¾¾ä¸æ­£ç¡®çš„å±æ€§, è¦ä¹ˆé”™è¯¯çš„è¡¨è¾¾æ­£ç¡®çš„å±æ€§;
æˆ‘æƒ³å¤§å¤šæ•°äººéƒ½åœ¨ç»å†è¿™æ ·çš„é”™è¯¯;

ç„¶è€Œ, å¾ˆå¤šäººæ²¡æœ‰æ„è¯†åˆ°çš„æ˜¯, å¦‚æœæ–­è¨€æœ‰å‰¯ä½œç”¨,
å°±ä¼šæ”¹å˜ç¨‹åºçš„è¡Œä¸º;
æˆ‘ä¸æ­¢ä¸€æ¬¡é€šè¿‡å°† `l[i++]` ç­‰ä»£ç å¤åˆ¶å¹¶ç²˜è´´åˆ°æ–­è¨€ä¸­æ¥æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„š,
å¯¼è‡´ç¨‹åºæ ¹æ®æ–­è¨€æ˜¯å¦ç¼–è¯‘è€Œä»¥ä¸åŒçš„æ–¹å¼æ‰§è¡Œ;

æˆ‘è®¤ä¸ºè¿™æ˜¯æˆ‘ä¸å¯é¿å…çš„æ„šè ¢,
è€Œä¸æ˜¯æ–­è¨€æ¦‚å¿µçš„ç¼ºé™·, 
ä¸è¿‡, æˆ‘å¬è¯´è‡³å°‘æœ‰ä¸€ä¸ªç»„ç»‡å› ä¸ºè¿™ä¸ªé—®é¢˜è€Œç¦æ­¢(æˆ–æ˜¯å€¡å¯¼ç¦æ­¢)æ–­è¨€;

### æ€§èƒ½é—®é¢˜
> Performance issues

Daniel æŒ‡å‡ºäº†ä¸€ä¸ªé¿å…æ–­è¨€çš„éå¸¸ä¸åŒçš„åŸå› :
å¦‚æœåœ¨"é”™è¯¯"çš„åœ°æ–¹ä½¿ç”¨æ–­è¨€æ—¶, å¯èƒ½ä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜;
æ–­è¨€å¼•å…¥äº†ä¸€ä¸ªå¿…é¡»åœ¨è¿è¡Œæ—¶æ‰§è¡Œçš„åˆ†æ”¯(å³"if")

> åˆ†æ”¯é¢„æµ‹å› å­æ˜¯æƒŠäººçš„ï¼Œä½†æœ‰æ—¶äººä»¬è°ˆè®ºå®ƒä»¬ï¼Œå°±å¥½åƒå®ƒä»¬ä½¿åˆ†æ”¯å…è´¹ä¸€æ ·ã€‚å”‰ï¼Œä»–ä»¬æ²¡é‚£ä¹ˆç¥å¥‡ï¼

æ–­è¨€çš„å­˜åœ¨ä¹Ÿå¯èƒ½å¯¼è‡´ç¼–è¯‘å™¨é”™è¿‡ç¼–è¯‘æ—¶ä¼˜åŒ–çš„æœºä¼š;

> åä¹‹äº¦ç„¶ï¼šæ–­è¨€æœ‰æ—¶å¯ä»¥å¸®åŠ©ç¼–è¯‘å™¨æ›´å¥½åœ°ä¼˜åŒ–ä»£ç ã€‚è™½ç„¶æˆ‘æ²¡æœ‰ç¡®å‡¿çš„æ•°æ®æ¥è¡¨æ˜å“ªç§ç»“æœæ›´é¢‘ç¹åœ°å‘ç”Ÿï¼Œä½†æˆ‘å€¾å‘äºè®¤ä¸ºè´Ÿé¢ç»“æœæ›´å¸¸è§ã€‚

ç¼–ç¨‹ç¤¾åŒºæ™®éæ‹…å¿ƒæ–­è¨€çš„æ€§èƒ½æˆæœ¬,
å³ä¾¿æˆ‘ä»¬æ²¡æœ‰äººçŸ¥é“å¦‚ä½•å½±å“ç»™å®šçš„ç¨‹åºè€Œä¸å®é™…æµ‹é‡;

ä¸ºäº†é¿å…æ€§èƒ½é—®é¢˜, å¤§å¤šæ•°è½¯ä»¶éƒ½æ˜¯åœ¨"è°ƒè¯•"(æœ‰æ—¶ç§°ä¸º"æµ‹è¯•")
æˆ–æ˜¯"å‘å¸ƒ"æ¨¡å¼ä¸‹ç¼–è¯‘çš„: åœ¨è°ƒè¯•æ¨¡å¼ä¸­, æ–­è¨€åœ¨è¿è¡Œæ—¶ç¼–è¯‘å’Œæ£€æŸ¥;
ä½†æ˜¯,åœ¨å‘å¸ƒæ¨¡å¼ä¸­, æ–­è¨€ä¸ä¼šç¼–è¯‘,å› æ­¤,ä¸ä¼šåœ¨è¿è¡Œæ—¶è¿›è¡Œæ£€æŸ¥;

ç„¶è€Œ,åœ¨ C è¿™ç§è¯­è¨€ä¸­,
å¹¶æ²¡æœ‰åŒºåˆ†"è°ƒè¯•"å’Œ"å‘å¸ƒ"æ¨¡å¼çš„æ¦‚å¿µ,
ä½†æ˜¯, å¾ˆå¤šäººè®¤ä¸º"å‘å¸ƒ"ä¸œè¥¿æ–¹åªæ„å‘³ç€è¿½åŠ ä¸€ä¸ªæ ‡å¿— -DNDEBUG,
è¿™å°†å¯¼è‡´ assert æˆä¸ºæ— æ“ä½œ;
Rust çš„æ ‡å‡†æ„å»ºç³»ç»Ÿ Cargo é»˜è®¤æ˜¯è°ƒè¯•æ¨¡å¼,
--release åˆ™æ‰§è¡Œå‘å¸ƒæ„å»º;


### ä¸¤ç§æ–­è¨€
> Two kinds of asserts


è™½ç„¶,åœ¨å‘å¸ƒä¸œè¥¿æ–¹ä¸­ä¸ç¼–è¯‘(å› æ­¤ä¸æ£€æŸ¥)å­¦æœ¯äº¤æµå¯ä»¥æ¶ˆé™¤æ€§èƒ½é—®é¢˜,
ä½†æ˜¯,ä¹Ÿå‰Šå¼±äº†æˆ‘ä»¬å¯¹ç¨‹åºæ­£ç¡®æ€§çš„ä¿è¯---ä»…ä»…å› ä¸ºæµ‹è¯•å¥—ä»¶ä¸è¿åå‡è®¾,
å¹¶ä¸æ„å‘³ç€çœŸå®ç”¨æˆ·ä¸ä¼šå¿«è¿™ç§æ–¹å¼ä½¿ç”¨ç¨‹åº;


å› æ­¤, è¿™äº›å¤©æˆ‘è®¤ä¸ºæ–­è¨€åˆ†ä¸ºä¸¤ç±»:

- æ£€æŸ¥é—®é¢˜åŸŸå‡è®¾
- æ£€æŸ¥å†…éƒ¨å‡è®¾

è¿™ç§åŒºåˆ«å¯èƒ½çœ‹èµ·æ¥æ˜¯äººä¸ºçš„, ç”šè‡³å¯èƒ½æ ¹æœ¬ä¸å­˜åœ¨,
æ‰€ä»¥, è®©æˆ‘ä¸¾ä¾‹è¯´æ˜æˆ‘çš„æ„æ€;

ç¬¬ä¸€ç±»åŒ…å«å…³äºæˆ‘çš„ç¨‹åºè¯•å›¾å¸®åŠ©è§£å†³"ç°å®ä¸–ç•Œ"é—®é¢˜å‡è®¾;
ä¾‹å¦‚, å¦‚æœæˆ‘æ­£åœ¨ç¼–å†™ä»“åº“åº“å­˜ç³»ç»Ÿ,åˆ™, ç¨‹åºçš„æŸäº›éƒ¨åˆ†å¯èƒ½ä¼šå‡å®šè¯¸å¦‚
"ç‰©æ–™çš„æ¡å½¢ç ä»ä¸ä¸ºç©º"ä¹‹ç±»çš„å±æ€§;

ç¬¬äºŒç±»åŒ…å«å…³äºæˆ‘æ„å»ºç¨‹åºæ–¹å¼çš„å‡è®¾;
ä¾‹å¦‚,æˆ‘å¯èƒ½ç¼–å†™äº†ä¸€ä¸ªå‡½æ•°,å¦‚æœæˆ‘å‡è®¾è¾“å…¥æ•´ä½“å¤§äº 1,
è¯¥å‡½æ•°çš„è¿è¡Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤š;
å¾ˆå¯èƒ½,åœ¨æˆ‘ç¼–å†™è¯¥å‡½æ•°æ—¶,
æˆ‘ä¸ä¼šä»¥è¿åè¯¥å±æ€§çš„æ–¹å¼è°ƒç”¨:
ä½†æ˜¯, åæ¥çš„ç¨‹åº(åŒ…å«æˆ‘è‡ªå·±!)å¾ˆå¯èƒ½ä¼šå¿˜è®°æˆ–æ˜¯ä¸æ³¨æ„åˆ°è¯¥å±æ€§;

å› æ­¤, å­¦æœ¯äº¤æµå¯¹æœªæ¥çš„ç¨‹åºå‘˜ç‰¹åˆ«æœ‰ç”¨,
å°¤å…¶æ˜¯å½“ä»–ä»¬é‡æ„ä»£ç æ—¶,
è®©ä»–ä»¬æ›´åŠ æœ‰ä¿¡å¿ƒä¸ä¼šä»¥å¾®å¦™çš„æ–¹å¼ç ´åç¨‹åº;

ä½†æ˜¯,æˆ‘å¯¹åœ¨æµ‹è¯•æœŸé—´å‘ç°è¿åæˆ‘åœ¨ç¬¬ä¸€ç±»å‡è®¾çš„è¡Œä¸ºä¿¡å¿ƒè¦ä½å¾—å¤š;

æˆ‘æœ‰ä¸åŒçš„ä¿¡å¿ƒæ°´å¹³åº”è¯¥ä¸è¶³ä¸ºå¥‡ --- æ¯•ç«Ÿ,
æˆ‘è¢«å½•ç”¨çš„æ˜¯å› ä¸ºæˆ‘èƒ½ç¼–ç¨‹, è€Œä¸æ˜¯å› ä¸ºæˆ‘å¯¹ä»“åº“åº“å­˜ç³»ç»Ÿæˆ–æ˜¯æ¡å½¢ç äº†è§£å¾ˆå¤š!

ä½†æ˜¯,ç”±äº"æ­£å¸¸æµ‹è¯•"æ„å‘³ç€"è°ƒè¯•æ¨¡å¼",
è€Œ"ç”¨æˆ·æ­£åœ¨è¿è¡Œç¨‹åº"æ„å‘³ç€"å‘å¸ƒæ¨¡å¼",
è¿™æ„å‘³ç€æˆ‘æœ€ä¸è‡ªä¿¡çš„å‡è®¾åœ¨æœ€éœ€è¦çš„æ—¶å€™æ²¡æœ‰è¢«æ‰§è¡Œ;

### ä¸¤ç§æ–­è¨€è¯­å¥
> Two kinds of assert statement

æˆ‘åˆšåˆšè¡¨è¾¾çš„é—®é¢˜æœ€ç»ˆå‘ç”Ÿæ˜¯å› ä¸ºåƒ C è¿™æ ·çš„è¯­è¨€è¿«ä½¿æˆ‘ä»¬ä½¿ç”¨
å•ä¸ª assert è¯­å¥å¯¹è¿™ä¸¤ç§å‡è®¾è¿›è¡Œç¼–ç :
[always checked in both debug and release builds, and cannot be disabled.](https://doc.rust-lang.org/stable/std/macro.assert.html)


æˆ‘ä¸€ç›´è®¤ä¸ºè¿™æ˜¯ä¸å¯é¿å…çš„, ä½†æ˜¯, 
å½“æˆ‘å‡ å¹´å‰è¿ç§»åˆ° Rust æ—¶,æˆ‘æ…¢æ…¢æ„è¯†åˆ°ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–­è¨€è¯­å¥;

debug_assert å¾ˆåƒ C ä¸­çš„ assert,
ä»æŸç§æ„ä¹‰ä¸Šè¯´, è¡¨è¾¾ä¸€å‡è®¾ä»…åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¿›è¡Œæ£€æŸ¥;
ç›¸æ¯” assert åœ¨è°ƒè¯•å’Œå‘å¸ƒç‰ˆæœ¬ä¸­å§‹ç»ˆå¤„äºé€‰æ‹©çŠ¶æ€, å¹¶ä¸”æ— æ³•ç¦ç”¨;


è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªå¾ˆå°çš„å·®å¼‚,
ä½†æ˜¯,å¯¹äºæˆ‘æ¥è¯´, è¿™å®Œå…¨é‡Šæ”¾äº†æ–­è¨€çš„åŠ›é‡;
å¦‚æœä½ çœ‹ä¸€ä¸‹æˆ‘ç°åœ¨å†™çš„å¾ˆå¤šä»£ç ,
å°±ä¼šçœ‹åˆ° debug_assert çš„å¥”æ”¾ä½¿ç”¨,
ç»å¸¸æ£€æŸ¥ç›¸å½“å°çš„å‡è®¾, åŒ…æ‹¬é‚£äº›æˆ‘è®¤ä¸ºå¯èƒ½è¿åçš„å‡è®¾;
æˆ‘ç”šè‡³ä»æœªæƒ³è¿‡, æ›´åŠ ä¸ç”¨è¯´æ‹…å¿ƒ  debug_assert æ€§èƒ½å½±å“äº†;
ä½†æ˜¯, å¶å°”ä½ ä¼šå‘ç°ä¸€ä¸ª assert, æœ‰æ—¶ç”šè‡³åœ¨ç›¸å½“é¢‘ç¹æ‰§è¡Œçš„ä»£ç ä¸­
--- è¿™äº›æ˜¯æˆ‘æ£€éªŒç‰¹åˆ«é‡è¦çš„å‡è®¾çš„åœ°æ–¹,
æˆ–æ˜¯ç‰¹åˆ«ä½ç½®ä¿¡åº¦çš„å‡è®¾;
æ¯æ¬¡æˆ‘å†™ assert æ—¶, éƒ½ä¼šè€ƒè™‘å¯èƒ½çš„æ€§èƒ½å½±å“,
ä»¥åŠæ˜¯å¦æœ‰åŠæ³•å¢åŠ æˆ‘å¯¹å‡è®¾çš„ä¿¡å¿ƒ,
ä»¥è‡³äºæˆ‘å¯ä»¥å°†å…¶é™çº§ä¸º debug_assert ;
åŒæ ·, åœ¨è°ƒè¯•æ—¶, æˆ‘ç»å¸¸éå¸¸ä»”ç»†çš„æ£€æŸ¥ assert è¯­å¥,
å› ä¸º, å®ƒä»¬è¡¨æ˜æˆ‘å¯¹ç‰¹å®šå‡è®¾çš„ä¿¡å¿ƒæ¯”è¾ƒä½:
æˆ‘æ›´å¯èƒ½å¿…é¡»é‡æ–°è€ƒè™‘ assert è€Œä¸æ˜¯  debug_assert;


å½“ç„¶, æ²¡æœ‰ç†ç”±ä¸èƒ½ç”¨ C æˆ–æ˜¯ä»»ä½•å…¶å®ƒè¯­è¨€ç¼–å†™è‡ªå·±çš„ assert å’Œ  debug_assert ç­‰æ•ˆé¡¹,
ä½†æ˜¯,å°†å…¶å†…ç½®åˆ°è¯­è¨€(æˆ–æ˜¯æ ‡å‡†åº“)ä¸­,
å…¶ä¸­å®ƒä»¬çš„ä¸åŒåŠ¨æœºè¢«æ¸…æ¥šçš„è®°å½•å¹¶è¢«å¹¿æ³›ç†è§£,
è¿™ä½¿å¾—è‡ªç”±ä½¿ç”¨æ–­è¨€å˜å¾—æ›´åŠ å®¹æ˜“;


æˆ‘å¸Œæœ› Rust ä»¥å¤–çš„è¯­è¨€å°†ç»§ç»­çš„æ–­è¨€ä¸Šåšå‡ºè¿™ç§ä¸Šè½¦
--- å°½ç®¡æˆ‘æ›´å–œæ¬¢æ¯” "debug_assert" æ›´çŸ­çš„åå­—!


(è¯‘æŒ‰: dassert å°±å¯ä»¥;-)





```
          _~`|`~_
      \) /  â† â—·  \ \/
        '_   V   _'
        \ '--âˆ½--' )

...act by ferris-actor v0.2.4 (built on 23.0303.201916)
```]]></content:encoded></item><item><title>README.md</title><link>https://rs.101.so//101/README</link><pubDate>Mon, 03 Apr 2023 12:00:38 +0800</pubDate><content:encoded><![CDATA[# å­¦ä¹ 
> learnning ...


## background
> å¯èƒ½èƒŒæ™¯

å’Œå…¶å®ƒè¯­è¨€ä¸åŒ, Rust æœ‰å¤ªå¤šå…¬å¼€çš„ç§˜å¯†,å¦‚æœä¸èƒ½å¿«é€Ÿå…ˆä¹ æƒ¯ä¸€æ‰¹,
å¾ˆéš¾å†™å‡ºå¯ä»¥è¿è¡Œçš„è½¯ä»¶æ¥...

## goal
> å¿…è¦ç›®æ ‡

æœ€å¸¸ç”¨çš„é‚£ 20% Rust å¸¸è¯†...ä»¥ä¾¿è§£å†³ 80% åº”ç”¨åœºæ™¯

## trace
> å…·ä½“æ¨è¿›

- [ ] åŸºæœ¬æ¦‚å¿µ
    - [x] æ‰€æœ‰æƒ/å€Ÿç”¨/ä½œç”¨åŸŸ
    - [x] Option
    - [x] Box
    - [ ] ...
- [ ] æ ¸å¿ƒæ•°æ®ç»“æ„,åŠå…¶å¸¸ç”¨æ“ä½œ
- [ ] æ¨èå·¥ç¨‹ç»“æ„ ~> [Clear explanation of Rustâ€™s module system](https://www.sheshbabu.com/posts/rust-module-system/)
    - [ ] crate ä»¥åŠå†…éƒ¨æ¨¡å—ç®¡ç†
    - [x] logging
        - tracing = "0.1"
        - clia-tracing-config = "0.2"
- [ ] å®ç”¨å¼€å‘/è°ƒè¯•æµç¨‹
    - [x] MVP/ CLI å·¥ç¨‹
    - [ ] MVP/ web å·¥ç¨‹
    - [ ] MVP/ å¾®æœåŠ¡
    - [ ] MVP/ ç³»ç»ŸæœåŠ¡
    - [ ] ...
- [ ] å®æ•ˆ TDD æµç¨‹
- [ ] åº•å±‚è°ƒè¯•æŠ€å·§: gdb ...



## refer.
> å„ç§å‚è€ƒ


å¿…åˆ·ç»ƒä¹ :

- [GitHub - rust-lang/rustlings: Small exercises to get you used to reading and writing Rust code!](https://github.com/rust-lang/rustlings) ~ å®˜æ–¹å¤§ä½¬äº²è‡ªç¼–æ’°çš„...å½¢å¼ä¸Šä¹Ÿå……åˆ†åˆ©ç”¨äº† Cargo å·¥å…·é“¾, éå¸¸çš„é”ˆ...
- [Rust Quiz #1](https://dtolnay.github.io/rust-quiz/1)
- [Rust on Exercism](https://exercism.org/tracks/rust)
- ...


### è‡ªé”ˆè·¯å¾„

- [Resources - Rust Edu](https://rust-edu.org/resources/)
    - [I wanna be a crab. : rust](https://www.reddit.com/r/rust/comments/11dofu8/i_wanna_be_a_crab/)
    - [Learn Rust\!](https://gist.github.com/noxasaxon/7bf5ebf930e281529161e51cd221cf8a)
    - [Learn Rust Programming Course â€“ Interactive Rust Language Tutorial on Replit](https://www.freecodecamp.org/news/author/shaun/)
    - [Learn Rust in a Month of Lunches](https://www.manning.com/books/learn-rust-in-a-month-of-lunches)
    - ...
- [How not to learn Rust](https://dystroy.org/blog/how-not-to-learn-rust/ "How not to learn Rust") .. åˆå­¦è€…å¸¸çŠ¯é”™è¯¯...
- [Michael Yuan - è¢é’§æ¶›](https://www.freecodecamp.org/news/edge-cloud-microservices-with-wasmedge-and-rust/) ~ å¤©ä½“ç‰©ç†å­¦åšå£«, æ—©æœŸ JBoss æˆå‘˜, WEB3 ä¸“å®¶...
    - [The Top 8 Things I Learned From 4000 Rust Developers](https://www.freecodecamp.org/news/author/michael/)
    - [How to Learn Rust Without Installing Any Software](https://www.freecodecamp.org/news/learn-rust-with-github-actions/) ~ ç™½å«–ä¸“å®¶...
        - [GitHub Codespaces â€“ How to Code Right in Your Browser with Your Own Cloud Dev Environment](https://www.freecodecamp.org/news/learn-programming-in-your-browser-the-right-way/)
    - [How to Create a Serverless Meme-as-a-Service](https://www.freecodecamp.org/news/create-a-serverless-meme-as-a-service/)
    - [Edge Cloud Microservices â€“ How to Build High Performance & Secure Apps with WasmEdge and Rust](https://www.freecodecamp.org/news/edge-cloud-microservices-with-wasmedge-and-rust/)
    - WASM/
        - [How to use Rust + WebAssembly to Perform Serverless Machine Learning and Data Visualization in the Cloud](https://www.freecodecamp.org/news/rust-webassembly-serverless-tencent-cloud/)
        - [How to Build a Personal Dev Server on a $5 Raspberry Pi](https://www.freecodecamp.org/news/build-a-personal-dev-server-on-a-5-dollar-raspberry-pi/)
- ...

### rustCC
> ä¸­æ–‡ç¤¾åŒº:

- [ç¨‹åºè®¾è®¡è®­ç»ƒï¼ˆRustï¼‰](https://lab.cs.tsinghua.edu.cn/rust/) ~2021-2022 å¹´å¤å­£å­¦æœŸèµ·æ¸…åå¤§å­¦è®¡ç®—æœºç³»å¼€è®¾çš„ã€Šç¨‹åºè®¾è®¡è®­ç»ƒï¼ˆRustï¼‰ã€‹
- [Rust è¯­è¨€æ–‡æ¡£ Â· Rust ç¨‹åºè®¾è®¡è¯­è¨€](https://prev.rust-lang.org/zh-CN/documentation.html)
    - [Rust ä¸­æ–‡æ–‡æ¡£ | Rust æ–‡æ¡£ç½‘](https://rustwiki.org/docs/)
    - [Rust æ–‡æ¡£ç¿»è¯‘æŒ‡å¼• | Rust æ–‡æ¡£ç½‘](https://rustwiki.org/wiki/translate/rust-translation-guide/#tong-yi-fan-yi-zhu-yu-he-gu-ding-yong-yu)
    - [å¸¸è§é—®é¢˜è§£ç­” Â· Rust ç¨‹åºè®¾è®¡è¯­è¨€](https://prev.rust-lang.org/zh-CN/faq.html#lifetimes)
    - ...
- [å¼ æ±‰ä¸œ|åŠå°æ—¶å¼„æ‡‚-RuståŸºæœ¬è¯­æ³•åŠè¯­è¨€ç‰¹æ€§_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV15U4y177oh/)
    - [å·¦è€³æœµè€—å­|ä»¥ Rust ä¸ºä¾‹ï¼Œå¸¦ä½ ææ‡‚ç¼–ç¨‹è¯­è¨€æœ¬è´¨_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1cA411877u/)
    - ...
- ...


### Youtube
> çœŸçš„æ˜¯ä»€ä¹ˆéƒ½æœ‰

- å„ç§åŠè§£:
    - [Rust Linz, June 2021 - Tim McNamara - How to learn Rust - YouTube](https://www.youtube.com/watch?v=sDtQaO5_SOw)
- 110+[Rust ç¼–ç¨‹è¯­è¨€å…¥é—¨æ•™ç¨‹ \[2021\] \- YouTube](https://www.youtube.com/playlist?list=PL3azK8C0kje1DUJbaOqce19j3R_-tIc4_)
    - 94+ [Rust - YouTube](https://www.youtube.com/playlist?list=PLVhhUNGAUIQScqB26DdUq4n1Y2n3auM7X)
        - ä¸“é¢˜:[rusqlite - YouTube](https://www.youtube.com/watch?v=xhU8KDzL0vA&list=PLVhhUNGAUIQRR7JheZsDaxF_Cd5Pf5slw)
        - [SQL Cheat Sheet | Crazcalm](http://ogcrazcalm.blogspot.com/2015/11/sql-cheat-sheet.html)
        - [SQLite - Rust Cookbook](https://rust-lang-nursery.github.io/rust-cookbook/database/sqlite.html#insert-and-select-data)
        - [rusqlite - crates.io: Rust Package Registry](https://crates.io/crates/rusqlite)
        - [File in std::fs - Rust](https://doc.rust-lang.org/std/fs/struct.File.html#examples)
    - 42+[RUST PROGRAMMING TUTORIALS \- YouTube](https://www.youtube.com/playlist?list=PLVvjrrRCBy2JSHf9tGxGKJ-bYAN_uDCUL)
    - 44+[Intro to Rust \- YouTube](https://www.youtube.com/playlist?list=PLJbE2Yu2zumDF6BX6_RdPisRVHgzV02NW)
    - 14+[Rust For Starters \- YouTube](https://www.youtube.com/playlist?list=PLKkEWK6xRmes17LQUEA5bNjYISuCEOTXx)
- 44+[The Rust Lang Book \- YouTube](https://www.youtube.com/playlist?list=PLai5B987bZ9CoVR-QEIN9foz4QCJ0H2Y8)
- 25+[Rust Projects \- YouTube](https://www.youtube.com/playlist?list=PLJbE2Yu2zumDD5vy2BuSHvFZU0a6RDmgb)
    - 24+[50 RUST Projects \- YouTube](https://www.youtube.com/playlist?list=PL5dTjWUk_cPYuhHm9_QImW7_u4lr5d6zO)
- [Jon Gjengset - YouTube](https://www.youtube.com/@jonhoo)
    - 14+ [Crust of Rust - YouTube](https://www.youtube.com/playlist?list=PLqbS7AVVErFiWDOAVrPt7aYmnuuOLYvOa)
    - 14+ [Rust live-coding - YouTube](https://www.youtube.com/playlist?list=PLqbS7AVVErFgY2faCIYjJZv_RluGkTlKt)
- [Rust Talks \- YouTube](https://www.youtube.com/playlist?list=PLZaoyhMXgBzoM9bfb5pyUOT3zjnaDdSEP)
    - å„ç§ç•…æƒ³...
    - [Contributing to Rustc \- YouTube](https://www.youtube.com/playlist?list=PLnhCUtqrIE-zgfmf6hn6fLwhfR_hDSG9T) ~ ç‰›äººç›´æ’­å¦‚ä½•ä¸º Rust ç¼–è¯‘å™¨è´¡çŒ®ç‰¹æ€§...
- [Rust - YouTube](https://www.youtube.com/watch?v=_jMSrMex6R0&list=PLFjq8z-aGyQ6t_LGp7wqHsHTYO-pDDx84)
    - å„ç§å‰æ™¯åˆ†æ
    - [WebAssembly - YouTube](https://www.youtube.com/watch?v=qjwWF6K-7uE&list=PLFjq8z-aGyQ78CQu1G3C5CT9ieiNpsnbJ) ~ å„ç§å®ç°åº”ç”¨
- [Idiomatic Rust \- YouTube](https://www.youtube.com/playlist?list=PLai5B987bZ9A5MO1oY8uihDWFC5DsdJZq)
- ...


### free Books
> è¿™ä¸ªä¸–ç•Œä¸Šå…è´¹å¥½èµ„æºå¤ªå¤šäº†...

[free-programming-books/free-programming-books-langs.md at main Â· EbookFoundation/free-programming-books](https://github.com/EbookFoundation/free-programming-books/blob/main/books/free-programming-books-langs.md#rust)

- [Rust è¯­è¨€æ–‡æ¡£ Â· Rust ç¨‹åºè®¾è®¡è¯­è¨€](https://prev.rust-lang.org/zh-CN/documentation.html)
- [Rust ä¸­æ–‡æ–‡æ¡£ | Rust æ–‡æ¡£ç½‘](https://github.com/rust-lang-cn/rustdoc-cn/fork)
- [Rust è¯­è¨€ä¹‹æ—… - Let's go on an adventure!](https://tourofrust.com/11_zh-cn.html)
- [Yåˆ†é’Ÿé€ŸæˆX ~ å…¶ä¸­ X=Rust](https://learnxinyminutes.com/docs/zh-cn/rust-cn/)
    - [Rust å¤‡å¿˜æ¸…å• & rust cheatsheet & Quick Reference](https://wangchujiang.com/rust-cn-document-for-docker/quick-reference/docs/rust.html)
- [sger/RustBooks: List of Rust books](https://github.com/sger/RustBooks#advanced-books)
    - [ctjhoa/rust-learning: A bunch of links to blog posts, articles, videos, etc for learning Rust](http://llogiq.github.io/2015/07/15/profiling.html)
    - [Introduction - Learning Rust With Entirely Too Many Linked Lists](https://rust-unofficial.github.io/too-many-lists/first.html)
    - ...
- ...

### é¢è¯•å‘...
> ä¹Ÿå°±æ˜¯ Leetcode ä¹‹ç±»çš„ä¸œè¥¿, è¦æ­»è®°çš„...


- 44+ [Leetcode - YouTube](https://www.youtube.com/watch?v=L93kxEn2sEA&list=PLib6-zlkjfXnl7Qyy9QzOt5BAphdAwmHm&pp=iAQB)
- 8+ [Rust Leetcode Solutions - YouTube](https://www.youtube.com/watch?v=dK5jUHRbyCA&list=PLvePk7bSSZhe5C8NNaxDhABkjg5F70wdE&pp=iAQB)
- ...



## logging
> ç‰ˆæœ¬è®°è¦

- ..
- 221214 ZQ init.


```
            _~`|-~_
        \) /  O =  \ ()
          '_   â¡   _'
          | '-----' )

...act by ferris-actor v0.2.4 (built on 23.0303.201916)
```]]></content:encoded></item><item><title>chat_dyn101.md</title><link>https://rs.101.so//101/chat_dyn101</link><pubDate>Sun, 02 Apr 2023 13:06:44 +0800</pubDate><content:encoded><![CDATA[# dyn:åŠ¨/é™æ€å¤šæ€åˆæ­¥
> å­¦ä¼´ChatGPT, chatting for debugging ...

## background
> Rust ä¸­æ–‡ç¤¾åŒºä¸­çš„è®¨è®º...

![è¿™ç§ç”¨if letå°±ä¼šæŠ¥é”™ï¼Œå¿…é¡»åˆ†å¼€å†™å—](https://ipic.zoomquiet.top/2023-02-28-%E9%A3%9E%E4%B9%A620230228-150444.jpg)


## goal

åˆç†å®Œæˆè°ƒè¯•...

## trace

æœ‰åŒå­¦å»ºè®®:
```rust
if let Ok(exists) = conn.exists::<bool, _>(key).await {
    unimplemented!()
}
```

äºæ˜¯å¼€å§‹æ¢é—®:

> Q:

if let Ok(exists) = conn.exists::<bool, _>(key).await {
}
è¿™å¥ä»£ç ä»€ä¹ˆæ„æ€?

> A:

è¿™å¥ä»£ç æ˜¯Rustè¯­è¨€çš„ä»£ç ï¼Œç”¨äºåœ¨Redisæ•°æ®åº“ä¸­æ£€æŸ¥æŒ‡å®šé”®æ˜¯å¦å­˜åœ¨ï¼Œå¹¶å¼‚æ­¥åœ°è¿”å›ä¸€ä¸ªç»“æœã€‚

å…·ä½“æ¥è¯´ï¼Œè¿™æ®µä»£ç é¦–å…ˆè°ƒç”¨ä¸€ä¸ªRedisè¿æ¥å¯¹è±¡ï¼ˆconnï¼‰ä¸Šçš„existsæ–¹æ³•æ¥æ£€æŸ¥ç»™å®šçš„keyæ˜¯å¦å­˜åœ¨ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªResult<bool, _>ç±»å‹çš„ç»“æœï¼Œå…¶ä¸­Okè¡¨ç¤ºæ£€æŸ¥æ“ä½œæˆåŠŸï¼Œexistsè¡¨ç¤ºæŒ‡å®šçš„keyå­˜åœ¨ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼ˆ_è¡¨ç¤ºä»»æ„çš„é”™è¯¯ç±»å‹ï¼‰ã€‚

ç„¶åï¼Œè¿™æ®µä»£ç ä½¿ç”¨if letè¯­æ³•ï¼Œå°†è¿”å›çš„ç»“æœç»‘å®šåˆ°ä¸€ä¸ªåä¸ºexistsçš„å˜é‡ä¸Šã€‚å¦‚æœexistsæ˜¯Okç±»å‹ï¼Œåˆ™æ„å‘³ç€æ£€æŸ¥æ“ä½œæˆåŠŸï¼Œå¹¶ä¸”å¯ä»¥ç»§ç»­æ‰§è¡Œifä»£ç å—ä¸­çš„é€»è¾‘æ¥å¤„ç†keyå­˜åœ¨çš„æƒ…å†µã€‚åä¹‹ï¼Œå¦‚æœexistsæ˜¯Errç±»å‹ï¼Œåˆ™æ„å‘³ç€æ£€æŸ¥æ“ä½œå¤±è´¥ï¼Œå¹¶ä¸”éœ€è¦åœ¨elseä»£ç å—ä¸­å¤„ç†é”™è¯¯æƒ…å†µã€‚

> Q:

ä¸€èˆ¬åœ¨ else ä¸­å¦‚å¦‚ä½•å¤„ç†é”™è¯¯?
å¦‚æœ exists æ˜¯ Ok , è¿™æ—¶ é‚£ä¸ª key æ˜¯å¦‚ä½•è¿›å…¥ if ä»£ç å—è¿›è¡Œå¤„ç†çš„?

> A:

åœ¨ else ä¸­ï¼Œä¸€èˆ¬ä¼šå¤„ç†æ£€æŸ¥æ“ä½œå¤±è´¥çš„æƒ…å†µï¼Œä¾‹å¦‚è®°å½•æ—¥å¿—ã€è¿”å›é”™è¯¯ä¿¡æ¯ç­‰ã€‚å…·ä½“å¦‚ä½•å¤„ç†é”™è¯¯ï¼Œå–å†³äºä»£ç çš„è®¾è®¡å’Œä¸šåŠ¡éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºäº†åœ¨ else ä¸­å¦‚ä½•è®°å½•é”™è¯¯ä¿¡æ¯ï¼š

```rust
if let Ok(exists) = conn.exists::<bool, _>(key).await {
    if exists {
        // å¦‚æœ key å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œç›¸åº”çš„é€»è¾‘
    } else {
        // å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œç›¸åº”çš„é€»è¾‘
    }
} else {
    // å¦‚æœæ£€æŸ¥æ“ä½œå¤±è´¥ï¼Œåˆ™è®°å½•é”™è¯¯ä¿¡æ¯å¹¶è¿”å›é”™è¯¯
    eprintln!("Failed to check if key exists: {:?}", key);
    return Err(MyError::RedisError);
}
```

> Q:

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¦‚æœæ£€æŸ¥æ“ä½œæˆåŠŸï¼Œåˆ™æ ¹æ® exists çš„å€¼åˆ†åˆ«æ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚å¦‚æœæ£€æŸ¥æ“ä½œå¤±è´¥ï¼Œåˆ™ä½¿ç”¨ else ä»£ç å—æ¥è®°å½•é”™è¯¯ä¿¡æ¯ï¼Œå¹¶è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ç±»å‹ï¼ˆMyError::RedisErrorï¼‰ã€‚

å¦‚æœ exists æ˜¯ Okï¼Œåˆ™è¡¨ç¤ºæ£€æŸ¥æ“ä½œæˆåŠŸï¼Œexists å˜é‡å°†åŒ…å«ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºç»™å®šçš„ key æ˜¯å¦å­˜åœ¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¨‹åºå°†è¿›å…¥ if ä»£ç å—ï¼Œæ ¹æ® exists çš„å€¼æ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ exists ä¸º trueï¼Œåˆ™è¡¨ç¤º key å­˜åœ¨ï¼Œç¨‹åºå°†æ‰§è¡Œç›¸åº”çš„é€»è¾‘æ¥å¤„ç† key å­˜åœ¨çš„æƒ…å†µã€‚åä¹‹ï¼Œå¦‚æœ exists ä¸º falseï¼Œåˆ™è¡¨ç¤º key ä¸å­˜åœ¨ï¼Œç¨‹åºå°†æ‰§è¡Œç›¸åº”çš„é€»è¾‘æ¥å¤„ç† key ä¸å­˜åœ¨çš„æƒ…å†µã€‚

> A:

æ˜¯çš„ï¼Œä½ æ˜¯å¯¹çš„ã€‚åœ¨ä½ æä¾›çš„ä»£ç ç‰‡æ®µä¸­ï¼Œkey æ˜¯åœ¨ä¹‹å‰å®šä¹‰çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾åœ¨è¿™æ®µä»£ç ä¹‹å‰ï¼Œå·²ç»å®šä¹‰äº†ä¸€ä¸ªåä¸º key çš„å˜é‡ï¼Œç”¨äºæŒ‡å®šè¦æ£€æŸ¥çš„ Redis é”®åã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Redis è¿›è¡Œé”®å€¼å­˜å‚¨çš„ç®€å•ç¤ºä¾‹ï¼Œå…¶ä¸­ä½¿ç”¨äº†ç±»ä¼¼äºä½ æä¾›çš„ä»£ç ç‰‡æ®µï¼š

```rust
use redis::AsyncCommands;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let client = redis::Client::open("redis://127.0.0.1/").unwrap();
    let mut conn = client.get_async_connection().await?;

    // å®šä¹‰è¦æ£€æŸ¥çš„ Redis é”®å
    let key = "my_key";

    // æ£€æŸ¥æŒ‡å®šçš„é”®æ˜¯å¦å­˜åœ¨
    if let Ok(exists) = conn.exists::<bool, _>(key).await {
        if exists {
            // å¦‚æœ key å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œç›¸åº”çš„é€»è¾‘
            let value: String = conn.get(key).await?;
            println!("{}: {}", key, value);
        } else {
            // å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œç›¸åº”çš„é€»è¾‘
            conn.set(key, "Hello, Redis!").await?;
            println!("Set {} successfully", key);
        }
    } else {
        // å¦‚æœæ£€æŸ¥æ“ä½œå¤±è´¥ï¼Œåˆ™è®°å½•é”™è¯¯ä¿¡æ¯å¹¶è¿”å›é”™è¯¯
        eprintln!("Failed to check if key exists: {:?}", key);
        return Err("RedisError".into());
    }

    Ok(())
}

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªåä¸º key çš„å˜é‡ï¼Œç”¨äºæŒ‡å®šè¦æ£€æŸ¥çš„ Redis é”®åã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ conn.exists æ–¹æ³•æ£€æŸ¥æŒ‡å®šçš„é”®æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœæ£€æŸ¥æ“ä½œæˆåŠŸï¼Œåˆ™æ ¹æ®æ£€æŸ¥ç»“æœçš„å€¼ï¼ˆå³å˜é‡ existsï¼‰æ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚å¦‚æœæ£€æŸ¥æ“ä½œå¤±è´¥ï¼Œåˆ™è®°å½•é”™è¯¯ä¿¡æ¯å¹¶è¿”å›é”™è¯¯ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ eprintln æ¥è®°å½•é”™è¯¯ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨ return Err(...) è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„é”™è¯¯ä¿¡æ¯ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ Ok(()) è¿”å›ä¸€ä¸ªè¡¨ç¤ºæˆåŠŸçš„ç»“æœã€‚

> Q:

è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ Result<(), Box<dyn std::error::Error>>
æ˜¯ä»€ä¹ˆå«ä¹‰, åº”è¯¥å¦‚ä½•ç†è§£?

> A:

è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª Result ç±»å‹ï¼Œå…¶ä¸­ () è¡¨ç¤ºä¸€ä¸ªç©ºå…ƒç»„ï¼ˆä¹Ÿç§°ä¸º unit typeï¼‰ã€‚åœ¨ Rust ä¸­ï¼Œ() ç”¨äºè¡¨ç¤ºæ²¡æœ‰å€¼çš„æƒ…å†µï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ void ç±»å‹ã€‚åœ¨è¿™ä¸ªå‡½æ•°çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ() è¡¨ç¤ºå‡½æ•°æ²¡æœ‰è¿”å›ä»»ä½•æœ‰ç”¨çš„å€¼ï¼Œåªæ˜¯æ‰§è¡Œäº†ä¸€äº›æ“ä½œã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼è§£è¯»ä¸ºâ€œè¡¨ç¤ºå‡½æ•°æ‰§è¡Œæ˜¯å¦æˆåŠŸçš„ç»“æœï¼Œå¦‚æœæˆåŠŸåˆ™ä¸è¿”å›ä»»ä½•å€¼ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªå®ç°äº† std::error::Error trait çš„é”™è¯¯ç±»å‹â€ã€‚

Box<dyn std::error::Error> æ˜¯ä¸€ä¸ª trait å¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå¯ä»¥ä½œä¸ºé”™è¯¯ç±»å‹çš„ä»»ä½•ç±»å‹ï¼Œåªè¦è¯¥ç±»å‹å®ç°äº† std::error::Error traitã€‚åœ¨ Rust ä¸­ï¼Œstd::error::Error trait æ˜¯ä¸€ä¸ªé€šç”¨çš„é”™è¯¯å¤„ç† traitï¼Œå®ƒå®šä¹‰äº†ä¸€äº›æ–¹æ³•å’Œå±æ€§ï¼Œç”¨äºå¤„ç†å’Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚å®ç° std::error::Error trait çš„ç±»å‹å¯ä»¥æ˜¯ä»»ä½•å…·ä½“çš„ç±»å‹ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€è‡ªå®šä¹‰ç»“æ„ä½“ã€æšä¸¾ç­‰ç­‰ã€‚ä½†æ˜¯ï¼Œä¸ºäº†æ–¹ä¾¿å’Œé€šç”¨æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†å®ç°äº† std::error::Error trait çš„ç±»å‹å°è£…åœ¨ä¸€ä¸ª Box ä¸­ï¼Œä»¥å®ç°åŠ¨æ€åˆ†é…å’Œå›æ”¶å†…å­˜çš„æ•ˆæœã€‚

å› æ­¤ï¼Œå°† Box<dyn std::error::Error> ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªå®ç°äº† std::error::Error trait çš„é”™è¯¯ç±»å‹ã€‚å½“å‡½æ•°æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ª Ok(()) å€¼ï¼Œè¡¨ç¤ºå‡½æ•°æ‰§è¡ŒæˆåŠŸä¸”æ²¡æœ‰è¿”å›ä»»ä½•å€¼ã€‚å½“å‡½æ•°æ‰§è¡Œå¤±è´¥æ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ª Err å€¼ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªå®ç°äº† std::error::Error trait çš„é”™è¯¯ç±»å‹ï¼Œè¯¥é”™è¯¯ç±»å‹å¯ä»¥æä¾›æœ‰å…³é”™è¯¯çš„æ›´å¤šä¿¡æ¯ï¼Œä¾‹å¦‚é”™è¯¯æ¶ˆæ¯ã€é”™è¯¯ç ã€å †æ ˆè·Ÿè¸ªç­‰ç­‰ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ ¹æ®é”™è¯¯ç±»å‹æ¥å¤„ç†é”™è¯¯ï¼Œä¾‹å¦‚è®°å½•é”™è¯¯æ—¥å¿—ã€è¿”å›é”™è¯¯ç ã€é‡è¯•æ“ä½œç­‰ç­‰ã€‚

> Q:

è¿™é‡Œçš„ dyn æ˜¯ä»€ä¹ˆè¯­æ³•?ä¸ºä»€ä¹ˆè¦åŒ…åœ¨ä¸€ä¸ª Box ä¸­?

> A:

dyn æ˜¯ Rust è¯­è¨€ä¸­çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºè¡¨ç¤ºåŠ¨æ€æ´¾å‘çš„ç±»å‹ã€‚åœ¨ Rust ä¸­ï¼Œå­˜åœ¨ä¸¤ç§ç±»å‹çš„å¤šæ€ï¼šé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€ã€‚é™æ€å¤šæ€æ˜¯é€šè¿‡æ³›å‹å®ç°çš„ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æ—¶ç¡®å®šå…·ä½“çš„ç±»å‹ï¼Œè€ŒåŠ¨æ€å¤šæ€æ˜¯é€šè¿‡ trait å¯¹è±¡å®ç°çš„ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå…·ä½“çš„ç±»å‹ã€‚

åœ¨ Rust ä¸­ï¼ŒBox æ˜¯ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆç±»å‹ï¼Œç”¨äºåœ¨å †ä¸Šåˆ†é…å’Œç®¡ç†åŠ¨æ€åˆ†é…çš„å€¼ã€‚ç”±äº trait å¯¹è±¡çš„å¤§å°å’Œç±»å‹åœ¨ç¼–è¯‘æ—¶æ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥å°† trait å¯¹è±¡æ”¾åœ¨æ ˆä¸Šæˆ–è€…åµŒå…¥åˆ°å…¶ä»–ç±»å‹ä¸­ã€‚ä¸ºäº†æ–¹ä¾¿å’Œå®‰å…¨åœ°ä½¿ç”¨ trait å¯¹è±¡ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†å…¶å°è£…åœ¨ä¸€ä¸ª Box ä¸­ï¼Œä»¥å®ç°åŠ¨æ€åˆ†é…å’Œå›æ”¶å†…å­˜çš„æ•ˆæœã€‚

å› æ­¤ï¼Œåœ¨ Result<(), Box<dyn std::error::Error>> è¿™ä¸ªç±»å‹ä¸­ï¼ŒBox<dyn std::error::Error> è¡¨ç¤ºä¸€ä¸ªå®ç°äº† std::error::Error trait çš„é”™è¯¯ç±»å‹ï¼Œå®ƒå¯èƒ½æ˜¯ä»»ä½•å…·ä½“çš„ç±»å‹ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€è‡ªå®šä¹‰ç»“æ„ä½“ã€æšä¸¾ç­‰ç­‰ã€‚ç”±äºè¯¥ç±»å‹æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ Box æ¥ç®¡ç†å…¶å†…å­˜ã€‚æœ€åï¼ŒResult<(), Box<dyn std::error::Error>> è¡¨ç¤ºä¸€ä¸ªæˆåŠŸæ—¶ä¸è¿”å›ä»»ä½•å€¼ï¼Œå¤±è´¥æ—¶è¿”å›ä¸€ä¸ªå®ç°äº† std::error::Error trait çš„é”™è¯¯ç±»å‹çš„ç»“æœç±»å‹ã€‚

> Q:

å¯¹åº” dyn çš„é™æ€å¤šæ€æ˜¯ä»€ä¹ˆ, èƒ½ä¸¾ä¸ªä¾‹å­å˜›?

> A:

å¯¹åº”äº dyn çš„é™æ€å¤šæ€æ˜¯ Rust ä¸­çš„æ³›å‹ï¼Œç”¨äºåœ¨ç¼–è¯‘æ—¶ç¡®å®šå…·ä½“çš„ç±»å‹ã€‚åœ¨ Rust ä¸­ï¼Œæ³›å‹å¯ä»¥é€šè¿‡ç±»å‹å‚æ•°æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š

```rust
fn add<T>(x: T, y: T) -> T
where
    T: std::ops::Add<Output = T> + Copy,
{
    x + y
}

let x = 1;
let y = 2;
let z = add(x, y);

```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œadd å‡½æ•°ä½¿ç”¨äº†æ³›å‹ç±»å‹ Tï¼Œå®ƒè¡¨ç¤ºä»»æ„ç±»å‹ã€‚å‡½æ•°ç­¾åä¸­çš„ where å…³é”®å­—è¡¨ç¤ºæ³›å‹ç±»å‹ T éœ€è¦æ»¡è¶³çš„ä¸€äº›çº¦æŸï¼Œä¾‹å¦‚å®ç°äº† std::ops::Add traitï¼Œå¹¶ä¸”è¯¥ trait çš„ Output å…³è”ç±»å‹ä¸º Tï¼ŒåŒæ—¶è¿˜éœ€è¦å®ç° Copy traitã€‚è¿™äº›çº¦æŸä¿è¯äº†ç±»å‹ T æ”¯æŒåŠ æ³•æ“ä½œï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œå€¼çš„æ‹·è´æ“ä½œã€‚æœ€åï¼Œadd å‡½æ•°è¿”å›ç±»å‹ä¸º Tï¼Œè¡¨ç¤ºå‡½æ•°çš„è¿”å›å€¼ç±»å‹å’Œå‚æ•°ç±»å‹ç›¸åŒã€‚

åœ¨ä½¿ç”¨æ³›å‹çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å‡½æ•°è°ƒç”¨æ—¶æŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š

```rust
let x = 1;
let y = 2;
let z = add::<i32>(x, y);
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œadd::<i32> è¡¨ç¤ºè°ƒç”¨ add å‡½æ•°ï¼Œå¹¶å°†ç±»å‹å‚æ•° T æŒ‡å®šä¸º i32 ç±»å‹ã€‚ç”±äº i32 ç±»å‹å®ç°äº† std::ops::Add trait å’Œ Copy traitï¼Œå› æ­¤æ»¡è¶³å‡½æ•°ç­¾åä¸­çš„çº¦æŸï¼Œå¯ä»¥æˆåŠŸè°ƒç”¨å‡½æ•°å¹¶è¿”å›å€¼ã€‚

æ€»ä¹‹ï¼Œé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€æ˜¯ Rust ä¸­çš„ä¸¤ç§å¤šæ€æ–¹å¼ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºåœ¨ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶ç¡®å®šå…·ä½“çš„ç±»å‹ã€‚åœ¨ Rust ä¸­ï¼Œæ³›å‹ç”¨äºé™æ€å¤šæ€ï¼Œé€šè¿‡ç±»å‹å‚æ•°åœ¨ç¼–è¯‘æ—¶ç¡®å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œ trait å¯¹è±¡ç”¨äºåŠ¨æ€å¤šæ€ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå…·ä½“çš„ç±»å‹ã€‚

> A:

ä¹Ÿå°±æ˜¯è¯´é™æ€å¤šæ€ç”¨ T æ¥å£°æ˜, åŠ¨æ€å¤šæ€ç”¨ dyn å£°æ˜? ä¸Šè¿°é‚£ä¸ª add çš„ç¤ºä¾‹ç”¨ dyn æ¥å®šä¹‰åº”è¯¥å¦‚ä½•å†™?

> Q:

ä¸å®Œå…¨æ­£ç¡®ï¼Œé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€éƒ½å¯ä»¥ä½¿ç”¨æ³›å‹æ¥å®ç°ï¼Œåªä¸è¿‡å®ƒä»¬ä½¿ç”¨æ–¹å¼å’Œç›®çš„ç•¥æœ‰ä¸åŒã€‚å…·ä½“æ¥è¯´ï¼Œæ³›å‹ä¸»è¦ç”¨äºé™æ€å¤šæ€ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æ—¶ç¡®å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œ trait å¯¹è±¡ä¸»è¦ç”¨äºåŠ¨æ€å¤šæ€ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®å®šå…·ä½“çš„ç±»å‹ã€‚å› æ­¤ï¼Œæ³›å‹é€šå¸¸ç”¨äºå‡½æ•°ã€ç»“æ„ä½“ã€æšä¸¾ç­‰é™æ€ç±»å‹çš„å®šä¹‰ä¸­ï¼Œè€Œ trait å¯¹è±¡é€šå¸¸ç”¨äºå‡½æ•°å‚æ•°ã€è¿”å›å€¼ã€å®ç°åŠ¨æ€åˆ†å‘ç­‰éœ€è¦åŠ¨æ€ç±»å‹çš„åœºæ™¯ä¸­ã€‚

å¯¹äºä½ çš„é—®é¢˜ï¼Œå¦‚æœè¦å°†ä¸Šé¢çš„ add å‡½æ•°æ”¹å†™æˆä½¿ç”¨ trait å¯¹è±¡å®ç°çš„åŠ¨æ€å¤šæ€ï¼Œå¯ä»¥å°†å‚æ•°ç±»å‹ä»æ³›å‹ T æ”¹ä¸º trait å¯¹è±¡ dyn std::ops::Add<Output = T>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn add<T>(x: T, y: T) -> T
where
    T: Copy,
    dyn std::ops::Add<Output = T> + 'static,
{
    x + y
}

let x = 1;
let y = 2;
let z = add(x, y);

```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œadd å‡½æ•°ä½¿ç”¨äº† trait å¯¹è±¡ dyn std::ops::Add<Output = T>ï¼Œå®ƒè¡¨ç¤ºå®ç°äº† std::ops::Add traitï¼Œå¹¶ä¸”è¯¥ trait çš„ Output å…³è”ç±»å‹ä¸º T çš„ä»»æ„ç±»å‹ã€‚ç”±äº trait å¯¹è±¡çš„å¤§å°å’Œç±»å‹åœ¨ç¼–è¯‘æ—¶æ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ dyn å…³é”®å­—æ¥è¡¨ç¤ºåŠ¨æ€ç±»å‹ã€‚åŒæ—¶ï¼Œä¸ºäº†ä½¿ trait å¯¹è±¡èƒ½å¤Ÿåœ¨å‡½æ•°å†…éƒ¨è¢«å­˜å‚¨å’Œä½¿ç”¨ï¼Œè¿˜éœ€è¦ä½¿ç”¨ 'static lifetime æ¥ä¿è¯ trait å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸè‡³å°‘å’Œæ•´ä¸ªç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·é•¿ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨ trait å¯¹è±¡æ—¶ï¼Œéœ€è¦å°† trait å¯¹è±¡çš„å®ç°é™åˆ¶åœ¨ç¼–è¯‘æ—¶å·²çŸ¥çš„èŒƒå›´å†…ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç”±äº add å‡½æ•°éœ€è¦ä½¿ç”¨ x + y è¡¨è¾¾å¼ï¼Œå› æ­¤è¦æ±‚ trait å¯¹è±¡ dyn std::ops::Add<Output = T> çš„å®ç°ç±»å‹å¿…é¡»å®ç°äº† Copy traitï¼Œä»¥ä¾¿è¿›è¡Œå€¼çš„æ‹·è´æ“ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿ trait å¯¹è±¡çš„å®ç°ç±»å‹æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç¡®å®šçš„ï¼Œä¹Ÿèƒ½å¤Ÿä¿è¯å®ƒä»¬æ»¡è¶³ Copy trait çš„è¦æ±‚ï¼Œä»è€Œé¿å…å‡ºç°è¿è¡Œæ—¶é”™è¯¯ã€‚



> A:

é‚£ä¹ˆ trait å¯¹è±¡ä¹Ÿèƒ½å®Œæˆé™æ€å¤šæ€çš„ä»»åŠ¡å˜›? ä¸¾è¡Œè¯´æ˜?

> Q:

Trait å¯¹è±¡ä¸»è¦ç”¨äºå®ç°åŠ¨æ€å¤šæ€ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨è¿è¡Œæ—¶æ ¹æ®å…·ä½“ç±»å‹æ¥è°ƒç”¨ä¸åŒçš„æ–¹æ³•å®ç°ã€‚è€Œæ³›å‹ä¸»è¦ç”¨äºå®ç°é™æ€å¤šæ€ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨ç¼–è¯‘æ—¶ç¡®å®šå…·ä½“ç±»å‹ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®å…·ä½“ç±»å‹æ¥è¿›è¡Œä»£ç ä¼˜åŒ–ç­‰æ“ä½œã€‚

è™½ç„¶ trait å¯¹è±¡ä¸èƒ½åƒæ³›å‹ä¸€æ ·è¿›è¡Œç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿå¯ä»¥å®Œæˆä¸€äº›é™æ€å¤šæ€çš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° printï¼Œå®ƒå¯ä»¥æ‰“å°ä¸åŒç±»å‹çš„å€¼ã€‚å¦‚æœä½¿ç”¨æ³›å‹æ¥å®ç°ï¼Œå¯ä»¥å®šä¹‰å¦‚ä¸‹ï¼š

```rust
fn print<T: std::fmt::Display>(value: T) {
    println!("{}", value);
}

```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ³›å‹æ¥å®ç°é™æ€å¤šæ€ï¼Œå‡½æ•°çš„å‚æ•°ç±»å‹ T åœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šï¼Œå› æ­¤å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ std::fmt::Display trait æ¥æ‰“å°ä¸åŒç±»å‹çš„å€¼ã€‚

ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨è¿è¡Œæ—¶åŠ¨æ€ç¡®å®šå‚æ•°ç±»å‹ï¼Œå°±å¯ä»¥ä½¿ç”¨ trait å¯¹è±¡æ¥å®ç°ã€‚ä¾‹å¦‚ï¼š

```rust
fn print(value: &dyn std::fmt::Display) {
    println!("{}", value);
}

let s = "Hello, world!";
let n = 42;
print(&s);
print(&n);

```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† trait å¯¹è±¡ &dyn std::fmt::Display æ¥å®ç°åŠ¨æ€å¤šæ€ï¼Œå‡½æ•°çš„å‚æ•°ç±»å‹åœ¨è¿è¡Œæ—¶æ‰ç¡®å®šã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ std::fmt::Display trait æ¥æ‰“å°ä¸åŒç±»å‹çš„å€¼ï¼Œç”±äº trait å¯¹è±¡çš„å¤§å°å’Œç±»å‹åœ¨ç¼–è¯‘æ—¶æ˜¯ä¸ç¡®å®šçš„ï¼Œå› æ­¤ä¸èƒ½åƒæ³›å‹é‚£æ ·è¿›è¡Œç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Œä½†æ˜¯å¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®å…·ä½“ç±»å‹è¿›è¡ŒåŠ¨æ€åˆ†å‘ï¼Œä»è€Œå®Œæˆç±»ä¼¼äºé™æ€å¤šæ€çš„ä»»åŠ¡ã€‚

æ€»ä¹‹ï¼Œå°½ç®¡ trait å¯¹è±¡å’Œæ³›å‹éƒ½å¯ä»¥ç”¨äºå¤šæ€ç¼–ç¨‹ï¼Œä½†å®ƒä»¬å„è‡ªé€‚ç”¨äºä¸åŒçš„åœºæ™¯å’Œä»»åŠ¡ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚æ³›å‹é€‚ç”¨äºåœ¨ç¼–è¯‘æ—¶ç¡®å®šç±»å‹çš„åœºæ™¯ï¼Œè€Œ trait å¯¹è±¡é€‚ç”¨äºåœ¨è¿è¡Œæ—¶ç¡®å®šç±»å‹çš„åœºæ™¯ï¼ŒåŒæ—¶ï¼Œä¸¤è€…ä¹Ÿå¯ä»¥ç»“åˆä½¿ç”¨æ¥å®ç°æ›´åŠ çµæ´»å’Œé«˜æ•ˆçš„ç¼–ç¨‹æ–¹å¼ã€‚

> A:

<T: std::fmt::Display> æ˜¯ä»€ä¹ˆè¯­æ³•? èµ·ä»€ä¹ˆä½œç”¨? å¦‚ä½•ç†è§£? æœ‰å…¶å®ƒè¡¨è¿°å½¢å¼å˜›?

> Q:

<T: std::fmt::Display> æ˜¯ä¸€ä¸ªæ³›å‹å‚æ•°å£°æ˜ï¼Œç”¨äºåœ¨å‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»å‹ Tï¼Œè¯¥ç±»å‹å¿…é¡»å®ç° std::fmt::Display traitã€‚å®ƒçš„ä½œç”¨æ˜¯è®©å‡½æ•°èƒ½å¤Ÿå¤„ç†ä¸åŒç±»å‹çš„å‚æ•°ï¼ŒåŒæ—¶è¦æ±‚è¿™äº›å‚æ•°å¿…é¡»å®ç° Display traitã€‚

è¿™ä¸ªè¯­æ³•å¯ä»¥ç†è§£ä¸ºï¼šâ€œå®šä¹‰ä¸€ä¸ªåä¸º T çš„æ³›å‹ç±»å‹ï¼Œå®ƒå¿…é¡»å®ç° std::fmt::Display traitã€‚â€

å¦å¤–ï¼Œè¿˜æœ‰ä¸€ç§ç­‰æ•ˆçš„è¯­æ³•ï¼Œå¯ä»¥ä½¿ç”¨ where å…³é”®å­—æ¥å£°æ˜æ³›å‹ç±»å‹çš„çº¦æŸæ¡ä»¶ï¼Œä¾‹å¦‚ï¼š

```rust
fn print<T>(value: T)
where
    T: std::fmt::Display,
{
    println!("{}", value);
}
```

è¿™ä¸ªè¯­æ³•çš„æ„æ€å’Œå‰é¢çš„è¯­æ³•æ˜¯ç­‰ä»·çš„ï¼Œå®ƒè¡¨ç¤ºï¼šâ€œå®šä¹‰ä¸€ä¸ªåä¸º T çš„æ³›å‹ç±»å‹ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨å®ƒï¼Œå¹¶è¦æ±‚å®ƒå¿…é¡»å®ç° std::fmt::Display traitã€‚â€

åœ¨ Rust ä¸­ï¼Œè¿™ä¸¤ç§è¯­æ³•æ˜¯ç­‰ä»·çš„ï¼Œé€‰æ‹©å“ªç§è¯­æ³•ä¸»è¦å–å†³äºä¸ªäººçš„ç¼–ç ä¹ æƒ¯å’Œå–œå¥½ã€‚é€šå¸¸æ¥è¯´ï¼Œç¬¬ä¸€ç§è¯­æ³•é€‚ç”¨äºç®€å•çš„æ³›å‹å‡½æ•°ï¼Œè€Œç¬¬äºŒç§è¯­æ³•é€‚ç”¨äºæ›´å¤æ‚çš„æ³›å‹å‡½æ•°ï¼Œå› ä¸ºå®ƒå¯ä»¥å°†ç±»å‹çº¦æŸæ¡ä»¶å•ç‹¬åˆ—å‡ºæ¥ï¼Œä½¿å¾—å‡½æ•°çš„å£°æ˜æ›´åŠ æ¸…æ™°å’Œæ˜“è¯»ã€‚

> A:

æ˜ç™½äº†, ä¸¾ä¾‹è¯´æ˜å¦‚ä½•å…¼å®¹æ²¡æœ‰å®ç° std::fmt::Display trait çš„å¯¹è±¡ä¼ å…¥å, å¦‚ä½•å®‰å…¨å“åº”?

> A:

å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°ä¸­å¤„ç†å¯èƒ½æ²¡æœ‰å®ç° std::fmt::Display trait çš„ç±»å‹ï¼Œä¸€ç§å¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨ Rust æä¾›çš„ Option æˆ– Result ç±»å‹æ¥è¡¨ç¤ºè¿™ç§æƒ…å†µï¼Œå¹¶åœ¨å‡½æ•°ä¸­è¿›è¡Œå¤„ç†ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°† print å‡½æ•°æ”¹ä¸ºè¿”å›ä¸€ä¸ª Result<(), Box<dyn std::error::Error>> ç±»å‹çš„ç»“æœï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å‡½æ•°ä¸­å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼š

```rust

fn print<T: std::fmt::Display>(value: T) -> Result<(), Box<dyn std::error::Error>> {
    println!("{}", value);
    Ok(())
}

```

åœ¨è¿™ä¸ªç‰ˆæœ¬çš„ print å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Result ç±»å‹æ¥è¡¨ç¤ºå‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œå¹¶ä½¿ç”¨ Box<dyn std::error::Error> ç±»å‹æ¥è¡¨ç¤ºå¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚å¦‚æœä¼ å…¥çš„å‚æ•°æ²¡æœ‰å®ç° std::fmt::Display traitï¼Œåˆ™åœ¨æ‰§è¡Œ println! æ—¶ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯ä¼šè¢«æ•è·å¹¶è¿”å›ä¸€ä¸ª Err å€¼ã€‚

è°ƒç”¨æ–¹å¯ä»¥æ ¹æ® Result ç±»å‹çš„è¿”å›å€¼æ¥åˆ¤æ–­å‡½æ•°æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œå¦‚æœè¿”å›äº† Err å€¼ï¼Œåˆ™è¯´æ˜å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ã€‚è°ƒç”¨æ–¹å¯ä»¥é€‰æ‹©å¿½ç•¥è¿™ä¸ªé”™è¯¯ï¼Œæˆ–è€…å°†é”™è¯¯ä¿¡æ¯æ‰“å°å‡ºæ¥ï¼Œä»¥ä¾¿äºè°ƒè¯•å’Œæ’æŸ¥é—®é¢˜ã€‚ä¾‹å¦‚ï¼š

```rust
fn main() -> Result<(), Box<dyn std::error::Error>> {
    let value = 42;
    print(value)?;
    Ok(())
}

```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªæ•´æ•°ç±»å‹çš„å€¼ 42 ä¼ ç»™äº† print å‡½æ•°ï¼Œç”±äºæ•´æ•°ç±»å‹æ²¡æœ‰å®ç° std::fmt::Display traitï¼Œå› æ­¤åœ¨å‡½æ•°ä¸­ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯ä¼šè¢«æ•è·å¹¶è¿”å›ä¸€ä¸ª Err å€¼ã€‚åœ¨ main å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ ? æ“ä½œç¬¦æ¥å¤„ç†è¿™ä¸ªé”™è¯¯ï¼Œè¿™æ ·å¦‚æœ print å‡½æ•°æ‰§è¡Œå¤±è´¥ï¼Œmain å‡½æ•°ä¹Ÿä¼šè¿”å›ä¸€ä¸ª Err å€¼ï¼Œç¨‹åºä¼šæ‰“å°å‡ºé”™è¯¯ä¿¡æ¯ã€‚


> PS:è¿›ä¸€æ­¥çš„, ç»¼åˆä¹‹å‰ä»‹ç»,å¯ä»¥ç”¨ where è¿›è¡Œå¤–éƒ¨å£°æ˜,ç®€åŒ–å‡½æ•°å£°æ˜:

```rust
fn print<T>(value: T) -> Result<(), Box<dyn std::error::Error>>
where
    T: std::fmt::Display,
{
    println!("{}", value);
    Ok(())
}
```


> A:

æˆ‘æ˜¯è¯´ Result<(), Box<dyn std::error::Error>> è¿™é‡Œä¹Ÿå¤ªé•¿äº†, æœ‰å¯¹åº”ç®€æ´å½¢å¼å˜›?

> Q:

åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ type å…³é”®å­—æ¥ç»™æŸç§ç±»å‹èµ·ä¸€ä¸ªåˆ«åï¼Œä»è€Œåœ¨ä»£ç ä¸­ä½¿ç”¨è¿™ä¸ªåˆ«åæ¥ä»£æ›¿åŸå§‹çš„ç±»å‹ã€‚è¿™æ ·å¯ä»¥ä½¿å¾—ä»£ç æ›´åŠ æ˜“è¯»å’Œæ˜“äºç»´æŠ¤ã€‚

å¯¹äº Result<(), Box<dyn std::error::Error>> è¿™æ ·çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ type å…³é”®å­—æ¥ä¸ºå®ƒèµ·ä¸€ä¸ªåˆ«åï¼Œä¾‹å¦‚ï¼š

```rust
type MyResult = Result<(), Box<dyn std::error::Error>>;

```

è¿™ä¸ªä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªåä¸º MyResult çš„åˆ«åï¼Œå®ƒè¡¨ç¤ºçš„ç±»å‹å’Œ Result<(), Box<dyn std::error::Error>> æ˜¯ä¸€æ ·çš„ã€‚æœ‰äº†è¿™ä¸ªåˆ«åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ MyResult æ¥ä»£æ›¿ Result<(), Box<dyn std::error::Error>>ï¼Œä»è€Œä½¿å¾—ä»£ç æ›´åŠ æ˜“è¯»ã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªåˆ«åæ¥å®šä¹‰ print å‡½æ•°çš„è¿”å›ç±»å‹ï¼š

```rust
fn print<T: std::fmt::Display>(value: T) -> MyResult {
    println!("{}", value);
    Ok(())
}

```

è¿™ä¸ªç‰ˆæœ¬çš„ print å‡½æ•°å’Œä¹‹å‰çš„ç‰ˆæœ¬ç›¸æ¯”ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ä½¿ç”¨äº† MyResult è¿™ä¸ªåˆ«åæ¥ä»£æ›¿äº† Result<(), Box<dyn std::error::Error>>ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—å‡½æ•°å£°æ˜æ›´åŠ ç®€æ´æ˜“è¯»ã€‚

è°ƒç”¨è¿™ä¸ªç‰ˆæœ¬çš„ print å‡½æ•°å’Œä¹‹å‰çš„ç‰ˆæœ¬æ˜¯ä¸€æ ·çš„ï¼Œä¾‹å¦‚ï¼š

```rust
fn main() -> MyResult {
    let value = 42;
    print(value)?;
    Ok(())
}

```

## refer.
> å…¶å®å®˜æ–¹çš„æ–‡æ¡£åƒé€, åŸºæœ¬å¯ä»¥å¹³è¶Ÿ 80% çš„æ—¥å¸¸å¼€å‘äº†...

[Generic Types, Traits, and Lifetimes - The Rust Programming Language](https://doc.rust-lang.org/book/ch10-00-generics.html)

- [Generic Data Types - The Rust Programming Language](https://doc.rust-lang.org/book/ch10-01-syntax.html)
- [Traits: Defining Shared Behavior - The Rust Programming Language](https://doc.rust-lang.org/book/ch10-02-traits.html#defining-a-trait)

...è¿™äº›é“¾æ¥å¯¹åº”çš„æ˜¯ Rust å®˜æ–¹æ–‡æ¡£ä¸­çš„ã€ŠRust ç¨‹åºè®¾è®¡è¯­è¨€ã€‹ä¸€ä¹¦ä¸­çš„ç›¸å…³ç« èŠ‚ï¼ŒåŒ…å«äº†é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€çš„åŸºæœ¬æ¦‚å¿µã€ä½¿ç”¨æ–¹æ³•å’Œç¤ºä¾‹ä»£ç ç­‰å†…å®¹ï¼Œéå¸¸é€‚åˆåˆå­¦è€…é˜…è¯»å­¦ä¹ ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å‚è€ƒ Rust å®˜æ–¹æ–‡æ¡£ä¸­çš„å…¶ä»–éƒ¨åˆ†ï¼Œå¦‚ã€ŠRust æ ‡å‡†åº“ API å‚è€ƒã€‹å’Œã€ŠRust é£æ ¼æŒ‡å—ã€‹ç­‰ï¼Œæ¥æ·±å…¥ç†è§£ Rust ä¸­çš„æ³›å‹å’Œ trait ç­‰æ¦‚å¿µã€‚

> Prompt å·¥ç¨‹å¸ˆç‚¼é‡‘å¯†æœ¯è¯¾ç¨‹:

- [ğŸ‘‹ Welcome | Learning Prompt](https://learningprompt.wiki/docs/%F0%9F%91%8B%20Welcome)



```
       _~~|-~_
   () /  â—• -  \ (/
     '_   âµ   _'
     | '-----' |

...act by ferris-actor v0.2.4 (built on 23.0303.201916)
```


]]></content:encoded></item><item><title>rustlings_94.md</title><link>https://rs.101.so//101/rustlings_94</link><pubDate>Thu, 30 Mar 2023 11:59:15 +0800</pubDate><content:encoded><![CDATA[# rustlings:94

## background
> conversions/as_ref_mut.rs

AsRef and AsMut allow for cheap reference-to-reference conversions.

Read more about them at https://doc.rust-lang.org/std/convert/trait.AsRef.html

and https://doc.rust-lang.org/std/convert/trait.AsMut.html, respectively.


## goal
> å¿…è¦ç›®æ ‡

å¿«é€Ÿé€šè¿‡

## trace
> å…·ä½“æ¨è¿›

è¿˜æ˜¯è¦åœ¨ GPT çš„è¾…åŠ©ä¸‹æ è¿‡:

æ ¸å¿ƒé—®é¢˜æ˜¯å®Œæˆå‡½æ•°:

```rust
fn num_sq<T>(arg: &mut T) {
    // TODO: Implement the function body.
    ???
}

// å¯¹åº”çš„æµ‹è¯•

    #[test]
    fn mult_box() {
        let mut num: Box<u32> = Box::new(3);
        num_sq(&mut num);
        assert_eq!(*num, 9);
    }

```

çœ‹èµ·æ¥å°±æ˜¯å¯¹ arg è¿›è¡Œè‡ªä¹˜è€Œå·²

ä½†æ˜¯ç…§çŒ«ç”»è™æ‰å‘ç°:

```rust
fn num_sq<T>(arg: &mut T)
    where T: std::ops::Mul<Output = T> + std::ops::MulAssign + Copy
{
    let square = *arg * *arg;
    *arg *= *arg;
    *arg = square;
}
```

è¿™æ ·è§¦å‘ä¸€ç³»åˆ—é—®é¢˜:
```

error[E0277]: cannot multiply `Box<u32>` by `Box<u32>`
  --> exercises/conversions/as_ref_mut.rs:86:16
   |
86 |         num_sq(&mut num);
   |         ------ ^^^^^^^^ no implementation for `Box<u32> * Box<u32>`
   |         |
   |         required by a bound introduced by this call
   |
   = help: the trait `Mul` is not implemented for `Box<u32>`
note: required by a bound in `num_sq`
  --> exercises/conversions/as_ref_mut.rs:47:14
   |
46 | fn num_sq<T>(arg: &mut T)
   |    ------ required by a bound in this
47 |     where T: std::ops::Mul<Output = T> + std::ops::MulAssign + Copy
   |              ^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `num_sq`

error[E0277]: cannot multiply-assign `Box<u32>` by `Box<u32>`
  --> exercises/conversions/as_ref_mut.rs:86:16
   |
86 |         num_sq(&mut num);
   |         ------ ^^^^^^^^ no implementation for `Box<u32> *= Box<u32>`
   |         |
   |         required by a bound introduced by this call
   |
   = help: the trait `MulAssign` is not implemented for `Box<u32>`
note: required by a bound in `num_sq`
  --> exercises/conversions/as_ref_mut.rs:47:42
   |
46 | fn num_sq<T>(arg: &mut T)
   |    ------ required by a bound in this
47 |     where T: std::ops::Mul<Output = T> + std::ops::MulAssign + Copy
   |                                          ^^^^^^^^^^^^^^^^^^^ required by this bound in `num_sq`

error[E0277]: the trait bound `Box<u32>: Copy` is not satisfied
  --> exercises/conversions/as_ref_mut.rs:86:16
   |
86 |         num_sq(&mut num);
   |         ------ ^^^^^^^^ the trait `Copy` is not implemented for `Box<u32>`
   |         |
   |         required by a bound introduced by this call
   |
note: required by a bound in `num_sq`
  --> exercises/conversions/as_ref_mut.rs:47:64
   |
46 | fn num_sq<T>(arg: &mut T)
   |    ------ required by a bound in this
47 |     where T: std::ops::Mul<Output = T> + std::ops::MulAssign + Copy
   |                                                                ^^^^ required by this bound in `num_sq`

error: aborting due to 3 previous errors

```

å› ä¸º Box<T> ç±»å‹æ²¡æœ‰å®ç° std::ops::Mul å’Œ std::ops::MulAssign traitã€‚ä½ å¯ä»¥ä½¿ç”¨ Deref trait æ¥è§£å¼•ç”¨ Box<T> ç±»å‹çš„å€¼ï¼Œç„¶åå†å¯¹å€¼è¿›è¡Œä¹˜æ³•è¿ç®—å’Œèµ‹å€¼æ“ä½œã€‚

å»ºè®®ä¿®æ”¹åçš„ä»£ç :

```rust
fn num_sq<T>(arg: &mut T)
where
    T: std::ops::Deref<Target = u32> + std::ops::DerefMut,
{
    let square = **arg * **arg;
    **arg = square;
}
```

åœ¨è¿™ä¸ªç‰ˆæœ¬çš„ä»£ç ä¸­ï¼ŒT ç±»å‹å¿…é¡»å®ç° std::ops::Deref å’Œ std::ops::DerefMut traitï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨è§£å¼•ç”¨æ“ä½œç¬¦ * æ¥è·å– Box<T> ç±»å‹å†…éƒ¨çš„å€¼ï¼Œå¹¶è¿›è¡Œä¹˜æ³•è¿ç®—å’Œèµ‹å€¼æ“ä½œäº†ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ˜¾å¼åœ°å®ç° Copy traitï¼Œå› ä¸º u32 ç±»å‹å·²ç»å®ç°äº† Copy traitï¼Œè€Œ T ç±»å‹éœ€è¦å®ç° Deref<Target = u32> traitï¼Œæ‰€ä»¥ä¹Ÿå°±å…·æœ‰äº† Copy trait çš„èƒ½åŠ›ã€‚

è€Œä»¥ä¸Šæç¤ºæ˜¯æ¢äº†3ç§å§¿åŠ¿, æ‰è¯±ä½¿ GPT ç»™å‡ºçš„,
ä¹‹å‰ç»•çš„æ–¹å‘æ›´åŠ æ— è§£...


æ‰€ä»¥, è¿™ä¹Ÿåªèƒ½æ˜¯ä¸€ä¸ªç‰¹æ®Šåœºæ™¯,
å¦‚æœæ˜¯è‡ªå·±å®ç°çš„è¯, ä¸€å®šè¦ä½¿ç”¨å¯¹åº”åˆç†çš„å†…ç½®ç±»å‹, ä¸æŠ˜è…¾.


## refer.
> å…³é”®å‚è€ƒ

[å­¦ä¹  Rust - Rust ç¨‹åºè®¾è®¡è¯­è¨€](https://github.com/rust-lang/rustlings/)


## logging
> ç‰ˆæœ¬è®°è¦

- ..
- 230330 ZQ init.



```
          _~--^~_
      \) /  â—´ â—µ  \ ()
        '_   â–½   _'
        | '--#--' )

...act by ferris-actor v0.2.4 (built on 23.0303.201916)
```

]]></content:encoded></item></channel></rss>