# ÂÖãÊúç "& È©±Âä®ÂºÄÂèë"
ÂéüÊñá: [Getting Past ‚ÄúAmpersand-Driven Development‚Äù in Rust - Blog](https://fiberplane.com/blog/getting-past-ampersand-driven-development-in-rust)

## background

[RR23W10 - ÈîàÂë®Âàä -> Weekly :: China<Rustaceans>](https://weekly.rs.101.so/abt/index.html) ‰∏≠ÂèëÁé∞Â•ΩÊñá,
ËØëÊù•ÁªÜËØª....

## Âø´ËØë
> A little mental model for ownership and borrowing

ÊâÄÊúâÊùÉÂíåÂÄüÁî®ÁöÑÂ∞èÂ∞èÂøÉÊô∫Ê®°Âûã.

ÊàëÊòØÂú®‰∏ÄÊ¨° [Tad Lispy](https://www.youtube.com/watch?v=lsnksAMpUvM)
ÁöÑÊºîËÆ≤‰∏≠Âê¨Âà∞ "& Á¨¶Âè∑È©±Âä®ÂºÄÂèë"ËøôËØçÂÑøÁöÑ,
ÈùûÂ∏∏Á≤æÁ°ÆÁöÑÊçïÊçâÂà∞‰∫ÜÂæàÂ§ö Rust Êñ∞‰∫∫ÂºÄÂèëÊó∂,
‰∏ãÊÑèËØÜÁöÑÈöèÊú∫ÊèíÂÖ• & Á¨¶Âè∑Êù•ÂÆâÊäöÁºñËØëÁöÑË°å‰∏∫.

Ê≠§Êñá, ÊèèËø∞‰∫ÜÊàëÊÉ≥Âêë Rust Êñ∞ÊâãËß£ÈáäÁöÑ‰∏Ä‰∏™ÂøÉÊô∫Ê®°ÂûãÔºå
Ê∂âÂèä &,&mut,ÊâÄÊúâÊùÉ, Rcs Âíå Arcs ‰πãÈó¥ÁöÑÂå∫Âà´;
ÊàëÂ∏åÊúõ‰Ω†ÊàñÊòØÂÖ∂ÂÆÉÊúâÊä±Ë¥üÁöÑ Rustacean ‰ª¨ÂØπÊ≠§ÊÑüËßâÊúâÁî®.

### ÂºïÁî® (&variable)

ËÆ©Êàë‰ª¨‰ªé & Á¨¶Âè∑ÂºÄÂßã,
ÁúüÊòØ‰∏™ÂèØÊÄïÁöÑÁ¨¶Âè∑;
Âú® Rust ‰∏≠ÈöèÂ§ÑÂèØËßÅ --- Â¶ÇÊûú‰Ω†È¶ñÊ¨°Â∞ùËØïÁºñÂÜô‰∏Ä‰∫õ Rust ‰ª£Á†Å,
ÂèØËÉΩ‰∏çÂà∞ 10 ÂàÜÈíü,
Rust ÁºñËØëÂô®Â∞±‰ºöÁÉ¶‰∫∫ÁöÑÊàñÊòØÊúâÁî®ÁöÑÂëäËØâ‰Ω†,
Âú®Âì™ÂÑøÈúÄË¶ÅÊîæÁΩÆ‰∏Ä‰∏™ &;

ÊÉ≥Ë±°‰∏Ä‰∏ã,Êàë‰ª¨Êúâ‰∏™ËÆ°ÁÆóÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÁöÑÁÆÄÂçïÂáΩÊï∞;
Ê≠§ÂáΩÊï∞ÈúÄË¶ÅÊü•ÈòÖÂ≠óÁ¨¶‰∏≤;
‰ΩÜÊòØ, ÈúÄË¶ÅÊâÄÊúâÊùÉËøõË°å‰øÆÊîπÂòõ?‰∏ç;
ÂΩìÈïøÂ∫¶ÂáΩÊï∞ÂÆåÊàêÊó∂,Êàë‰ª¨Â∫îËØ•‰ªéÂÜÖÂ≠ò‰∏≠Âà†Èô§Â≠óÁ¨¶‰∏≤Âòõ? ‰πü‰∏çÈúÄË¶Å;
ËøôÊÑèÂë≥ÁùÄÈïøÂ∫¶ÂáΩÊï∞Âò¶ËØªÂèñËÆøÈóÆÊùÉ,
Âè™ÊòØË¶ÅÂ≠óÁ¨¶‰∏≤ÁöÑ‰∏¥Êó∂ËßÜÂõæËÄå‰∏çÊòØÊ∞∏‰πÖÁâàÊú¨;

ËøôÂ∞±ÊòØ &ÂèòÈáè Á¨¶Âè∑Âú® Rust ‰∏≠ÁöÑÂê´‰πâ;
ÊÉ≥ÊÉ≥‰∏Ä‰∏™Â∞èÂ≠©Â≠êÂ∞ÜÊúÄÂñúÊ¨¢ÁöÑÁé©ÂÖ∑ÂÄüÁªôÂè¶Â§ñ‰∏Ä‰∏™Â≠©Â≠êÊó∂ËØ¥:
"‰Ω†ÂèØ‰ª•Áúã, ‰ΩÜÊòØ, ‰∏çËÉΩÊë∏; ÂΩì‰Ω†ÁúãÂÆåÂêé, ÊàëÊÉ≥Á´ãÂç≥ÊãøÂõûÊù•;"
ËøôÂ∞±ÊòØÂÖ±‰∫´ÂºïÁî®;

![Midjourney](https://framerusercontent.com/images/5LwiCYhw088dpelWzFCkp9MWSo.png)


> ÂõæÁâáÁî± Evan Schwartz ‰ΩøÁî® Midjourney Âàõ‰Ωú


### ÂèØÂèòÂºï (&mut variable)

ÈÇ£‰πà &mut ÂèòÈáèÂèàÊòØÊÄé‰πàÂõû‰∫ãÂÑø?

ËÆ©Êàë‰ª¨ÊÉ≥Ë±°‰∏Ä‰∏ãÂú®ÁªôÂÆöÂ≠óÁ¨¶‰∏≤ÂâçËøΩÂä† "hello" ÁöÑÂáΩÊï∞,
ËÄå‰∏çÊòØÊàë‰ª¨ÁöÑÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÂáΩÊï∞;
Âú®ËøôÁßçÊÉÖÂÜµ‰∏≠,
Êàë‰ª¨Á°¨È™®Â§¥Â∏åÊúõÂáΩÊï∞‰øÆÊîπÁªôËøõÊù•ÁöÑÊï∞ÊçÆ;
ËøôÊó∂,Êàë‰ª¨Â∞±ÈúÄË¶Å &mut ÊàñËØ¥ ÂèØÂèòÂºïÁî®;

ÊÉ≥ÊÉ≥Êàë‰ª¨ÁöÑÂ∞èÂ≠©Â≠êÂÄü‰∏ÄÊú¨Ê∂ÇËâ≤‰π¶ÁªôÊúãÂèã,
ËÆ©‰ªñÂú®‰∏ÄÈ°µ‰∏äËâ≤,ËØ¥:"‰Ω†ÂèØ‰ª•Áúã‰ª•ÂèäÊë∏---‰ΩÜÊòØ,
ÂΩì‰Ω†ÂÆåÊàêÂêé, Êàë‰ªçÁÑ∂ÊÉ≥Ë¶ÅÂõûÊù•";


![Evan Schwartz](https://framerusercontent.com/images/0Y2RBZro7ESbqJzViLGIqfvccY.png)

> ÂõæÁâáÁî± Evan Schwartz ‰ΩøÁî® Midjourney Âàõ‰Ωú


#### ÂèØÂèòÂºïÁî®ÊòØÁã¨Âç†ÁöÑ

ËøôÈáåËß£ÈáäÂÖ≥‰∫é Rust ÂæÆÂ¶ôÂèàÈùûÂ∏∏ËÅ™ÊòéÁöÑËÆæËÆ°ÊúÄÂ•ΩÁöÑÂú∫ÊôØ‰πã‰∏Ä;

Â¶ÇÊûúÊüê‰∫∫(ÊàñÊòØ‰Ω†ÁöÑ‰ª£Á†ÅÁöÑÊüêÈÉ®ÂàÜ)Êúâ‰∏Ä‰∏™ÂØπÊüê‰∏™ÂÄºÁöÑÂèØÂèòË¢≠Áî®,
Rust ÁºñËØëÂô®‰ºöÁ°Æ‰øùÁªùÂØπÊ≤°ÊúâÂÖ∂ÂÆÉ‰∫∫ÂèØ‰ª•ÂÜçÊ¨°ÂºïÁî®;
‰∏∫‰ªÄ‰πà?
Âõ†‰∏∫, Â¶ÇÊûú‰Ω†Ê≠£Âú®Êü•ÁúãÊüê‰∏™‰Ω†ËÆ§‰∏∫‰∏çÂèØÂèòÁöÑÂÄº,
ÂΩìÁÑ∂‰∏ç‰ºöÂú®‰Ω†‰ΩøÁî®ÂÖ∂ËøáÁ®ã‰∏≠ÂèàÂíåÁª¥ÂÖ∂ÂÆÉ‰∫∫ÊÑèÂ§ñÁöÑÂèòÊõ¥Ëøô‰∏™ÂØπË±°
(ÂØπ‰∫éÊàë‰ª¨‰∏äÈù¢ÊèêÂèäÁöÑÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÂáΩÊï∞,
‰Ω†Â∞±Áü•ÈÅìÂ¶ÇÊûúÂÖÅËÆ∏, ÈÇ£ÂæóÂ§ö‰ª§‰∫∫Âõ∞ÊÉë?)

Âè¶Â§ñ‰∏ÄÂ±ÇÂê´‰πâÊòØ,
Â¶ÇÊûú‰ªª‰Ωï‰∫∫ÂØπ‰∏Ä‰∏™ÂÄºÊúâ‰∏Ä‰∏™‰∏çÂèØÂèòË¢≠Áî®,
Êàë‰ª¨Â∞±‰∏çËÉΩÊõ¥ÊîπÂÆÉ, ÂèàÊàñÊòØÁªôÂá∫Âè¶Â§ñ‰∏Ä‰∏™ÂèØÂèòÂºïÁî®;


### ÂÄºÁöÑÊã•Êúâ (variable)

Êé•‰∏ãÊù•,Êàë‰ª¨Â∞ÜËÆ®ËÆ∫ ÂÄºÁöÑÊã•Êúâ;

Rust ÁöÑÂè¶Â§ñ‰∏Ä‰∏™ËÅ™Êòé‰πãÂ§Ñ,
Âú®‰∫éÂ¶Ç‰ΩïÁ°ÆÂÆö‰ΩïÊó∂Â∫îËØ•ÂøòËÆ∞ÊàñÊòØ‰ªéÂÜÖÂ≠ò‰∏≠Âà†Èô§‰∏Ä‰∏™ÂÄº;
ÊØèÂΩìÂáΩÊï∞ÂÆåÊàêÂêé, ÂÖ∂‰∏≠Â£∞ÊòéÁöÑÊâÄÊúâÂÄºÈÉΩÂ∞ÜË¢´Âà†Èô§ÊàñÊòØËá™Âä®Ê∏ÖÈô§;

Â•ΩÂêß, ËøôÂπ∂‰∏çÊòØÁúüÁöÑ;
Â¶ÇÊûúÊàë‰ª¨ÂÜçÊ¨°ËÄÉËôëÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÂáΩÊï∞,
Â∞±Áü•ÈÅì, Êàë‰ª¨Âπ∂‰∏çÂ∏åÊúõÂ≠óÁ¨¶‰∏≤Âú®ÈïøÂ∫¶ÂáΩÊï∞ÂÆåÊàêÊó∂Â∞±Ë¢´ÂÆåÂÖ®ÈÅóÂøò/Âà†Èô§;
ÂíåËøΩÂä† hello ÂáΩÊï∞Áõ∏Âêå;
Âú®Ëøô‰∫õÊÉÖÂÜµ‰∏≠, Âè™‰ºöÊ∏ÖÈô§ÂØπËØ•ÂÄºÁöÑÂºïÁî®,
‰ΩÜÊòØ,‰∏ç‰ºöÂà†Èô§ÂÆûÈôÖÂÄº;

ÈÇ£‰πà, Â∞ÜÊàë‰ª¨Âêë HashMap ‰∏≠ÊèíÂÖ•‰∏Ä‰∫õ‰∏úË•øÊó∂ÂèàÂ¶Ç‰Ωï?
Âú®ËøôÁßçÂú∫ÊôØ‰∏≠,
Êàë‰ª¨Â∏åÊúõÁªôÂÆöÁöÑÂ≠óÁ¨¶‰∏≤ËæìÂÖ•Êàê‰∏∫ HashMap ÁöÑ‰∏ÄÈÉ®ÂàÜ;
Â∏åÊúõËØ•ÂÄºÁé∞Âú®Áî± HashMap Êã•Êúâ;

ÊÉ≥Ë±°‰∏Ä‰∏™Â∞èÂ≠©Ëµ†ÈÄÅ‰ªñ‰ª¨ÁöÑÁé©ÂÖ∑‰πã‰∏ÄÊó∂ËØ¥:
"Áªô, ‰Ω†ÂèØ‰ª•ÊãøÊù•‰Ωú‰ªª‰Ωï‰Ω†ÊÉ≥‰ΩúÁöÑ‰∫ãÂÑø,Êàë‰∏çÈúÄË¶ÅÊãøÂõûÊù•‰∫Ü,
‰∫´ÂèóÂêß!"
(Âç≥‰æøÊòØÊÉ≥Ë±°‰∏≠ÁöÑÂ≠©Â≠ê, ‰πüÈúÄË¶ÅÁõ∏ÂΩìÊàêÁÜüÊàêÂçÉÂèØËÉΩ‰ª§Ê≠§Âú∫ÊôØÂèØ‰ø°Âì™...)


### ÂºïÁî®ËÆ°Êï∞ÊåáÈíà (Rc Âíå Arc)

Êàë‰ª¨Âú® Rust ‰∏≠ËøòÊúâÂè¶Â§ñ‰∏§ÁßçÂÄºÁ±ªÂûãÊòØ Rc Âíå Arc;

ÂØπ‰∫é Rc, ÊÉ≥Ë±°Â≠©Â≠êÁîüÊó•Ê¥æÂØπ‰∏äÁöÑË£ÖÈ•∞ÂìÅ,
‰æãÂ¶ÇÊ∞îÁêÉ;
ÂΩìÊâÄÊúâ‰∫∫ÈÉΩÂèñ‰ø°Âú®ÈÇ£ÈáåÊó∂,
Êàë‰ª¨Â∏åÊúõÊØè‰∏™‰∫∫ÈÉΩÁúãÁùÄ, ‰ΩÜÊòØ‰∏çË¶ÅËß¶Êë∏Ë£ÖÈ•∞ÂìÅ;
Êàë‰ª¨Â∏åÊúõË£ÖÈ•∞ÂìÅ‰∏ÄÁõ¥‰øùÊåÅÂà∞ÊúÄÂêé‰∏Ä‰∏™Â≠©Â≠êÁ¶ªÂºÄÊó∂;
‰ΩÜÊòØ, Âò¶ÊúÄÂêé‰∏Ä‰∏™ÁÜäÂ≠©Â≠êÁ¶ªÂºÄ,
Êàë‰ª¨Â∞±ÂèØ‰ª•Á´ãÂç≥ÂºÄÂßãÊ∏ÖÁêÜË£ÖÈ•∞ÂìÅ;
ËøôÂ∞±ÊòØ‰∏Ä‰∏™ Rc ÊàñÊòØÂºïÁî®ËÆ°Êï∞ÊåáÈíà;

Rc Ë∑üË∏™ÊúâÂ§öÂ∞ë‰∫∫(ÊàñÊòØ‰ª£Á†ÅÁöÑ‰∏ÄÈÉ®ÂàÜ)
Ê≠£Âú®Êü•Áúã, Âπ∂‰øùÊåÅËØ•ÂÄº, Áõ¥Âà∞ÊúÄÂêé‰∏Ä‰∏™ÂºïÁî®Ë¢´Âà†Èô§ÁöÑÈÇ£‰∏ÄÂàª;

Â¶ÇÊûú‰Ω†Ê≠£Âú®‰ΩøÁî®ÂºÇÊ≠•ÊàñÊòØÂ§öÁ∫øÁ®ã‰ª£Á†Å,
‰Ω†Â∞Ü‰ΩøÁî® Arc ÊàñÊòØÂéüÂ≠êÂºïÁî®ËÆ°Êï∞ÊåáÈíà,
‰ΩÜÊòØ, Âíå Rc ÁöÑÊÉ≥Ê≥ïÁõ∏Âêå;

ÊïàÊûú‰πüÊòØ: Â§ßÂÆ∂ÁúãÁúãË£ÖÈ•∞ÂìÅ,
Êôö‰ºö‰∏ÄÁªìÊùüÊàë‰ª¨Â∞±Êî∂ÊãæÂπ≤ÂáÄ;

### ÁªìËÆ∫
‰Ωú‰∏∫ÊúÄÂêéÁöÑÊÄªÁªì,
‰Ω†ÂèØ‰ª•Ê†πÊçÆ‰ª•‰∏ãÈóÆÈ¢ò, Êù•ÂÜ≥Á≠ñÂ∫îËØ•‰ΩøÁî®ÈÇ£ÁßçÁ±ªÂûãÁöÑÂÄº:

![Conclusion](https://framerusercontent.com/images/mH73ms5JxUOiNWhWMA8UKtAX7Y.jpg)


|     |&var\n(‰∏çÂèØÂèòÂºï)|&mut var\n(ÂèØÂèòÂºïÁî®)|var\n(Êã•ÊúâÂÄº)|Rc
\n(ÂºïÁî®ËÆ°Êï∞ÊåáÈíà)|Arc\n(ÂéüÂ≠êÂºïÁî®ËÆ°Êï∞ÊåáÈíà)|
| --- | --- | --- | --- | --- | --- |
|ÂèØËØª?|‚úîÔ∏é|‚úîÔ∏é|‚úîÔ∏é|‚úîÔ∏é|‚úîÔ∏é|
|ÂèØÂÜô?|‚úò|‚úîÔ∏é|‚úîÔ∏é|‰ªÖÂΩìÂåÖË£Ö‰∏∫ Cell/RefCell|O‰ªÖÂΩìÂåÖË£Ö‰∏∫ Mutex/RwLock|
|ÂáΩÊï∞ÁªìÊùüÊó∂‰∏¢ÂºÉ?|‚úò|‚úò|‚úîÔ∏é|‰ªÖÂú® Rc ÊúÄÂêéÁöÑÂÖãÈöÜË¢´‰∏¢ÂºÉÂêé|‰ªÖÂΩì Arc ÁöÑÂÖãÈöÜË¢´‰∏¢ÂºÉÂêé|
|Â§öÁ∫øÁ®ãÂèØÁî®?|‚úò Ê≥®1|‚úò|ÂÄºÂèØ‰ª•Âú®Á∫øÁ®ãÈó¥ÁßªÂä®\n‰ΩÜ‰∏çÂêåÁ∫øÁ®ã‰∏çÂèØÂêåÊó∂ËÆøÈóÆ|   ‚úò  |‚úîÔ∏é|

> Ê≥®1: (Unless it has a
'static lifetime, meaning it will exist as long as all of the threads, or is used in a scoped thread)

Ampersands are one of the scariest or least familiar parts when coming to Rust from a higher-level language like Typescript. But I promise that after some practice, it‚Äôll feel much more intuitive when writing code to know whether a function should take a mutable or immutable reference, or to know whether some other library‚Äôs function will likely want a reference or owned value. Without the need for ampersand-driven development.

For more details, you can also take a look at the Rust language doc sections on 
[References and Borrowing](https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html)

 and 
 [What is Ownership?](https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html)
 ?.

[Evan Schwartz](https://github.com/emschwartz)
is a Principal Rust Engineer at Fiberplane. He is the creator of 

[Autometrics](https://github.com/autometrics-dev/autometrics-rs)

 , a new crate that makes it easy to understand the error rate, latency, and production usage of any function in your code.

## refer.

... TBD



```
          _~`+‚àΩ~_
      \/ /  = ‚ó∂  \ (/
        '_   ùüÇ   _'
        | '-----' /

...act by ferris-actor v0.2.4 (built on 23.0303.201916)
```
